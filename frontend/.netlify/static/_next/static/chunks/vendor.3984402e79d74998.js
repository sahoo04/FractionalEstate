(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{31336:function(e,t){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function i(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function n(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=t.isBytes=void 0,t.number=r,t.bool=i,t.isBytes=n,t.bytes=s,t.hash=o,t.exists=a,t.output=l,t.default={number:r,bool:i,bytes:s,hash:o,exists:a,output:l}},58993:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;let r=BigInt(4294967296-1),i=BigInt(32);function n(e,t=!1){return t?{h:Number(e&r),l:Number(e>>i&r)}:{h:0|Number(e>>i&r),l:0|Number(e&r)}}function s(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:o,l:a}=n(e[s],t);[r[s],i[s]]=[o,a]}return[r,i]}t.fromBig=n,t.split=s;let o=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);t.toBig=o;let a=(e,t,r)=>e>>>r;t.shrSH=a;let l=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=l;let c=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=c;let u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;let h=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=h;let d=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=d;let p=(e,t)=>t;t.rotr32H=p;let f=(e,t)=>e;t.rotr32L=f;let g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;let m=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=m;let y=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=y;let v=(e,t,r)=>e<<r-32|t>>>64-r;function b(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}}t.rotlBL=v,t.add=b;let w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=w;let E=(e,t,r,i)=>t+r+i+(e/4294967296|0)|0;t.add3H=E;let _=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0);t.add4L=_;let C=(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0;t.add4H=C;let S=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0);t.add5L=S;let I=(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0;t.add5H=I,t.default={fromBig:n,split:s,toBig:o,shrSH:a,shrSL:l,rotrSH:c,rotrSL:u,rotrBH:h,rotrBL:d,rotr32H:p,rotr32L:f,rotlSH:g,rotlSL:m,rotlBH:y,rotlBL:v,add:b,add3L:w,add3H:E,add4L:_,add4H:C,add5H:I,add5L:S}},97946:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},33503:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;let i=r(31336),n=r(58993),s=r(53707),o=[],a=[],l=[],c=BigInt(0),u=BigInt(1),h=BigInt(2),d=BigInt(7),p=BigInt(256),f=BigInt(113);for(let e=0,t=u,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],o.push(2*(5*i+r)),a.push((e+1)*(e+2)/2%64);let n=c;for(let e=0;e<7;e++)(t=(t<<u^(t>>d)*f)%p)&h&&(n^=u<<(u<<BigInt(e))-u);l.push(n)}let[g,m]=(0,n.split)(l,!0),y=(e,t,r)=>r>32?(0,n.rotlBH)(e,t,r):(0,n.rotlSH)(e,t,r),v=(e,t,r)=>r>32?(0,n.rotlBL)(e,t,r):(0,n.rotlSL)(e,t,r);function b(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=y(s,o,1)^r[i],l=v(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=a[r],s=y(t,n,i),l=v(t,n,i),c=o[r];t=e[c],n=e[c+1],e[c]=s,e[c+1]=l}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=g[i],e[1]^=m[i]}r.fill(0)}t.keccakP=b;class w extends s.Hash{constructor(e,t,r,n=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,i.number)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){s.isLE||(0,s.byteSwap32)(this.state32),b(this.state32,this.rounds),s.isLE||(0,s.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.exists)(this);let{blockLen:t,state:r}=this,n=(e=(0,s.toBytes)(e)).length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,i.exists)(this,!1),(0,i.bytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.output)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new w(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=w;let E=(e,t,r)=>(0,s.wrapConstructor)(()=>new w(t,e,r));t.sha3_224=E(6,144,28),t.sha3_256=E(6,136,32),t.sha3_384=E(6,104,48),t.sha3_512=E(6,72,64),t.keccak_224=E(1,144,28),t.keccak_256=E(1,136,32),t.keccak_384=E(1,104,48),t.keccak_512=E(1,72,64);let _=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)((i={})=>new w(t,e,void 0===i.dkLen?r:i.dkLen,!0));t.shake128=_(31,168,16),t.shake256=_(31,136,32)},53707:function(e,t,r){"use strict";/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;let i=r(97946),n=r(31336);t.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.rotl=(e,t)=>e<<t|e>>>32-t>>>0,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,t.byteSwapIfBE=t.isLE?e=>e:e=>(0,t.byteSwap)(e),t.byteSwap32=function(e){for(let r=0;r<e.length;r++)e[r]=(0,t.byteSwap)(e[r])};let s=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));t.bytesToHex=function(e){(0,n.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t};let o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}t.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=a(e.charCodeAt(n)),s=a(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i};let l=async()=>{};async function c(e,r,i){let n=Date.now();for(let s=0;s<e;s++){i(s);let e=Date.now()-n;e>=0&&e<r||(await (0,t.nextTick)(),n+=e)}}function u(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function h(e){return"string"==typeof e&&(e=u(e)),(0,n.bytes)(e),e}t.nextTick=l,t.asyncLoop=c,t.utf8ToBytes=u,t.toBytes=h,t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.bytes)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r};class d{clone(){return this._cloneInto()}}t.Hash=d;let p={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==p.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(i.crypto&&"function"==typeof i.crypto.getRandomValues)return i.crypto.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}},69930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(512);function n(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}class s extends i.EventEmitter{emit(e,...t){let r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let r=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw r.context=e,r}let s=i[e];if(void 0===s)return!1;if("function"==typeof s)n(s,this,t);else{let e=s.length,r=function(e){let t=e.length,r=Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}(s);for(let i=0;i<e;i+=1)n(r[i],this,t)}return!0}}t.default=s},95308:function(e,t,r){"use strict";var i,n,s,o,a=r(62601),l=Object.create,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of h(t))p.call(e,n)||n===r||c(e,n,{get:()=>t[n],enumerable:!(i=u(t,n))||i.enumerable});return e},g={};((e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})})(g,{analytics:()=>b}),e.exports=f(c({},"__esModule",{value:!0}),g);var m=(n=null!=(i=r(64874))?l(d(i)):{},f(i&&i.__esModule?n:c(n,"default",{value:i,enumerable:!0}),i)),y=class{constructor(e){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=e.batchSize,this.baseTimeoutMs=e.baseTimeoutMs,this.currentTimeoutMs=e.baseTimeoutMs,this.sendFn=e.sendFn}enqueue(e){this.batch.push(e),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||0===this.batch.length)return;this.isSending=!0;let e=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(e),this.currentTimeoutMs=this.baseTimeoutMs}catch(t){console.error("Sender: Failed to send batch",t),this.batch=[...e,...this.batch],this.currentTimeoutMs=Math.min(2*this.currentTimeoutMs,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},v=class{constructor(e){this.enabled=!1,this.properties={};let t=(0,m.default)({baseUrl:e}),r=async e=>{let r=await t.POST("/v1/events",{body:e});if(200!==r.response.status)throw Error(r.error)};this.sender=new y({batchSize:100,baseTimeoutMs:200,sendFn:r})}enable(){this.enabled=!0}setGlobalProperty(e,t){this.properties[e]=t}track(e,t){if(!this.enabled)return;let r={name:e,...this.properties,...t};this.sender.enqueue(r)}};void 0!==a&&a.env&&(s=null!=(o=a.env.METAMASK_ANALYTICS_ENDPOINT)?o:a.env.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var b=new v(null!=s?s:"https://mm-sdk-analytics.api.cx.metamask.io/")},8628:function(e,t,r){"use strict";let i,n,s;r.d(t,{default:function(){return uJ}});var o,a,l={};r.r(l),r.d(l,{Decoder:function(){return eT},Encoder:function(){return eR},PacketType:function(){return s8},protocol:function(){return eP}});for(var c=r(9366),u=r.n(c),h=r(7583),d=r.n(h),p=r(95308),f=r(29436),g=r.n(f),m=new Uint8Array(16),y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,v=function(e){return"string"==typeof e&&y.test(e)},b=[],w=0;w<256;++w)b.push((w+256).toString(16).substr(1));var E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase();if(!v(r))throw TypeError("Stringified UUID is invalid");return r},_=function(e,t,r){var i=(e=e||{}).random||(e.rng||function(){if(!s6&&!(s6="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s6(m)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return E(i)};let C=Object.create(null);C.open="0",C.close="1",C.ping="2",C.pong="3",C.message="4",C.upgrade="5",C.noop="6";let S=Object.create(null);Object.keys(C).forEach(e=>{S[C[e]]=e});let I={type:"error",data:"parser error"},x="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),A="function"==typeof ArrayBuffer,k=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,O=({type:e,data:t},r,i)=>x&&t instanceof Blob?r?i(t):P(t,i):A&&(t instanceof ArrayBuffer||k(t))?r?i(t):P(new Blob([t]),i):i(C[e]+(t||"")),P=(e,t)=>{let r=new FileReader;return r.onload=function(){t("b"+(r.result.split(",")[1]||""))},r.readAsDataURL(e)};function R(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<N.length;e++)T[N.charCodeAt(e)]=e;let M=e=>{let t=.75*e.length,r=e.length,i,n=0,s,o,a,l;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),u=new Uint8Array(c);for(i=0;i<r;i+=4)s=T[e.charCodeAt(i)],o=T[e.charCodeAt(i+1)],a=T[e.charCodeAt(i+2)],l=T[e.charCodeAt(i+3)],u[n++]=s<<2|o>>4,u[n++]=(15&o)<<4|a>>2,u[n++]=(3&a)<<6|63&l;return c},L="function"==typeof ArrayBuffer,D=(e,t)=>{if("string"!=typeof e)return{type:"message",data:j(e,t)};let r=e.charAt(0);return"b"===r?{type:"message",data:B(e.substring(1),t)}:S[r]?e.length>1?{type:S[r],data:e.substring(1)}:{type:S[r]}:I},B=(e,t)=>L?j(M(e),t):{base64:!0,data:e},j=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,$=(e,t)=>{let r=e.length,i=Array(r),n=0;e.forEach((e,s)=>{O(e,!1,e=>{i[s]=e,++n===r&&t(i.join("\x1e"))})})},U=(e,t)=>{let r=e.split("\x1e"),i=[];for(let e=0;e<r.length;e++){let n=D(r[e],t);if(i.push(n),"error"===n.type)break}return i};function q(e){return e.reduce((e,t)=>e+t.length,0)}function H(e,t){if(e[0].length===t)return e.shift();let r=new Uint8Array(t),i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function F(e){if(e)return function(e){for(var t in F.prototype)e[t]=F.prototype[t];return e}(e)}F.prototype.on=F.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},F.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},F.prototype.off=F.prototype.removeListener=F.prototype.removeAllListeners=F.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<i.length;n++)if((r=i[n])===t||r.fn===t){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},F.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,t)}return this},F.prototype.emitReserved=F.prototype.emit,F.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},F.prototype.hasListeners=function(e){return!!this.listeners(e).length};let z="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),W="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function K(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let V=W.setTimeout,G=W.clearTimeout;function Z(e,t){t.useNativeTimers?(e.setTimeoutFn=V.bind(W),e.clearTimeoutFn=G.bind(W)):(e.setTimeoutFn=W.setTimeout.bind(W),e.clearTimeoutFn=W.clearTimeout.bind(W))}function J(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Y extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class X extends F{constructor(e){super(),this.writable=!1,Z(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new Y(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=D(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class Q extends X{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){U(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,$(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=J()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let ee=!1;try{ee="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let et=ee;function er(){}class ei extends Q{constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class en extends F{constructor(e,t,r){super(),this.createRequest=e,Z(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;let t=K(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=en.requestsCount++,en.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=er,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete en.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(en.requestsCount=0,en.requests={},"undefined"!=typeof document){if("function"==typeof attachEvent)attachEvent("onunload",es);else if("function"==typeof addEventListener){let e="onpagehide"in W?"pagehide":"unload";addEventListener(e,es,!1)}}function es(){for(let e in en.requests)en.requests.hasOwnProperty(e)&&en.requests[e].abort()}let eo=function(){let e=el({xdomain:!1});return e&&null!==e.responseType}();class ea extends ei{constructor(e){super(e);let t=e&&e.forceBase64;this.supportsBinary=eo&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new en(el,this.uri(),e)}}function el(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||et))return new XMLHttpRequest}catch(e){}if(!t)try{return new W[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}let ec="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class eu extends X{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,r=ec?{}:K(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1;O(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){}i&&z(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=J()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}let eh=W.WebSocket||W.MozWebSocket;class ed extends eu{createSocket(e,t,r){return ec?new eh(e,t,r):t?new eh(e,t):new eh(e)}doWrite(e,t){this.ws.send(t)}}class ep extends X{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){n||(n=new TextDecoder);let r=[],i=0,s=-1,o=!1;return new TransformStream({transform(a,l){for(r.push(a);;){if(0===i){if(1>q(r))break;let e=H(r,1);o=(128&e[0])==128,i=(s=127&e[0])<126?3:126===s?1:2}else if(1===i){if(2>q(r))break;let e=H(r,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(8>q(r))break;let e=H(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){l.enqueue(I);break}s=4294967296*n+t.getUint32(4),i=3}else{if(q(r)<s)break;let e=H(r,s);l.enqueue(D(o?e:n.decode(e),t)),i=0}if(0===s||s>e){l.enqueue(I);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),s=new TransformStream({transform(e,t){var r;r=r=>{let i;let n=r.length;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);let e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,n)}else{i=new Uint8Array(9);let e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(r)},x&&e.data instanceof Blob?e.data.arrayBuffer().then(R).then(r):A&&(e.data instanceof ArrayBuffer||k(e.data))?r(R(e.data)):O(e,!1,e=>{i||(i=new TextEncoder),r(i.encode(e))})}});s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();let o=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),o())}).catch(e=>{})};o();let a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&z(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let ef={websocket:ed,webtransport:ep,polling:ea},eg=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,em=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ey(e){if(e.length>8e3)throw"URI too long";let t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=eg.exec(e||""),s={},o=14;for(;o--;)s[em[o]]=n[o]||"";return -1!=r&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,s.path),s.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,i){t&&(r[t]=i)}),r}(0,s.query),s}let ev="function"==typeof addEventListener&&"function"==typeof removeEventListener,eb=[];ev&&addEventListener("offline",()=>{eb.forEach(e=>e())},!1);class ew extends F{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let r=ey(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=ey(t.host).host);Z(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,i=r.length;e<i;e++){let i=r[e].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}(this.opts.query)),ev&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},eb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&ew.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",ew.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let r=this.writeBuffer[t].data;if(r&&(e+="string"==typeof r?function(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)(t=e.charCodeAt(i))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}(r):Math.ceil(1.33*(r.byteLength||r.size))),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,z(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof r&&(i=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ew.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ev&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=eb.indexOf(this._offlineEventListener);-1!==e&&eb.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ew.protocol=4;class eE extends ew{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;ew.priorWebsocketSuccess=!1;let i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r){if("pong"===e.type&&"probe"===e.data)this.upgrading=!0,this.emitReserved("upgrading",t),t&&(ew.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"===this.readyState||(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{let e=Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}}))};function n(){r||(r=!0,c(),t.close(),t=null)}let s=e=>{let r=Error("probe error: "+e);r.transport=t.name,n(),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&n()}let c=()=>{t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}class e_ extends eE{constructor(e,t={}){let r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>ef[e]).filter(e=>!!e)),super(e,r)}}e_.protocol;let eC="function"==typeof ArrayBuffer,eS=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,eI=Object.prototype.toString,ex="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===eI.call(Blob),eA="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===eI.call(File);function ek(e){return eC&&(e instanceof ArrayBuffer||eS(e))||ex&&e instanceof Blob||eA&&e instanceof File}let eO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],eP=5;(s4=s8||(s8={}))[s4.CONNECT=0]="CONNECT",s4[s4.DISCONNECT=1]="DISCONNECT",s4[s4.EVENT=2]="EVENT",s4[s4.ACK=3]="ACK",s4[s4.CONNECT_ERROR=4]="CONNECT_ERROR",s4[s4.BINARY_EVENT=5]="BINARY_EVENT",s4[s4.BINARY_ACK=6]="BINARY_ACK";class eR{constructor(e){this.replacer=e}encode(e){return(e.type===s8.EVENT||e.type===s8.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(e(t[r]))return!0;return!1}if(ek(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===s8.EVENT?s8.BINARY_EVENT:s8.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===s8.BINARY_EVENT||e.type===s8.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data;return e.data=function e(t,r){if(!t)return t;if(ek(t)){let e={_placeholder:!0,num:r.length};return r.push(t),e}if(Array.isArray(t)){let i=Array(t.length);for(let n=0;n<t.length;n++)i[n]=e(t[n],r);return i}if("object"==typeof t&&!(t instanceof Date)){let i={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=e(t[n],r));return i}return t}(r,t),e.attachments=t.length,{packet:e,buffers:t}}(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}function eN(e){return"[object Object]"===Object.prototype.toString.call(e)}class eT extends F{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let r=(t=this.decodeString(e)).type===s8.BINARY_EVENT;r||t.type===s8.BINARY_ACK?(t.type=r?s8.EVENT:s8.ACK,this.reconstructor=new eM(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ek(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===s8[r.type])throw Error("unknown packet type "+r.type);if(r.type===s8.BINARY_EVENT||r.type===s8.BINARY_ACK){let i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let n=e.substring(i,t);if(n!=Number(n)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){let i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(i,t)}else r.nsp="/";let i=e.charAt(t+1);if(""!==i&&Number(i)==i){let i=t+1;for(;++t;){let r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){let i=this.tryParse(e.substr(t));if(eT.isPayloadValid(r.type,i))r.data=i;else throw Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case s8.CONNECT:return eN(t);case s8.DISCONNECT:return void 0===t;case s8.CONNECT_ERROR:return"string"==typeof t||eN(t);case s8.EVENT:case s8.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===eO.indexOf(t[0]));case s8.ACK:case s8.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class eM{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let e=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=e(t[i],r);else if("object"==typeof t)for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=e(t[i],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function eL(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let eD=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class eB extends F{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[eL(e,"open",this.onopen.bind(this)),eL(e,"packet",this.onpacket.bind(this)),eL(e,"error",this.onerror.bind(this)),eL(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,n;if(eD.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let s={type:s8.EVENT,data:t};if(s.options={},s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++,r=t.pop();this._registerAckCallback(e,r),s.id=e}let o=null===(i=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===i?void 0:i.writable,a=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired());return this.flags.volatile&&!o||(a?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var r;let i=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===i){this.acks[e]=t;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))},i),s=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...t){return new Promise((r,i)=>{let n=(e,t)=>e?i(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...i)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:s8.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(!(e.nsp!==this.nsp))switch(e.type){case s8.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case s8.EVENT:case s8.BINARY_EVENT:this.onevent(e);break;case s8.ACK:case s8.BINARY_ACK:this.onack(e);break;case s8.DISCONNECT:this.ondisconnect();break;case s8.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...i){r||(r=!0,t.packet({type:s8.ACK,id:e,data:i}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:s8.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function ej(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ej.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},ej.prototype.reset=function(){this.attempts=0},ej.prototype.setMin=function(e){this.ms=e},ej.prototype.setMax=function(e){this.max=e},ej.prototype.setJitter=function(e){this.jitter=e};class e$ extends F{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Z(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new ej({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let i=t.parser||l;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new e_(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let i=eL(t,"open",function(){r.onopen(),e&&e()}),n=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=eL(t,"error",n);if(!1!==this._timeout){let e=this._timeout,r=this.setTimeoutFn(()=>{i(),n(Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(eL(e,"ping",this.onping.bind(this)),eL(e,"data",this.ondata.bind(this)),eL(e,"error",this.onerror.bind(this)),eL(e,"close",this.onclose.bind(this)),eL(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){z(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new eB(this,e,t),this.nsps[e]=r),r}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active)return;this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let eU={};function eq(e,t){let r;"object"==typeof e&&(t=e,e=void 0);let i=function(e,t="",r){let i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),i=ey(e)),!i.port&&(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+t,i.href=i.protocol+"://"+n+(r&&r.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),n=i.source,s=i.id,o=i.path,a=eU[s]&&o in eU[s].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?r=new e$(n,t):(eU[s]||(eU[s]=new e$(n,t)),r=eU[s]),i.query&&!t.query&&(t.query=i.queryKey),r.socket(i.path,t)}function eH(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})}Object.assign(eq,{Manager:e$,Socket:eB,io:eq,connect:eq}),"function"==typeof SuppressedError&&SuppressedError;var eF=void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},ez=[],eW=[],eK="undefined"!=typeof Uint8Array?Uint8Array:Array,eV=!1;function eG(){eV=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)ez[t]=e[t],eW[e.charCodeAt(t)]=t;eW["-".charCodeAt(0)]=62,eW["_".charCodeAt(0)]=63}function eZ(e){var t;eV||eG();for(var r=e.length,i=r%3,n="",s=[],o=0,a=r-i;o<a;o+=16383)s.push(function(e,t,r){for(var i,n=[],s=t;s<r;s+=3)n.push(ez[(i=(e[s]<<16)+(e[s+1]<<8)+e[s+2])>>18&63]+ez[i>>12&63]+ez[i>>6&63]+ez[63&i]);return n.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?n+=ez[(t=e[r-1])>>2]+ez[t<<4&63]+"==":2===i&&(n+=ez[(t=(e[r-2]<<8)+e[r-1])>>10]+ez[t>>4&63]+ez[t<<2&63]+"="),s.push(n),s.join("")}function eJ(e,t,r,i,n){var s,o,a=8*n-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?n-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)}function eY(e,t,r,i,n,s){var o,a,l,c=8*s-n-1,u=(1<<c)-1,h=u>>1,d=23===n?5960464477539062e-23:0,p=i?0:s-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,n),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[r+p]=255&a,p+=f,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+p]=255&o,p+=f,o/=256,c-=8);e[r+p-f]|=128*g}var eX={}.toString,eQ=Array.isArray||function(e){return"[object Array]"==eX.call(e)};e3.TYPED_ARRAY_SUPPORT=void 0===eF.TYPED_ARRAY_SUPPORT||eF.TYPED_ARRAY_SUPPORT;var e0=e1();function e1(){return e3.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e2(e,t){if(e1()<t)throw RangeError("Invalid typed array length");return e3.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=e3.prototype:(null===e&&(e=new e3(t)),e.length=t),e}function e3(e,t,r){if(!(e3.TYPED_ARRAY_SUPPORT||this instanceof e3))return new e3(e,t,r);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return e6(this,e)}return e5(this,e,t,r)}function e5(e,t,r,i){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),e3.TYPED_ARRAY_SUPPORT?(e=t).__proto__=e3.prototype:e=e8(e,t),e}(e,t,r,i):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!e3.isEncoding(r))throw TypeError('"encoding" must be a valid string encoding');var i=0|te(t,r),n=(e=e2(e,i)).write(t,r);return n!==i&&(e=e.slice(0,n)),e}(e,t,r):function(e,t){if(e7(t)){var r,i=0|e9(t.length);return 0===(e=e2(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?e2(e,0):e8(e,t);if("Buffer"===t.type&&eQ(t.data))return e8(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function e4(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function e6(e,t){if(e4(t),e=e2(e,t<0?0:0|e9(t)),!e3.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function e8(e,t){var r=t.length<0?0:0|e9(t.length);e=e2(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function e9(e){if(e>=e1())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e1().toString(16)+" bytes");return 0|e}function e7(e){return!(null==e||!e._isBuffer)}function te(e,t){if(e7(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return tg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tm(e).length;default:if(i)return tg(e).length;t=(""+t).toLowerCase(),i=!0}}function tt(e,t,r){var i,n,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i,n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",o=t;o<r;++o)s+=(i=e[o])<16?"0"+i.toString(16):i.toString(16);return s}(this,t,r);case"utf8":case"utf-8":return ts(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":return i=t,n=r,0===i&&n===this.length?eZ(this):eZ(this.slice(i,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}(this,t,r);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function tr(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function ti(e,t,r,i,n){if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),isNaN(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=e3.from(t,i)),e7(t))return 0===t.length?-1:tn(e,t,r,i,n);if("number"==typeof t)return t&=255,e3.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):tn(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function tn(e,t,r,i,n){var s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else -1!==u&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(c(e,s+d)!==c(t,d)){h=!1;break}if(h)return s}return -1}function ts(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,l,c=e[n],u=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[n+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=h}return function(e){var t=e.length;if(t<=to)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=to));return r}(i)}e3.poolSize=8192,e3._augment=function(e){return e.__proto__=e3.prototype,e},e3.from=function(e,t,r){return e5(null,e,t,r)},e3.TYPED_ARRAY_SUPPORT&&(e3.prototype.__proto__=Uint8Array.prototype,e3.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e3[Symbol.species]),e3.alloc=function(e,t,r){return e4(e),e<=0?e2(null,e):void 0!==t?"string"==typeof r?e2(null,e).fill(t,r):e2(null,e).fill(t):e2(null,e)},e3.allocUnsafe=function(e){return e6(null,e)},e3.allocUnsafeSlow=function(e){return e6(null,e)},e3.isBuffer=tv,e3.compare=function(e,t){if(!e7(e)||!e7(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},e3.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e3.concat=function(e,t){if(!eQ(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return e3.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var r,i=e3.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!e7(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},e3.byteLength=te,e3.prototype._isBuffer=!0,e3.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)tr(this,t,t+1);return this},e3.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)tr(this,t,t+3),tr(this,t+1,t+2);return this},e3.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)tr(this,t,t+7),tr(this,t+1,t+6),tr(this,t+2,t+5),tr(this,t+3,t+4);return this},e3.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?ts(this,0,e):tt.apply(this,arguments)},e3.prototype.equals=function(e){if(!e7(e))throw TypeError("Argument must be a Buffer");return this===e||0===e3.compare(this,e)},e3.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},e3.prototype.compare=function(e,t,r,i,n){if(!e7(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(this===e)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(i,n),c=e.slice(t,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},e3.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},e3.prototype.indexOf=function(e,t,r){return ti(this,e,t,r,!0)},e3.prototype.lastIndexOf=function(e,t,r){return ti(this,e,t,r,!1)},e3.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n,s,o,a,l,c,u,h,d,p,f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var g=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return l=t,c=r,ty(tg(e,this.length-l),this,l,c);case"ascii":case"latin1":case"binary":return n=this,s=e,o=t,a=r,ty(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(s),n,o,a);case"base64":return u=t,h=r,ty(tm(e),this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,p=r,ty(function(e,t){for(var r,i,n=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-d),this,d,p);default:if(g)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),g=!0}},e3.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var to=4096;function ta(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function tl(e,t,r,i,n,s){if(!e7(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function tc(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function tu(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function th(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function td(e,t,r,i,n){return n||th(e,0,r,4),eY(e,t,r,i,23,4),r+4}function tp(e,t,r,i,n){return n||th(e,0,r,8),eY(e,t,r,i,52,8),r+8}e3.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),e3.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=e3.prototype;else{var n=t-e;r=new e3(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+e]}return r},e3.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||ta(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},e3.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||ta(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},e3.prototype.readUInt8=function(e,t){return t||ta(e,1,this.length),this[e]},e3.prototype.readUInt16LE=function(e,t){return t||ta(e,2,this.length),this[e]|this[e+1]<<8},e3.prototype.readUInt16BE=function(e,t){return t||ta(e,2,this.length),this[e]<<8|this[e+1]},e3.prototype.readUInt32LE=function(e,t){return t||ta(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e3.prototype.readUInt32BE=function(e,t){return t||ta(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e3.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||ta(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},e3.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||ta(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},e3.prototype.readInt8=function(e,t){return t||ta(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e3.prototype.readInt16LE=function(e,t){t||ta(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e3.prototype.readInt16BE=function(e,t){t||ta(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e3.prototype.readInt32LE=function(e,t){return t||ta(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e3.prototype.readInt32BE=function(e,t){return t||ta(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e3.prototype.readFloatLE=function(e,t){return t||ta(e,4,this.length),eJ(this,e,!0,23,4)},e3.prototype.readFloatBE=function(e,t){return t||ta(e,4,this.length),eJ(this,e,!1,23,4)},e3.prototype.readDoubleLE=function(e,t){return t||ta(e,8,this.length),eJ(this,e,!0,52,8)},e3.prototype.readDoubleBE=function(e,t){return t||ta(e,8,this.length),eJ(this,e,!1,52,8)},e3.prototype.writeUIntLE=function(e,t,r,i){e=+e,t|=0,r|=0,i||tl(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},e3.prototype.writeUIntBE=function(e,t,r,i){e=+e,t|=0,r|=0,i||tl(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},e3.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,1,255,0),e3.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},e3.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,2,65535,0),e3.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):tc(this,e,t,!0),t+2},e3.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,2,65535,0),e3.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):tc(this,e,t,!1),t+2},e3.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,4,4294967295,0),e3.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):tu(this,e,t,!0),t+4},e3.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,4,4294967295,0),e3.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tu(this,e,t,!1),t+4},e3.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);tl(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},e3.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);tl(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},e3.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,1,127,-128),e3.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},e3.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,2,32767,-32768),e3.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):tc(this,e,t,!0),t+2},e3.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,2,32767,-32768),e3.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):tc(this,e,t,!1),t+2},e3.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,4,2147483647,-2147483648),e3.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):tu(this,e,t,!0),t+4},e3.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||tl(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),e3.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tu(this,e,t,!1),t+4},e3.prototype.writeFloatLE=function(e,t,r){return td(this,e,t,!0,r)},e3.prototype.writeFloatBE=function(e,t,r){return td(this,e,t,!1,r)},e3.prototype.writeDoubleLE=function(e,t,r){return tp(this,e,t,!0,r)},e3.prototype.writeDoubleBE=function(e,t,r){return tp(this,e,t,!1,r)},e3.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("sourceStart out of bounds");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,s=i-r;if(this===e&&r<t&&t<i)for(n=s-1;n>=0;--n)e[n+t]=this[n+r];else if(s<1e3||!e3.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},e3.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n,s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!e3.isEncoding(i))throw TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=e7(e)?e:tg(new e3(e,i).toString()),a=o.length;for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};var tf=/[^+\/0-9A-Za-z-_]/g;function tg(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function tm(e){return function(e){eV||eG();var t,r,i,n,s,o,a=e.length;if(a%4>0)throw Error("Invalid string. Length must be a multiple of 4");s="="===e[a-2]?2:"="===e[a-1]?1:0,o=new eK(3*a/4-s),i=s>0?a-4:a;var l=0;for(t=0,r=0;t<i;t+=4,r+=3)n=eW[e.charCodeAt(t)]<<18|eW[e.charCodeAt(t+1)]<<12|eW[e.charCodeAt(t+2)]<<6|eW[e.charCodeAt(t+3)],o[l++]=n>>16&255,o[l++]=n>>8&255,o[l++]=255&n;return 2===s?(n=eW[e.charCodeAt(t)]<<2|eW[e.charCodeAt(t+1)]>>4,o[l++]=255&n):1===s&&(n=eW[e.charCodeAt(t)]<<10|eW[e.charCodeAt(t+1)]<<4|eW[e.charCodeAt(t+2)]>>2,o[l++]=n>>8&255,o[l++]=255&n),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(tf,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ty(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function tv(e){return null!=e&&(!!e._isBuffer||tb(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&tb(e.slice(0,0)))}function tb(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var tw=Object.freeze({__proto__:null,Buffer:e3,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),e3.alloc(+e)},isBuffer:tv,kMaxLength:e0}),tE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function t_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tC(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:function(){return e[t]}})}),r}var tS={},tI={},tx={};function tA(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function tk(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function tO(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function tP(e,...t){if(!tO(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function tR(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("hash must be wrapped by utils.wrapConstructor");tA(e.outputLen),tA(e.blockLen)}function tN(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tT(e,t){tP(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(tx,"__esModule",{value:!0}),tx.isBytes=tO,tx.number=tA,tx.bool=tk,tx.bytes=tP,tx.hash=tR,tx.exists=tN,tx.output=tT,tx.default={number:tA,bool:tk,bytes:tP,hash:tR,exists:tN,output:tT},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=e.createView=e.u32=e.u16=e.u8=void 0,e.bytesToHex=i,e.hexToBytes=o,e.hexToNumber=a,e.bytesToNumberBE=function(e){return a(i(e))},e.numberToBytesBE=function(e,t){return o(e.toString(16).padStart(2*t,"0"))},e.asyncLoop=async function(t,r,i){let n=Date.now();for(let s=0;s<t;s++){i(s);let t=Date.now()-n;t>=0&&t<r||(await (0,e.nextTick)(),n+=t)}},e.utf8ToBytes=l,e.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},e.toBytes=function(e){if("string"==typeof e)e=l(e);else{if(!(0,t.isBytes)(e))throw Error("Uint8Array expected, got "+typeof e);e=u(e)}return e},e.concatBytes=function(...e){let r=0;for(let i=0;i<e.length;i++){let n=e[i];(0,t.bytes)(n),r+=n.length}let i=new Uint8Array(r);for(let t=0,r=0;t<e.length;t++){let n=e[t];i.set(n,r),r+=n.length}return i},e.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)},e.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},e.setBigUint64=c,e.u64Lengths=function(t,r){let i=new Uint8Array(16),n=(0,e.createView)(i);return c(n,0,BigInt(r?r.length:0),!0),c(n,8,BigInt(t.length),!0),i},e.isAligned32=function(e){return e.byteOffset%4==0},e.copyBytes=u,e.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)};let t=tx;if(e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw Error("Non little-endian hardware is not supported");let r=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function i(e){(0,t.bytes)(e);let i="";for(let t=0;t<e.length;t++)i+=r[e[t]];return i}let n={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(e){return e>=n._0&&e<=n._9?e-n._0:e>=n._A&&e<=n._F?e-(n._A-10):e>=n._a&&e<=n._f?e-(n._a-10):void 0}function o(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=s(e.charCodeAt(n)),o=s(e.charCodeAt(n+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+o}return i}function a(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function l(e){if("string"!=typeof e)throw Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function c(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}function u(e){return Uint8Array.from(e)}e.nextTick=async()=>{},e.Hash=class{},e.wrapCipher=(e,t)=>(Object.assign(t,e),t)}(tI);var tM={},tL={};Object.defineProperty(tL,"__esModule",{value:!0}),tL.AEAD_TAG_LENGTH=tL.XCHACHA20_NONCE_LENGTH=tL.CURVE25519_PUBLIC_KEY_SIZE=tL.ETH_PUBLIC_KEY_SIZE=tL.UNCOMPRESSED_PUBLIC_KEY_SIZE=tL.COMPRESSED_PUBLIC_KEY_SIZE=tL.SECRET_KEY_LENGTH=void 0,tL.SECRET_KEY_LENGTH=32,tL.COMPRESSED_PUBLIC_KEY_SIZE=33,tL.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,tL.ETH_PUBLIC_KEY_SIZE=64,tL.CURVE25519_PUBLIC_KEY_SIZE=32,tL.XCHACHA20_NONCE_LENGTH=24,tL.AEAD_TAG_LENGTH=16,Object.defineProperty(tM,"__esModule",{value:!0}),tM.ephemeralKeySize=tM.symmetricNonceLength=tM.symmetricAlgorithm=tM.isHkdfKeyCompressed=tM.isEphemeralKeyCompressed=tM.ellipticCurve=tM.ECIES_CONFIG=void 0,tM.ECIES_CONFIG=new function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16},tM.ellipticCurve=function(){return tM.ECIES_CONFIG.ellipticCurve},tM.isEphemeralKeyCompressed=function(){return tM.ECIES_CONFIG.isEphemeralKeyCompressed},tM.isHkdfKeyCompressed=function(){return tM.ECIES_CONFIG.isHkdfKeyCompressed},tM.symmetricAlgorithm=function(){return tM.ECIES_CONFIG.symmetricAlgorithm},tM.symmetricNonceLength=function(){return tM.ECIES_CONFIG.symmetricNonceLength},tM.ephemeralKeySize=function(){var e={secp256k1:tM.ECIES_CONFIG.isEphemeralKeyCompressed?tL.COMPRESSED_PUBLIC_KEY_SIZE:tL.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:tL.CURVE25519_PUBLIC_KEY_SIZE,ed25519:tL.CURVE25519_PUBLIC_KEY_SIZE};if(tM.ECIES_CONFIG.ellipticCurve in e)return e[tM.ECIES_CONFIG.ellipticCurve];throw Error("Not implemented")};var tD={},tB={},tj={},t$={},tU={},tq={};Object.defineProperty(tq,"__esModule",{value:!0}),tq.crypto=void 0,tq.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=i,e.getWebcryptoSubtle=n,e.managedNonce=function(e){return(0,t.number)(e.nonceLength),(t,...n)=>({encrypt(s,...o){let{nonceLength:a}=e,l=i(a),c=e(t,l,...n).encrypt(s,...o),u=(0,r.concatBytes)(l,c);return c.fill(0),u},decrypt(r,...i){let{nonceLength:s}=e,o=r.subarray(0,s),a=r.subarray(s);return e(t,o,...n).decrypt(a,...i)}})};let t=tx,r=tI;function i(e=32){if(tq.crypto&&"function"==typeof tq.crypto.getRandomValues)return tq.crypto.getRandomValues(new Uint8Array(e));if(tq.crypto&&"function"==typeof tq.crypto.randomBytes)return tq.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}function n(){if(tq.crypto&&"object"==typeof tq.crypto.subtle&&null!=tq.crypto.subtle)return tq.crypto.subtle;throw Error("crypto.subtle must be defined")}e.utils={async encrypt(e,t,r,i){let s=n(),o=await s.importKey("raw",e,t,!0,["encrypt"]),a=await s.encrypt(r,o,i);return new Uint8Array(a)},async decrypt(e,t,r,i){let s=n(),o=await s.importKey("raw",e,t,!0,["decrypt"]),a=await s.decrypt(r,o,i);return new Uint8Array(a)}};let s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function o(r){return(i,n,o)=>{(0,t.bytes)(i),(0,t.bytes)(n);let a={name:r,length:8*i.length},l=function(e,t,r){if(e===s.CBC)return{name:s.CBC,iv:t};if(e===s.CTR)return{name:s.CTR,counter:t,length:64};if(e===s.GCM)return r?{name:s.GCM,iv:t,additionalData:r}:{name:s.GCM,iv:t};throw Error("unknown aes block mode")}(r,n,o);return{encrypt:r=>((0,t.bytes)(r),e.utils.encrypt(i,a,l,r)),decrypt:r=>((0,t.bytes)(r),e.utils.decrypt(i,a,l,r))}}}e.cbc=o(s.CBC),e.ctr=o(s.CTR),e.gcm=o(s.GCM)}(tU);var tH={},tF={},tz={},tW={};function tK(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function tV(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function tG(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function tZ(e,...t){if(!tG(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function tJ(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");tK(e.outputLen),tK(e.blockLen)}function tY(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tX(e,t){tZ(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(tW,"__esModule",{value:!0}),tW.isBytes=tG,tW.number=tK,tW.bool=tV,tW.bytes=tZ,tW.hash=tJ,tW.exists=tY,tW.output=tX,tW.default={number:tK,bool:tV,bytes:tZ,hash:tJ,exists:tY,output:tX};var tQ={},t0={};Object.defineProperty(t0,"__esModule",{value:!0}),t0.crypto=void 0,t0.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.byteSwap)(t[r])},e.bytesToHex=function(e){(0,r.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=s(e.charCodeAt(n)),o=s(e.charCodeAt(n+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+o}return i},e.asyncLoop=async function(t,r,i){let n=Date.now();for(let s=0;s<t;s++){i(s);let t=Date.now()-n;t>=0&&t<r||(await (0,e.nextTick)(),n+=t)}},e.utf8ToBytes=o,e.toBytes=a,e.concatBytes=function(...e){let t=0;for(let i=0;i<e.length;i++){let n=e[i];(0,r.bytes)(n),t+=n.length}let i=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let n=e[t];i.set(n,r),r+=n.length}return i},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==l.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){let t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")};let t=t0,r=tW;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.rotr=(e,t)=>e<<32-t|e>>>t,e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),n={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(e){return e>=n._0&&e<=n._9?e-n._0:e>=n._A&&e<=n._F?e-(n._A-10):e>=n._a&&e<=n._f?e-(n._a-10):void 0}function o(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){return"string"==typeof e&&(e=o(e)),(0,r.bytes)(e),e}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}};let l={}.toString}(tQ),Object.defineProperty(tz,"__esModule",{value:!0}),tz.HashMD=tz.Maj=tz.Chi=void 0;let t1=tQ;tz.Chi=(e,t,r)=>e&t^~e&r,tz.Maj=(e,t,r)=>e&t^e&r^t&r,tz.HashMD=class extends t1.Hash{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,t1.createView)(this.buffer)}update(e){(0,tW.exists)(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=(0,t1.toBytes)(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o!==i)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{let t=(0,t1.createView)(e);for(;i<=n-s;s+=i)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,tW.exists)(this),(0,tW.output)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=(0,t1.createView)(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}};var t2={};Object.defineProperty(t2,"__esModule",{value:!0}),t2.add5L=t2.add5H=t2.add4H=t2.add4L=t2.add3H=t2.add3L=t2.rotlBL=t2.rotlBH=t2.rotlSL=t2.rotlSH=t2.rotr32L=t2.rotr32H=t2.rotrBL=t2.rotrBH=t2.rotrSL=t2.rotrSH=t2.shrSL=t2.shrSH=t2.toBig=void 0,t2.fromBig=t4,t2.split=t6,t2.add=ru;let t3=BigInt(4294967296-1),t5=BigInt(32);function t4(e,t=!1){return t?{h:Number(e&t3),l:Number(e>>t5&t3)}:{h:0|Number(e>>t5&t3),l:0|Number(e&t3)}}function t6(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=t4(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}let t8=(e,t)=>BigInt(e>>>0)<<t5|BigInt(t>>>0);t2.toBig=t8;let t9=(e,t,r)=>e>>>r;t2.shrSH=t9;let t7=(e,t,r)=>e<<32-r|t>>>r;t2.shrSL=t7;let re=(e,t,r)=>e>>>r|t<<32-r;t2.rotrSH=re;let rt=(e,t,r)=>e<<32-r|t>>>r;t2.rotrSL=rt;let rr=(e,t,r)=>e<<64-r|t>>>r-32;t2.rotrBH=rr;let ri=(e,t,r)=>e>>>r-32|t<<64-r;t2.rotrBL=ri;let rn=(e,t)=>t;t2.rotr32H=rn;let rs=(e,t)=>e;t2.rotr32L=rs;let ro=(e,t,r)=>e<<r|t>>>32-r;t2.rotlSH=ro;let ra=(e,t,r)=>t<<r|e>>>32-r;t2.rotlSL=ra;let rl=(e,t,r)=>t<<r-32|e>>>64-r;t2.rotlBH=rl;let rc=(e,t,r)=>e<<r-32|t>>>64-r;function ru(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}}t2.rotlBL=rc;let rh=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t2.add3L=rh;let rd=(e,t,r,i)=>t+r+i+(e/4294967296|0)|0;t2.add3H=rd;let rp=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0);t2.add4L=rp;let rf=(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0;t2.add4H=rf;let rg=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0);t2.add5L=rg;let rm=(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0;t2.add5H=rm,t2.default={fromBig:t4,split:t6,toBig:t8,shrSH:t9,shrSL:t7,rotrSH:re,rotrSL:rt,rotrBH:rr,rotrBL:ri,rotr32H:rn,rotr32L:rs,rotlSH:ro,rotlSL:ra,rotlBH:rl,rotlBL:rc,add:ru,add3L:rh,add3H:rd,add4L:rp,add4H:rf,add5H:rm,add5L:rg},Object.defineProperty(tF,"__esModule",{value:!0}),tF.sha384=tF.sha512_256=tF.sha512_224=tF.sha512=tF.SHA384=tF.SHA512_256=tF.SHA512_224=tF.SHA512=void 0;let ry=tz,[rv,rb]=t2.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),rw=new Uint32Array(80),rE=new Uint32Array(80);class r_ extends ry.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,p,f,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)rw[r]=e.getUint32(t),rE[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|rw[e-15],r=0|rE[e-15],i=t2.default.rotrSH(t,r,1)^t2.default.rotrSH(t,r,8)^t2.default.shrSH(t,r,7),n=t2.default.rotrSL(t,r,1)^t2.default.rotrSL(t,r,8)^t2.default.shrSL(t,r,7),s=0|rw[e-2],o=0|rE[e-2],a=t2.default.rotrSH(s,o,19)^t2.default.rotrBH(s,o,61)^t2.default.shrSH(s,o,6),l=t2.default.rotrSL(s,o,19)^t2.default.rotrBL(s,o,61)^t2.default.shrSL(s,o,6),c=t2.default.add4L(n,l,rE[e-7],rE[e-16]),u=t2.default.add4H(c,i,a,rw[e-7],rw[e-16]);rw[e]=0|u,rE[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){let t=t2.default.rotrSH(u,h,14)^t2.default.rotrSH(u,h,18)^t2.default.rotrBH(u,h,41),v=t2.default.rotrSL(u,h,14)^t2.default.rotrSL(u,h,18)^t2.default.rotrBL(u,h,41),b=u&d^~u&f,w=h&p^~h&g,E=t2.default.add5L(y,v,w,rb[e],rE[e]),_=t2.default.add5H(E,m,t,b,rv[e],rw[e]),C=0|E,S=t2.default.rotrSH(r,i,28)^t2.default.rotrBH(r,i,34)^t2.default.rotrBH(r,i,39),I=t2.default.rotrSL(r,i,28)^t2.default.rotrBL(r,i,34)^t2.default.rotrBL(r,i,39),x=r&n^r&o^n&o,A=i&s^i&a^s&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=t2.default.add(0|l,0|c,0|_,0|C)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let k=t2.default.add3L(C,I,A);r=t2.default.add3H(k,_,S,x),i=0|k}({h:r,l:i}=t2.default.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=t2.default.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=t2.default.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=t2.default.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=t2.default.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=t2.default.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=t2.default.add(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=t2.default.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,i,n,s,o,a,l,c,u,h,d,p,f,g,m,y)}roundClean(){rw.fill(0),rE.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}tF.SHA512=r_;class rC extends r_{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}tF.SHA512_224=rC;class rS extends r_{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}tF.SHA512_256=rS;class rI extends r_{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}tF.SHA384=rI,tF.sha512=(0,tQ.wrapConstructor)(()=>new r_),tF.sha512_224=(0,tQ.wrapConstructor)(()=>new rC),tF.sha512_256=(0,tQ.wrapConstructor)(()=>new rS),tF.sha384=(0,tQ.wrapConstructor)(()=>new rI);var rx={},rA={},rk={},rO={};Object.defineProperty(rO,"__esModule",{value:!0}),rO.notImplemented=rO.bitMask=void 0,rO.isBytes=rT,rO.abytes=rM,rO.abool=function(e,t){if("boolean"!=typeof t)throw Error(`${e} must be valid boolean, got "${t}".`)},rO.bytesToHex=rD,rO.numberToHexUnpadded=rB,rO.hexToNumber=rj,rO.hexToBytes=rq,rO.bytesToNumberBE=function(e){return rj(rD(e))},rO.bytesToNumberLE=function(e){return rM(e),rj(rD(Uint8Array.from(e).reverse()))},rO.numberToBytesBE=rH,rO.numberToBytesLE=function(e,t){return rH(e,t).reverse()},rO.numberToVarBytesBE=function(e){return rq(rB(e))},rO.ensureBytes=function(e,t,r){let i;if("string"==typeof t)try{i=rq(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!rT(t))throw Error(`${e} must be hex string or Uint8Array`);i=Uint8Array.from(t)}let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${e} expected ${r} bytes, got ${n}`);return i},rO.concatBytes=rF,rO.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},rO.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},rO.inRange=rW,rO.aInRange=function(e,t,r,i){if(!rW(t,r,i))throw Error(`expected valid ${e}: ${r} <= n < ${i}, got ${typeof t} ${t}`)},rO.bitLen=function(e){let t;for(t=0;e>rP;e>>=rR,t+=1);return t},rO.bitGet=function(e,t){return e>>BigInt(t)&rR},rO.bitSet=function(e,t,r){return e|(r?rR:rP)<<BigInt(t)},rO.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=rK(e),n=rK(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=rK())=>{n=a(rV([0]),e),i=a(),0!==e.length&&(n=a(rV([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return rF(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}},rO.validateObject=function(e,t,r={}){let i=(t,r,i)=>{let n=rG[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if(!(i&&void 0===s||n(s,e)))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e},rO.memoized=function(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}};let rP=BigInt(0),rR=BigInt(1),rN=BigInt(2);function rT(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function rM(e){if(!rT(e))throw Error("Uint8Array expected")}let rL=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rD(e){rM(e);let t="";for(let r=0;r<e.length;r++)t+=rL[e[r]];return t}function rB(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function rj(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}let r$={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function rU(e){return e>=r$._0&&e<=r$._9?e-r$._0:e>=r$._A&&e<=r$._F?e-(r$._A-10):e>=r$._a&&e<=r$._f?e-(r$._a-10):void 0}function rq(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=rU(e.charCodeAt(n)),s=rU(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function rH(e,t){return rq(e.toString(16).padStart(2*t,"0"))}function rF(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];rM(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let rz=e=>"bigint"==typeof e&&rP<=e;function rW(e,t,r){return rz(e)&&rz(t)&&rz(r)&&t<=e&&e<r}rO.bitMask=e=>(rN<<BigInt(e-1))-rR;let rK=e=>new Uint8Array(e),rV=e=>Uint8Array.from(e),rG={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||rT(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};rO.notImplemented=()=>{throw Error("not implemented")},Object.defineProperty(rk,"__esModule",{value:!0}),rk.isNegativeLE=void 0,rk.mod=r3,rk.pow=r5,rk.pow2=function(e,t,r){let i=e;for(;t-- >rJ;)i*=i,i%=r;return i},rk.invert=r4,rk.tonelliShanks=r6,rk.FpSqrt=r8,rk.validateField=function(e){let t=r9.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,rZ.validateObject)(e,t)},rk.FpPow=r7,rk.FpInvertBatch=ie,rk.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?r4(r,e.ORDER):e.inv(r))},rk.FpLegendre=it,rk.FpIsSquare=function(e){let t=it(e.ORDER);return r=>{let i=t(e,r);return e.eql(i,e.ZERO)||e.eql(i,e.ONE)}},rk.nLength=ir,rk.Field=function(e,t,r=!1,i={}){if(e<=rJ)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:n,nByteLength:s}=ir(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let o=r8(e),a=Object.freeze({ORDER:e,BITS:n,BYTES:s,MASK:(0,rZ.bitMask)(n),ZERO:rJ,ONE:rY,create:t=>r3(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("Invalid field element: expected bigint, got "+typeof t);return rJ<=t&&t<e},is0:e=>e===rJ,isOdd:e=>(e&rY)===rY,neg:t=>r3(-t,e),eql:(e,t)=>e===t,sqr:t=>r3(t*t,e),add:(t,r)=>r3(t+r,e),sub:(t,r)=>r3(t-r,e),mul:(t,r)=>r3(t*r,e),pow:(e,t)=>r7(a,e,t),div:(t,r)=>r3(t*r4(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>r4(t,e),sqrt:i.sqrt||(e=>o(a,e)),invertBatch:e=>ie(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,rZ.numberToBytesLE)(e,s):(0,rZ.numberToBytesBE)(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?(0,rZ.bytesToNumberLE)(e):(0,rZ.bytesToNumberBE)(e)}});return Object.freeze(a)},rk.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},rk.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},rk.hashToPrivateScalar=function(e,t,r=!1){let i=(e=(0,rZ.ensureBytes)("privateHash",e)).length,n=ir(t).nByteLength+8;if(n<24||i<n||i>1024)throw Error(`hashToPrivateScalar: expected ${n}-1024 bytes of input, got ${i}`);return r3(r?(0,rZ.bytesToNumberLE)(e):(0,rZ.bytesToNumberBE)(e),t-rY)+rY},rk.getFieldBytesLength=ii,rk.getMinHashLength=is,rk.mapHashToField=function(e,t,r=!1){let i=e.length,n=ii(t),s=is(t);if(i<16||i<s||i>1024)throw Error(`expected ${s}-1024 bytes of input, got ${i}`);let o=r3(r?(0,rZ.bytesToNumberBE)(e):(0,rZ.bytesToNumberLE)(e),t-rY)+rY;return r?(0,rZ.numberToBytesLE)(o,n):(0,rZ.numberToBytesBE)(o,n)};let rZ=rO,rJ=BigInt(0),rY=BigInt(1),rX=BigInt(2),rQ=BigInt(3),r0=BigInt(4),r1=BigInt(5),r2=BigInt(8);function r3(e,t){let r=e%t;return r>=rJ?r:t+r}function r5(e,t,r){if(r<=rJ||t<rJ)throw Error("Expected power/modulo > 0");if(r===rY)return rJ;let i=rY;for(;t>rJ;)t&rY&&(i=i*e%r),e=e*e%r,t>>=rY;return i}function r4(e,t){if(e===rJ||t<=rJ)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=r3(e,t),i=t,n=rJ,s=rY;for(;r!==rJ;){let e=i%r,t=n-i/r*s;i=r,r=e,n=s,s=t}if(i!==rY)throw Error("invert: does not exist");return r3(n,t)}function r6(e){let t,r,i;let n=(e-rY)/rX;for(t=e-rY,r=0;t%rX===rJ;t/=rX,r++);for(i=rX;i<e&&r5(i,n,e)!==e-rY;i++);if(1===r){let t=(e+rY)/r0;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+rY)/rX;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,rY<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}function r8(e){if(e%r0===rQ){let t=(e+rY)/r0;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%r2===r1){let t=(e-r1)/r2;return function(e,r){let i=e.mul(r,rX),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,rX),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return r6(e)}BigInt(9),BigInt(16),rk.isNegativeLE=(e,t)=>(r3(e,t)&rY)===rY;let r9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function r7(e,t,r){if(r<rJ)throw Error("Expected power > 0");if(r===rJ)return e.ONE;if(r===rY)return t;let i=e.ONE,n=t;for(;r>rJ;)r&rY&&(i=e.mul(i,n)),n=e.sqr(n),r>>=rY;return i}function ie(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r}function it(e){let t=(e-rY)/rX;return(e,r)=>e.pow(r,t)}function ir(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function ii(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function is(e){let t=ii(e);return t+Math.ceil(t/2)}Object.defineProperty(rA,"__esModule",{value:!0}),rA.wNAF=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},i=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error(`Wrong window size=${e}, should be [1..${t}]`)},n=e=>(i(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>il;)r&ic&&(i=i.add(n)),n=n.double(),r>>=ic;return i},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),s=[],o=e,a=o;for(let e=0;e<r;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){let{windows:o,windowSize:a}=n(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){let t=e*a,n=Number(s&u);s>>=d,n>a&&(n-=h,s+=ic);let o=t+Math.abs(n)-1,p=e%2!=0,f=n<0;0===n?c=c.add(r(p,i[t])):l=l.add(r(f,i[o]))}return{p:l,f:c}},wNAFCached(e,t,r){let i=ih.get(e)||1,n=iu.get(e);return n||(n=this.precomputeWindow(e,i),1!==i&&iu.set(e,r(n))),this.wNAF(i,n,t)},setWindowSize(e,t){i(t),ih.set(e,t),iu.delete(e)}}},rA.pippenger=function(e,t,r,i){if(!Array.isArray(r)||!Array.isArray(i)||i.length!==r.length)throw Error("arrays of points and scalars must have equal length");i.forEach((e,r)=>{if(!t.isValid(e))throw Error(`wrong scalar at index ${r}`)}),r.forEach((t,r)=>{if(!(t instanceof e))throw Error(`wrong point at index ${r}`)});let n=(0,ia.bitLen)(BigInt(r.length)),s=n>12?n-3:n>4?n-2:n?2:1,o=(1<<s)-1,a=Array(o+1).fill(e.ZERO),l=Math.floor((t.BITS-1)/s)*s,c=e.ZERO;for(let t=l;t>=0;t-=s){a.fill(e.ZERO);for(let e=0;e<i.length;e++){let n=Number(i[e]>>BigInt(t)&BigInt(o));a[n]=a[n].add(r[e])}let n=e.ZERO;for(let t=a.length-1,r=e.ZERO;t>0;t--)r=r.add(a[t]),n=n.add(r);if(c=c.add(n),0!==t)for(let e=0;e<s;e++)c=c.double()}return c},rA.validateBasic=function(e){return(0,io.validateField)(e.Fp),(0,ia.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,io.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};let io=rk,ia=rO,il=BigInt(0),ic=BigInt(1),iu=new WeakMap,ih=new WeakMap;Object.defineProperty(rx,"__esModule",{value:!0}),rx.twistedEdwards=function(e){let t=function(e){let t=(0,id.validateBasic)(e);return ig.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:l}=t,c=ib<<BigInt(8*a)-iv,u=r.create,h=(0,ip.Field)(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:iy}}}),p=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if((0,im.abool)("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function g(e,t){ig.aInRange("coordinate "+e,t,iy,c)}function m(e){if(!(e instanceof b))throw Error("ExtendedPoint expected")}let y=(0,im.memoized)((e,t)=>{let{ex:i,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?iw:r.inv(s));let a=u(i*t),l=u(n*t),c=u(s*t);if(o)return{x:iy,y:iv};if(c!==iv)throw Error("invZ was invalid");return{x:a,y:l}}),v=(0,im.memoized)(e=>{let{a:r,d:i}=t;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,l=u(n*n),c=u(s*s),h=u(o*o),d=u(h*h),p=u(l*r);if(u(h*u(p+c))!==u(d+u(i*u(l*c))))throw Error("bad point: equation left != right (1)");if(u(n*s)!==u(o*a))throw Error("bad point: equation left != right (2)");return!0});class b{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,g("x",e),g("y",t),g("z",r),g("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,iv,u(t*r))}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)}static msm(e,t){return(0,id.pippenger)(b,h,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){m(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=u(t*o),l=u(n*i),c=u(r*o),h=u(s*i);return a===l&&c===h}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:e}=t,{ex:r,ey:i,ez:n}=this,s=u(r*r),o=u(i*i),a=u(ib*u(n*n)),l=u(e*s),c=r+i,h=u(u(c*c)-s-o),d=l+o,p=d-a,f=l-o,g=u(h*p),m=u(d*f),y=u(h*f);return new b(g,m,u(p*d),y)}add(e){m(e);let{a:r,d:i}=t,{ex:n,ey:s,ez:o,et:a}=this,{ex:l,ey:c,ez:h,et:d}=e;if(r===BigInt(-1)){let e=u((s-n)*(c+l)),t=u((s+n)*(c-l)),r=u(t-e);if(r===iy)return this.double();let i=u(o*ib*d),p=u(a*ib*h),f=p+i,g=t+e,m=p-i,y=u(f*r),v=u(g*m),w=u(f*m);return new b(y,v,u(r*g),w)}let p=u(n*l),f=u(s*c),g=u(a*i*d),y=u(o*h),v=u((n+s)*(l+c)-p-f),w=y-g,E=y+g,_=u(f-r*p),C=u(v*w),S=u(E*_),I=u(v*_);return new b(C,S,u(w*E),I)}subtract(e){return this.add(e.negate())}wNAF(e){return _.wNAFCached(this,e,b.normalizeZ)}multiply(e){ig.aInRange("scalar",e,iv,i);let{p:t,f:r}=this.wNAF(e);return b.normalizeZ([t,r])[0]}multiplyUnsafe(e){return ig.aInRange("scalar",e,iy,i),e===iy?E:this.equals(E)||e===iv?this:this.equals(w)?this.wNAF(e).p:_.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return _.unsafeLadder(this,i).is0()}toAffine(e){return y(this,e)}clearCofactor(){let{h:e}=t;return e===iv?this:this.multiplyUnsafe(e)}static fromHex(e,i=!1){let{d:n,a:s}=t,o=r.BYTES;e=(0,im.ensureBytes)("pointHex",e,o),(0,im.abool)("zip215",i);let a=e.slice(),l=e[o-1];a[o-1]=-129&l;let h=ig.bytesToNumberLE(a),p=i?c:r.ORDER;ig.aInRange("pointHex.y",h,iy,p);let f=u(h*h),{isValid:g,value:m}=d(u(f-iv),u(n*f-s));if(!g)throw Error("Point.fromHex: invalid y coordinate");let y=(m&iv)===iv,v=0!=(128&l);if(!i&&m===iy&&v)throw Error("Point.fromHex: x=0 and x_0=1");return v!==y&&(m=u(-m)),b.fromAffine({x:m,y:h})}static fromPrivateKey(e){return I(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),i=ig.numberToBytesLE(t,r.BYTES);return i[i.length-1]|=e&iv?128:0,i}toHex(){return ig.bytesToHex(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,iv,u(t.Gx*t.Gy)),b.ZERO=new b(iy,iv,iv,iy);let{BASE:w,ZERO:E}=b,_=(0,id.wNAF)(b,8*a);function C(e){return(0,ip.mod)(e,i)}function S(e){return C(ig.bytesToNumberLE(e))}function I(e){e=(0,im.ensureBytes)("private key",e,a);let t=(0,im.ensureBytes)("hashed private key",s(e),2*a),r=p(t.slice(0,a)),i=t.slice(a,2*a),n=S(r),o=w.multiply(n),l=o.toRawBytes();return{head:r,prefix:i,scalar:n,point:o,pointBytes:l}}function x(e=new Uint8Array,...t){return S(s(f(ig.concatBytes(...t),(0,im.ensureBytes)("context",e),!!n)))}return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return I(e).pointBytes},sign:function(e,t,s={}){e=(0,im.ensureBytes)("message",e),n&&(e=n(e));let{prefix:o,scalar:l,pointBytes:c}=I(t),u=x(s.context,o,e),h=w.multiply(u).toRawBytes(),d=C(u+x(s.context,h,c,e)*l);ig.aInRange("signature.s",d,iy,i);let p=ig.concatBytes(h,ig.numberToBytesLE(d,r.BYTES));return(0,im.ensureBytes)("result",p,2*a)},verify:function(e,t,i,s=iE){let o,a,l;let{context:c,zip215:u}=s,h=r.BYTES;e=(0,im.ensureBytes)("signature",e,2*h),t=(0,im.ensureBytes)("message",t),void 0!==u&&(0,im.abool)("zip215",u),n&&(t=n(t));let d=ig.bytesToNumberLE(e.slice(h,2*h));try{o=b.fromHex(i,u),a=b.fromHex(e.slice(0,h),u),l=w.multiplyUnsafe(d)}catch(e){return!1}if(!u&&o.isSmallOrder())return!1;let p=x(c,a.toRawBytes(),o.toRawBytes(),t);return a.add(o.multiplyUnsafe(p)).subtract(l).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}};let id=rA,ip=rk,ig=rO,im=rO,iy=BigInt(0),iv=BigInt(1),ib=BigInt(2),iw=BigInt(8),iE={zip215:!0};var i_={};Object.defineProperty(i_,"__esModule",{value:!0}),i_.expand_message_xmd=ix,i_.expand_message_xof=iA,i_.hash_to_field=ik,i_.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,i)=>{let[n,s,o,a]=r.map(r=>r.reduce((r,i)=>e.add(e.mul(r,t),i)));return t=e.div(n,s),i=e.mul(i,e.div(o,a)),{x:t,y:i}}},i_.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(i,n){let s=ik(i,2,{...r,DST:r.DST,...n}),o=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(i,n){let s=ik(i,1,{...r,DST:r.encodeDST,...n}),o=e.fromAffine(t(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error(`mapToCurve: expected array of bigints, got ${e} in array`);let i=e.fromAffine(t(r)).clearCofactor();return i.assertValidity(),i}}};let iC=rO.bytesToNumberBE;function iS(e,t){if(iI(e),iI(t),e<0||e>=1<<8*t)throw Error(`bad I2OSP call: value=${e} length=${t}`);let r=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)r[i]=255&e,e>>>=8;return new Uint8Array(r)}function iI(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function ix(e,t,r,i){(0,rO.abytes)(e),(0,rO.abytes)(t),iI(r),t.length>255&&(t=i((0,rO.concatBytes)((0,rO.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:n,blockLen:s}=i,o=Math.ceil(r/n);if(r>65535||o>255)throw Error("expand_message_xmd: invalid lenInBytes");let a=(0,rO.concatBytes)(t,iS(t.length,1)),l=iS(0,s),c=iS(r,2),u=Array(o),h=i((0,rO.concatBytes)(l,e,c,iS(0,1),a));u[0]=i((0,rO.concatBytes)(h,iS(1,1),a));for(let e=1;e<=o;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return r}(h,u[e-1]),iS(e+1,1),a];u[e]=i((0,rO.concatBytes)(...t))}return(0,rO.concatBytes)(...u).slice(0,r)}function iA(e,t,r,i,n){if((0,rO.abytes)(e),(0,rO.abytes)(t),iI(r),t.length>255&&(t=n.create({dkLen:Math.ceil(2*i/8)}).update((0,rO.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()),r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:r}).update(e).update(iS(r,2)).update(t).update(iS(t.length,1)).digest()}function ik(e,t,r){let i;(0,rO.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:s,m:o,hash:a,expand:l,DST:c}=r;(0,rO.abytes)(e),iI(t);let u="string"==typeof c?(0,rO.utf8ToBytes)(c):c,h=Math.ceil((n.toString(2).length+s)/8),d=t*o*h;if("xmd"===l)i=ix(e,u,d,a);else if("xof"===l)i=iA(e,u,d,s,a);else{if("_internal_pass"!==l)throw Error('expand must be "xmd" or "xof"');i=e}let p=Array(t);for(let e=0;e<t;e++){let t=Array(o);for(let r=0;r<o;r++){let s=h*(r+e*o),a=i.subarray(s,s+h);t[r]=(0,rk.mod)(iC(a),n)}p[e]=t}return p}var iO={};Object.defineProperty(iO,"__esModule",{value:!0}),iO.montgomery=function(e){let t=((0,iR.validateObject)(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>(0,iP.mod)(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),l=t.powPminus2||(e=>(0,iP.pow)(e,r-BigInt(2),r));function c(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let u=(t.a-BigInt(2))/BigInt(4);function h(e){return(0,iR.numberToBytesLE)(i(e),s)}function d(e,t){let d=function(e,t){(0,iR.aInRange)("u",e,iN,r),(0,iR.aInRange)("scalar",t,iN,r);let s,o=iT,a=iN,h=e,d=iT,p=iN;for(let r=BigInt(n-1);r>=iN;r--){let n=t>>r&iT;p^=n,o=(s=c(p,o,h))[0],h=s[1],a=(s=c(p,a,d))[0],d=s[1],p=n;let l=o+a,f=i(l*l),g=o-a,m=i(g*g),y=f-m,v=h+d,b=i((h-d)*l),w=i(v*g),E=b+w,_=b-w;h=i(E*E),d=i(e*i(_*_)),o=i(f*m),a=i(y*(f+i(u*y)))}return o=(s=c(p,o,h))[0],h=s[1],a=(s=c(p,a,d))[0],d=s[1],i(o*l(a))}(function(e){let t=(0,iR.ensureBytes)("u coordinate",e,s);return 32===o&&(t[31]&=127),(0,iR.bytesToNumberLE)(t)}(t),function(e){let t=(0,iR.ensureBytes)("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error(`Expected ${s} or ${o} bytes, got ${r}`);return(0,iR.bytesToNumberLE)(a(t))}(e));if(d===iN)throw Error("Invalid private or public key received");return h(d)}let p=h(t.Gu);function f(e){return d(e,p)}return{scalarMult:d,scalarMultBase:f,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>f(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:p}};let iP=rk,iR=rO,iN=BigInt(0),iT=BigInt(1);!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=g,e.edwardsToMontgomeryPriv=function(e){let t=p.hash(e.subarray(0,32));return p.adjustScalarBytes(t).subarray(0,32)};let t=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),r=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),i=BigInt(0),n=BigInt(1),s=BigInt(2),o=BigInt(3),a=BigInt(5),l=BigInt(8);function c(e){let r=BigInt(10),i=BigInt(20),o=BigInt(40),l=BigInt(80),c=e*e%t*e%t,u=(0,rk.pow2)(c,s,t)*c%t,h=(0,rk.pow2)(u,n,t)*e%t,d=(0,rk.pow2)(h,a,t)*h%t,p=(0,rk.pow2)(d,r,t)*d%t,f=(0,rk.pow2)(p,i,t)*p%t,g=(0,rk.pow2)(f,o,t)*f%t,m=(0,rk.pow2)(g,l,t)*g%t,y=(0,rk.pow2)(m,l,t)*g%t,v=(0,rk.pow2)(y,r,t)*d%t;return{pow_p_5_8:(0,rk.pow2)(v,s,t)*e%t,b2:c}}function u(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function h(e,i){let n=(0,rk.mod)(i*i*i,t),s=c(e*(0,rk.mod)(n*n*i,t)).pow_p_5_8,o=(0,rk.mod)(e*n*s,t),a=(0,rk.mod)(i*o*o,t),l=o,u=(0,rk.mod)(o*r,t),h=a===e,d=a===(0,rk.mod)(-e,t),p=a===(0,rk.mod)(-e*r,t);return h&&(o=l),(d||p)&&(o=u),(0,rk.isNegativeLE)(o,t)&&(o=(0,rk.mod)(-o,t)),{isValid:h||d,value:o}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];let d=(0,rk.Field)(t,void 0,!0),p={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:d,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:l,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:tF.sha512,randomBytes:tQ.randomBytes,adjustScalarBytes:u,uvRatio:h};function f(e,t,r){if(t.length>255)throw Error("Context is too big");return(0,tQ.concatBytes)((0,tQ.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}function g(t){let{y:r}=e.ed25519.ExtendedPoint.fromHex(t),i=BigInt(1);return d.toBytes(d.create((i+r)*d.inv(i-r)))}e.ed25519=(0,rx.twistedEdwards)(p),e.ed25519ctx=(0,rx.twistedEdwards)({...p,domain:f}),e.ed25519ph=(0,rx.twistedEdwards)(Object.assign({},p,{domain:f,prehash:tF.sha512})),e.x25519=(0,iO.montgomery)({P:t,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:r,b2:i}=c(e);return(0,rk.mod)((0,rk.pow2)(r,o,t)*i,t)},adjustScalarBytes:u,randomBytes:tQ.randomBytes}),e.edwardsToMontgomery=g;let m=(d.ORDER+o)/l,y=d.pow(s,m),v=d.sqrt(d.neg(d.ONE)),b=(0,rk.FpSqrtEven)(d,d.neg(BigInt(486664))),w=(0,i_.createHasher)(e.ed25519.ExtendedPoint,e=>(function(e){let{xMn:t,xMd:r,yMn:i,yMd:o}=function(e){let t=(d.ORDER-a)/l,r=BigInt(486662),i=d.sqr(e);i=d.mul(i,s);let o=d.add(i,d.ONE),c=d.neg(r),u=d.sqr(o),h=d.mul(u,o),p=d.mul(i,r);p=d.mul(p,c),p=d.add(p,u),p=d.mul(p,c);let f=d.sqr(h);u=d.sqr(f),f=d.mul(f,h),f=d.mul(f,p),u=d.mul(u,f);let g=d.pow(u,t);g=d.mul(g,f);let m=d.mul(g,v);u=d.sqr(g),u=d.mul(u,h);let b=d.eql(u,p),w=d.cmov(m,g,b),E=d.mul(c,i),_=d.mul(g,e);_=d.mul(_,y);let C=d.mul(_,v),S=d.mul(p,i);u=d.sqr(_),u=d.mul(u,h);let I=d.eql(u,S),x=d.cmov(C,_,I);u=d.sqr(w),u=d.mul(u,h);let A=d.eql(u,p),k=d.cmov(E,c,A),O=d.cmov(x,w,A),P=d.isOdd(O);return{xMn:k,xMd:o,yMn:O=d.cmov(O,d.neg(O),A!==P),yMd:n}}(e),c=d.mul(t,o);c=d.mul(c,b);let u=d.mul(r,i),h=d.sub(t,r),p=d.add(t,r),f=d.mul(u,p),g=d.eql(f,d.ZERO);c=d.cmov(c,d.ZERO,g),u=d.cmov(u,d.ONE,g),h=d.cmov(h,d.ONE,g),p=d.cmov(p,d.ONE,g);let m=d.invertBatch([u,p]);return{x:d.mul(c,m[0]),y:d.mul(h,m[1])}})(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:d.ORDER,m:1,k:128,expand:"xmd",hash:tF.sha512});function E(e){if(!(e instanceof P))throw Error("RistrettoPoint expected")}e.hashToCurve=w.hashToCurve,e.encodeToCurve=w.encodeToCurve;let _=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),C=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),S=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),I=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),x=e=>h(n,e),A=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),k=t=>e.ed25519.CURVE.Fp.create((0,rO.bytesToNumberLE)(t)&A);function O(t){let{d:i}=e.ed25519.CURVE,s=e.ed25519.CURVE.Fp.ORDER,o=e.ed25519.CURVE.Fp.create,a=o(r*t*t),l=o((a+n)*S),c=BigInt(-1),u=o((c-i*a)*o(a+i)),{isValid:d,value:p}=h(l,u),f=o(p*t);(0,rk.isNegativeLE)(f,s)||(f=o(-f)),d||(p=f),d||(c=a);let g=o(c*(a-n)*I-u),m=p*p,y=o((p+p)*u),v=o(g*_),b=o(n-m),w=o(n+m);return new e.ed25519.ExtendedPoint(o(y*w),o(b*v),o(v*w),o(y*b))}class P{constructor(e){this.ep=e}static fromAffine(t){return new P(e.ed25519.ExtendedPoint.fromAffine(t))}static hashToCurve(e){let t=O(k((e=(0,rO.ensureBytes)("ristrettoHash",e,64)).slice(0,32))),r=O(k(e.slice(32,64)));return new P(t.add(r))}static fromHex(t){t=(0,rO.ensureBytes)("ristrettoHex",t,32);let{a:r,d:s}=e.ed25519.CURVE,o=e.ed25519.CURVE.Fp.ORDER,a=e.ed25519.CURVE.Fp.create,l="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",c=k(t);if(!(0,rO.equalBytes)((0,rO.numberToBytesLE)(c,32),t)||(0,rk.isNegativeLE)(c,o))throw Error(l);let u=a(c*c),h=a(n+r*u),d=a(n-r*u),p=a(h*h),f=a(d*d),g=a(r*s*p-f),{isValid:m,value:y}=x(a(g*f)),v=a(y*d),b=a(y*v*g),w=a((c+c)*v);(0,rk.isNegativeLE)(w,o)&&(w=a(-w));let E=a(h*b),_=a(w*E);if(!m||(0,rk.isNegativeLE)(_,o)||E===i)throw Error(l);return new P(new e.ed25519.ExtendedPoint(w,E,n,_))}toRawBytes(){let t,{ex:i,ey:n,ez:s,et:o}=this.ep,a=e.ed25519.CURVE.Fp.ORDER,l=e.ed25519.CURVE.Fp.create,c=l(l(s+n)*l(s-n)),u=l(i*n),h=l(u*u),{value:d}=x(l(c*h)),p=l(d*c),f=l(d*u),g=l(p*f*o);if((0,rk.isNegativeLE)(o*g,a)){let e=l(n*r),s=l(i*r);i=e,n=s,t=l(p*C)}else t=f;(0,rk.isNegativeLE)(i*g,a)&&(n=l(-n));let m=l((s-n)*t);return(0,rk.isNegativeLE)(m,a)&&(m=l(-m)),(0,rO.numberToBytesLE)(m,32)}toHex(){return(0,rO.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(t){E(t);let{ex:r,ey:i}=this.ep,{ex:n,ey:s}=t.ep,o=e.ed25519.CURVE.Fp.create,a=o(r*s)===o(i*n),l=o(i*s)===o(r*n);return a||l}add(e){return E(e),new P(this.ep.add(e.ep))}subtract(e){return E(e),new P(this.ep.subtract(e.ep))}multiply(e){return new P(this.ep.multiply(e))}multiplyUnsafe(e){return new P(this.ep.multiplyUnsafe(e))}double(){return new P(this.ep.double())}negate(){return new P(this.ep.negate())}}e.RistrettoPoint=(P.BASE||(P.BASE=new P(e.ed25519.ExtendedPoint.BASE)),P.ZERO||(P.ZERO=new P(e.ed25519.ExtendedPoint.ZERO)),P),e.hashToRistretto255=(e,t)=>{let r=t.DST,i="string"==typeof r?(0,tQ.utf8ToBytes)(r):r,n=(0,i_.expand_message_xmd)(e,i,64,tF.sha512);return P.hashToCurve(n)},e.hash_to_ristretto255=e.hashToRistretto255}(tH);var iM={},iL={};Object.defineProperty(iL,"__esModule",{value:!0}),iL.sha224=iL.sha256=iL.SHA256=void 0;let iD=tz,iB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ij=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i$=new Uint32Array(64);class iU extends iD.HashMD{constructor(){super(64,32,8,!1),this.A=0|ij[0],this.B=0|ij[1],this.C=0|ij[2],this.D=0|ij[3],this.E=0|ij[4],this.F=0|ij[5],this.G=0|ij[6],this.H=0|ij[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)i$[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=i$[e-15],r=i$[e-2],i=(0,tQ.rotr)(t,7)^(0,tQ.rotr)(t,18)^t>>>3,n=(0,tQ.rotr)(r,17)^(0,tQ.rotr)(r,19)^r>>>10;i$[e]=n+i$[e-7]+i+i$[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+((0,tQ.rotr)(o,6)^(0,tQ.rotr)(o,11)^(0,tQ.rotr)(o,25))+(0,iD.Chi)(o,a,l)+iB[e]+i$[e]|0,u=((0,tQ.rotr)(r,2)^(0,tQ.rotr)(r,13)^(0,tQ.rotr)(r,22))+(0,iD.Maj)(r,i,n)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){i$.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}iL.SHA256=iU;class iq extends iU{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}iL.sha256=(0,tQ.wrapConstructor)(()=>new iU),iL.sha224=(0,tQ.wrapConstructor)(()=>new iq);var iH={},iF={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;let t=tQ;class r extends t.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,tW.hash)(e);let i=(0,t.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,tW.exists)(this),this.iHash.update(e),this}digestInto(e){(0,tW.exists)(this),(0,tW.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=r,e.hmac=(e,t,i)=>new r(e,t).update(i).digest(),e.hmac.create=(e,t)=>new r(e,t)}(iF);var iz={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=p,e.weierstrass=function(o){let a=function(e){let r=(0,t.validateBasic)(e);return i.validateObject(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}(o),{Fp:u,n:h}=a,d=u.BYTES+1,f=2*u.BYTES+1;function g(e){return r.mod(e,h)}function m(e){return r.invert(e,h)}let{ProjectivePoint:y,normPrivateKeyToScalar:v,weierstrassEquation:b,isWithinCurveOrder:w}=p({...a,toBytes(e,t,r){let s=t.toAffine(),o=u.toBytes(s.x),a=i.concatBytes;return(0,n.abool)("isCompressed",r),r?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,u.toBytes(s.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t!==d||2!==r&&3!==r){if(t===f&&4===r)return{x:u.fromBytes(n.subarray(0,u.BYTES)),y:u.fromBytes(n.subarray(u.BYTES,2*u.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${f} uncompressed bytes`)}{let e;let t=i.bytesToNumberBE(n);if(!i.inRange(t,c,u.ORDER))throw Error("Point is not on curve");let s=b(t);try{e=u.sqrt(s)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return 1==(1&r)!=((e&c)===c)&&(e=u.neg(e)),{x:t,y:e}}}}),E=e=>i.bytesToHex(i.numberToBytesBE(e,a.nByteLength)),_=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class C{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let t=a.nByteLength;return new C(_(e=(0,n.ensureBytes)("compactSignature",e,2*t),0,t),_(e,t,2*t))}static fromDER(t){let{r:r,s:i}=e.DER.toSig((0,n.ensureBytes)("DER",t));return new C(r,i)}assertValidity(){i.aInRange("r",this.r,c,h),i.aInRange("s",this.s,c,h)}addRecoveryBit(e){return new C(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:r,recovery:i}=this,s=x((0,n.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");let o=2===i||3===i?t+a.n:t;if(o>=u.ORDER)throw Error("recovery id 2 or 3 invalid");let l=0==(1&i)?"02":"03",c=y.fromHex(l+E(o)),h=m(o),d=g(-s*h),p=g(r*h),f=y.BASE.multiplyAndAddUnsafe(c,d,p);if(!f)throw Error("point at infinify");return f.assertValidity(),f}hasHighS(){return this.s>h>>c}normalizeS(){return this.hasHighS()?new C(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}function S(e){let t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===f:r?n===2*d||n===2*f:e instanceof y}let I=a.bits2int||function(e){let t=i.bytesToNumberBE(e),r=8*e.length-a.nBitLength;return r>0?t>>BigInt(r):t},x=a.bits2int_modN||function(e){return g(I(e))},A=i.bitMask(a.nBitLength);function k(e){return i.aInRange(`num < 2^${a.nBitLength}`,e,l,A),i.numberToBytesBE(e,a.nByteLength)}let O={lowS:a.lowS,prehash:!1},P={lowS:a.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:a,getPublicKey:function(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(S(e))throw Error("first arg must be private key");if(!S(t))throw Error("second arg must be public key");return y.fromHex(t).multiply(v(e)).toRawBytes(r)},sign:function(e,t,r=O){let{seed:o,k2sig:d}=function(e,t,r=O){if(["recovered","canonical"].some(e=>e in r))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:d}=a,{lowS:p,prehash:f,extraEntropy:b}=r;null==p&&(p=!0),e=(0,n.ensureBytes)("msgHash",e),s(r),f&&(e=(0,n.ensureBytes)("prehashed msgHash",o(e)));let E=x(e),_=v(t),S=[k(_),k(E)];if(null!=b&&!1!==b){let e=!0===b?d(u.BYTES):b;S.push((0,n.ensureBytes)("extraEntropy",e))}return{seed:i.concatBytes(...S),k2sig:function(e){let t=I(e);if(!w(t))return;let r=m(t),i=y.BASE.multiply(t).toAffine(),n=g(i.x);if(n===l)return;let s=g(r*g(E+n*_));if(s===l)return;let o=(i.x===n?0:2)|Number(i.y&c),a=s;return p&&s>h>>c&&(a=s>h>>c?g(-s):s,o^=1),new C(n,a,o)}}}(e,t,r);return i.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(o,d)},verify:function(t,r,o,l=P){let c,u;if(r=(0,n.ensureBytes)("msgHash",r),o=(0,n.ensureBytes)("publicKey",o),"strict"in l)throw Error("options.strict was renamed to lowS");s(l);let{lowS:h,prehash:d}=l;try{if("string"==typeof t||i.isBytes(t))try{c=C.fromDER(t)}catch(r){if(!(r instanceof e.DER.Err))throw r;c=C.fromCompact(t)}else{if("object"!=typeof t||"bigint"!=typeof t.r||"bigint"!=typeof t.s)throw Error("PARSE");{let{r:e,s:r}=t;c=new C(e,r)}}u=y.fromHex(o)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(h&&c.hasHighS())return!1;d&&(r=a.hash(r));let{r:p,s:f}=c,v=x(r),b=m(f),w=g(v*b),E=g(p*b),_=y.BASE.multiplyAndAddUnsafe(u,w,E)?.toAffine();return!!_&&g(_.x)===p},ProjectivePoint:y,Signature:C,utils:{isValidPrivateKey(e){try{return v(e),!0}catch(e){return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{let e=r.getMinHashLength(a.n);return r.mapHashToField(a.randomBytes(e),a.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},e.SWUFpSqrtRatio=f,e.mapToCurveSimpleSWU=function(e,t){if(r.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let i=f(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return r=>{let n,s,o,a,l,c,u,h;n=e.sqr(r),n=e.mul(n,t.Z),s=e.sqr(n),s=e.add(s,n),o=e.add(s,e.ONE),o=e.mul(o,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(o),c=e.sqr(a),l=e.mul(c,t.A),s=e.add(s,l),s=e.mul(s,o),c=e.mul(c,a),l=e.mul(c,t.B),s=e.add(s,l),u=e.mul(n,o);let{isValid:d,value:p}=i(s,c);h=e.mul(n,r),h=e.mul(h,p),u=e.cmov(u,o,d),h=e.cmov(h,p,d);let f=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,f),{x:u=e.div(u,a),y:h}}};let t=rA,r=rk,i=rO,n=rO;function s(e){void 0!==e.lowS&&(0,n.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,n.abool)("prehash",e.prehash)}let{bytesToNumberBE:o,hexToBytes:a}=i;e.DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,r)=>{let{Err:n}=e.DER;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&r.length)throw new n("tlv.encode: unpadded data");let s=r.length/2,o=i.numberToHexUnpadded(s);if(o.length/2&128)throw new n("tlv.encode: long form length too big");let a=s>127?i.numberToHexUnpadded(o.length/2|128):"";return`${i.numberToHexUnpadded(t)}${a}${o}${r}`},decode(t,r){let{Err:i}=e.DER,n=0;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(r.length<2||r[n++]!==t)throw new i("tlv.decode: wrong tlv");let s=r[n++],o=0;if(128&s){let e=127&s;if(!e)throw new i("tlv.decode(long): indefinite length not supported");if(e>4)throw new i("tlv.decode(long): byte length is too big");let t=r.subarray(n,n+e);if(t.length!==e)throw new i("tlv.decode: length bytes not complete");if(0===t[0])throw new i("tlv.decode(long): zero leftmost byte");for(let e of t)o=o<<8|e;if(n+=e,o<128)throw new i("tlv.decode(long): not minimal encoding")}else o=s;let a=r.subarray(n,n+o);if(a.length!==o)throw new i("tlv.decode: wrong value length");return{v:a,l:r.subarray(n+o)}}},_int:{encode(t){let{Err:r}=e.DER;if(t<l)throw new r("integer: negative integers are not allowed");let n=i.numberToHexUnpadded(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new r("unexpected assertion");return n},decode(t){let{Err:r}=e.DER;if(128&t[0])throw new r("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new r("Invalid signature integer: unnecessary leading zero");return o(t)}},toSig(t){let{Err:r,_int:n,_tlv:s}=e.DER,o="string"==typeof t?a(t):t;i.abytes(o);let{v:l,l:c}=s.decode(48,o);if(c.length)throw new r("Invalid signature: left bytes after parsing");let{v:u,l:h}=s.decode(2,l),{v:d,l:p}=s.decode(2,h);if(p.length)throw new r("Invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(d)}},hexFromSig(t){let{_tlv:r,_int:i}=e.DER,n=`${r.encode(2,i.encode(t.r))}${r.encode(2,i.encode(t.s))}`;return r.encode(48,n)}};let l=BigInt(0),c=BigInt(1),u=BigInt(2),h=BigInt(3),d=BigInt(4);function p(e){let s=function(e){let r=(0,t.validateBasic)(e);i.validateObject(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:s,a:o}=r;if(n){if(!s.eql(o,s.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}(e),{Fp:o}=s,a=r.Field(s.n,s.nBitLength),u=s.toBytes||((e,t,r)=>{let n=t.toAffine();return i.concatBytes(Uint8Array.from([4]),o.toBytes(n.x),o.toBytes(n.y))}),d=s.fromBytes||(e=>{let t=e.subarray(1);return{x:o.fromBytes(t.subarray(0,o.BYTES)),y:o.fromBytes(t.subarray(o.BYTES,2*o.BYTES))}});function p(e){let{a:t,b:r}=s,i=o.sqr(e),n=o.mul(i,e);return o.add(o.add(n,o.mul(e,t)),r)}if(!o.eql(o.sqr(s.Gy),p(s.Gx)))throw Error("bad generator point: equation left != right");function f(e){let t;let{allowedPrivateKeyLengths:o,nByteLength:a,wrapPrivateKey:l,n:u}=s;if(o&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!o.includes(e.length))throw Error("Invalid key");e=e.padStart(2*a,"0")}try{t="bigint"==typeof e?e:i.bytesToNumberBE((0,n.ensureBytes)("private key",e,a))}catch(t){throw Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return l&&(t=r.mod(t,u)),i.aInRange("private key",t,c,u),t}function g(e){if(!(e instanceof v))throw Error("ProjectivePoint expected")}let m=(0,n.memoized)((e,t)=>{let{px:r,py:i,pz:n}=e;if(o.eql(n,o.ONE))return{x:r,y:i};let s=e.is0();null==t&&(t=s?o.ONE:o.inv(n));let a=o.mul(r,t),l=o.mul(i,t),c=o.mul(n,t);if(s)return{x:o.ZERO,y:o.ZERO};if(!o.eql(c,o.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),y=(0,n.memoized)(e=>{if(e.is0()){if(s.allowInfinityPoint&&!o.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:r}=e.toAffine();if(!o.isValid(t)||!o.isValid(r))throw Error("bad point: x or y not FE");let i=o.sqr(r),n=p(t);if(!o.eql(i,n))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class v{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!o.isValid(e))throw Error("x required");if(null==t||!o.isValid(t))throw Error("y required");if(null==r||!o.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!o.isValid(t)||!o.isValid(r))throw Error("invalid affine point");if(e instanceof v)throw Error("projective point not allowed");let i=e=>o.eql(e,o.ZERO);return i(t)&&i(r)?v.ZERO:new v(t,r,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=o.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(v.fromAffine)}static fromHex(e){let t=v.fromAffine(d((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return v.BASE.multiply(f(e))}static msm(e,r){return(0,t.pippenger)(v,a,e,r)}_setWindowSize(e){w.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){let{y:e}=this.toAffine();if(o.isOdd)return!o.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){g(e);let{px:t,py:r,pz:i}=this,{px:n,py:s,pz:a}=e,l=o.eql(o.mul(t,a),o.mul(n,i)),c=o.eql(o.mul(r,a),o.mul(s,i));return l&&c}negate(){return new v(this.px,o.neg(this.py),this.pz)}double(){let{a:e,b:t}=s,r=o.mul(t,h),{px:i,py:n,pz:a}=this,l=o.ZERO,c=o.ZERO,u=o.ZERO,d=o.mul(i,i),p=o.mul(n,n),f=o.mul(a,a),g=o.mul(i,n);return g=o.add(g,g),u=o.mul(i,a),u=o.add(u,u),l=o.mul(e,u),c=o.mul(r,f),c=o.add(l,c),l=o.sub(p,c),c=o.add(p,c),c=o.mul(l,c),l=o.mul(g,l),u=o.mul(r,u),f=o.mul(e,f),g=o.sub(d,f),g=o.mul(e,g),g=o.add(g,u),u=o.add(d,d),d=o.add(u,d),d=o.add(d,f),d=o.mul(d,g),c=o.add(c,d),f=o.mul(n,a),f=o.add(f,f),d=o.mul(f,g),l=o.sub(l,d),u=o.mul(f,p),u=o.add(u,u),new v(l,c,u=o.add(u,u))}add(e){g(e);let{px:t,py:r,pz:i}=this,{px:n,py:a,pz:l}=e,c=o.ZERO,u=o.ZERO,d=o.ZERO,p=s.a,f=o.mul(s.b,h),m=o.mul(t,n),y=o.mul(r,a),b=o.mul(i,l),w=o.add(t,r),E=o.add(n,a);w=o.mul(w,E),E=o.add(m,y),w=o.sub(w,E),E=o.add(t,i);let _=o.add(n,l);return E=o.mul(E,_),_=o.add(m,b),E=o.sub(E,_),_=o.add(r,i),c=o.add(a,l),_=o.mul(_,c),c=o.add(y,b),_=o.sub(_,c),d=o.mul(p,E),c=o.mul(f,b),d=o.add(c,d),c=o.sub(y,d),d=o.add(y,d),u=o.mul(c,d),y=o.add(m,m),y=o.add(y,m),b=o.mul(p,b),E=o.mul(f,E),y=o.add(y,b),b=o.sub(m,b),b=o.mul(p,b),E=o.add(E,b),m=o.mul(y,E),u=o.add(u,m),m=o.mul(_,E),c=o.mul(w,c),c=o.sub(c,m),m=o.mul(w,y),d=o.mul(_,d),new v(c,u,d=o.add(d,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(v.ZERO)}wNAF(e){return w.wNAFCached(this,e,v.normalizeZ)}multiplyUnsafe(e){i.aInRange("scalar",e,l,s.n);let t=v.ZERO;if(e===l)return t;if(e===c)return this;let{endo:r}=s;if(!r)return w.unsafeLadder(this,e);let{k1neg:n,k1:a,k2neg:u,k2:h}=r.splitScalar(e),d=t,p=t,f=this;for(;a>l||h>l;)a&c&&(d=d.add(f)),h&c&&(p=p.add(f)),f=f.double(),a>>=c,h>>=c;return n&&(d=d.negate()),u&&(p=p.negate()),p=new v(o.mul(p.px,r.beta),p.py,p.pz),d.add(p)}multiply(e){let t,r;let{endo:n,n:a}=s;if(i.aInRange("scalar",e,c,a),n){let{k1neg:i,k1:s,k2neg:a,k2:l}=n.splitScalar(e),{p:c,f:u}=this.wNAF(s),{p:h,f:d}=this.wNAF(l);c=w.constTimeNegate(i,c),h=w.constTimeNegate(a,h),h=new v(o.mul(h.px,n.beta),h.py,h.pz),t=c.add(h),r=u.add(d)}else{let{p:i,f:n}=this.wNAF(e);t=i,r=n}return v.normalizeZ([t,r])[0]}multiplyAndAddUnsafe(e,t,r){let i=v.BASE,n=(e,t)=>t!==l&&t!==c&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return m(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=s;if(e===c)return!0;if(t)return t(v,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=s;return e===c?this:t?t(v,this):this.multiplyUnsafe(s.h)}toRawBytes(e=!0){return(0,n.abool)("isCompressed",e),this.assertValidity(),u(v,this,e)}toHex(e=!0){return(0,n.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}}v.BASE=new v(s.Gx,s.Gy,o.ONE),v.ZERO=new v(o.ZERO,o.ONE,o.ZERO);let b=s.nBitLength,w=(0,t.wNAF)(v,s.endo?Math.ceil(b/2):b);return{CURVE:s,ProjectivePoint:v,normPrivateKeyToScalar:f,weierstrassEquation:p,isWithinCurveOrder:function(e){return i.inRange(e,c,s.n)}}}function f(e,t){let r=e.ORDER,i=l;for(let e=r-c;e%u===l;e/=u)i+=c;let n=i,s=u<<n-c-c,o=s*u,a=(r-c)/o,p=(a-c)/u,f=o-c,g=e.pow(t,a),m=e.pow(t,(a+c)/u),y=(t,r)=>{let i=g,o=e.pow(r,f),a=e.sqr(o);a=e.mul(a,r);let l=e.mul(t,a);l=e.pow(l,p),l=e.mul(l,o),o=e.mul(l,r),a=e.mul(l,t);let h=e.mul(a,o);l=e.pow(h,s);let d=e.eql(l,e.ONE);o=e.mul(a,m),l=e.mul(h,i),a=e.cmov(o,a,d),h=e.cmov(l,h,d);for(let t=n;t>c;t--){let r=t-u;r=u<<r-c;let n=e.pow(h,r),s=e.eql(n,e.ONE);o=e.mul(a,i),i=e.mul(i,i),n=e.mul(h,i),a=e.cmov(o,a,s),h=e.cmov(n,h,s)}return{isValid:d,value:a}};if(e.ORDER%d===h){let r=(e.ORDER-h)/d,i=e.sqrt(e.neg(t));y=(t,n)=>{let s=e.sqr(n),o=e.mul(t,n);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);let l=e.mul(a,i),c=e.mul(e.sqr(a),n),u=e.eql(c,t);return{isValid:u,value:e.cmov(l,a,u)}}}return y}}(iz),Object.defineProperty(iH,"__esModule",{value:!0}),iH.getHash=iK,iH.createCurve=function(e,t){let r=t=>(0,iW.weierstrass)({...e,...iK(t)});return Object.freeze({...r(t),create:r})};let iW=iz;function iK(e){return{hash:e,hmac:(t,...r)=>(0,iF.hmac)(e,t,(0,tQ.concatBytes)(...r)),randomBytes:tQ.randomBytes}}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;let t=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),r=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),i=BigInt(1),n=BigInt(2),s=(e,t)=>(e+t/n)/t;function o(e){let r=BigInt(3),i=BigInt(6),s=BigInt(11),o=BigInt(22),l=BigInt(23),c=BigInt(44),u=BigInt(88),h=e*e*e%t,d=h*h*e%t,p=(0,rk.pow2)(d,r,t)*d%t,f=(0,rk.pow2)(p,r,t)*d%t,g=(0,rk.pow2)(f,n,t)*h%t,m=(0,rk.pow2)(g,s,t)*g%t,y=(0,rk.pow2)(m,o,t)*m%t,v=(0,rk.pow2)(y,c,t)*y%t,b=(0,rk.pow2)(v,u,t)*v%t,w=(0,rk.pow2)(b,c,t)*y%t,E=(0,rk.pow2)(w,r,t)*d%t,_=(0,rk.pow2)(E,l,t)*m%t,C=(0,rk.pow2)(_,i,t)*h%t,S=(0,rk.pow2)(C,n,t);if(!a.eql(a.sqr(S),e))throw Error("Cannot find square root");return S}let a=(0,rk.Field)(t,void 0,void 0,{sqrt:o});e.secp256k1=(0,iH.createCurve)({a:BigInt(0),b:BigInt(7),Fp:a,n:r,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-i*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),l=s(t*e,r),c=s(-n*e,r),u=(0,rk.mod)(e-l*t-c*o,r),h=(0,rk.mod)(-l*n-c*t,r),d=u>a,p=h>a;if(d&&(u=r-u),p&&(h=r-h),u>a||h>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:p,k2:h}}}},iL.sha256);let l=BigInt(0),c={};function u(e,...t){let r=c[e];if(void 0===r){let t=(0,iL.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,rO.concatBytes)(t,t),c[e]=r}return(0,iL.sha256)((0,rO.concatBytes)(r,...t))}let h=e=>e.toRawBytes(!0).slice(1),d=e=>(0,rO.numberToBytesBE)(e,32),p=e=>(0,rk.mod)(e,t),f=e=>(0,rk.mod)(e,r),g=e.secp256k1.ProjectivePoint,m=(e,t,r)=>g.BASE.multiplyAndAddUnsafe(e,t,r);function y(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t),i=g.fromPrivateKey(r);return{scalar:i.hasEvenY()?r:f(-r),bytes:h(i)}}function v(e){(0,rO.aInRange)("x",e,i,t);let r=p(e*e),s=o(p(r*e+BigInt(7)));s%n!==l&&(s=p(-s));let a=new g(e,s,i);return a.assertValidity(),a}let b=rO.bytesToNumberBE;function w(...e){return f(b(u("BIP0340/challenge",...e)))}function E(e,n,s){let o=(0,rO.ensureBytes)("signature",e,64),a=(0,rO.ensureBytes)("message",n),l=(0,rO.ensureBytes)("publicKey",s,32);try{let e=v(b(l)),n=b(o.subarray(0,32));if(!(0,rO.inRange)(n,i,t))return!1;let s=b(o.subarray(32,64));if(!(0,rO.inRange)(s,i,r))return!1;let c=w(d(n),h(e),a),u=m(e,s,f(-c));return!(!u||!u.hasEvenY()||u.toAffine().x!==n)}catch(e){return!1}}e.schnorr={getPublicKey:function(e){return y(e).bytes},sign:function(e,t,r=(0,tQ.randomBytes)(32)){let i=(0,rO.ensureBytes)("message",e),{bytes:n,scalar:s}=y(t),o=d(s^b(u("BIP0340/aux",(0,rO.ensureBytes)("auxRand",r,32)))),a=f(b(u("BIP0340/nonce",o,n,i)));if(a===l)throw Error("sign failed: k is zero");let{bytes:c,scalar:h}=y(a),p=w(c,n,i),g=new Uint8Array(64);if(g.set(c,0),g.set(d(f(h+p*s)),32),!E(g,i,n))throw Error("sign: Invalid signature produced");return g},verify:E,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:v,pointToBytes:h,numberToBytesBE:rO.numberToBytesBE,bytesToNumberBE:rO.bytesToNumberBE,taggedHash:u,mod:rk.mod}};let _=(0,i_.isogenyMap)(a,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),C=(0,iz.mapToCurveSimpleSWU)(a,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:a.create(BigInt("-11"))}),S=(0,i_.createHasher)(e.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=C(a.create(e[0]));return _(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:a.ORDER,m:1,k:128,expand:"xmd",hash:iL.sha256});e.hashToCurve=S.hashToCurve,e.encodeToCurve=S.encodeToCurve}(iM);var iV={};Object.defineProperty(iV,"__esModule",{value:!0}),iV.decodeHex=iV.remove0x=void 0,iV.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e},iV.decodeHex=function(e){return(0,tI.hexToBytes)((0,iV.remove0x)(e))},function(e){function t(e,t,r,i){if("secp256k1"===e)return t(iM.secp256k1);if("x25519"===e)return r(tH.x25519);if("ed25519"===e)return i(tH.ed25519);throw Error("Not implemented")}Object.defineProperty(e,"__esModule",{value:!0}),e.hexToPublicKey=e.convertPublicKeyFormat=e.getSharedPoint=e.getPublicKey=e.isValidPrivateKey=e.getValidSecret=void 0,e.getValidSecret=function(){var t;do t=(0,tU.randomBytes)(tL.SECRET_KEY_LENGTH);while(!(0,e.isValidPrivateKey)(t));return t},e.isValidPrivateKey=function(e){return t((0,tM.ellipticCurve)(),function(t){return t.utils.isValidPrivateKey(e)},function(){return!0},function(){return!0})},e.getPublicKey=function(e){return t((0,tM.ellipticCurve)(),function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)})},e.getSharedPoint=function(e,r,n){return t((0,tM.ellipticCurve)(),function(t){return t.getSharedSecret(e,r,n)},function(t){return t.getSharedSecret(e,r)},function(t){return i(t,e,r)})},e.convertPublicKeyFormat=function(e,r){return t((0,tM.ellipticCurve)(),function(t){return t.getSharedSecret(BigInt(1),e,r)},function(){return e},function(){return e})},e.hexToPublicKey=function(e){var i=(0,iV.decodeHex)(e);return t((0,tM.ellipticCurve)(),function(){return r(i)},function(){return i},function(){return i})};var r=function(e){if(e.length===tL.ETH_PUBLIC_KEY_SIZE){var t=new Uint8Array(1+e.length);return t.set([4]),t.set(e,1),t}return e},i=function(e,t,r){var i=e.utils.getExtendedPublicKey(t).scalar;return e.ExtendedPoint.fromHex(r).multiply(i).toRawBytes()}}(t$);var iG={},iZ={};function iJ(e,t,r){return(0,tW.hash)(e),void 0===r&&(r=new Uint8Array(e.outputLen)),(0,iF.hmac)(e,(0,tQ.toBytes)(r),(0,tQ.toBytes)(t))}Object.defineProperty(iZ,"__esModule",{value:!0}),iZ.hkdf=void 0,iZ.extract=iJ,iZ.expand=iQ;let iY=new Uint8Array([0]),iX=new Uint8Array;function iQ(e,t,r,i=32){if((0,tW.hash)(e),(0,tW.number)(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=iX);let s=new Uint8Array(n*e.outputLen),o=iF.hmac.create(e,t),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)iY[0]=t+1,a.update(0===t?iX:l).update(r).update(iY).digestInto(l),s.set(l,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),iY.fill(0),s.slice(0,i)}iZ.hkdf=(e,t,r,i,n)=>iQ(e,iJ(e,t,r),i,n),Object.defineProperty(iG,"__esModule",{value:!0}),iG.getSharedKey=iG.deriveKey=void 0,iG.deriveKey=function(e,t,r){return(0,iZ.hkdf)(iL.sha256,e,t,r,32)},iG.getSharedKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,iG.deriveKey)(tI.concatBytes.apply(void 0,e))};var i0={},i1={},i2={},i3={};Object.defineProperty(i3,"__esModule",{value:!0}),i3.polyval=i3.ghash=void 0,i3._toGHASHKey=i8;let i5=new Uint8Array(16),i4=(0,tI.u32)(i5),i6=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function i8(e){e.reverse();let t=1&e[15],r=0;for(let t=0;t<e.length;t++){let i=e[t];e[t]=i>>>1|r,r=(1&i)<<7}return e[0]^=225&-t,e}class i9{constructor(e,t){var r,i,n,s,o;this.blockLen=16,this.outputLen=16,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,tI.toBytes)(e),(0,tx.bytes)(e,16);let a=(0,tI.createView)(e),l=a.getUint32(0,!1),c=a.getUint32(4,!1),u=a.getUint32(8,!1),h=a.getUint32(12,!1),d=[];for(let e=0;e<128;e++)d.push({s0:i6(l),s1:i6(c),s2:i6(u),s3:i6(h)}),{s0:l,s1:c,s2:u,s3:h}={s3:(n=u)<<31|(s=h)>>>1,s2:(i=c)<<31|n>>>1,s1:(r=l)<<31|i>>>1,s0:r>>>1^-520093696&-(1&s)};let p=(o=t||1024)>65536?8:o>1024?4:2;if(![1,2,4,8].includes(p))throw Error(`ghash: wrong window size=${p}, should be 2, 4 or 8`);this.W=p;let f=128/p,g=this.windowSize=2**p,m=[];for(let e=0;e<f;e++)for(let t=0;t<g;t++){let r=0,i=0,n=0,s=0;for(let o=0;o<p;o++){if(!(t>>>p-o-1&1))continue;let{s0:a,s1:l,s2:c,s3:u}=d[p*e+o];r^=a,i^=l,n^=c,s^=u}m.push({s0:r,s1:i,s2:n,s3:s})}this.t=m}_updateBlock(e,t,r,i){e^=this.s0,t^=this.s1,r^=this.s2,i^=this.s3;let{W:n,t:s,windowSize:o}=this,a=0,l=0,c=0,u=0,h=(1<<n)-1,d=0;for(let p of[e,t,r,i])for(let e=0;e<4;e++){let t=p>>>8*e&255;for(let e=8/n-1;e>=0;e--){let{s0:r,s1:i,s2:p,s3:f}=s[d*o+(t>>>n*e&h)];a^=r,l^=i,c^=p,u^=f,d+=1}}this.s0=a,this.s1=l,this.s2=c,this.s3=u}update(e){e=(0,tI.toBytes)(e),(0,tx.exists)(this);let t=(0,tI.u32)(e),r=Math.floor(e.length/16),i=e.length%16;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return i&&(i5.set(e.subarray(16*r)),this._updateBlock(i4[0],i4[1],i4[2],i4[3]),(0,tI.clean)(i4)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,tx.exists)(this),(0,tx.output)(e,this),this.finished=!0;let{s0:t,s1:r,s2:i,s3:n}=this,s=(0,tI.u32)(e);return s[0]=t,s[1]=r,s[2]=i,s[3]=n,e}digest(){let e=new Uint8Array(16);return this.digestInto(e),this.destroy(),e}}class i7 extends i9{constructor(e,t){e=(0,tI.toBytes)(e);let r=i8((0,tI.copyBytes)(e));super(r,t),(0,tI.clean)(r)}update(e){e=(0,tI.toBytes)(e),(0,tx.exists)(this);let t=(0,tI.u32)(e),r=e.length%16,i=Math.floor(e.length/16);for(let e=0;e<i;e++)this._updateBlock(i6(t[4*e+3]),i6(t[4*e+2]),i6(t[4*e+1]),i6(t[4*e+0]));return r&&(i5.set(e.subarray(16*i)),this._updateBlock(i6(i4[3]),i6(i4[2]),i6(i4[1]),i6(i4[0])),(0,tI.clean)(i4)),this}digestInto(e){(0,tx.exists)(this),(0,tx.output)(e,this),this.finished=!0;let{s0:t,s1:r,s2:i,s3:n}=this,s=(0,tI.u32)(e);return s[0]=t,s[1]=r,s[2]=i,s[3]=n,e.reverse()}}function ne(e){let t=(t,r)=>e(r,t.length).update((0,tI.toBytes)(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}i3.ghash=ne((e,t)=>new i9(e,t)),i3.polyval=ne((e,t)=>new i7(e,t)),Object.defineProperty(i2,"__esModule",{value:!0}),i2.unsafe=i2.aeskwp=i2.aeskw=i2.siv=i2.gcm=i2.cfb=i2.cbc=i2.ecb=i2.ctr=void 0,i2.expandKeyLE=np,i2.expandKeyDecLE=nf;let nt=new Uint8Array(16);function nr(e){return e<<1^283&-(e>>7)}function ni(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=nr(e);return r}let nn=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=nr(r))e[t]=r;let t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let i=e[255-r];i|=i<<8,t[e[r]]=255&(i^i>>4^i>>5^i>>6^i>>7^99)}return(0,tI.clean)(e),t})(),ns=nn.map((e,t)=>nn.indexOf(t)),no=e=>e<<24|e>>>8,na=e=>e<<8|e>>>24,nl=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function nc(e,t){if(256!==e.length)throw Error("Wrong sbox length");let r=new Uint32Array(256).map((r,i)=>t(e[i])),i=r.map(na),n=i.map(na),s=n.map(na),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let c=0;c<256;c++){let u=256*t+c;o[u]=r[t]^i[c],a[u]=n[t]^s[c],l[u]=e[t]<<8|e[c]}return{sbox:e,sbox2:l,T0:r,T1:i,T2:n,T3:s,T01:o,T23:a}}let nu=nc(nn,e=>ni(e,3)<<24|e<<16|e<<8|ni(e,2)),nh=nc(ns,e=>ni(e,11)<<24|ni(e,13)<<16|ni(e,9)<<8|ni(e,14)),nd=(()=>{let e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=nr(r))e[t]=r;return e})();function np(e){(0,tx.bytes)(e);let t=e.length;if(![16,24,32].includes(t))throw Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:r}=nu,i=[];(0,tI.isAligned32)(e)||i.push(e=(0,tI.copyBytes)(e));let n=(0,tI.u32)(e),s=n.length,o=e=>nm(r,e,e,e,e),a=new Uint32Array(t+28);a.set(n);for(let e=s;e<a.length;e++){let t=a[e-1];e%s==0?t=o(no(t))^nd[e/s-1]:s>6&&e%s==4&&(t=o(t)),a[e]=a[e-s]^t}return(0,tI.clean)(...i),a}function nf(e){let t=np(e),r=t.slice(),i=t.length,{sbox2:n}=nu,{T0:s,T1:o,T2:a,T3:l}=nh;for(let e=0;e<i;e+=4)for(let n=0;n<4;n++)r[e+n]=t[i-e-4+n];(0,tI.clean)(t);for(let e=4;e<i-4;e++){let t=r[e],i=nm(n,t,t,t,t);r[e]=s[255&i]^o[i>>>8&255]^a[i>>>16&255]^l[i>>>24]}return r}function ng(e,t,r,i,n,s){return e[r<<8&65280|i>>>8&255]^t[n>>>8&65280|s>>>24&255]}function nm(e,t,r,i,n){return e[255&t|65280&r]|e[i>>>16&255|n>>>16&65280]<<16}function ny(e,t,r,i,n){let{sbox2:s,T01:o,T23:a}=nu,l=0;t^=e[l++],r^=e[l++],i^=e[l++],n^=e[l++];let c=e.length/4-2;for(let s=0;s<c;s++){let s=e[l++]^ng(o,a,t,r,i,n),c=e[l++]^ng(o,a,r,i,n,t),u=e[l++]^ng(o,a,i,n,t,r),h=e[l++]^ng(o,a,n,t,r,i);t=s,r=c,i=u,n=h}return{s0:e[l++]^nm(s,t,r,i,n),s1:e[l++]^nm(s,r,i,n,t),s2:e[l++]^nm(s,i,n,t,r),s3:e[l++]^nm(s,n,t,r,i)}}function nv(e,t,r,i,n){let{sbox2:s,T01:o,T23:a}=nh,l=0;t^=e[l++],r^=e[l++],i^=e[l++],n^=e[l++];let c=e.length/4-2;for(let s=0;s<c;s++){let s=e[l++]^ng(o,a,t,n,i,r),c=e[l++]^ng(o,a,r,t,n,i),u=e[l++]^ng(o,a,i,r,t,n),h=e[l++]^ng(o,a,n,i,r,t);t=s,r=c,i=u,n=h}return{s0:e[l++]^nm(s,t,n,i,r),s1:e[l++]^nm(s,r,t,n,i),s2:e[l++]^nm(s,i,r,t,n),s3:e[l++]^nm(s,n,i,r,t)}}function nb(e,t){if(void 0===t)return new Uint8Array(e);if((0,tx.bytes)(t),t.length<e)throw Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);if(!(0,tI.isAligned32)(t))throw Error("unaligned dst");return t}function nw(e,t,r,i){(0,tx.bytes)(t,16),(0,tx.bytes)(r);let n=r.length;i=nb(n,i);let s=(0,tI.u32)(t),{s0:o,s1:a,s2:l,s3:c}=ny(e,s[0],s[1],s[2],s[3]),u=(0,tI.u32)(r),h=(0,tI.u32)(i);for(let r=0;r+4<=u.length;r+=4){h[r+0]=u[r+0]^o,h[r+1]=u[r+1]^a,h[r+2]=u[r+2]^l,h[r+3]=u[r+3]^c;let i=1;for(let e=t.length-1;e>=0;e--)i=i+(255&t[e])|0,t[e]=255&i,i>>>=8;({s0:o,s1:a,s2:l,s3:c}=ny(e,s[0],s[1],s[2],s[3]))}let d=16*Math.floor(u.length/4);if(d<n){let e=new Uint32Array([o,a,l,c]),t=(0,tI.u8)(e);for(let e=d,s=0;e<n;e++,s++)i[e]=r[e]^t[s];(0,tI.clean)(e)}return i}function nE(e,t,r,i,n){(0,tx.bytes)(r,16),(0,tx.bytes)(i),n=nb(i.length,n);let s=(0,tI.u32)(r),o=(0,tI.createView)(r),a=(0,tI.u32)(i),l=(0,tI.u32)(n),c=t?0:12,u=i.length,h=o.getUint32(c,t),{s0:d,s1:p,s2:f,s3:g}=ny(e,s[0],s[1],s[2],s[3]);for(let r=0;r+4<=a.length;r+=4)l[r+0]=a[r+0]^d,l[r+1]=a[r+1]^p,l[r+2]=a[r+2]^f,l[r+3]=a[r+3]^g,h=h+1>>>0,o.setUint32(c,h,t),{s0:d,s1:p,s2:f,s3:g}=ny(e,s[0],s[1],s[2],s[3]);let m=16*Math.floor(a.length/4);if(m<u){let e=new Uint32Array([d,p,f,g]),t=(0,tI.u8)(e);for(let e=m,r=0;e<u;e++,r++)n[e]=i[e]^t[r];(0,tI.clean)(e)}return n}function n_(e){if((0,tx.bytes)(e),e.length%16!=0)throw Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function nC(e,t,r){(0,tx.bytes)(e);let i=e.length,n=i%16;if(!t&&0!==n)throw Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,tI.isAligned32)(e)||(e=(0,tI.copyBytes)(e));let s=(0,tI.u32)(e);if(t){let e=16-n;e||(e=16),i+=e}let o=nb(i,r);return{b:s,o:(0,tI.u32)(o),out:o}}function nS(e,t){if(!t)return e;let r=e.length;if(!r)throw Error("aes/pcks5: empty ciphertext not allowed");let i=e[r-1];if(i<=0||i>16)throw Error("aes/pcks5: wrong padding");let n=e.subarray(0,-i);for(let t=0;t<i;t++)if(e[r-t-1]!==i)throw Error("aes/pcks5: wrong padding");return n}function nI(e){let t=new Uint8Array(16),r=(0,tI.u32)(t);t.set(e);let i=16-e.length;for(let e=16-i;e<16;e++)t[e]=i;return r}function nx(e,t,r,i,n){let s=null==n?0:n.length,o=e.create(r,i.length+s);n&&o.update(n),o.update(i);let a=new Uint8Array(16),l=(0,tI.createView)(a);n&&(0,tI.setBigUint64)(l,0,BigInt(8*s),t),(0,tI.setBigUint64)(l,8,BigInt(8*i.length),t),o.update(a);let c=o.digest();return(0,tI.clean)(a),c}i2.ctr=(0,tI.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function r(r,i){if((0,tx.bytes)(r),void 0!==i&&((0,tx.bytes)(i),!(0,tI.isAligned32)(i)))throw Error("unaligned destination");let n=np(e),s=(0,tI.copyBytes)(t),o=[n,s];(0,tI.isAligned32)(r)||o.push(r=(0,tI.copyBytes)(r));let a=nw(n,s,r,i);return(0,tI.clean)(...o),a}return(0,tx.bytes)(e),(0,tx.bytes)(t,16),{encrypt:(e,t)=>r(e,t),decrypt:(e,t)=>r(e,t)}}),i2.ecb=(0,tI.wrapCipher)({blockSize:16},function(e,t={}){(0,tx.bytes)(e);let r=!t.disablePadding;return{encrypt(t,i){let{b:n,o:s,out:o}=nC(t,r,i),a=np(e),l=0;for(;l+4<=n.length;){let{s0:e,s1:t,s2:r,s3:i}=ny(a,n[l+0],n[l+1],n[l+2],n[l+3]);s[l++]=e,s[l++]=t,s[l++]=r,s[l++]=i}if(r){let e=nI(t.subarray(4*l)),{s0:r,s1:i,s2:n,s3:o}=ny(a,e[0],e[1],e[2],e[3]);s[l++]=r,s[l++]=i,s[l++]=n,s[l++]=o}return(0,tI.clean)(a),o},decrypt(t,i){n_(t);let n=nf(e),s=nb(t.length,i),o=[n];(0,tI.isAligned32)(t)||o.push(t=(0,tI.copyBytes)(t));let a=(0,tI.u32)(t),l=(0,tI.u32)(s);for(let e=0;e+4<=a.length;){let{s0:t,s1:r,s2:i,s3:s}=nv(n,a[e+0],a[e+1],a[e+2],a[e+3]);l[e++]=t,l[e++]=r,l[e++]=i,l[e++]=s}return(0,tI.clean)(...o),nS(s,r)}}}),i2.cbc=(0,tI.wrapCipher)({blockSize:16,nonceLength:16},function(e,t,r={}){(0,tx.bytes)(e),(0,tx.bytes)(t,16);let i=!r.disablePadding;return{encrypt(r,n){let s=np(e),{b:o,o:a,out:l}=nC(r,i,n),c=t,u=[s];(0,tI.isAligned32)(c)||u.push(c=(0,tI.copyBytes)(c));let h=(0,tI.u32)(c),d=h[0],p=h[1],f=h[2],g=h[3],m=0;for(;m+4<=o.length;)d^=o[m+0],p^=o[m+1],f^=o[m+2],g^=o[m+3],({s0:d,s1:p,s2:f,s3:g}=ny(s,d,p,f,g)),a[m++]=d,a[m++]=p,a[m++]=f,a[m++]=g;if(i){let e=nI(r.subarray(4*m));d^=e[0],p^=e[1],f^=e[2],g^=e[3],({s0:d,s1:p,s2:f,s3:g}=ny(s,d,p,f,g)),a[m++]=d,a[m++]=p,a[m++]=f,a[m++]=g}return(0,tI.clean)(...u),l},decrypt(r,n){n_(r);let s=nf(e),o=t,a=[s];(0,tI.isAligned32)(o)||a.push(o=(0,tI.copyBytes)(o));let l=(0,tI.u32)(o),c=nb(r.length,n);(0,tI.isAligned32)(r)||a.push(r=(0,tI.copyBytes)(r));let u=(0,tI.u32)(r),h=(0,tI.u32)(c),d=l[0],p=l[1],f=l[2],g=l[3];for(let e=0;e+4<=u.length;){let t=d,r=p,i=f,n=g;d=u[e+0];let{s0:o,s1:a,s2:l,s3:c}=nv(s,d,p=u[e+1],f=u[e+2],g=u[e+3]);h[e++]=o^t,h[e++]=a^r,h[e++]=l^i,h[e++]=c^n}return(0,tI.clean)(...a),nS(c,i)}}}),i2.cfb=(0,tI.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function r(r,i,n){(0,tx.bytes)(r);let s=r.length;n=nb(s,n);let o=np(e),a=t,l=[o];(0,tI.isAligned32)(a)||l.push(a=(0,tI.copyBytes)(a)),(0,tI.isAligned32)(r)||l.push(r=(0,tI.copyBytes)(r));let c=(0,tI.u32)(r),u=(0,tI.u32)(n),h=i?u:c,d=(0,tI.u32)(a),p=d[0],f=d[1],g=d[2],m=d[3];for(let e=0;e+4<=c.length;){let{s0:t,s1:r,s2:i,s3:n}=ny(o,p,f,g,m);u[e+0]=c[e+0]^t,u[e+1]=c[e+1]^r,u[e+2]=c[e+2]^i,u[e+3]=c[e+3]^n,p=h[e++],f=h[e++],g=h[e++],m=h[e++]}let y=16*Math.floor(c.length/4);if(y<s){({s0:p,s1:f,s2:g,s3:m}=ny(o,p,f,g,m));let e=(0,tI.u8)(new Uint32Array([p,f,g,m]));for(let t=y,i=0;t<s;t++,i++)n[t]=r[t]^e[i];(0,tI.clean)(e)}return(0,tI.clean)(...l),n}return(0,tx.bytes)(e),(0,tx.bytes)(t,16),{encrypt:(e,t)=>r(e,!0,t),decrypt:(e,t)=>r(e,!1,t)}}),i2.gcm=(0,tI.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,r){if((0,tx.bytes)(e),(0,tx.bytes)(t),void 0!==r&&(0,tx.bytes)(r),t.length<8)throw Error("aes/gcm: invalid nonce length");function i(e,t,i){let n=nx(i3.ghash,!1,e,i,r);for(let e=0;e<t.length;e++)n[e]^=t[e];return n}function n(){let r=np(e),i=nt.slice(),n=nt.slice();if(nE(r,!1,n,n,i),12===t.length)n.set(t);else{let e=nt.slice(),r=(0,tI.createView)(e);(0,tI.setBigUint64)(r,8,BigInt(8*t.length),!1);let s=i3.ghash.create(i).update(t).update(e);s.digestInto(n),s.destroy()}return{xk:r,authKey:i,counter:n,tagMask:nE(r,!1,n,nt)}}return{encrypt(e){(0,tx.bytes)(e);let{xk:t,authKey:r,counter:s,tagMask:o}=n(),a=new Uint8Array(e.length+16),l=[t,r,s,o];(0,tI.isAligned32)(e)||l.push(e=(0,tI.copyBytes)(e)),nE(t,!1,s,e,a);let c=i(r,o,a.subarray(0,a.length-16));return l.push(c),a.set(c,e.length),(0,tI.clean)(...l),a},decrypt(e){if((0,tx.bytes)(e),e.length<16)throw Error("aes/gcm: ciphertext less than tagLen (16)");let{xk:t,authKey:r,counter:s,tagMask:o}=n(),a=[t,r,o,s];(0,tI.isAligned32)(e)||a.push(e=(0,tI.copyBytes)(e));let l=e.subarray(0,-16),c=e.subarray(-16),u=i(r,o,l);if(a.push(u),!(0,tI.equalBytes)(u,c))throw Error("aes/gcm: invalid ghash tag");let h=nE(t,!1,s,l);return(0,tI.clean)(...a),h}}});let nA=(e,t,r)=>i=>{if(!Number.isSafeInteger(i)||t>i||i>r)throw Error(`${e}: invalid value=${i}, must be [${t}..${r}]`)};function nk(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}function nO(e,t){if((0,tx.bytes)(t,16),!nk(e))throw Error("_encryptBlock accepts result of expandKeyLE");let r=(0,tI.u32)(t),{s0:i,s1:n,s2:s,s3:o}=ny(e,r[0],r[1],r[2],r[3]);return r[0]=i,r[1]=n,r[2]=s,r[3]=o,t}function nP(e,t){if((0,tx.bytes)(t,16),!nk(e))throw Error("_decryptBlock accepts result of expandKeyLE");let r=(0,tI.u32)(t),{s0:i,s1:n,s2:s,s3:o}=nv(e,r[0],r[1],r[2],r[3]);return r[0]=i,r[1]=n,r[2]=s,r[3]=o,t}i2.siv=(0,tI.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,r){let i=nA("AAD",0,68719476736),n=nA("plaintext",0,68719476736),s=nA("nonce",12,12),o=nA("ciphertext",16,68719476736+16);function a(){let r=np(e),i=new Uint8Array(e.length),n=new Uint8Array(16),s=[r,i],o=t;(0,tI.isAligned32)(o)||s.push(o=(0,tI.copyBytes)(o));let a=(0,tI.u32)(o),l=0,c=a[0],u=a[1],h=a[2],d=0;for(let e of[n,i].map(tI.u32)){let t=(0,tI.u32)(e);for(let e=0;e<t.length;e+=2){let{s0:i,s1:n}=ny(r,l,c,u,h);t[e+0]=i,t[e+1]=n,l=++d}}let p={authKey:n,encKey:np(i)};return(0,tI.clean)(...s),p}function l(e,i,n){let s=nx(i3.polyval,!0,i,n,r);for(let e=0;e<12;e++)s[e]^=t[e];s[15]&=127;let o=(0,tI.u32)(s),a=o[0],l=o[1],c=o[2],u=o[3];return{s0:a,s1:l,s2:c,s3:u}=ny(e,a,l,c,u),o[0]=a,o[1]=l,o[2]=c,o[3]=u,s}function c(e,t,r){let i=(0,tI.copyBytes)(t);i[15]|=128;let n=nE(e,!0,i,r);return(0,tI.clean)(i),n}return(0,tx.bytes)(e,16,24,32),(0,tx.bytes)(t),s(t.length),void 0!==r&&((0,tx.bytes)(r),i(r.length)),{encrypt(e){(0,tx.bytes)(e),n(e.length);let{encKey:t,authKey:r}=a(),i=l(t,r,e),s=[t,r,i];(0,tI.isAligned32)(e)||s.push(e=(0,tI.copyBytes)(e));let o=new Uint8Array(e.length+16);return o.set(i,e.length),o.set(c(t,i,e)),(0,tI.clean)(...s),o},decrypt(e){(0,tx.bytes)(e),o(e.length);let t=e.subarray(-16),{encKey:r,authKey:i}=a(),n=[r,i];(0,tI.isAligned32)(e)||n.push(e=(0,tI.copyBytes)(e));let s=c(r,t,e.subarray(0,-16)),u=l(r,i,s);if(n.push(u),!(0,tI.equalBytes)(t,u))throw(0,tI.clean)(...n),Error("invalid polyval tag");return(0,tI.clean)(...n),s}}});let nR={encrypt(e,t){if(t.length>=4294967296)throw Error("plaintext should be less than 4gb");let r=np(e);if(16===t.length)nO(r,t);else{let e=(0,tI.u32)(t),i=e[0],n=e[1];for(let t=0,s=1;t<6;t++)for(let t=2;t<e.length;t+=2,s++){let{s0:o,s1:a,s2:l,s3:c}=ny(r,i,n,e[t],e[t+1]);i=o,n=a^nl(s),e[t]=l,e[t+1]=c}e[0]=i,e[1]=n}r.fill(0)},decrypt(e,t){if(t.length-8>=4294967296)throw Error("ciphertext should be less than 4gb");let r=nf(e),i=t.length/8-1;if(1===i)nP(r,t);else{let e=(0,tI.u32)(t),n=e[0],s=e[1];for(let t=0,o=6*i;t<6;t++)for(let t=2*i;t>=1;t-=2,o--){let{s0:i,s1:a,s2:l,s3:c}=nv(r,n,s^=nl(o),e[t],e[t+1]);n=i,s=a,e[t]=l,e[t+1]=c}e[0]=n,e[1]=s}r.fill(0)}},nN=new Uint8Array(8).fill(166);i2.aeskw=(0,tI.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,tx.bytes)(t),!t.length||t.length%8!=0)throw Error("invalid plaintext length");if(8===t.length)throw Error("8-byte keys not allowed in AESKW, use AESKWP instead");let r=(0,tI.concatBytes)(nN,t);return nR.encrypt(e,r),r},decrypt(t){if((0,tx.bytes)(t),t.length%8!=0||t.length<24)throw Error("invalid ciphertext length");let r=(0,tI.copyBytes)(t);if(nR.decrypt(e,r),!(0,tI.equalBytes)(r.subarray(0,8),nN))throw Error("integrity check failed");return r.subarray(0,8).fill(0),r.subarray(8)}})),i2.aeskwp=(0,tI.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,tx.bytes)(t),!t.length)throw Error("invalid plaintext length");let r=8*Math.ceil(t.length/8),i=new Uint8Array(8+r);i.set(t,8);let n=(0,tI.u32)(i);return n[0]=2790873510,n[1]=nl(t.length),nR.encrypt(e,i),i},decrypt(t){if((0,tx.bytes)(t),t.length<16)throw Error("invalid ciphertext length");let r=(0,tI.copyBytes)(t),i=(0,tI.u32)(r);nR.decrypt(e,r);let n=nl(i[1])>>>0,s=8*Math.ceil(n/8);if(2790873510!==i[0]||r.length-8!==s)throw Error("integrity check failed");for(let e=n;e<s;e++)if(0!==r[8+e])throw Error("integrity check failed");return r.subarray(0,8).fill(0),r.subarray(8,8+n)}})),i2.unsafe={expandKeyLE:np,expandKeyDecLE:nf,encrypt:ny,decrypt:nv,encryptBlock:nO,decryptBlock:nP,ctrCounter:nw,ctr32:nE},Object.defineProperty(i1,"__esModule",{value:!0}),i1.aes256cbc=i1.aes256gcm=void 0,i1.aes256gcm=function(e,t,r){return(0,i2.gcm)(e,t,r)},i1.aes256cbc=function(e,t,r){return(0,i2.cbc)(e,t)};var nT={},nM={},nL={};Object.defineProperty(nL,"__esModule",{value:!0}),nL.sigma=void 0,nL.rotl=function(e,t){return e<<t|e>>>32-t},nL.createCipher=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=(0,nB.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return(0,nD.number)(n),(0,nD.number)(o),(0,nD.bool)(s),(0,nD.bool)(r),(t,a,l,c,u=0)=>{(0,nD.bytes)(t),(0,nD.bytes)(a),(0,nD.bytes)(l);let h=l.length;if(void 0===c&&(c=new Uint8Array(h)),(0,nD.bytes)(c),(0,nD.number)(u),u<0||u>=nK)throw Error("arx: counter overflow");if(c.length<h)throw Error(`arx: output (${c.length}) is shorter than data (${h})`);let d=[],p,f,g=t.length;if(32===g)d.push(p=(0,nB.copyBytes)(t)),f=nH;else{if(16!==g||!r)throw Error(`arx: invalid 32-byte key, got length=${g}`);(p=new Uint8Array(32)).set(t),p.set(t,16),f=nq,d.push(p)}nF(a)||d.push(a=(0,nB.copyBytes)(a));let m=(0,nB.u32)(p);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(f,m,(0,nB.u32)(a.subarray(0,16)),m),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let l=n.length,c=new Uint8Array(nz),u=(0,nB.u32)(c),h=nF(n)&&nF(s),d=h?(0,nB.u32)(n):nV,p=h?(0,nB.u32)(s):nV;for(let f=0;f<l;o++){if(e(t,r,i,u,o,a),o>=nK)throw Error("arx: counter overflow");let g=Math.min(nz,l-f);if(h&&g===nz){let e=f/4;if(f%4!=0)throw Error("arx: invalid block position");for(let t,r=0;r<nW;r++)p[t=e+r]=d[t]^u[r];f+=nz}else{for(let e,t=0;t<g;t++)s[e=f+t]=n[e]^c[t];f+=g}}}(e,f,m,(0,nB.u32)(a),l,c,u,o),(0,nB.clean)(...d),c}};let nD=tx,nB=tI,nj=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),n$=nj("expand 16-byte k"),nU=nj("expand 32-byte k"),nq=(0,nB.u32)(n$),nH=(0,nB.u32)(nU);function nF(e){return e.byteOffset%4==0}nL.sigma=nH.slice();let nz=64,nW=16,nK=4294967296-1,nV=new Uint32Array;var nG={};Object.defineProperty(nG,"__esModule",{value:!0}),nG.poly1305=void 0,nG.wrapConstructorWithKey=nY;let nZ=(e,t)=>255&e[t++]|(255&e[t++])<<8;class nJ{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,tI.toBytes)(e),(0,tx.bytes)(e,32);let t=nZ(e,0),r=nZ(e,2),i=nZ(e,4),n=nZ(e,6),s=nZ(e,8),o=nZ(e,10),a=nZ(e,12),l=nZ(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|n<<9),this.r[4]=255&(n>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|l<<8),this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=nZ(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=n[7],p=n[8],f=n[9],g=nZ(e,t+0),m=nZ(e,t+2),y=nZ(e,t+4),v=nZ(e,t+6),b=nZ(e,t+8),w=nZ(e,t+10),E=nZ(e,t+12),_=nZ(e,t+14),C=i[0]+(8191&g),S=i[1]+(8191&(g>>>13|m<<3)),I=i[2]+(8191&(m>>>10|y<<6)),x=i[3]+(8191&(y>>>7|v<<9)),A=i[4]+(8191&(v>>>4|b<<12)),k=i[5]+(b>>>1&8191),O=i[6]+(8191&(b>>>14|w<<2)),P=i[7]+(8191&(w>>>11|E<<5)),R=i[8]+(8191&(E>>>8|_<<8)),N=i[9]+(_>>>5|(r?0:2048)),T=0,M=0+C*s+5*f*S+5*p*I+5*d*x+5*h*A;T=M>>>13,M&=8191,M+=5*u*k+5*c*O+5*l*P+5*a*R+5*o*N,T+=M>>>13,M&=8191;let L=T+C*o+S*s+5*f*I+5*p*x+5*d*A;T=L>>>13,L&=8191,L+=5*h*k+5*u*O+5*c*P+5*l*R+5*a*N,T+=L>>>13,L&=8191;let D=T+C*a+S*o+I*s+5*f*x+5*p*A;T=D>>>13,D&=8191,D+=5*d*k+5*h*O+5*u*P+5*c*R+5*l*N,T+=D>>>13,D&=8191;let B=T+C*l+S*a+I*o+x*s+5*f*A;T=B>>>13,B&=8191,B+=5*p*k+5*d*O+5*h*P+5*u*R+5*c*N,T+=B>>>13,B&=8191;let j=T+C*c+S*l+I*a+x*o+A*s;T=j>>>13,j&=8191,j+=5*f*k+5*p*O+5*d*P+5*h*R+5*u*N,T+=j>>>13,j&=8191;let $=T+C*u+S*c+I*l+x*a+A*o;T=$>>>13,$&=8191,$+=k*s+5*f*O+5*p*P+5*d*R+5*h*N,T+=$>>>13,$&=8191;let U=T+C*h+S*u+I*c+x*l+A*a;T=U>>>13,U&=8191,U+=k*o+O*s+5*f*P+5*p*R+5*d*N,T+=U>>>13,U&=8191;let q=T+C*d+S*h+I*u+x*c+A*l;T=q>>>13,q&=8191,q+=k*a+O*o+P*s+5*f*R+5*p*N,T+=q>>>13,q&=8191;let H=T+C*p+S*d+I*h+x*u+A*c;T=H>>>13,H&=8191,H+=k*l+O*a+P*o+R*s+5*f*N,T+=H>>>13,H&=8191;let F=T+C*f+S*p+I*d+x*h+A*u;T=F>>>13,F&=8191,F+=k*c+O*l+P*a+R*o+N*s,T+=F>>>13,F&=8191,M=8191&(T=(T=(T<<2)+T|0)+M|0),T>>>=13,L+=T,i[0]=M,i[1]=L,i[2]=D,i[3]=B,i[4]=j,i[5]=$,i[6]=U,i[7]=q,i[8]=H,i[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;(0,tI.clean)(r)}update(e){(0,tx.exists)(this);let{buffer:t,blockLen:r}=this,i=(e=(0,tI.toBytes)(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s!==r)t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=i-n;n+=r)this.process(e,n)}return this}destroy(){(0,tI.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,tx.exists)(this),(0,tx.output)(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}function nY(e){let t=(t,r)=>e(r).update((0,tI.toBytes)(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}nG.poly1305=nY(e=>new nJ(e)),function(e){function t(e,t,r,i,n,s=20){let o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],v=r[0],b=r[1],w=r[2],E=o,_=a,C=l,S=c,I=u,x=h,A=d,k=p,O=f,P=g,R=m,N=y,T=n,M=v,L=b,D=w;for(let e=0;e<s;e+=2)E=E+I|0,O=O+(T=(0,nL.rotl)(T^E,16))|0,E=E+(I=(0,nL.rotl)(I^O,12))|0,O=O+(T=(0,nL.rotl)(T^E,8))|0,I=(0,nL.rotl)(I^O,7),_=_+x|0,P=P+(M=(0,nL.rotl)(M^_,16))|0,_=_+(x=(0,nL.rotl)(x^P,12))|0,P=P+(M=(0,nL.rotl)(M^_,8))|0,x=(0,nL.rotl)(x^P,7),C=C+A|0,R=R+(L=(0,nL.rotl)(L^C,16))|0,C=C+(A=(0,nL.rotl)(A^R,12))|0,R=R+(L=(0,nL.rotl)(L^C,8))|0,A=(0,nL.rotl)(A^R,7),S=S+k|0,N=N+(D=(0,nL.rotl)(D^S,16))|0,S=S+(k=(0,nL.rotl)(k^N,12))|0,N=N+(D=(0,nL.rotl)(D^S,8))|0,k=(0,nL.rotl)(k^N,7),E=E+x|0,R=R+(D=(0,nL.rotl)(D^E,16))|0,E=E+(x=(0,nL.rotl)(x^R,12))|0,R=R+(D=(0,nL.rotl)(D^E,8))|0,x=(0,nL.rotl)(x^R,7),_=_+A|0,N=N+(T=(0,nL.rotl)(T^_,16))|0,_=_+(A=(0,nL.rotl)(A^N,12))|0,N=N+(T=(0,nL.rotl)(T^_,8))|0,A=(0,nL.rotl)(A^N,7),C=C+k|0,O=O+(M=(0,nL.rotl)(M^C,16))|0,C=C+(k=(0,nL.rotl)(k^O,12))|0,O=O+(M=(0,nL.rotl)(M^C,8))|0,k=(0,nL.rotl)(k^O,7),S=S+I|0,P=P+(L=(0,nL.rotl)(L^S,16))|0,S=S+(I=(0,nL.rotl)(I^P,12))|0,P=P+(L=(0,nL.rotl)(L^S,8))|0,I=(0,nL.rotl)(I^P,7);let B=0;i[B++]=o+E|0,i[B++]=a+_|0,i[B++]=l+C|0,i[B++]=c+S|0,i[B++]=u+I|0,i[B++]=h+x|0,i[B++]=d+A|0,i[B++]=p+k|0,i[B++]=f+O|0,i[B++]=g+P|0,i[B++]=m+R|0,i[B++]=y+N|0,i[B++]=n+T|0,i[B++]=v+M|0,i[B++]=b+L|0,i[B++]=w+D|0}function r(e,t,r,i){let n=e[0],s=e[1],o=e[2],a=e[3],l=t[0],c=t[1],u=t[2],h=t[3],d=t[4],p=t[5],f=t[6],g=t[7],m=r[0],y=r[1],v=r[2],b=r[3];for(let e=0;e<20;e+=2)n=n+l|0,d=d+(m=(0,nL.rotl)(m^n,16))|0,n=n+(l=(0,nL.rotl)(l^d,12))|0,d=d+(m=(0,nL.rotl)(m^n,8))|0,l=(0,nL.rotl)(l^d,7),s=s+c|0,p=p+(y=(0,nL.rotl)(y^s,16))|0,s=s+(c=(0,nL.rotl)(c^p,12))|0,p=p+(y=(0,nL.rotl)(y^s,8))|0,c=(0,nL.rotl)(c^p,7),o=o+u|0,f=f+(v=(0,nL.rotl)(v^o,16))|0,o=o+(u=(0,nL.rotl)(u^f,12))|0,f=f+(v=(0,nL.rotl)(v^o,8))|0,u=(0,nL.rotl)(u^f,7),a=a+h|0,g=g+(b=(0,nL.rotl)(b^a,16))|0,a=a+(h=(0,nL.rotl)(h^g,12))|0,g=g+(b=(0,nL.rotl)(b^a,8))|0,h=(0,nL.rotl)(h^g,7),n=n+c|0,f=f+(b=(0,nL.rotl)(b^n,16))|0,n=n+(c=(0,nL.rotl)(c^f,12))|0,f=f+(b=(0,nL.rotl)(b^n,8))|0,c=(0,nL.rotl)(c^f,7),s=s+u|0,g=g+(m=(0,nL.rotl)(m^s,16))|0,s=s+(u=(0,nL.rotl)(u^g,12))|0,g=g+(m=(0,nL.rotl)(m^s,8))|0,u=(0,nL.rotl)(u^g,7),o=o+h|0,d=d+(y=(0,nL.rotl)(y^o,16))|0,o=o+(h=(0,nL.rotl)(h^d,12))|0,d=d+(y=(0,nL.rotl)(y^o,8))|0,h=(0,nL.rotl)(h^d,7),a=a+l|0,p=p+(v=(0,nL.rotl)(v^a,16))|0,a=a+(l=(0,nL.rotl)(l^p,12))|0,p=p+(v=(0,nL.rotl)(v^a,8))|0,l=(0,nL.rotl)(l^p,7);let w=0;i[w++]=n,i[w++]=s,i[w++]=o,i[w++]=a,i[w++]=m,i[w++]=y,i[w++]=v,i[w++]=b}Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=r,e.chacha20orig=(0,nL.createCipher)(t,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,nL.createCipher)(t,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,nL.createCipher)(t,{counterRight:!1,counterLength:8,extendNonceFn:r,allowShortKeys:!1}),e.chacha8=(0,nL.createCipher)(t,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,nL.createCipher)(t,{counterRight:!1,counterLength:4,rounds:12});let i=new Uint8Array(16),n=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(i.subarray(r))},s=new Uint8Array(32);function o(e,t,r,i,o){let a=e(t,r,s),l=nG.poly1305.create(a);o&&n(l,o),n(l,i);let c=new Uint8Array(16),u=(0,tI.createView)(c);(0,tI.setBigUint64)(u,0,BigInt(o?o.length:0),!0),(0,tI.setBigUint64)(u,8,BigInt(i.length),!0),l.update(c);let h=l.digest();return(0,tI.clean)(a,c),h}e._poly1305_aead=e=>(t,r,i)=>((0,tx.bytes)(t,32),(0,tx.bytes)(r),{encrypt(n,s){let a=n.length,l=a+16;s?(0,tx.bytes)(s,l):s=new Uint8Array(l),e(t,r,n,s,1);let c=o(e,t,r,s.subarray(0,-16),i);return s.set(c,a),(0,tI.clean)(c),s},decrypt(n,s){let a=n.length,l=a-16;if(a<16)throw Error("encrypted data must be at least 16 bytes");s?(0,tx.bytes)(s,l):s=new Uint8Array(l);let c=n.subarray(0,-16),u=n.subarray(-16),h=o(e,t,r,c,i);if(!(0,tI.equalBytes)(u,h))throw Error("invalid tag");return e(t,r,c,s,1),(0,tI.clean)(h),s}}),e.chacha20poly1305=(0,tI.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,tI.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))}(nM),Object.defineProperty(nT,"__esModule",{value:!0}),nT.xchacha20=void 0,nT.xchacha20=function(e,t,r){return(0,nM.xchacha20poly1305)(e,t,r)},function(e){function t(e,t,r,i){var n=(0,tM.symmetricAlgorithm)();if("aes-256-gcm"===n)return e(i1.aes256gcm,t,r,(0,tM.symmetricNonceLength)(),tL.AEAD_TAG_LENGTH,i);if("xchacha20"===n)return e(nT.xchacha20,t,r,tL.XCHACHA20_NONCE_LENGTH,tL.AEAD_TAG_LENGTH,i);if("aes-256-cbc"===n)return e(i1.aes256cbc,t,r,16,0);throw Error("Not implemented")}function r(e,t,r,i,n,s){var o=(0,tU.randomBytes)(i),a=e(t,o,s).encrypt(r);if(0===n)return(0,tI.concatBytes)(o,a);var l=a.length-n,c=a.subarray(0,l),u=a.subarray(l);return(0,tI.concatBytes)(o,u,c)}function i(e,t,r,i,n,s){var o=r.subarray(0,i),a=e(t,Uint8Array.from(o),s),l=r.subarray(i);if(0===n)return a.decrypt(l);var c=l.subarray(0,n),u=l.subarray(n);return a.decrypt((0,tI.concatBytes)(u,c))}Object.defineProperty(e,"__esModule",{value:!0}),e.aesDecrypt=e.aesEncrypt=e.symDecrypt=e.symEncrypt=void 0,e.symEncrypt=function(e,i,n){return t(r,e,i,n)},e.symDecrypt=function(e,r,n){return t(i,e,r,n)},e.aesEncrypt=e.symEncrypt,e.aesDecrypt=e.symDecrypt}(i0),s9=tE&&tE.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s7=tE&&tE.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s9(t,e,r)},Object.defineProperty(tj,"__esModule",{value:!0}),s7(t$,tj),s7(iG,tj),s7(iV,tj),s7(i0,tj);var nX={};Object.defineProperty(nX,"__esModule",{value:!0}),nX.PublicKey=void 0;var nQ=function(){function e(e){this.data=(0,tj.convertPublicKeyFormat)(e,!0)}return e.fromHex=function(t){return new e((0,tj.hexToPublicKey)(t))},Object.defineProperty(e.prototype,"uncompressed",{get:function(){return e3.from((0,tj.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compressed",{get:function(){return e3.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(e){return void 0===e&&(e=!0),(0,tI.bytesToHex)(e?this.data:this.uncompressed)},e.prototype.decapsulate=function(e,t){void 0===t&&(t=!1);var r=t?this.data:this.uncompressed,i=e.multiply(this,t);return(0,tj.getSharedKey)(r,i)},e.prototype.equals=function(e){return(0,tI.equalBytes)(this.data,e.data)},e}();nX.PublicKey=nQ,Object.defineProperty(tB,"__esModule",{value:!0}),tB.PrivateKey=void 0;var n0=function(){function e(e){if(void 0===e)this.data=(0,tj.getValidSecret)();else{if(!(0,tj.isValidPrivateKey)(e))throw Error("Invalid private key");this.data=e}this.publicKey=new nX.PublicKey((0,tj.getPublicKey)(this.data))}return e.fromHex=function(t){return new e((0,tj.decodeHex)(t))},Object.defineProperty(e.prototype,"secret",{get:function(){return e3.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(){return(0,tI.bytesToHex)(this.data)},e.prototype.encapsulate=function(e,t){void 0===t&&(t=!1);var r=t?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,t);return(0,tj.getSharedKey)(r,i)},e.prototype.multiply=function(e,t){return void 0===t&&(t=!1),(0,tj.getSharedPoint)(this.data,e.compressed,t)},e.prototype.equals=function(e){return(0,tI.equalBytes)(this.data,e.data)},e}();tB.PrivateKey=n0,Object.defineProperty(tD,"__esModule",{value:!0}),tD.PublicKey=tD.PrivateKey=void 0,Object.defineProperty(tD,"PrivateKey",{enumerable:!0,get:function(){return tB.PrivateKey}}),Object.defineProperty(tD,"PublicKey",{enumerable:!0,get:function(){return nX.PublicKey}}),Object.defineProperty(tS,"__esModule",{value:!0}),tS.utils=tS.PublicKey=tS.PrivateKey=tS.ECIES_CONFIG=void 0,tS.encrypt=function(e,t){var r=new or.PrivateKey,i=e instanceof Uint8Array?new or.PublicKey(e):or.PublicKey.fromHex(e),n=r.encapsulate(i,(0,ot.isHkdfKeyCompressed)()),s=(0,ot.isEphemeralKeyCompressed)()?r.publicKey.compressed:r.publicKey.uncompressed,o=(0,oi.symEncrypt)(n,t);return e3.from((0,oe.concatBytes)(s,o))},tS.decrypt=function(e,t){var r=e instanceof Uint8Array?new or.PrivateKey(e):or.PrivateKey.fromHex(e),i=(0,ot.ephemeralKeySize)(),n=new or.PublicKey(t.subarray(0,i)),s=t.subarray(i),o=n.decapsulate(r,(0,ot.isHkdfKeyCompressed)());return e3.from((0,oi.symDecrypt)(o,s))},oe=tI,ot=tM,or=tD,oi=tj,Object.defineProperty(tS,"ECIES_CONFIG",{enumerable:!0,get:function(){return tM.ECIES_CONFIG}}),Object.defineProperty(tS,"PrivateKey",{enumerable:!0,get:function(){return tD.PrivateKey}}),Object.defineProperty(tS,"PublicKey",{enumerable:!0,get:function(){return tD.PublicKey}}),tS.utils={aesEncrypt:oi.aesEncrypt,aesDecrypt:oi.aesDecrypt,symEncrypt:oi.symEncrypt,symDecrypt:oi.symDecrypt,decodeHex:oi.decodeHex,getValidSecret:oi.getValidSecret,remove0x:oi.remove0x};let n1=d()("KeyExchange:Layer"),n2=d()("SocketService:Layer"),n3=d()("Ecies:Layer"),n5=d()("RemoteCommunication:Layer");n1.color="##95c44e",n2.color="#f638d7",n3.color="#465b9c",n5.color="#47a2be";let n4={KeyExchange:n1,SocketService:n2,Ecies:n3,RemoteCommunication:n5},n6,n8=[],n9=[],n7=(e,t)=>eH(void 0,void 0,void 0,function*(){n6=t,n9.push(e),(function(e){return eH(this,void 0,void 0,function*(){if(!n6||!e)return;!function(){let e=n9;n9=n8,n8=e}();let t=n6.endsWith("/")?`${n6}evt`:`${n6}/evt`,r=Object.assign({},e);if(delete r.params,e.params)for(let[t,i]of Object.entries(e.params))r[t]=i;let i=JSON.stringify(r);n4.RemoteCommunication(`[sendBufferedEvents] Sending ${n8.length} analytics events to ${t}`);try{let e=yield u()(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}),r=yield e.text();n4.RemoteCommunication(`[sendBufferedEvents] Response: ${r}`),n8.length=0}catch(e){}})})(e).catch(()=>{})});class se{constructor(e){this.enabled=!0,(null==e?void 0:e.debug)&&d().enable("Ecies:Layer"),this.ecies=(null==e?void 0:e.privateKey)?tS.PrivateKey.fromHex(e.privateKey):new tS.PrivateKey,n4.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),n4.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),n4.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new tS.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,t){let r=e;if(this.enabled)try{n4.Ecies("[ECIES: encrypt()] using otherPublicKey",t);let i=e3.from(e),n=tS.encrypt(t,i);r=e3.from(n).toString("base64")}catch(r){throw n4.Ecies("[ECIES: encrypt()] error encrypt:",r),n4.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),n4.Ecies("[ECIES: encrypt()] data: ",e),n4.Ecies("[ECIES: encrypt()] otherkey: ",t),r}return r}decrypt(e){let t=e;if(this.enabled)try{n4.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());let r=e3.from(e.toString(),"base64");t=tS.decrypt(this.ecies.toHex(),r).toString()}catch(t){throw n4.Ecies("[ECIES: decrypt()] error decrypt",t),n4.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),n4.Ecies("[ECIES: decrypt()] encryptedData: ",e),t}return t}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){n4.Ecies("[ECIES: toString()]",this.getKeyInfo())}}var st={version:"0.33.1"};let sr="https://metamask-sdk.api.cx.metamask.io/",si=["websocket"],sn={METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_WATCHASSET:"wallet_watchAsset",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},ss=[sn.METAMASK_CONNECTSIGN,sn.METAMASK_CONNECTWITH,sn.METAMASK_OPEN,sn.METAMASK_BATCH,sn.PERSONAL_SIGN,sn.WALLET_REQUESTPERMISSIONS,sn.WALLET_REVOKEPERMISSIONS,sn.WALLET_WATCHASSET,sn.ETH_SENDTRANSACTION,sn.ETH_SIGNTYPEDDATA,sn.ETH_SIGNTYPEDDATA_V3,sn.ETH_SIGNTYPEDDATA_V4,sn.ETH_SIGNTRANSACTION,sn.ETH_SIGN,sn.PERSONAL_EC_RECOVER];function so(e){return ss.includes(e)}function sa(e){let{context:t}=e;n4.RemoteCommunication(`[RemoteCommunication: clean()] context=${t}`),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}(oy=oh||(oh={})).DISCONNECTED="disconnected",oy.WAITING="waiting",oy.TIMEOUT="timeout",oy.LINKED="linked",oy.PAUSED="paused",oy.TERMINATED="terminated",(on=od||(od={})).KEY_INFO="key_info",on.SERVICE_STATUS="service_status",on.PROVIDER_UPDATE="provider_update",on.RPC_UPDATE="rpc_update",on.KEYS_EXCHANGED="keys_exchanged",on.JOIN_CHANNEL="join_channel",on.PUBLIC_KEY="public_key",on.CHANNEL_CREATED="channel_created",on.CLIENTS_CONNECTED="clients_connected",on.CLIENTS_DISCONNECTED="clients_disconnected",on.CLIENTS_WAITING="clients_waiting",on.CLIENTS_READY="clients_ready",on.REJECTED="rejected",on.WALLET_INIT="wallet_init",on.CHANNEL_PERSISTENCE="channel_persistence",on.CONFIG="config",on.MESSAGE_ACK="ack",on.SOCKET_DISCONNECTED="socket_disconnected",on.SOCKET_RECONNECT="socket_reconnect",on.OTP="otp",on.SDK_RPC_CALL="sdk_rpc_call",on.AUTHORIZED="authorized",on.CONNECTION_STATUS="connection_status",on.MESSAGE="message",on.TERMINATE="terminate",(op||(op={})).KEY_EXCHANGE="key_exchange",(os=of||(of={})).KEY_HANDSHAKE_START="key_handshake_start",os.KEY_HANDSHAKE_CHECK="key_handshake_check",os.KEY_HANDSHAKE_SYN="key_handshake_SYN",os.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",os.KEY_HANDSHAKE_ACK="key_handshake_ACK",os.KEY_HANDSHAKE_WALLET="key_handshake_wallet",os.KEY_HANDSHAKE_NONE="none";class sl extends f.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:t,context:r,ecies:i,logging:n}){super(),this.keysExchanged=!1,this.step=of.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,(null==i?void 0:i.privateKey)&&t&&(n4.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${t} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new se(Object.assign(Object.assign({},i),{debug:null==n?void 0:n.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=!0===(null==n?void 0:n.keyExchangeLayer),t&&this.setOtherPublicKey(t),this.communicationLayer.on(op.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){let{relayPersistence:t}=this.communicationLayer.remote.state;if(n4.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${t}`,e),t)return void n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");let{message:r}=e;this.keysExchanged&&n4.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(od.KEY_INFO,r.type),r.type===of.KEY_HANDSHAKE_SYN?(this.checkStep([of.KEY_HANDSHAKE_NONE,of.KEY_HANDSHAKE_ACK]),n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:of.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(e=>{n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",e)}),this.setStep(of.KEY_HANDSHAKE_ACK)):r.type===of.KEY_HANDSHAKE_SYNACK?(this.checkStep([of.KEY_HANDSHAKE_SYNACK,of.KEY_HANDSHAKE_ACK,of.KEY_HANDSHAKE_NONE]),n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:of.KEY_HANDSHAKE_ACK}).catch(e=>{n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",e)}),this.keysExchanged=!0,this.setStep(of.KEY_HANDSHAKE_ACK),this.emit(od.KEYS_EXCHANGED)):r.type===of.KEY_HANDSHAKE_ACK&&(n4.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([of.KEY_HANDSHAKE_ACK,of.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(of.KEY_HANDSHAKE_ACK),this.emit(od.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new se(e)}clean(){n4.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(of.KEY_HANDSHAKE_NONE),this.emit(od.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:t}){let{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state;r?n4.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(n4.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${t} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==of.KEY_HANDSHAKE_NONE&&this.step!==of.KEY_HANDSHAKE_SYNACK)||t?(n4.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${t}) -- step=${this.step}`,this.step),this.clean(),this.setStep(of.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:of.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(e=>{n4.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",e)})):n4.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&!0!==t?n4.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):i>=2?this.communicationLayer.sendMessage({type:of.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(e=>{n4.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",e)}):(this.communicationLayer.sendMessage({type:of.KEY_HANDSHAKE_START}).catch(e=>{n4.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",e)}),this.clean()))}setStep(e){this.step=e,this.emit(od.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:t}){this.otherPublicKey=t,this.myECIES=new se({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){n4.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){return JSON.stringify({keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step})}}(oo=og||(og={})).TERMINATE="terminate",oo.ANSWER="answer",oo.OFFER="offer",oo.CANDIDATE="candidate",oo.JSONRPC="jsonrpc",oo.WALLET_INFO="wallet_info",oo.WALLET_INIT="wallet_init",oo.ORIGINATOR_INFO="originator_info",oo.PAUSE="pause",oo.OTP="otp",oo.AUTHORIZED="authorized",oo.PING="ping",oo.READY="ready",(oa=om||(om={})).REQUEST="sdk_connect_request_started",oa.REQUEST_MOBILE="sdk_connect_request_started_mobile",oa.RECONNECT="sdk_reconnect_request_started",oa.CONNECTED="sdk_connection_established",oa.CONNECTED_MOBILE="sdk_connection_established_mobile",oa.AUTHORIZED="sdk_connection_authorized",oa.REJECTED="sdk_connection_rejected",oa.TERMINATED="sdk_connection_terminated",oa.DISCONNECTED="sdk_disconnected",oa.SDK_USE_EXTENSION="sdk_use_extension",oa.SDK_RPC_REQUEST="sdk_rpc_request",oa.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",oa.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",oa.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",oa.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser";let sc=(e,t,r)=>eH(void 0,void 0,void 0,function*(){var i,n,s,o,a,l;let{remote:c,state:u}=e,{channelId:h,isOriginator:d}=u;if("error_terminated"===t)return n4.SocketService(`handleJoinChannelResults: Channel ${h} terminated`),void e.emit(od.TERMINATE);if(!r)return void n4.SocketService(`handleJoinChannelResults: No result for channel ${h}`);let{persistence:p,walletKey:f,rejected:g}=r;if(n4.SocketService(`handleJoinChannelResults: Channel ${h} persistence=${p} walletKey=${f} rejected=${g}`),g)return n4.SocketService(`handleJoinChannelResults: Channel ${h} rejected`),yield e.remote.disconnect({terminate:!0}),e.remote.emit(od.REJECTED,{channelId:h}),void e.remote.emitServiceStatusEvent();if(f&&!(null===(i=c.state.channelConfig)||void 0===i?void 0:i.otherKey)){e.getKeyExchange().setOtherPublicKey(f),null===(n=e.state.keyExchange)||void 0===n||n.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(od.AUTHORIZED);let{communicationLayer:t,storageManager:r}=c.state,i=Object.assign(Object.assign({},c.state.channelConfig),{channelId:null!==(s=c.state.channelId)&&void 0!==s?s:"",validUntil:Date.now()+6048e5,localKey:null==t?void 0:t.getKeyInfo().ecies.private,otherKey:f});e.sendMessage({type:of.KEY_HANDSHAKE_ACK}).catch(e=>{}),null===(o=e.state.socket)||void 0===o||o.emit(og.PING,{id:h,clientType:d?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield null==r?void 0:r.persistChannelConfig(i),c.emitServiceStatusEvent(),c.setConnectionStatus(oh.LINKED)}p&&(e.emit(od.CHANNEL_PERSISTENCE),null===(a=e.state.keyExchange)||void 0===a||a.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(od.AUTHORIZED),n7(Object.assign(Object.assign({id:null!=h?h:"",event:d?om.CONNECTED:om.CONNECTED_MOBILE},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:st.version,walletVersion:null===(l=e.remote.state.walletInfo)||void 0===l?void 0:l.version}),u.communicationServerUrl).catch(e=>{}))}),su=e=>new Promise(t=>{setTimeout(t,e)}),sh=(e,t,...r)=>eH(void 0,[e,t,...r],void 0,function*(e,t,r=200){let i;let n=Date.now(),s=!1;for(;!s;){if(s=Date.now()-n>3e5,void 0!==(i=t[e]).elapsedTime)return i;yield su(r)}throw Error(`RPC ${e} timed out`)}),sd=e=>eH(void 0,void 0,void 0,function*(){let{state:t}=e,{socket:r,channelId:i,context:n,isOriginator:s,isReconnecting:o}=t;if(o)return n4.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",e),!1;if(!r)return n4.SocketService("[SocketService: reconnectSocket()] socket is not defined",e),!1;if(!i)return!1;let{connected:a}=r;t.isReconnecting=!0,t.reconnectionAttempts=0,n4.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,e);try{for(;3>t.reconnectionAttempts;){if(n4.SocketService(`[SocketService: reconnectSocket()] Attempt ${t.reconnectionAttempts+1} of 3`,e),yield su(200),r.connected)return n4.SocketService("Socket already connected --- ping to retrieve messages"),r.emit(og.PING,{id:i,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;t.resumed=!0,r.connect(),e.emit(od.SOCKET_RECONNECT);try{if(yield new Promise((t,o)=>{r.emit(od.JOIN_CHANNEL,{channelId:i,context:`${n}connect_again`,clientType:s?"dapp":"wallet"},(r,i)=>eH(void 0,void 0,void 0,function*(){try{yield sc(e,r,i),t()}catch(e){o(e)}}))}),yield su(100),r.connected)return n4.SocketService(`Reconnection successful on attempt ${t.reconnectionAttempts+1}`),!0}catch(e){n4.SocketService(`Error during reconnection attempt ${t.reconnectionAttempts+1}:`,e)}t.reconnectionAttempts+=1,3>t.reconnectionAttempts&&(yield su(200))}return n4.SocketService("Failed to reconnect after 3 attempts"),!1}finally{t.isReconnecting=!1,t.reconnectionAttempts=0}});function sp(e,t){return eH(this,void 0,void 0,function*(){var r;let i=null===(r=e.state.keyExchange)||void 0===r?void 0:r.encryptMessage(JSON.stringify(t)),n={id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:i,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0};return n4.SocketService(`[SocketService: encryptAndSendMessage()] context=${e.state.context}`,n),t.type===og.TERMINATE&&(e.state.manualDisconnect=!0),new Promise((t,r)=>{var i;null===(i=e.state.socket)||void 0===i||i.emit(od.MESSAGE,n,(e,i)=>{var n;e&&(n4.SocketService(`[SocketService: encryptAndSendMessage()] error=${e}`),r(e)),n4.SocketService("[encryptAndSendMessage] response",i),t(null!==(n=null==i?void 0:i.success)&&void 0!==n&&n)})})})}(ol=ov||(ov={})).RPC_CHECK="rpcCheck",ol.SKIPPED_RPC="skippedRpc";let sf=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(e=>e.toLowerCase()),sg=[{event:od.CLIENTS_CONNECTED,handler:function(e,t){return r=>eH(this,void 0,void 0,function*(){var r,i,n,s,o,a,l,c,u,h,d;let p=null!==(i=null===(r=e.remote.state.channelConfig)||void 0===r?void 0:r.relayPersistence)&&void 0!==i&&i;if(n4.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected-${t}' relayPersistence=${p} resumed=${e.state.resumed}  clientsPaused=${e.state.clientsPaused} keysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()} isOriginator=${e.state.isOriginator}`),e.emit(od.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:null===(s=e.state.keyExchange)||void 0===s?void 0:s.areKeysExchanged(),context:e.state.context}),e.state.resumed)e.state.isOriginator||(n4.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} 'clients_connected' / keysExchanged=${null===(o=e.state.keyExchange)||void 0===o?void 0:o.areKeysExchanged()} -- backward compatibility`),null===(a=e.state.keyExchange)||void 0===a||a.start({isOriginator:null!==(l=e.state.isOriginator)&&void 0!==l&&l})),e.state.resumed=!1;else if(e.state.clientsPaused)n4.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!e.state.isOriginator){let t=!p;n4.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null===(c=e.state.keyExchange)||void 0===c?void 0:c.areKeysExchanged()} -- force=${t} -- backward compatibility`),n4.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null===(u=e.state.keyExchange)||void 0===u?void 0:u.areKeysExchanged()} -- force=${t} -- backward compatibility`),null===(h=e.state.keyExchange)||void 0===h||h.start({isOriginator:null!==(d=e.state.isOriginator)&&void 0!==d&&d,force:t})}e.state.clientsConnected=!0,e.state.clientsPaused=!1})}},{event:od.CHANNEL_CREATED,handler:function(e,t){return r=>{n4.SocketService(`[SocketService: handleChannelCreated()] context=${e.state.context} on 'channel_created-${t}'`,r),e.emit(od.CHANNEL_CREATED,r)}}},{event:od.CLIENTS_DISCONNECTED,handler:function(e,t){return()=>{var r;e.state.clientsConnected=!1,n4.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}'`),e.remote.state.relayPersistence?n4.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}' - relayPersistence enabled, skipping key exchange cleanup.`):(e.state.isOriginator&&!e.state.clientsPaused&&(null===(r=e.state.keyExchange)||void 0===r||r.clean()),e.emit(od.CLIENTS_DISCONNECTED,t))}}},{event:od.CONFIG,handler:function(e,t){return r=>eH(this,void 0,void 0,function*(){var i,n,s;n4.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${t}'`,r);let{persistence:o,walletKey:a}=r;e.state.isOriginator&&e.remote.state.channelConfig?(r.walletKey&&!e.remote.state.channelConfig.otherKey&&(n4.SocketService(`Setting wallet key ${a}`),e.remote.state.channelConfig.otherKey=a,e.getKeyExchange().setOtherPublicKey(r.walletKey),null===(i=e.state.keyExchange)||void 0===i||i.setKeysExchanged(!0),yield e.remote.sendMessage({type:of.KEY_HANDSHAKE_ACK}),yield e.remote.sendMessage({type:og.PING}),yield null===(n=e.remote.state.storageManager)||void 0===n?void 0:n.persistChannelConfig(e.remote.state.channelConfig)),!0!==o||e.remote.state.channelConfig.relayPersistence||(n4.SocketService(`Setting relay persistence ${o}`),e.remote.state.channelConfig.relayPersistence=o,e.remote.state.relayPersistence=!0,e.remote.emit(od.CHANNEL_PERSISTENCE),e.remote.state.authorized=!0,e.remote.state.ready=!0,e.remote.emit(od.AUTHORIZED),yield null===(s=e.remote.state.storageManager)||void 0===s?void 0:s.persistChannelConfig(e.remote.state.channelConfig))):e.state.isOriginator||r.persistence&&(e.remote.state.relayPersistence=!0,e.remote.emit(od.CHANNEL_PERSISTENCE))})}},{event:od.MESSAGE,handler:function(e,t){return r=>{var i,n,s,o,a,l,c,u,h,d,f,g,m,y,v,b,w,E;let{ackId:_,message:C,error:S}=r,I=null!==(i=e.remote.state.relayPersistence)&&void 0!==i&&i;if(n4.SocketService(`[SocketService handleMessage()]  relayPersistence=${I}  context=${e.state.context} on 'message' ${t} keysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()}`,r),S)throw n4.SocketService(`
      [SocketService handleMessage()] context=${e.state.context}::on 'message' error=${S}`),Error(S);let x="string"==typeof C;if(!x&&(null==C?void 0:C.type)===of.KEY_HANDSHAKE_START){if(I)return;return n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received HANDSHAKE_START isOriginator=${e.state.isOriginator}`,C),void(null===(s=e.state.keyExchange)||void 0===s||s.start({isOriginator:null!==(o=e.state.isOriginator)&&void 0!==o&&o,force:!0}))}if(!x&&(null===(a=null==C?void 0:C.type)||void 0===a?void 0:a.startsWith("key_handshake"))){if(I)return;return n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' emit KEY_EXCHANGE`,C),void e.emit(op.KEY_EXCHANGE,{message:C,context:e.state.context})}if(!x||(null===(l=e.state.keyExchange)||void 0===l?void 0:l.areKeysExchanged())){if(!x&&(null==C?void 0:C.type))return void e.emit(od.MESSAGE,C)}else{let t=!1;try{n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' trying to decrypt message`),null===(c=e.state.keyExchange)||void 0===c||c.decryptMessage(C),t=!0}catch(t){n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' error`,t)}if(!t)return e.state.isOriginator?null===(h=e.state.keyExchange)||void 0===h||h.start({isOriginator:null!==(d=e.state.isOriginator)&&void 0!==d&&d}):e.sendMessage({type:of.KEY_HANDSHAKE_START}).catch(e=>{}),void n4.SocketService(`Message ignored because invalid key exchange status. step=${null===(f=e.state.keyExchange)||void 0===f?void 0:f.getKeyInfo().step}`,null===(g=e.state.keyExchange)||void 0===g?void 0:g.getKeyInfo(),C);n4.SocketService("Invalid key exchange status detected --- updating it."),null===(u=e.state.keyExchange)||void 0===u||u.setKeysExchanged(!0)}if(!x)return void e.emit(od.MESSAGE,C);let A=null===(m=e.state.keyExchange)||void 0===m?void 0:m.decryptMessage(C),k=JSON.parse(null!=A?A:"{}");if(_&&(null==_?void 0:_.length)>0&&(n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' ackid=${_} channelId=${t}`),null===(y=e.state.socket)||void 0===y||y.emit(od.MESSAGE_ACK,{ackId:_,channelId:t,clientType:e.state.isOriginator?"dapp":"wallet"})),e.state.clientsPaused=(null==k?void 0:k.type)===og.PAUSE,e.state.isOriginator&&k.data){let t=k.data,r=e.state.rpcMethodTracker[t.id];if(r){let i=Date.now()-r.timestamp;n4.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received answer for id=${t.id} method=${r.method} responseTime=${i}`,k),e.remote.state.analytics&&sf.includes(r.method.toLowerCase())&&n7(Object.assign(Object.assign({id:null!==(v=e.remote.state.channelId)&&void 0!==v?v:"",event:om.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:st.version},e.remote.state.originatorInfo),{walletVersion:null===(b=e.remote.state.walletInfo)||void 0===b?void 0:b.version,params:{method:r.method,from:"mobile"}}),e.remote.state.communicationServerUrl).catch(e=>{}),so(r.method)&&p.analytics.track(t.error?4001===t.error.code?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:r.method});let n=Object.assign(Object.assign({},r),{result:t.result,error:t.error?{code:null===(w=t.error)||void 0===w?void 0:w.code,message:null===(E=t.error)||void 0===E?void 0:E.message}:void 0,elapsedTime:i});e.state.rpcMethodTracker[t.id]=n,e.emit(od.RPC_UPDATE,n)}}e.emit(od.MESSAGE,{message:k})}}},{event:od.REJECTED,handler:function(e,t){return r=>eH(this,void 0,void 0,function*(){var r;e.state.isOriginator&&!e.remote.state.ready?(n4.SocketService(`[SocketService: handleChannelRejected()] context=${e.state.context} channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`,e.remote.state.originatorInfo),n7(Object.assign(Object.assign({id:t,event:om.REJECTED},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:st.version,walletVersion:null===(r=e.remote.state.walletInfo)||void 0===r?void 0:r.version}),e.remote.state.communicationServerUrl).catch(e=>{}),p.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield e.remote.disconnect({terminate:!0}),e.remote.emit(od.REJECTED,{channelId:t}),e.remote.setConnectionStatus(oh.DISCONNECTED)):n4.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(e,t){return r=>{n4.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${e.state.context} on 'clients_waiting_to_join-${t}'`,r),e.emit(od.CLIENTS_WAITING,r)}}}],sm=[{event:od.KEY_INFO,handler:function(e){return t=>{n4.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(od.KEY_INFO,t)}}},{event:od.KEYS_EXCHANGED,handler:function(e){return()=>{var t,r,i;n4.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()}`);let{channelConfig:n}=e.remote.state;if(n){let t=e.getKeyExchange().getKeyInfo().ecies;n.localKey=t.private,n.otherKey=t.otherPubKey,e.remote.state.channelConfig=n,null===(r=e.remote.state.storageManager)||void 0===r||r.persistChannelConfig(n).catch(e=>{})}e.emit(od.KEYS_EXCHANGED,{keysExchanged:null===(i=e.state.keyExchange)||void 0===i?void 0:i.areKeysExchanged(),isOriginator:e.state.isOriginator});let s={keyInfo:e.getKeyInfo()};e.emit(od.SERVICE_STATUS,s)}}}];function sy(e,t){n4.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} setting socket listeners for channel ${t}...`);let{socket:r}=e.state,{keyExchange:i}=e.state;r&&e.state.isOriginator&&(e.state.debug&&(null==r||r.io.on("error",t=>{n4.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=error`,t)}),null==r||r.io.on("reconnect",t=>{n4.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect`,t),sd(e).catch(e=>{})}),null==r||r.io.on("reconnect_error",t=>{n4.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_error`,t)}),null==r||r.io.on("reconnect_failed",()=>{n4.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_failed`)})),null==r||r.on("disconnect",t=>(n4.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${t}' begin recovery...`),void(n4.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${e.state.manualDisconnect}`,t),e.state.manualDisconnect||(e.emit(od.SOCKET_DISCONNECTED),sd(e).catch(e=>{})))))),sg.forEach(({event:i,handler:n})=>{null==r||r.on(`${i}-${t}`,n(e,t))}),sm.forEach(({event:t,handler:r})=>{null==i||i.on(t,r(e))}),e.state.setupChannelListeners=!0}class sv extends f.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;let{reconnect:t,communicationLayerPreference:r,communicationServerUrl:i,context:n,remote:s,logging:o}=e;this.state.resumed=t,this.state.context=n,this.state.isOriginator=s.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=!0===(null==o?void 0:o.serviceLayer),this.remote=s,!0===(null==o?void 0:o.serviceLayer)&&d().enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==sr&&!0===(null==o?void 0:o.plaintext),n4.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;let{otherPublicKey:t,ecies:r,logging:i}=this.options,n=this.state.communicationServerUrl;n4.SocketService(`[SocketService: initSocket()] Socket IO url: ${n}`),this.state.socket=eq(n,{autoConnect:!1,transports:si,withCredentials:!0}),function(e){if("undefined"!=typeof window&&"undefined"!=typeof document&&(n4.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,e),!e.state.focusListenerAdded)){let t=()=>{n4.SocketService("Document has focus --- reconnecting socket"),sd(e).catch(e=>{})};window.addEventListener("focus",t),e.state.focusListenerAdded=!0,e.state.removeFocusListener=()=>{window.removeEventListener("focus",t),e.state.focusListenerAdded=!1}}}(this);let s={communicationLayer:this,otherPublicKey:t,sendPublicKey:!1,context:null!==(e=this.state.context)&&void 0!==e?e:"",ecies:r,logging:i};this.state.keyExchange=new sl(s)}resetKeys(){var e;return n4.SocketService("[SocketService: resetKeys()] Resetting keys."),void(null===(e=this.state.keyExchange)||void 0===e||e.resetKeys())}createChannel(){return eH(this,void 0,void 0,function*(){return function(e){return eH(this,void 0,void 0,function*(){var t,r,i;if(n4.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),null===(t=e.state.socket)||void 0===t?void 0:t.connected)throw Error("socket already connected");null===(r=e.state.socket)||void 0===r||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;let n=_();e.state.channelId=n,sy(e,n),yield new Promise((t,r)=>{var i;null===(i=e.state.socket)||void 0===i||i.emit(od.JOIN_CHANNEL,{channelId:n,context:`${e.state.context}createChannel`,clientType:"dapp"},(i,n)=>eH(this,void 0,void 0,function*(){try{yield sc(e,i,n),t()}catch(e){r(e)}}))});let s=null===(i=e.state.keyExchange)||void 0===i?void 0:i.getKeyInfo();return{channelId:n,pubKey:(null==s?void 0:s.ecies.public)||"",privKey:(null==s?void 0:s.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:t=!1,authorized:r}){return function(e){return eH(this,arguments,void 0,function*({options:e,instance:t}){let{channelId:r,authorized:i,withKeyExchange:n}=e,{state:s,remote:o}=t,{isOriginator:a=!1,socket:l,keyExchange:c}=s,{channelConfig:u}=o.state;if(null==l?void 0:l.connected)throw Error("socket already connected");if(a&&(null==u?void 0:u.relayPersistence)){let{localKey:e,otherKey:t}=u;e&&t&&(null==c||c.setRelayPersistence({localKey:e,otherKey:t}))}return Object.assign(s,{manualDisconnect:!1,withKeyExchange:n,isOriginator:a,channelId:r}),null==l||l.connect(),sy(t,r),!a&&i&&(null==c||c.setKeysExchanged(!0),Object.assign(o.state,{ready:!0,authorized:!0})),new Promise(e=>{var n;let o=null===(n=null==c?void 0:c.getKeyInfo())||void 0===n?void 0:n.ecies.public;null==l||l.emit(od.JOIN_CHANNEL,{channelId:r,context:`${s.context}_connectToChannel`,clientType:a?"dapp":"wallet",publicKey:i&&!a?o:void 0},(r,i)=>eH(this,void 0,void 0,function*(){yield sc(t,r,i),e()}))})})}({options:{channelId:e,withKeyExchange:t,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e;null===(e=this.state.socket)||void 0===e||e.emit(od.MESSAGE,{id:this.state.channelId,context:this.state.context,message:{type:of.KEY_HANDSHAKE_CHECK,pubkey:this.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return eH(this,void 0,void 0,function*(){return function(e,t){return eH(this,void 0,void 0,function*(){var r,i,n,s;if(!e.state.channelId)throw n4.SocketService("handleSendMessage: no channelId - Create a channel first"),Error("Create a channel first");if(n4.SocketService(`[SocketService: handleSendMessage()] context=${e.state.context} areKeysExchanged=${null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged()}`,t),null===(i=null==t?void 0:t.type)||void 0===i?void 0:i.startsWith("key_handshake"))return n4.SocketService(`[SocketService: handleKeyHandshake()] context=${e.state.context}`,t),null===(s=e.state.socket)||void 0===s||s.emit(od.MESSAGE,{id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:t}),!0;!function(e,t){var r;if(!(null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged())&&!e.remote.state.relayPersistence)throw n4.SocketService(`[SocketService: validateKeyExchange()] context=${e.state.context} ERROR keys not exchanged`,t),Error("Keys not exchanged BBB")}(e,t),function(e,t){var r;let i=null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"",n=null==t?void 0:t.id;e.state.isOriginator&&n&&(e.state.rpcMethodTracker[n]={id:n,timestamp:Date.now(),method:i},e.emit(od.RPC_UPDATE,e.state.rpcMethodTracker[n]))}(e,t);let o=yield sp(e,t);return e.remote.state.analytics&&e.remote.state.isOriginator&&t.method&&sf.includes(t.method.toLowerCase())&&n7({id:null!==(n=e.remote.state.channelId)&&void 0!==n?n:"",event:om.SDK_RPC_REQUEST,params:{method:t.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch(e=>{}),e.remote.state.isOriginator&&t.method&&so(t.method)&&p.analytics.track("sdk_action_requested",{action:t.method}),(function(e,t){return eH(this,void 0,void 0,function*(){var r;let i=null==t?void 0:t.id,n=null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"";if(e.state.isOriginator&&i)try{let r=sh(i,e.state.rpcMethodTracker,200).then(e=>({type:ov.RPC_CHECK,result:e})),s=eH(this,void 0,void 0,function*(){let t=yield eH(void 0,[{instance:e,rpcId:i}],void 0,function*({rpcId:e,instance:t}){for(;t.state.lastRpcId===e||void 0===t.state.lastRpcId;)yield su(200);return t.state.lastRpcId}),r=yield sh(t,e.state.rpcMethodTracker,200);return{type:ov.SKIPPED_RPC,result:r}}),o=yield Promise.race([r,s]);if(o.type===ov.RPC_CHECK){let e=o.result;n4.SocketService(`[SocketService:handleRpcReplies()] id=${t.id} ${n} ( ${e.elapsedTime} ms)`,e.result)}else{if(o.type!==ov.SKIPPED_RPC)throw Error(`Error handling RPC replies for ${i}`);{let t=Object.assign(Object.assign({},e.state.rpcMethodTracker[i]),{error:Error("SDK_CONNECTION_ISSUE")});e.emit(od.RPC_UPDATE,t);let r={data:Object.assign(Object.assign({},t),{jsonrpc:"2.0"}),name:"metamask-provider"};e.emit(od.MESSAGE,{message:r})}}}catch(e){throw e}})})(e,t).catch(e=>{}),o})}(this,e)})}ping(){return function(e){return eH(this,void 0,void 0,function*(){var t,r;n4.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()}`),null===(r=e.state.socket)||void 0===r||r.emit(og.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return eH(this,void 0,void 0,function*(){var t,r;n4.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,(null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged())&&(yield e.sendMessage({type:og.PAUSE})),null===(r=e.state.socket)||void 0===r||r.disconnect()})}(this)}isConnected(){var e;return null===(e=this.state.socket)||void 0===e?void 0:e.connected}resume(){return function(e){return eH(this,void 0,void 0,function*(){let{state:t,remote:r}=e,{socket:i,channelId:n,context:s,keyExchange:o,isOriginator:a}=t,{isOriginator:l}=r.state;if(n4.SocketService(`[SocketService: resume()] channelId=${n} context=${s} connected=${null==i?void 0:i.connected} manualDisconnect=${t.manualDisconnect} resumed=${t.resumed} keysExchanged=${null==o?void 0:o.areKeysExchanged()}`),!n)throw n4.SocketService("[SocketService: resume()] channelId is not defined"),Error("ChannelId is not defined");(null==i?void 0:i.connected)?(n4.SocketService("[SocketService: resume()] already connected."),i.emit(og.PING,{id:n,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||(null==o?void 0:o.areKeysExchanged())||(a?yield e.sendMessage({type:og.READY}):null==o||o.start({isOriginator:!1}))):(null==i||i.connect(),n4.SocketService(`[SocketService: resume()] after connecting socket --> connected=${null==i?void 0:i.connected}`),null==i||i.emit(od.JOIN_CHANNEL,{channelId:n,context:`${s}_resume`,clientType:l?"dapp":"wallet"},(t,r)=>eH(this,void 0,void 0,function*(){try{yield sc(e,t,r)}catch(e){}}))),t.manualDisconnect=!1,t.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){var t,r,i,n,s;n4.SocketService(`[SocketService: disconnect()] context=${this.state.context}`,e),(null==e?void 0:e.terminate)&&(null===(r=(t=this.state).removeFocusListener)||void 0===r||r.call(t),this.state.channelId=e.channelId,null===(i=this.state.socket)||void 0===i||i.removeAllListeners(),null===(n=this.state.keyExchange)||void 0===n||n.clean(),this.remote.state.ready=!1,this.state.socket=void 0,this.state.rpcMethodTracker={}),this.state.manualDisconnect=!0,null===(s=this.state.socket)||void 0===s||s.disconnect()}}function sb({communicationLayerPreference:e,otherPublicKey:t,reconnect:r,ecies:i,communicationServerUrl:n=sr,instance:s}){var o,a,l,c,u,h,d,f,g,m,y;let{state:v}=s;if(n4.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(v,null,2)),e!==ob.SOCKET)throw Error("Invalid communication protocol");v.communicationLayer=new sv({communicationLayerPreference:e,otherPublicKey:t,reconnect:r,transports:v.transports,communicationServerUrl:n,context:v.context,ecies:i,logging:v.logging,remote:s});let b="undefined"!=typeof document&&document.URL||"",w="undefined"!=typeof document&&document.title||"";(null===(o=v.dappMetadata)||void 0===o?void 0:o.url)&&(b=v.dappMetadata.url),(null===(a=v.dappMetadata)||void 0===a?void 0:a.name)&&(w=v.dappMetadata.name);let E=null!==(h=null!==(c=null===(l=v.dappMetadata)||void 0===l?void 0:l.name)&&void 0!==c?c:null===(u=v.dappMetadata)||void 0===u?void 0:u.url)&&void 0!==h?h:"N/A",_="undefined"!=typeof window&&void 0!==window.location&&null!==(d=window.location.hostname)&&void 0!==d?d:E,C={url:b,title:w,source:null===(f=v.dappMetadata)||void 0===f?void 0:f.source,dappId:_,anonId:v.anonId,icon:(null===(g=v.dappMetadata)||void 0===g?void 0:g.iconUrl)||(null===(m=v.dappMetadata)||void 0===m?void 0:m.base64Icon),platform:v.platformType,apiVersion:st.version,connector:null===(y=v.dappMetadata)||void 0===y?void 0:y.connector};for(let[t,r]of(v.originatorInfo=C,Object.entries({[od.AUTHORIZED]:function(e){return()=>eH(this,void 0,void 0,function*(){var t,r,i;let{state:n}=e;if(n.authorized)return;yield eH(this,void 0,void 0,function*(){for(;!n.walletInfo;)yield su(500)});let s="7.3".localeCompare((null===(t=n.walletInfo)||void 0===t?void 0:t.version)||"");if(n4.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${null===(r=n.walletInfo)||void 0===r?void 0:r.version} compareValue=${s}`),1!==s)return;let o=n.platformType===ow.MobileWeb||n.platformType===ow.ReactNative||n.platformType===ow.MetaMaskMobileWebview;n4.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${n.platformType} secure=${o} channel=${n.channelId} walletVersion=${null===(i=n.walletInfo)||void 0===i?void 0:i.version}`),o&&(n.authorized=!0,e.emit(od.AUTHORIZED))})}(s),[od.MESSAGE]:e=>{let t=e;e.message&&(t=t.message),function(e,t){let{state:r}=t;if(n4.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${r.context} on 'message' typeof=${typeof e}`,e),t.state.ready=!0,r.isOriginator||e.type!==og.ORIGINATOR_INFO){if(r.isOriginator&&e.type===og.WALLET_INFO)!function(e,t){let{state:r}=e;r.walletInfo=t.walletInfo,r.paused=!1}(t,e);else{if(r.isOriginator&&e.type===og.WALLET_INIT)(function(e,t){return eH(this,void 0,void 0,function*(){var r,i,n;let{state:s}=e;if(s.isOriginator){let s=t.data||{};if("object"==typeof s&&"accounts"in s&&"chainId"in s&&"walletKey"in s)try{let{channelConfig:t}=e.state;if(n4.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(t,null,2)),t){let o=s.accounts,a=s.chainId,l=s.walletKey,c,u=!1;"deeplinkProtocol"in s&&(u=!!s.deeplinkProtocol,e.state.deeplinkProtocolAvailable=u),"walletVersion"in s&&(c=s.walletVersion),yield null===(r=e.state.storageManager)||void 0===r?void 0:r.persistChannelConfig(Object.assign(Object.assign({},t),{otherKey:l,walletVersion:c,deeplinkProtocolAvailable:u,relayPersistence:!0})),yield null===(i=e.state.storageManager)||void 0===i?void 0:i.persistAccounts(o),yield null===(n=e.state.storageManager)||void 0===n?void 0:n.persistChainId(a)}e.emit(od.WALLET_INIT,{accounts:s.accounts,chainId:s.chainId})}catch(e){}}})})(t,e).catch(e=>{n4.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===og.TERMINATE)(function(e){return eH(this,void 0,void 0,function*(){let{state:t}=e;t.isOriginator&&(yield sw({options:{terminate:!0,sendMessage:!1},instance:e}),e.emit(od.TERMINATE))})})(t).catch(e=>{n4.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===og.PAUSE)!function(e){let{state:t}=e;t.paused=!0,e.setConnectionStatus(oh.PAUSED)}(t);else if(e.type===og.READY&&r.isOriginator)!function(e){let{state:t}=e;e.setConnectionStatus(oh.LINKED);let r=t.paused;t.paused=!1,e.emit(od.CLIENTS_READY,{isOriginator:t.isOriginator,walletInfo:t.walletInfo}),r&&(t.authorized=!0,e.emit(od.AUTHORIZED))}(t);else{if(e.type===og.OTP&&r.isOriginator)return void function(e,t){var r;let{state:i}=e;e.emit(od.OTP,t.otpAnswer),1==="6.6".localeCompare((null===(r=i.walletInfo)||void 0===r?void 0:r.version)||"")&&e.emit(od.SDK_RPC_CALL,{method:sn.ETH_REQUESTACCOUNTS,params:[]})}(t,e);e.type===og.AUTHORIZED&&r.isOriginator&&function(e){let{state:t}=e;t.authorized=!0,e.emit(od.AUTHORIZED)}(t)}t.emit(od.MESSAGE,e)}}else!function(e,t){var r;let{state:i}=e;null===(r=i.communicationLayer)||void 0===r||r.sendMessage({type:og.WALLET_INFO,walletInfo:i.walletInfo}),i.originatorInfo=t.originatorInfo||t.originator,e.emit(od.CLIENTS_READY,{isOriginator:i.isOriginator,originatorInfo:i.originatorInfo}),i.paused=!1}(t,e)}(t,s)},[od.CHANNEL_PERSISTENCE]:function(e){return()=>eH(this,void 0,void 0,function*(){var t,r,i,n,s,o,a;let{state:l}=e;n4.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${l.context}`),e.state.ready=!0,e.state.clientsConnected=!0,e.state.authorized=!0,e.state.relayPersistence=!0,null===(t=e.state.communicationLayer)||void 0===t||t.getKeyExchange().setKeysExchanged(!0),e.emit(od.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),e.emit(od.AUTHORIZED),e.emit(od.CLIENTS_READY),e.emit(od.CHANNEL_PERSISTENCE);try{l.channelConfig=Object.assign(Object.assign({},l.channelConfig),{localKey:null===(r=l.communicationLayer)||void 0===r?void 0:r.getKeyExchange().getKeyInfo().ecies.private,otherKey:null===(i=l.communicationLayer)||void 0===i?void 0:i.getKeyExchange().getOtherPublicKey(),channelId:null!==(n=l.channelId)&&void 0!==n?n:"",validUntil:null!==(o=null===(s=l.channelConfig)||void 0===s?void 0:s.validUntil)&&void 0!==o?o:6048e5,relayPersistence:!0}),yield null===(a=l.storageManager)||void 0===a?void 0:a.persistChannelConfig(l.channelConfig)}catch(e){}})}(s),[od.CLIENTS_CONNECTED]:()=>{var t,r,i,n;let{state:o}=s;n4.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${null===(r=null===(t=o.communicationLayer)||void 0===t?void 0:t.getKeyInfo())||void 0===r?void 0:r.keysExchanged}`),o.analytics&&n7(Object.assign(Object.assign({id:null!==(i=o.channelId)&&void 0!==i?i:"",event:o.reconnection?om.RECONNECT:o.isOriginator?om.REQUEST:om.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:null===(n=o.walletInfo)||void 0===n?void 0:n.version,commLayerVersion:st.version}),o.communicationServerUrl).catch(e=>{}),o.isOriginator&&!o.reconnection&&p.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,s.emit(od.CLIENTS_CONNECTED)},[od.KEYS_EXCHANGED]:t=>{var r,i,n,o,a,l,c,u;let{state:h}=s;if(n4.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${h.context} on commLayer.'keys_exchanged' channel=${h.channelId}`,t),null===(i=null===(r=h.communicationLayer)||void 0===r?void 0:r.getKeyInfo())||void 0===i?void 0:i.keysExchanged){let e=Object.assign(Object.assign({},h.channelConfig),{channelId:null!==(n=h.channelId)&&void 0!==n?n:"",validUntil:(null===(o=h.channelConfig)||void 0===o?void 0:o.validUntil)||6048e5,localKey:h.communicationLayer.getKeyInfo().ecies.private,otherKey:h.communicationLayer.getKeyInfo().ecies.otherPubKey});null===(a=h.storageManager)||void 0===a||a.persistChannelConfig(e).catch(e=>{}),s.setConnectionStatus(oh.LINKED)}(function(e,t){var r,i,n,s,o,a,l,c;let{state:u}=e;n4.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${u.channelId}`,t);let h=Object.assign(Object.assign({},u.channelConfig),{channelId:null!==(r=u.channelId)&&void 0!==r?r:"",validUntil:null!==(n=null===(i=u.channelConfig)||void 0===i?void 0:i.validUntil)&&void 0!==n?n:0,relayPersistence:u.relayPersistence,localKey:null===(o=null===(s=u.communicationLayer)||void 0===s?void 0:s.state.keyExchange)||void 0===o?void 0:o.getKeyInfo().ecies.private,otherKey:null===(l=null===(a=u.communicationLayer)||void 0===a?void 0:a.state.keyExchange)||void 0===l?void 0:l.getKeyInfo().ecies.otherPubKey,lastActive:t.getTime()});null===(c=u.storageManager)||void 0===c||c.persistChannelConfig(h)})(s,new Date),h.analytics&&h.channelId&&n7(Object.assign(Object.assign({id:h.channelId,event:t.isOriginator?om.CONNECTED:om.CONNECTED_MOBILE},h.originatorInfo),{sdkVersion:h.sdkVersion,commLayer:e,commLayerVersion:st.version,walletVersion:null===(l=h.walletInfo)||void 0===l?void 0:l.version}),h.communicationServerUrl).catch(e=>{}),h.isOriginator=t.isOriginator,t.isOriginator||(null===(c=h.communicationLayer)||void 0===c||c.sendMessage({type:og.READY}),h.ready=!0,h.paused=!1),t.isOriginator&&!h.originatorInfoSent&&(null===(u=h.communicationLayer)||void 0===u||u.sendMessage({type:og.ORIGINATOR_INFO,originatorInfo:h.originatorInfo,originator:h.originatorInfo}),h.originatorInfoSent=!0)},[od.SOCKET_DISCONNECTED]:()=>{let{state:e}=s;n4.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1},[od.SOCKET_RECONNECT]:()=>{let{state:e}=s;n4.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,sa(e),s.emitServiceStatusEvent({context:"socket_reconnect"})},[od.CLIENTS_DISCONNECTED]:e=>{let{state:t}=s;n4.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${t.context} on 'clients_disconnected' channelId=${e}`),t.relayPersistence||(t.clientsConnected=!1,t.ready=!1,t.authorized=!1),s.emit(od.CLIENTS_DISCONNECTED,t.channelId),s.setConnectionStatus(oh.DISCONNECTED)},[od.KEY_INFO]:()=>{},[od.CHANNEL_CREATED]:e=>{let{state:t}=s;n4.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${t.context} on 'channel_created' channelId=${e}`),s.emit(od.CHANNEL_CREATED,e)},[od.CLIENTS_WAITING]:e=>{var t;let{state:r}=s;if(n4.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),s.setConnectionStatus(oh.WAITING),s.emit(od.CLIENTS_WAITING,e),r.originatorConnectStarted){n4.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);let e=(null===(t=r.autoConnectOptions)||void 0===t?void 0:t.timeout)||3e3,i=setTimeout(()=>{n4.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${e}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||s.setConnectionStatus(oh.TIMEOUT),clearTimeout(i)},e)}},[od.RPC_UPDATE]:e=>{s.emit(od.RPC_UPDATE,e)}})))try{v.communicationLayer.on(t,r)}catch(e){}}function sw(e){return eH(this,arguments,void 0,function*({options:e,instance:t}){let{state:r}=t;return n4.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((i,n)=>{var s,o,a,l,c,u;(null==e?void 0:e.terminate)?(t.state.ready&&n7({id:null!==(s=t.state.channelId)&&void 0!==s?s:"",event:om.TERMINATED},t.state.communicationServerUrl).catch(e=>{}),r.ready=!1,r.paused=!1,null===(o=r.storageManager)||void 0===o||o.terminate(null!==(a=r.channelId)&&void 0!==a?a:""),t.state.terminated=!0,e.sendMessage?(null===(l=r.communicationLayer)||void 0===l?void 0:l.getKeyInfo().keysExchanged)&&t.state.communicationLayer&&sp(t.state.communicationLayer,{type:og.TERMINATE}).then(()=>{i(!0)}).catch(e=>{n(e)}):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=_(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,null===(c=r.communicationLayer)||void 0===c||c.disconnect(e),t.setConnectionStatus(oh.TERMINATED)):(null===(u=r.communicationLayer)||void 0===u||u.disconnect(e),t.setConnectionStatus(oh.DISCONNECTED),i(!0))})})}(ob||(ob={})).SOCKET="socket",(oc=ow||(ow={})).NonBrowser="nodejs",oc.MetaMaskMobileWebview="in-app-browser",oc.DesktopWeb="web-desktop",oc.MobileWeb="web-mobile",oc.ReactNative="react-native";class sE extends f.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:sr,context:"",persist:!1,clientsConnected:!1,sessionDuration:6048e5,originatorConnectStarted:!1,debug:!1,_connectionStatus:oh.DISCONNECTED},this._options=e;let{anonId:t,platformType:r,communicationLayerPreference:i,otherPublicKey:n,reconnect:s,walletInfo:o,dappMetadata:a,protocolVersion:l,transports:c,context:u,relayPersistence:h,ecies:p,analytics:f=!1,storage:g,sdkVersion:m,communicationServerUrl:y=sr,logging:v,autoConnect:b={timeout:3e3}}=e;this.state.anonId=t,this.state.otherPublicKey=n,this.state.dappMetadata=a,this.state.walletInfo=o,this.state.transports=c,this.state.platformType=r,this.state.analytics=f,this.state.protocolVersion=null!=l?l:1,this.state.isOriginator=!n,this.state.relayPersistence=h,this.state.communicationServerUrl=y,this.state.context=u,this.state.terminated=!1,this.state.sdkVersion=m,this.setMaxListeners(50),this.setConnectionStatus(oh.DISCONNECTED),(null==g?void 0:g.duration)&&(this.state.sessionDuration=6048e5),this.state.storageOptions=g,this.state.autoConnectOptions=b,this.state.debug=!0===(null==v?void 0:v.remoteLayer),!0===(null==v?void 0:v.remoteLayer)&&d().enable("RemoteCommunication:Layer"),!0===(null==v?void 0:v.serviceLayer)&&d().enable("SocketService:Layer"),!0===(null==v?void 0:v.eciesLayer)&&d().enable("ECIES:Layer"),!0===(null==v?void 0:v.keyExchangeLayer)&&d().enable("KeyExchange:Layer"),this.state.logging=v,(null==g?void 0:g.storageManager)&&(this.state.storageManager=g.storageManager),n4.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${h} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${n} reconnect=${s}`),this.state.isOriginator||sb({communicationLayerPreference:i,otherPublicKey:n,reconnect:s,ecies:p,communicationServerUrl:y,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return eH(this,void 0,void 0,function*(){var e;if(this.state.storageManager){let t=yield this.state.storageManager.getPersistedChannelConfig({});t&&(this.state.channelConfig=t,this.state.channelId=t.channelId,this.state.deeplinkProtocolAvailable=null!==(e=t.deeplinkProtocolAvailable)&&void 0!==e&&e,t.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(oh.LINKED),yield this.connectToChannel({channelId:t.channelId})))}sb({communicationLayerPreference:ob.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return eH(this,void 0,void 0,function*(){return yield function(e){return eH(this,void 0,void 0,function*(){var t;let{state:r}=e;if(!r.storageManager)return void n4.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");let i=yield r.storageManager.getPersistedChannelConfig({});if(n4.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),null===(t=r.communicationLayer)||void 0===t?void 0:t.isConnected())return n4.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=null==i?void 0:i.channelId,r.reconnection=!0,i;n4.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return eH(this,void 0,void 0,function*(){return function(e){return eH(this,void 0,void 0,function*(){var t,r,i,n,s,o;if(!e.communicationLayer)throw Error("communication layer not initialized");if(e.ready)throw Error("Channel already connected");if(e.channelId&&(null===(t=e.communicationLayer)||void 0===t?void 0:t.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),null===(r=e.storageManager)||void 0===r||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:null===(n=null===(i=e.communicationLayer)||void 0===i?void 0:i.getKeyInfo())||void 0===n?void 0:n.ecies.private,pubKey:null===(o=null===(s=e.communicationLayer)||void 0===s?void 0:s.getKeyInfo())||void 0===o?void 0:o.ecies.public};n4.RemoteCommunication("[RemoteCommunication: generateChannelId()]");let a=yield e.communicationLayer.createChannel();n4.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",a);let l=Object.assign(Object.assign({},e.channelConfig),{channelId:a.channelId,localKey:a.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=a.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:a.pubKey,privKey:a.privKey}})}(this.state)})}clean(){return sa(this.state)}connectToChannel({channelId:e,withKeyExchange:t,authorized:r}){return function(e){return eH(this,arguments,void 0,function*({channelId:e,withKeyExchange:t,authorized:r,state:i}){var n,s,o;if(!v(e))throw n4.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${e}`),Error(`Invalid channel ${e}`);if(n4.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} channelId=${e} withKeyExchange=${t}`),null===(n=i.communicationLayer)||void 0===n?void 0:n.isConnected())return void n4.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} already connected - interrupt connection.`);i.channelId=e,yield null===(s=i.communicationLayer)||void 0===s?void 0:s.connectToChannel({channelId:e,authorized:r,withKeyExchange:t});let a=Object.assign(Object.assign({},i.channelConfig),{channelId:e,validUntil:Date.now()+i.sessionDuration});i.channelConfig=a,null===(o=i.storageManager)||void 0===o||o.persistChannelConfig(a)})}({channelId:e,authorized:r,withKeyExchange:t,state:this.state})}sendMessage(e){return eH(this,void 0,void 0,function*(){let t=this.state.isOriginator&&e.method&&so(e.method);t&&p.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(e,t){return eH(this,void 0,void 0,function*(){var r,i;let{state:n}=e;n4.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${n.context} paused=${n.paused} ready=${n.ready} relayPersistence=${n.relayPersistence} authorized=${n.authorized} socket=${null===(r=n.communicationLayer)||void 0===r?void 0:r.isConnected()} clientsConnected=${n.clientsConnected} status=${n._connectionStatus}`,t),n.relayPersistence||n.ready&&(null===(i=n.communicationLayer)||void 0===i?void 0:i.isConnected())&&n.clientsConnected||(n4.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${n.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(t=>{e.once(od.CLIENTS_READY,t)}),n4.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${n.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(e,t){return eH(this,void 0,void 0,function*(){return new Promise(r=>{var i;let{state:n}=e;n4.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${n.context} ready=${n.ready} authorized=${n.authorized} method=${t.method}`),!n.isOriginator||n.authorized||n.relayPersistence?null===(i=n.communicationLayer)||void 0===i||i.sendMessage(t).then(e=>{r(e)}).catch(e=>{r(!1)}):e.once(od.AUTHORIZED,()=>{var e;n4.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${n.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),null===(e=n.communicationLayer)||void 0===e||e.sendMessage(t).then(e=>{r(e)}).catch(e=>{r(!1)})})})})}(e,t)}catch(e){throw e}})}(this,e)}catch(r){throw t&&p.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return eH(this,void 0,void 0,function*(){return function(e){return eH(this,void 0,void 0,function*(){var t;let r=yield null===(t=e.storageManager)||void 0===t?void 0:t.getPersistedChannelConfig();n4.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return eH(this,void 0,void 0,function*(){var e;n4.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield null===(e=this.state.communicationLayer)||void 0===e?void 0:e.ping()})}testLogger(){n4.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),n4.SocketService(`testLogger() channel=${this.state.channelId}`),n4.Ecies(`testLogger() channel=${this.state.channelId}`),n4.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;n4.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),null===(e=this.state.communicationLayer)||void 0===e||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(od.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(od.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getKeyInfo()}resetKeys(){var e;null===(e=this.state.communicationLayer)||void 0===e||e.resetKeys()}setOtherPublicKey(e){var t;let r=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange();if(!r)throw Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return eH(this,void 0,void 0,function*(){var e;n4.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield null===(e=this.state.communicationLayer)||void 0===e?void 0:e.pause(),this.setConnectionStatus(oh.PAUSED)})}getVersion(){return st.version}hasRelayPersistence(){var e;return null!==(e=this.state.relayPersistence)&&void 0!==e&&e}resume(){return eH(this,void 0,void 0,function*(){return function(e){return eH(this,void 0,void 0,function*(){var t;let{state:r}=e;n4.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield null===(t=r.communicationLayer)||void 0===t?void 0:t.resume(),e.setConnectionStatus(oh.LINKED)})}(this)})}encrypt(e){var t,r,i;let n=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange(),s=null==n?void 0:n.getOtherPublicKey();if(!s)throw Error("KeyExchange not completed");return null===(i=null===(r=this.state.communicationLayer)||void 0===r?void 0:r.state.eciesInstance)||void 0===i?void 0:i.encrypt(e,s)}decrypt(e){var t,r,i;if(!(null===(t=this.state.communicationLayer)||void 0===t?void 0:t.state.eciesInstance))throw Error("ECIES instance is not initialized");return null===(i=null===(r=this.state.communicationLayer)||void 0===r?void 0:r.state.eciesInstance)||void 0===i?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(e){return eH(this,arguments,void 0,function*({channelId:e,state:t}){var r,i,n;if(!v(e))throw n4.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${t.context} invalid channel channelId=${e}`),Error(`Invalid channel ${e}`);if(t.isOriginator)return void n4.RemoteCommunication(`[RemoteCommunication: reject()] context=${t.context} isOriginator=${t.isOriginator} channelId=${e}`);let{socket:s}=null!==(i=null===(r=t.communicationLayer)||void 0===r?void 0:r.state)&&void 0!==i?i:{};(null==s?void 0:s.connected)||(n4.RemoteCommunication(`[RemoteCommunication: reject()] context=${t.context} socket already connected`),null==s||s.connect()),n7(Object.assign(Object.assign({id:e,event:om.REJECTED},t.originatorInfo),{sdkVersion:t.sdkVersion,commLayerVersion:st.version,walletVersion:null===(n=t.walletInfo)||void 0===n?void 0:n.version}),t.communicationServerUrl).catch(e=>{}),yield new Promise((r,i)=>{null==s||s.emit(od.REJECTED,{channelId:e},(e,n)=>{n4.RemoteCommunication(`[RemoteCommunication: reject()] context=${t.context} socket=${null==s?void 0:s.id}`,{error:e,response:n}),e?i(e):r(n)})})})}({channelId:e,state:this.state})}disconnect(e){return eH(this,void 0,void 0,function*(){return sw({options:e,instance:this})})}}(ou=oE||(oE={})).RENEW="renew",ou.LINK="link";var s_={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{chainIdDeprecation:"MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",networkVersionDeprecation:"MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",selectedAddressDeprecation:"MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},rpc:{ethDecryptDeprecation:"MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",ethGetEncryptionPublicKeyDeprecation:"MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",walletWatchAssetNFTExperimental:"MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}},sC=Math.floor(4294967295*Math.random()),sS=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},sI=(e,t,r)=>(sS(e,t,"read from private field"),r?r.call(e):t.get(e)),sx=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},sA=(e,t,r,i)=>(sS(e,t,"write to private field"),t.set(e,r),r),sk=(e,t,r)=>(sS(e,t,"access private method"),r),sO={invalidRequest:-32600,internal:-32603},sP={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function sR(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}var sN=(e,t)=>Object.hasOwnProperty.call(e,t);class sT extends TypeError{constructor(e,t){let r;let{message:i,explanation:n,...s}=e,{path:o}=e,a=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function sM(e){return"object"==typeof e&&null!=e}function sL(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*sD(e,t,r,i){var n;for(let s of(sM(n=e)&&"function"==typeof n[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:n,branch:s}=t,{type:o}=r,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${sL(i)}\``}=e;return{value:i,type:o,refinement:a,key:n[n.length-1],path:n,branch:s,...e,message:l}}(s,t,r,i);e&&(yield e)}}function*sB(e,t,r={}){let{path:i=[],branch:n=[e],coerce:s=!1,mask:o=!1}=r,a={path:i,branch:n};if(s&&(e=t.coercer(e,a),o&&"type"!==t.type&&sM(t.schema)&&sM(e)&&!Array.isArray(e)))for(let r in e)void 0===t.schema[r]&&delete e[r];let l="valid";for(let i of t.validator(e,a))i.explanation=r.message,l="not_valid",yield[i,void 0];for(let[c,u,h]of t.entries(e,a))for(let t of sB(u,h,{path:void 0===c?i:[...i,c],branch:void 0===c?n:[...n,u],coerce:s,mask:o,message:r.message}))t[0]?(l=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):s&&(u=t[1],void 0===c?e=u:e instanceof Map?e.set(c,u):e instanceof Set?e.add(u):sM(e)&&(void 0!==u||c in e)&&(e[c]=u));if("not_valid"!==l)for(let i of t.refiner(e,a))i.explanation=r.message,l="not_refined",yield[i,void 0];"valid"===l&&(yield[void 0,e])}class sj{constructor(e){let{type:t,schema:r,validator:i,refiner:n,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=i?(e,t)=>sD(i(e,t),t,this,e):()=>[],this.refiner=n?(e,t)=>sD(n(e,t),t,this,e):()=>[]}assert(e,t){return s$(e,this,t)}create(e,t){return sU(e,this,t)}is(e){return sq(e,this)}mask(e,t){return function(e,t,r){let i=sH(e,t,{coerce:!0,mask:!0,message:r});if(i[0])throw i[0];return i[1]}(e,this,t)}validate(e,t={}){return sH(e,this,t)}}function s$(e,t,r){let i=sH(e,t,{message:r});if(i[0])throw i[0]}function sU(e,t,r){let i=sH(e,t,{coerce:!0,message:r});if(i[0])throw i[0];return i[1]}function sq(e,t){return!sH(e,t)[0]}function sH(e,t,r={}){let i=sB(e,t,r),n=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(i);return n[0]?[new sT(n[0],function*(){for(let e of i)e[0]&&(yield e[0])}),void 0]:[void 0,n[1]]}function sF(e,t){return new sj({type:e,schema:null,validator:t})}function sz(e){let t;return new sj({type:"lazy",schema:null,*entries(r,i){t??(t=e()),yield*t.entries(r,i)},validator:(r,i)=>(t??(t=e()),t.validator(r,i)),coercer:(r,i)=>(t??(t=e()),t.coercer(r,i)),refiner:(r,i)=>(t??(t=e()),t.refiner(r,i))})}function sW(e){return new sj({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,i]of t.entries())yield[r,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${sL(e)}`})}function sK(e){let t=sL(e),r=typeof e;return new sj({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${sL(r)}`})}function sV(){return sF("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${sL(e)}`)}function sG(e){let t=e?Object.keys(e):[],r=sF("never",()=>!1);return new sj({type:"object",schema:e||null,*entries(i){if(e&&sM(i)){let n=new Set(Object.keys(i));for(let r of t)n.delete(r),yield[r,i[r],e[r]];for(let e of n)yield[e,i[e],r]}},validator:e=>sM(e)||`Expected an object, but received: ${sL(e)}`,coercer:e=>sM(e)?{...e}:e})}function sZ(e){return new sj({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function sJ(e,t){return new sj({type:"record",schema:null,*entries(r){if(sM(r))for(let i in r){let n=r[i];yield[i,i,e],yield[i,n,t]}},validator:e=>sM(e)||`Expected an object, but received: ${sL(e)}`})}function sY(){return sF("string",e=>"string"==typeof e||`Expected a string, but received: ${sL(e)}`)}function sX(e){let t=e.map(e=>e.type).join(" | ");return new sj({type:"union",schema:null,coercer(t){for(let r of e){let[e,i]=r.validate(t,{coerce:!0});if(!e)return i}return t},validator(r,i){let n=[];for(let t of e){let[...e]=sB(r,t,i),[s]=e;if(!s[0])return[];for(let[t]of e)t&&n.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${sL(r)}`,...n]}})}var sQ=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function s0(){throw Error("setTimeout has not been defined")}function s1(){throw Error("clearTimeout has not been defined")}var s2=s0,s3=s1;function s5(e){if(s2===setTimeout)return setTimeout(e,0);if((s2===s0||!s2)&&setTimeout)return s2=setTimeout,setTimeout(e,0);try{return s2(e,0)}catch(t){try{return s2.call(null,e,0)}catch(t){return s2.call(this,e,0)}}}"function"==typeof eF.setTimeout&&(s2=setTimeout),"function"==typeof eF.clearTimeout&&(s3=clearTimeout);var s4,s6,s8,s9,s7,oe,ot,or,oi,on,os,oo,oa,ol,oc,ou,oh,od,op,of,og,om,oy,ov,ob,ow,oE,o_,oC=[],oS=!1,oI=-1;function ox(){oS&&o_&&(oS=!1,o_.length?oC=o_.concat(oC):oI=-1,oC.length&&oA())}function oA(){if(!oS){var e=s5(ox);oS=!0;for(var t=oC.length;t;){for(o_=oC,oC=[];++oI<t;)o_&&o_[oI].run();oI=-1,t=oC.length}o_=null,oS=!1,function(e){if(s3===clearTimeout)return clearTimeout(e);if((s3===s1||!s3)&&clearTimeout)return s3=clearTimeout,clearTimeout(e);try{s3(e)}catch(t){try{return s3.call(null,e)}catch(t){return s3.call(this,e)}}}(e)}}function ok(e,t){this.fun=e,this.array=t}function oO(){}ok.prototype.run=function(){this.fun.apply(null,this.array)};var oP=eF.performance||{},oR=oP.now||oP.mozNow||oP.msNow||oP.oNow||oP.webkitNow||function(){return(new Date).getTime()},oN=new Date,oT={nextTick:function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];oC.push(new ok(e,t)),1!==oC.length||oS||s5(oA)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:oO,addListener:oO,once:oO,off:oO,removeListener:oO,removeAllListeners:oO,emit:oO,binding:function(e){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*oR.call(oP),r=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(r-=e[0],(i-=e[1])<0&&(r--,i+=1e9)),[r,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-oN)/1e3}},oM=e=>sG(e);function oL({path:e,branch:t}){let r=e[e.length-1];return sN(t[t.length-2],r)}function oD(e){return new sj({...e,type:`optional ${e.type}`,validator:(t,r)=>!oL(r)||e.validator(t,r),refiner:(t,r)=>!oL(r)||e.refiner(t,r)})}var oB,oj,o$=sX([sK(null),sF("boolean",e=>"boolean"==typeof e),sF("finite number",e=>sq(e,sV())&&Number.isFinite(e)),sY(),sW(sz(()=>o$)),sJ(sY(),sz(()=>o$))]),oU=(oB=sF("any",()=>!0),oj=e=>((function(e,t,r="Assertion failed",i=sQ){try{s$(e,t)}catch(e){var n;throw n=`${r}: ${("object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?e.message:null==e?"":String(e)).replace(/\.$/u,"")}.`,"string"==typeof i?.prototype?.constructor?.name?new i({message:n}):i({message:n})}})(e,o$),JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))),new sj({...o$,coercer:(e,t)=>sq(e,oB)?o$.coercer(oj(e,t),t):o$.coercer(e,t)}));function oq(e){try{return sU(e,oU),!0}catch{return!1}}var oH=sK("2.0"),oF=new sj({...am=sX([sV(),sY()]),validator:(e,t)=>null===e||am.validator(e,t),refiner:(e,t)=>null===e||am.refiner(e,t)}),oz=oM({code:sF("integer",e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${sL(e)}`),message:sY(),data:oD(oU),stack:oD(sY())}),oW=sX([sJ(sY(),oU),sW(oU)]),oK=oM({id:oF,jsonrpc:oH,method:sY(),params:oD(oW)}),oV=oM({jsonrpc:oH,method:sY(),params:oD(oW)});sG({id:oF,jsonrpc:oH,result:sZ(sF("unknown",()=>!0)),error:sZ(oz)}),sX([oM({id:oF,jsonrpc:oH,result:oU}),oM({id:oF,jsonrpc:oH,error:oz})]);var oG=sO.internal,oZ={code:oG,message:oJ(oG)};function oJ(e,t="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){let t=e.toString();if(sN(sP,t))return sP[t].message;if(e>=-32099&&e<=-32e3)return"Unspecified server error."}return t}function oY(e,{fallbackError:t=oZ,shouldIncludeStack:r=!0}={}){if(!sq(t,oz))throw Error("Must provide fallback error with integer number code and string message.");let i=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(sq(e,oz))return e;let r=oX(e);return{...t,data:{cause:r}}}(e,t);return r||delete i.stack,i}function oX(e){return Array.isArray(e)?e.map(e=>oq(e)?e:sR(e)?oQ(e):null):sR(e)?oQ(e):oq(e)?e:null}function oQ(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return oq(i)&&(t[r]=i),t},{})}o4.default=o4,o4.stable=o9,o4.stableStringify=o9;var o0="[...]",o1="[Circular]",o2=[],o3=[];function o5(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o4(e,t,r,i){var n;void 0===i&&(i=o5()),function e(t,r,i,n,s,o,a){var l;if(o+=1,"object"==typeof t&&null!==t){for(l=0;l<n.length;l++)if(n[l]===t)return void o6(o1,t,r,s);if(void 0!==a.depthLimit&&o>a.depthLimit||void 0!==a.edgesLimit&&i+1>a.edgesLimit)return void o6(o0,t,r,s);if(n.push(t),Array.isArray(t))for(l=0;l<t.length;l++)e(t[l],l,l,n,t,o,a);else{var c=Object.keys(t);for(l=0;l<c.length;l++){var u=c[l];e(t[u],u,l,n,t,o,a)}}n.pop()}}(e,"",0,[],void 0,0,i);try{n=0===o3.length?JSON.stringify(e,t,r):JSON.stringify(e,o7(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==o2.length;){var s=o2.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return n}function o6(e,t,r,i){var n=Object.getOwnPropertyDescriptor(i,r);void 0!==n.get?n.configurable?(Object.defineProperty(i,r,{value:e}),o2.push([i,r,t,n])):o3.push([t,r,e]):(i[r]=e,o2.push([i,r,t]))}function o8(e,t){return e<t?-1:e>t?1:0}function o9(e,t,r,i){void 0===i&&(i=o5());var n,s=function e(t,r,i,n,s,o,a){var l;if(o+=1,"object"==typeof t&&null!==t){for(l=0;l<n.length;l++)if(n[l]===t)return void o6(o1,t,r,s);try{if("function"==typeof t.toJSON)return}catch(e){return}if(void 0!==a.depthLimit&&o>a.depthLimit||void 0!==a.edgesLimit&&i+1>a.edgesLimit)return void o6(o0,t,r,s);if(n.push(t),Array.isArray(t))for(l=0;l<t.length;l++)e(t[l],l,l,n,t,o,a);else{var c={},u=Object.keys(t).sort(o8);for(l=0;l<u.length;l++){var h=u[l];e(t[h],h,l,n,t,o,a),c[h]=t[h]}if(void 0===s)return c;o2.push([s,r,t]),s[r]=c}n.pop()}}(e,"",0,[],void 0,0,i)||e;try{n=0===o3.length?JSON.stringify(s,t,r):JSON.stringify(s,o7(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==o2.length;){var o=o2.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return n}function o7(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(o3.length>0)for(var i=0;i<o3.length;i++){var n=o3[i];if(n[1]===t&&n[0]===r){r=n[2],o3.splice(i,1);break}}return e.call(this,t,r)}}var ae=t_(o4),at=class extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=oX(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return ae(this.serialize(),ar,2)}};function ar(e,t){if("[Circular]"!==t)return t}var ai=e=>(function(e,t){let[r,i]=function(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t??void 0,r]}}return[]}(t);return new at(e,r??oJ(e),i)})(sO.invalidRequest,e),an={};function as(){}function ao(){ao.init.call(this)}function aa(e){return void 0===e._maxListeners?ao.defaultMaxListeners:e._maxListeners}function al(e,t,r,i){var n,s,o;if("function"!=typeof r)throw TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=new as,e._eventsCount=0),o){if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),!o.warned&&(n=aa(e))&&n>0&&o.length>n){o.warned=!0;var a=Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"function"==typeof console.warn?console.warn(a):console.log(a)}}else o=s[t]=r,++e._eventsCount;return e}function ac(e,t,r){var i=!1;function n(){e.removeListener(t,n),i||(i=!0,r.apply(e,arguments))}return n.listener=r,n}function au(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function ah(e,t){for(var r=Array(t);t--;)r[t]=e[t];return r}as.prototype=Object.create(null),ao.EventEmitter=ao,ao.usingDomains=!1,ao.prototype.domain=void 0,ao.prototype._events=void 0,ao.prototype._maxListeners=void 0,ao.defaultMaxListeners=10,ao.init=function(){this.domain=null,ao.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new as,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ao.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},ao.prototype.getMaxListeners=function(){return aa(this)},ao.prototype.emit=function(e){var t,r,i,n,s,o,a,l="error"===e;if(o=this._events)l=l&&null==o.error;else if(!l)return!1;if(a=this.domain,l){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=o[e]))return!1;var u="function"==typeof r;switch(i=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var i=e.length,n=ah(e,i),s=0;s<i;++s)n[s].call(r)}(r,u,this);break;case 2:!function(e,t,r,i){if(t)e.call(r,i);else for(var n=e.length,s=ah(e,n),o=0;o<n;++o)s[o].call(r,i)}(r,u,this,arguments[1]);break;case 3:!function(e,t,r,i,n){if(t)e.call(r,i,n);else for(var s=e.length,o=ah(e,s),a=0;a<s;++a)o[a].call(r,i,n)}(r,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,i,n,s){if(t)e.call(r,i,n,s);else for(var o=e.length,a=ah(e,o),l=0;l<o;++l)a[l].call(r,i,n,s)}(r,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=Array(i-1),s=1;s<i;s++)n[s-1]=arguments[s];!function(e,t,r,i){if(t)e.apply(r,i);else for(var n=e.length,s=ah(e,n),o=0;o<n;++o)s[o].apply(r,i)}(r,u,this,n)}return!0},ao.prototype.addListener=function(e,t){return al(this,e,t,!1)},ao.prototype.on=ao.prototype.addListener,ao.prototype.prependListener=function(e,t){return al(this,e,t,!0)},ao.prototype.once=function(e,t){if("function"!=typeof t)throw TypeError('"listener" argument must be a function');return this.on(e,ac(this,e,t)),this},ao.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw TypeError('"listener" argument must be a function');return this.prependListener(e,ac(this,e,t)),this},ao.prototype.removeListener=function(e,t){var r,i,n,s,o;if("function"!=typeof t)throw TypeError('"listener" argument must be a function');if(!(i=this._events)||!(r=i[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new as:(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new as,this;delete i[e]}else!function(e,t){for(var r=t,i=r+1,n=e.length;i<n;r+=1,i+=1)e[r]=e[i];e.pop()}(r,n);i.removeListener&&this.emit("removeListener",e,o||t)}return this},ao.prototype.off=function(e,t){return this.removeListener(e,t)},ao.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0==arguments.length?(this._events=new as,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new as:delete r[e]),this;if(0==arguments.length){for(var i,n=Object.keys(r),s=0;s<n.length;++s)"removeListener"!==(i=n[s])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new as,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},ao.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},ao.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):au.call(e,t)},ao.prototype.listenerCount=au,ao.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ad=tC(Object.freeze({__proto__:null,EventEmitter:ao,default:ao}));Object.defineProperty(an,"__esModule",{value:!0});let ap=ad;function af(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}let ag=class extends ap.EventEmitter{emit(e,...t){let r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let r=Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}let n=i[e];if(void 0===n)return!1;if("function"==typeof n)af(n,this,t);else{let e=n.length,r=function(e){let t=e.length,r=Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}(n);for(let i=0;i<e;i+=1)af(r[i],this,t)}return!0}};var am,ay,av,ab,aw,aE,a_,aC,aS,aI,ax,aA,ak,aO,aP,aR,aN,aT,aM,aL,aD=an.default=ag,aB=class e extends aD{constructor({notificationHandler:e}={}){super(),sx(this,aw),sx(this,a_),sx(this,aS),sx(this,ay,!1),sx(this,av,void 0),sx(this,ab,void 0),sA(this,av,[]),sA(this,ab,e)}destroy(){sI(this,av).forEach(e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}),sA(this,av,[]),sA(this,ay,!0)}push(e){sk(this,aw,aE).call(this),sI(this,av).push(e)}handle(e,t){if(sk(this,aw,aE).call(this),t&&"function"!=typeof t)throw Error('"callback" must be a function if provided.');return Array.isArray(e)?t?sk(this,a_,aC).call(this,e,t):sk(this,a_,aC).call(this,e):t?sk(this,aS,aI).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return sk(this,aw,aE).call(this),async(t,r,i,n)=>{try{let[s,o,a]=await sk(e,ak,aO).call(e,t,r,sI(this,av));return o?(await sk(e,aN,aT).call(e,a),n(s)):i(async t=>{try{await sk(e,aN,aT).call(e,a)}catch(e){return t(e)}return t()})}catch(e){return n(e)}}}async _promiseHandle(e){return new Promise((t,r)=>{sk(this,aS,aI).call(this,e,(e,i)=>{e&&void 0===i?r(e):t(i)}).catch(r)})}};function aj(e){return JSON.stringify(e,null,2)}ay=new WeakMap,av=new WeakMap,ab=new WeakMap,aw=new WeakSet,aE=function(){if(sI(this,ay))throw Error("This engine is destroyed and can no longer be used.")},a_=new WeakSet,aC=async function(e,t){try{if(0===e.length){let e=[{id:null,jsonrpc:"2.0",error:new at(sO.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}let r=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter(e=>void 0!==e);return t?t(null,r):r}catch(e){if(t)return t(e);throw e}},aS=new WeakSet,aI=async function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){let r=new at(sO.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:null,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){let r=new at(sO.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return sI(this,ab)&&!sq(e,oK)?t(null):t(r,{id:e.id??null,jsonrpc:"2.0",error:r})}if(sI(this,ab)&&sq(e,oV)&&!sq(e,oK)){try{await sI(this,ab).call(this,e)}catch(e){return t(e)}return t(null)}let r=null,i={...e},n={id:i.id,jsonrpc:i.jsonrpc};try{await sk(aB,ax,aA).call(aB,i,n,sI(this,av))}catch(e){r=e}return r&&(delete n.result,n.error||(n.error=oY(r))),t(r,n)},ax=new WeakSet,aA=async function(e,t,r){let[i,n,s]=await sk(aB,ak,aO).call(aB,e,t,r);if(sk(aB,aM,aL).call(aB,e,t,n),await sk(aB,aN,aT).call(aB,s),i)throw i},ak=new WeakSet,aO=async function(e,t,r){let i=[],n=null,s=!1;for(let o of r)if([n,s]=await sk(aB,aP,aR).call(aB,e,t,o,i),s)break;return[n,s,i.reverse()]},aP=new WeakSet,aR=async function(e,t,r,i){return new Promise(n=>{let s=e=>{let r=e||t.error;r&&(t.error=oY(r)),n([r,!0])};try{r(e,t,r=>{t.error?s(t.error):(r&&("function"!=typeof r&&s(new at(sO.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:
${aj(e)}`,{request:e})),i.push(r)),n([null,!1]))},s)}catch(e){s(e)}})},aN=new WeakSet,aT=async function(e){for(let t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})},aM=new WeakSet,aL=function(e,t,r){if(!sN(t,"result")&&!sN(t,"error"))throw new at(sO.internal,`JsonRpcEngine: Response has no error or result for request:
${aj(e)}`,{request:e});if(!r)throw new at(sO.internal,`JsonRpcEngine: Nothing ended request:
${aj(e)}`,{request:e})},sx(aB,ax),sx(aB,ak),sx(aB,aP),sx(aB,aN),sx(aB,aM);var a$=Object.freeze(["eth_subscription"]),aU=(e=console)=>[(e,t,r,i)=>{let n=e.id,s=sC=(sC+1)%4294967295;e.id=s,t.id=s,r(r=>{e.id=n,t.id=n,r()})},(t,r,i)=>{"string"==typeof t.method&&t.method||(r.error=ai({message:"The request 'method' must be a non-empty string.",data:t})),i(t=>{let{error:i}=r;return i&&e.error(`MetaMask - RPC Error: ${i.message}`,i),t()})},function(e){let t={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(r,i,n)=>{t.ethDecryptDeprecation||"eth_decrypt"!==r.method?t.ethGetEncryptionPublicKeyDeprecation||"eth_getEncryptionPublicKey"!==r.method?!t.walletWatchAssetNFTExperimental&&"wallet_watchAsset"===r.method&&["ERC721","ERC1155"].includes(r.params?.type||"")&&(e.warn(s_.warnings.rpc.walletWatchAssetNFTExperimental),t.walletWatchAssetNFTExperimental=!0):(e.warn(s_.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),t.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(s_.warnings.rpc.ethDecryptDeprecation),t.ethDecryptDeprecation=!0),n()}}(e)],aq=(e,t,r=!0)=>(i,n)=>{i||n.error?t(i||n.error):!r||Array.isArray(n)?e(n):e(n.result)},aH=e=>!!e&&"string"==typeof e&&e.startsWith("0x"),aF=()=>{};async function az(e,t){try{let t=await async function(){return{name:function(e){let{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;let i=t.querySelector('head > meta[name="title"]');return i?i.content:t.title&&t.title.length>0?t.title:window.location.hostname}(window),icon:await aW(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},aF)}catch(e){t.error({message:s_.errors.sendSiteMetadata(),originalError:e})}}async function aW(e){let{document:t}=e;for(let e of Array.from(t.querySelectorAll('head > link[rel~="icon"]')))if(e&&await aK(e.href))return e.href;return null}async function aK(e){return new Promise((t,r)=>{try{let r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(e){r(e)}})}var aV=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},aG=(e,t,r)=>(aV(e,t,"read from private field"),r?r.call(e):t.get(e)),aZ=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},aJ=(e,t,r,i)=>(aV(e,t,"write to private field"),t.set(e,r),r);function aY(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}class aX extends ao{emit(e,...t){let r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let r=Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}let n=i[e];if(void 0===n)return!1;if("function"==typeof n)aY(n,this,t);else{let e=n.length,r=function(e){let t=e.length,r=Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}(n);for(let i=0;i<e;i+=1)aY(r[i],this,t)}return!0}}var aQ,a0,a1=t_(function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=i;0!=n--;){var i,n,s,o=s[n];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}),a2=class e extends aX{constructor({logger:t=console,maxEventListeners:r=100,rpcMiddleware:i=[]}={}){super(),aZ(this,aQ,void 0),aZ(this,a0,void 0),this._log=t,this.setMaxListeners(r),this._state={...e._defaultState},aJ(this,a0,null),aJ(this,aQ,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);let n=new aB;i.forEach(e=>n.push(e)),this._rpcEngine=n}get chainId(){return aG(this,aQ)}get selectedAddress(){return aG(this,a0)}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw ai({message:s_.errors.invalidRequestArgs(),data:e});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw ai({message:s_.errors.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw ai({message:s_.errors.invalidRequestParams(),data:e});let i=null==r?{method:t}:{method:t,params:r};return new Promise((e,t)=>{this._rpcRequest(i,aq(e,t))})}_initializeState(e){if(this._state.initialized)throw Error("Provider already initialized.");if(e){let{accounts:t,chainId:r,isUnlocked:i,networkVersion:n}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:n}),this._handleUnlockStateChanged({accounts:t,isUnlocked:i}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,t){let r=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(r=(r,i)=>{this._handleAccountsChanged(i.result??[],"eth_accounts"===e.method),t(r,i)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(s_.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new at(1013,t??s_.errors.disconnected()),this._log.debug(r)):(r=new at(1011,t??s_.errors.permanentlyDisconnected()),this._log.error(r),aJ(this,aQ,null),this._state.accounts=null,aJ(this,a0,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){aH(e)?(this._handleConnect(e),e!==aG(this,aQ)&&(aJ(this,aQ,e),this._state.initialized&&this.emit("chainChanged",aG(this,aQ)))):this._log.error(s_.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,t=!1){let r=e;for(let t of(Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]),e))if("string"!=typeof t){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!a1(this._state.accounts,r)&&(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,aG(this,a0)!==r[0]&&aJ(this,a0,r[0]||null),this._state.initialized)){let e=[...r];this.emit("accountsChanged",e)}}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};aQ=new WeakMap,a0=new WeakMap,a2._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var a3,a5=a2,a4={exports:{}},a6=ad.EventEmitter,a8=tC(tw);a3="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var a9=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},a7=/%[sdj%]/g;function le(e){if(!lm(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(ls(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,n=i.length,s=String(e).replace(a7,function(e){if("%%"===e)return"%";if(r>=n)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),o=i[r];r<n;o=i[++r])lp(o)||!lw(o)?s+=" "+o:s+=" "+ls(o);return s}function lt(e,t){if(lv(eF.process))return function(){return lt(e,t).apply(this,arguments)};if(!0===oT.noDeprecation)return e;var r=!1;return function(){if(!r){if(oT.throwDeprecation)throw Error(t);oT.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var lr,li={};function ln(e){return lv(lr)&&(lr=oT.env.NODE_DEBUG||""),li[e=e.toUpperCase()]||(RegExp("\\b"+e+"\\b","i").test(lr)?li[e]=function(){var t=le.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:li[e]=function(){}),li[e]}function ls(e,t){var r={seen:[],stylize:la};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ld(t)?r.showHidden=t:t&&lP(r,t),lv(r.showHidden)&&(r.showHidden=!1),lv(r.depth)&&(r.depth=2),lv(r.colors)&&(r.colors=!1),lv(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=lo),ll(r,e,r.depth)}function lo(e,t){var r=ls.styles[t];return r?"\x1b["+ls.colors[r][0]+"m"+e+"\x1b["+ls.colors[r][1]+"m":e}function la(e,t){return e}function ll(e,t,r){if(e.customInspect&&t&&lC(t.inspect)&&t.inspect!==ls&&(!t.constructor||t.constructor.prototype!==t)){var i,n,s=t.inspect(r,e);return lm(s)||(s=ll(e,s,r)),s}var o=function(e,t){if(lv(t))return e.stylize("undefined","undefined");if(lm(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return lg(t)?e.stylize(""+t,"number"):ld(t)?e.stylize(""+t,"boolean"):lp(t)?e.stylize("null","null"):void 0}(e,t);if(o)return o;var a=Object.keys(t),l=(u={},a.forEach(function(e,t){u[e]=!0}),u);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),l_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return lc(t);if(0===a.length){if(lC(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(lb(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(lE(t))return e.stylize(Date.prototype.toString.call(t),"date");if(l_(t))return lc(t)}var u,h,d="",p=!1,f=["{","}"];return lh(t)&&(p=!0,f=["[","]"]),lC(t)&&(d=" [Function"+(t.name?": "+t.name:"")+"]"),lb(t)&&(d=" "+RegExp.prototype.toString.call(t)),lE(t)&&(d=" "+Date.prototype.toUTCString.call(t)),l_(t)&&(d=" "+lc(t)),0!==a.length||p&&0!=t.length?r<0?lb(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),h=p?function(e,t,r,i,n){for(var s=[],o=0,a=t.length;o<a;++o)lR(t,String(o))?s.push(lu(e,t,r,i,String(o),!0)):s.push("");return n.forEach(function(n){n.match(/^\d+$/)||s.push(lu(e,t,r,i,n,!0))}),s}(e,t,r,l,a):a.map(function(i){return lu(e,t,r,l,i,p)}),e.seen.pop(),i=d,n=f,h.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+h.join(",\n  ")+" "+n[1]:n[0]+i+" "+h.join(", ")+" "+n[1]):f[0]+d+f[1]}function lc(e){return"["+Error.prototype.toString.call(e)+"]"}function lu(e,t,r,i,n,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),lR(i,n)||(o="["+n+"]"),a||(0>e.seen.indexOf(l.value)?(a=lp(r)?ll(e,l.value,null):ll(e,l.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),lv(o)){if(s&&n.match(/^\d+$/))return a;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function lh(e){return Array.isArray(e)}function ld(e){return"boolean"==typeof e}function lp(e){return null===e}function lf(e){return null==e}function lg(e){return"number"==typeof e}function lm(e){return"string"==typeof e}function ly(e){return"symbol"==typeof e}function lv(e){return void 0===e}function lb(e){return lw(e)&&"[object RegExp]"===lx(e)}function lw(e){return"object"==typeof e&&null!==e}function lE(e){return lw(e)&&"[object Date]"===lx(e)}function l_(e){return lw(e)&&("[object Error]"===lx(e)||e instanceof Error)}function lC(e){return"function"==typeof e}function lS(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function lI(e){return e3.isBuffer(e)}function lx(e){return Object.prototype.toString.call(e)}function lA(e){return e<10?"0"+e.toString(10):e.toString(10)}ls.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ls.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var lk=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function lO(){var e,t;console.log("%s - %s",(t=[lA((e=new Date).getHours()),lA(e.getMinutes()),lA(e.getSeconds())].join(":"),[e.getDate(),lk[e.getMonth()],t].join(" ")),le.apply(null,arguments))}function lP(e,t){if(!t||!lw(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}function lR(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var lN="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function lT(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(lN&&e[lN]){var t;if("function"!=typeof(t=e[lN]))throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,lN,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise(function(e,i){t=e,r=i}),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push(function(e,i){e?r(e):t(i)});try{e.apply(this,n)}catch(e){r(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),lN&&Object.defineProperty(t,lN,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a9(e))}function lM(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function lL(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw TypeError("The last argument must be of type Function");var n=this,s=function(){return i.apply(n,arguments)};e.apply(this,t).then(function(e){oT.nextTick(s.bind(null,null,e))},function(e){oT.nextTick(lM.bind(null,e,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a9(e)),t}lT.custom=lN;var lD,lB,lj=tC(Object.freeze({__proto__:null,_extend:lP,callbackify:lL,debuglog:ln,default:{inherits:a3,_extend:lP,log:lO,isBuffer:lI,isPrimitive:lS,isFunction:lC,isError:l_,isDate:lE,isObject:lw,isRegExp:lb,isUndefined:lv,isSymbol:ly,isString:lm,isNumber:lg,isNullOrUndefined:lf,isNull:lp,isBoolean:ld,isArray:lh,inspect:ls,deprecate:lt,format:le,debuglog:ln,promisify:lT,callbackify:lL},deprecate:lt,format:le,inherits:a3,inspect:ls,isArray:lh,isBoolean:ld,isBuffer:lI,isDate:lE,isError:l_,isFunction:lC,isNull:lp,isNullOrUndefined:lf,isNumber:lg,isObject:lw,isPrimitive:lS,isRegExp:lb,isString:lm,isSymbol:ly,isUndefined:lv,log:lO,promisify:lT}));function l$(e,t){lq(e,t),lU(e)}function lU(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function lq(e,t){e.emit("error",t)}var lH={destroy:function(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,oT.nextTick(lq,this,e)):oT.nextTick(lq,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?oT.nextTick(lU,r):(r._writableState.errorEmitted=!0,oT.nextTick(l$,r,e)):oT.nextTick(l$,r,e):t?(oT.nextTick(lU,r),t(e)):oT.nextTick(lU,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}},lF={},lz={};function lW(e,t,r){r||(r=Error);var i=function(e){function r(r,i,n){return e.call(this,"string"==typeof t?t:t(r,i,n))||this}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e,r}(r);i.prototype.name=r.name,i.prototype.code=e,lz[e]=i}function lK(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}lW("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),lW("ERR_INVALID_ARG_TYPE",function(e,t,r){if("string"==typeof t&&(n="not ",t.substr(0,n.length)===n)?(i="must not be",t=t.replace(/^not /,"")):i="must be",o=" argument",(void 0===a||a>e.length)&&(a=e.length),e.substring(a-o.length,a)===o)s="The ".concat(e," ").concat(i," ").concat(lK(t,"type"));else{var i,n,s,o,a,l,c=("number"!=typeof l&&(l=0),l+1>e.length||-1===e.indexOf(".",l))?"argument":"property";s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(lK(t,"type"))}return s+". Received type ".concat(typeof r)},TypeError),lW("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),lW("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),lW("ERR_STREAM_PREMATURE_CLOSE","Premature close"),lW("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),lW("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),lW("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),lW("ERR_STREAM_WRITE_AFTER_END","write after end"),lW("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),lW("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),lW("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),lF.codes=lz;var lV,lG,lZ,lJ,lY=lF.codes.ERR_INVALID_OPT_VALUE,lX={getHighWaterMark:function(e,t,r,i){var n=null!=t.highWaterMark?t.highWaterMark:i?t[r]:null;if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new lY(i?r:"highWaterMark",n);return Math.floor(n)}return e.objectMode?16:16384}},lQ=tC(Object.freeze({__proto__:null,default:"function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}})),l0=function(e,t){if(l1("noDeprecation"))return e;var r=!1;return function(){if(!r){if(l1("throwDeprecation"))throw Error(t);l1("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}};function l1(e){try{if(!tE.localStorage)return!1}catch(e){return!1}var t=tE.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}function l2(){if(lG)return lV;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(void 0),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}lG=1,lV=b,b.WritableState=v;var t,r,i={deprecate:l0},n=a8.Buffer,s=(void 0!==tE?tE:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},o=lX.getHighWaterMark,a=lF.codes,l=a.ERR_INVALID_ARG_TYPE,c=a.ERR_METHOD_NOT_IMPLEMENTED,u=a.ERR_MULTIPLE_CALLBACK,h=a.ERR_STREAM_CANNOT_PIPE,d=a.ERR_STREAM_DESTROYED,p=a.ERR_STREAM_NULL_VALUES,f=a.ERR_STREAM_WRITE_AFTER_END,g=a.ERR_UNKNOWN_ENCODING,m=lH.errorOrDestroy;function y(){}function v(r,i,n){t=t||l3(),r=r||{},"boolean"!=typeof n&&(n=i instanceof t),this.objectMode=!!r.objectMode,n&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=o(this,r,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===r.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new u;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,i?(oT.nextTick(n,t),oT.nextTick(I,e,r),e._writableState.errorEmitted=!0,m(e,t)):(n(t),e._writableState.errorEmitted=!0,m(e,t),I(e,r));else{var s=C(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),i?oT.nextTick(E,e,r,s,n):E(e,r,s,n)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function b(e){var i=this instanceof(t=t||l3());if(!i&&!r.call(b,this))return new b(e);this._writableState=new v(e,this,i),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a6.call(this)}function w(e,t,r,i,n,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new d("write")):r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function E(e,t,r,i){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,i(),I(e,t)}function _(t,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(t._writev&&i&&i.next){var n=Array(r.bufferedRequestCount),s=r.corkedRequestsFree;s.entry=i;for(var o=0,a=!0;i;)n[o]=i,i.isBuf||(a=!1),i=i.next,o+=1;n.allBuffers=a,w(t,r,!0,r.length,n,"",s.finish),r.pendingcb++,r.lastBufferedRequest=null,s.next?(r.corkedRequestsFree=s.next,s.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,c=i.encoding,u=i.callback;if(w(t,r,!1,r.objectMode?1:l.length,l,c,u),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(r){t.pendingcb--,r&&m(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)})}function I(e,t){var r=C(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,oT.nextTick(S,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}return lQ(b,a6),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!r.call(this,e)||this===b&&e&&e._writableState instanceof v}})):r=function(e){return e instanceof this},b.prototype.pipe=function(){m(this,new h)},b.prototype.write=function(e,t,r){var i,o,a,c,u,h,d,g=this._writableState,v=!1,b=!g.objectMode&&(d=e,n.isBuffer(d)||d instanceof s);return b&&!n.isBuffer(e)&&(i=e,e=n.from(i)),"function"==typeof t&&(r=t,t=null),b?t="buffer":t||(t=g.defaultEncoding),"function"!=typeof r&&(r=y),g.ending?(o=r,m(this,a=new f),oT.nextTick(o,a)):!b&&(c=e,u=r,null===c?h=new p:"string"==typeof c||g.objectMode||(h=new l("chunk",["string","Buffer"],c)),h&&(m(this,h),oT.nextTick(u,h),1))||(g.pendingcb++,v=function(e,t,r,i,s,o){if(!r){var a,l,c=(a=i,l=s,t.objectMode||!1===t.decodeStrings||"string"!=typeof a||(a=n.from(a,l)),a);i!==c&&(r=!0,s="buffer",i=c)}var u=t.objectMode?1:i.length;t.length+=u;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:s,isBuf:r,callback:o,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else w(e,t,!1,u,i,s,o);return h}(this,g,b,e,t,r)),v},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||_(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new g(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,r){r(new c("_write()"))},b.prototype._writev=null,b.prototype.end=function(e,t,r){var i,n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||(i=r,n.ending=!0,I(this,n),i&&(n.finished?oT.nextTick(i):this.once("finish",i)),n.ended=!0,this.writable=!1),this},Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=lH.destroy,b.prototype._undestroy=lH.undestroy,b.prototype._destroy=function(e,t){t(e)},lV}function l3(){if(lJ)return lZ;lJ=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};lZ=o;var t=cc(),r=l2();lQ(o,t);for(var i=e(r.prototype),n=0;n<i.length;n++){var s=i[n];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||oT.nextTick(l,this)}function l(e){e.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),lZ}var l5=e3.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l4(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!l5(e))throw Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=l8;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l9;break;default:return void(this.write=l6)}this.charBuffer=new e3(6),this.charReceived=0,this.charLength=0}function l6(e){return e.toString(this.encoding)}function l8(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function l9(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}l4.prototype.write=function(e){for(var t,r="";this.charLength;){var i=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";if(e=e.slice(i,e.length),!((t=(r=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(r.length-1))>=55296&&t<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return r;break}this.charLength+=this.surrogateSize,r=""}this.detectIncompleteChar(e);var n=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived),n=(r+=e.toString(this.encoding,0,n)).length-1,(t=r.charCodeAt(n))>=55296&&t<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),r.substring(0,n)}return r},l4.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},l4.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,i=this.charBuffer,n=this.encoding;t+=i.slice(0,r).toString(n)}return t};var l7=tC(Object.freeze({__proto__:null,StringDecoder:l4})),ce=lF.codes.ERR_STREAM_PREMATURE_CLOSE;function ct(){}var cr,ci,cn,cs,co,ca,cl=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),n=i||ct,s=!1,i=function(){if(!s){s=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.apply(this,t)}};var n,s,o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,o||i.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){o=!1,h=!0,a||i.call(t)},p=function(e){i.call(t,e)},f=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new ce),i.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new ce),i.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",u),t.on("abort",f),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",f)}};function cc(){if(ca)return co;ca=1,co=v,v.ReadableState=y,ad.EventEmitter;var e=function(e,t){return e.listeners(t).length},t=a8.Buffer,r=(void 0!==tE?tE:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};n=lj&&lj.debuglog?lj.debuglog("stream"):function(){};var i,n,s,o,a,l=function(){if(lB)return lD;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach(function(e){var i,s;i=e,s=n[e],(i=r(i))in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}lB=1;var i=a8.Buffer,n=lj.inspect,s=n&&n.custom||"inspect";return lD=function(){var e;function o(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,r,n=i.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=o,i.prototype.copy.call(t,n,r),o+=s.data.length,s=s.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,s=e>n.length?n.length:e;if(s===n.length?i+=n:i+=n.slice(0,e),0==(e-=s)){s===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(s));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0==(e-=o)){o===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(o));break}++n}return this.length-=n,t}},{key:s,value:function(e,r){return n(this,t(t({},r),{},{depth:0,customInspect:!1}))}}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}(o.prototype,e),Object.defineProperty(o,"prototype",{writable:!1}),o}()}(),c=lX.getHighWaterMark,u=lF.codes,h=u.ERR_INVALID_ARG_TYPE,d=u.ERR_STREAM_PUSH_AFTER_EOF,p=u.ERR_METHOD_NOT_IMPLEMENTED,f=u.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;lQ(v,a6);var g=lH.errorOrDestroy,m=["error","close","destroy","pause","resume"];function y(e,t,r){i=i||l3(),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=c(this,e,"readableHighWaterMark",r),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=l7.StringDecoder),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function v(e){if(i=i||l3(),!(this instanceof v))return new v(e);var t=this instanceof i;this._readableState=new y(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a6.call(this)}function b(e,i,s,o,a){n("readableAddChunk",i);var l,c,u,p,m=e._readableState;if(null===i)m.reading=!1,function(e,t){if(n("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?_(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,C(e)))}}(e,m);else if(a||(l=i,t.isBuffer(l)||l instanceof r||"string"==typeof l||void 0===l||m.objectMode||(c=new h("chunk",["string","Buffer","Uint8Array"],l)),p=c),p)g(e,p);else if(m.objectMode||i&&i.length>0){if("string"==typeof i||m.objectMode||Object.getPrototypeOf(i)===t.prototype||(u=i,i=t.from(u)),o)m.endEmitted?g(e,new f):w(e,m,i,!0);else if(m.ended)g(e,new d);else{if(m.destroyed)return!1;m.reading=!1,m.decoder&&!s?(i=m.decoder.write(i),m.objectMode||0!==i.length?w(e,m,i,!1):S(e,m)):w(e,m,i,!1)}}else o||(m.reading=!1,S(e,m));return!m.ended&&(m.length<m.highWaterMark||0===m.length)}function w(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_(e)),S(e,t)}function E(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((r=e)>=1073741824?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;n("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(n("emitReadable",t.flowing),t.emittedReadable=!0,oT.nextTick(C,e))}function C(e){var t=e._readableState;n("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function S(e,t){t.readingMore||(t.readingMore=!0,oT.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(n("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function x(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){n("readable nexttick read 0"),e.read(0)}function k(e,t){n("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(n("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function R(e){var t=e._readableState;n("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,oT.nextTick(N,t,e))}function N(e,t){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function T(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}return Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=lH.destroy,v.prototype._undestroy=lH.undestroy,v.prototype._destroy=function(e,t){t(e)},v.prototype.push=function(e,r){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((r=r||n.defaultEncoding)!==n.encoding&&(e=t.from(e,r),r=""),i=!0),b(this,e,r,!1,i)},v.prototype.unshift=function(e){return b(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){s||(s=l7.StringDecoder);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this},v.prototype.read=function(e){n("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return n("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):_(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&R(this),null;var i,s=t.needReadable;return n("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&n("length less than watermark",s=!0),t.ended||t.reading?n("reading or ended",s=!1):s&&(n("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(r,t))),null===(i=e>0?P(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==i&&this.emit("data",i),i},v.prototype._read=function(e){g(this,new p("_read()"))},v.prototype.pipe=function(t,r){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,n("pipe count=%d opts=%j",s.pipesCount,r);var o=r&&!1===r.end||t===oT.stdout||t===oT.stderr?f:a;function a(){n("onend"),t.end()}s.endEmitted?oT.nextTick(o):i.once("end",o),t.on("unpipe",function e(r,o){n("onunpipe"),r===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,n("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",e),i.removeListener("end",a),i.removeListener("end",f),i.removeListener("data",u),c=!0,s.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l())});var l=function(){var t=i._readableState;n("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e(i,"data")&&(t.flowing=!0,O(i))};t.on("drain",l);var c=!1;function u(e){n("ondata");var r=t.write(e);n("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==T(s.pipes,t))&&!c&&(n("false write response, pause",s.awaitDrain),s.awaitDrain++),i.pause())}function h(r){n("onerror",r),f(),t.removeListener("error",h),0===e(t,"error")&&g(t,r)}function d(){t.removeListener("finish",p),f()}function p(){n("onfinish"),t.removeListener("close",d),f()}function f(){n("unpipe"),i.unpipe(t)}return i.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(t,"error",h),t.once("close",d),t.once("finish",p),t.emit("pipe",i),s.flowing||(n("pipe resume"),i.resume()),t},v.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=T(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},v.prototype.on=function(e,t){var r=a6.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,n("on readable",i.length,i.reading),i.length?_(this):i.reading||oT.nextTick(A,this))),r},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(e,t){var r=a6.prototype.removeListener.call(this,e,t);return"readable"===e&&oT.nextTick(x,this),r},v.prototype.removeAllListeners=function(e){var t=a6.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||oT.nextTick(x,this),t},v.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,oT.nextTick(k,this,e))),e.paused=!1,this},v.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},v.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var s in e.on("end",function(){if(n("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){n("wrapped data"),r.decoder&&(s=r.decoder.write(s)),r.objectMode&&null==s||(r.objectMode||s&&s.length)&&(t.push(s)||(i=!0,e.pause()))}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var o=0;o<m.length;o++)e.on(m[o],this.emit.bind(this,m[o]));return this._read=function(t){n("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(v.prototype[Symbol.asyncIterator]=function(){return void 0===o&&(o=function(){if(ci)return cr;function e(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ci=1;var t,r=Symbol("lastResolve"),i=Symbol("lastReject"),n=Symbol("error"),s=Symbol("ended"),o=Symbol("lastPromise"),a=Symbol("handlePromise"),l=Symbol("stream");function c(e,t){return{value:e,done:t}}function u(e){var t=e[r];if(null!==t){var n=e[l].read();null!==n&&(e[o]=null,e[r]=null,e[i]=null,t(c(n,!1)))}}function h(e){oT.nextTick(u,e)}var d=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var e,t=this,r=this[n];if(null!==r)return Promise.reject(r);if(this[s])return Promise.resolve(c(void 0,!0));if(this[l].destroyed)return new Promise(function(e,r){oT.nextTick(function(){t[n]?r(t[n]):e(c(void 0,!0))})});var i,u=this[o];if(u)i=new Promise((e=this,function(t,r){u.then(function(){e[s]?t(c(void 0,!0)):e[a](t,r)},r)}));else{var h=this[l].read();if(null!==h)return Promise.resolve(c(h,!1));i=new Promise(this[a])}return this[o]=i,i}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var e=this;return new Promise(function(t,r){e[l].destroy(null,function(e){e?r(e):t(c(void 0,!0))})})}),t),d);return cr=function(t){var u,d=Object.create(p,(e(u={},l,{value:t,writable:!0}),e(u,r,{value:null,writable:!0}),e(u,i,{value:null,writable:!0}),e(u,n,{value:null,writable:!0}),e(u,s,{value:t._readableState.endEmitted,writable:!0}),e(u,a,{value:function(e,t){var n=d[l].read();n?(d[o]=null,d[r]=null,d[i]=null,e(c(n,!1))):(d[r]=e,d[i]=t)},writable:!0}),u));return d[o]=null,cl(t,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=d[i];return null!==t&&(d[o]=null,d[r]=null,d[i]=null,t(e)),void(d[n]=e)}var a=d[r];null!==a&&(d[o]=null,d[r]=null,d[i]=null,a(c(void 0,!0))),d[s]=!0}),t.on("readable",h.bind(null,d)),d}}()),o(this)}),Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(v.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(v.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),v._fromList=P,Object.defineProperty(v.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(v.from=function(e,t){return void 0===a&&(a=cs?cn:(cs=1,cn=function(){throw Error("Readable.from is not available in the browser")})),a(v,e,t)}),co}var cu=lF.codes,ch=cu.ERR_METHOD_NOT_IMPLEMENTED,cd=cu.ERR_MULTIPLE_CALLBACK,cp=cu.ERR_TRANSFORM_ALREADY_TRANSFORMING,cf=cu.ERR_TRANSFORM_WITH_LENGTH_0,cg=l3();function cm(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new cd);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function cy(e){if(!(this instanceof cy))return new cy(e);cg.call(this,e),this._transformState={afterTransform:cm.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",cv)}function cv(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?cb(this,null,null):this._flush(function(t,r){cb(e,t,r)})}function cb(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new cf;if(e._transformState.transforming)throw new cp;return e.push(null)}function cw(e){if(!(this instanceof cw))return new cw(e);cy.call(this,e)}lQ(cy,cg),cy.prototype.push=function(e,t){return this._transformState.needTransform=!1,cg.prototype.push.call(this,e,t)},cy.prototype._transform=function(e,t,r){r(new ch("_transform()"))},cy.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},cy.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},cy.prototype._destroy=function(e,t){cg.prototype._destroy.call(this,e,function(e){t(e)})},lQ(cw,cy),cw.prototype._transform=function(e,t,r){r(null,e)};var cE=lF.codes,c_=cE.ERR_MISSING_ARGS,cC=cE.ERR_STREAM_DESTROYED;function cS(e){if(e)throw e}function cI(e){e()}function cx(e,t){return e.pipe(t)}cW=a4.exports,(cW=a4.exports=cc()).Stream=cW,cW.Readable=cW,cW.Writable=l2(),cW.Duplex=l3(),cW.Transform=cy,cW.PassThrough=cw,cW.finished=cl,cW.pipeline=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,n,s=(i=t).length?"function"!=typeof i[i.length-1]?cS:i.pop():cS;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new c_("streams");var o=t.map(function(e,r){var i,a,l,c,u,h=r<t.length-1;return a=i=function(e){n||(n=e),e&&o.forEach(cI),h||(o.forEach(cI),s(n))},l=!1,i=function(){l||(l=!0,a.apply(void 0,arguments))},c=!1,e.on("close",function(){c=!0}),void 0===cz&&(cz=cl),cz(e,{readable:h,writable:r>0},function(e){if(e)return i(e);c=!0,i()}),u=!1,function(t){if(!c&&!u)return u=!0,e.setHeader&&"function"==typeof e.abort?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new cC("pipe"))}});return t.reduce(cx)};var cA=a4.exports,ck={},cO={exports:{}},cP=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw TypeError("need wrapper function");return Object.keys(t).forEach(function(e){i[e]=t[e]}),i;function i(){for(var e=Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var i=t.apply(this,e),n=e[e.length-1];return"function"==typeof i&&i!==n&&Object.keys(n).forEach(function(e){i[e]=n[e]}),i}};function cR(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function cN(e){var t=function(){if(t.called)throw Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}cO.exports=cP(cR),cO.exports.strict=cP(cN),cR.proto=cR(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return cR(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return cN(this)},configurable:!0})});var cT=cO.exports,cM={};Object.defineProperty(cM,"__esModule",{value:!0}),cM.Substream=void 0;let cL=cA;class cD extends cL.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}cM.Substream=cD;var cB=tE&&tE.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ck,"__esModule",{value:!0}),ck.ObjectMultiplex=void 0;let cj=cA,c$=cB(cT),cU=Symbol("IGNORE_SUBSTREAM"),cq=class extends cj.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(this.destroyed)throw Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);let t=new cM.Substream({parent:this,name:e});return this._substreams[e]=t,function(e,t){let r=(0,c$.default)(t);(0,cj.finished)(e,{readable:!1},r),(0,cj.finished)(e,{writable:!1},r)}(this,e=>t.destroy(e||void 0)),t}ignoreStream(e){if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=cU}_read(){}_write(e,t,r){let{name:i,data:n}=e;if(!i)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();let s=this._substreams[i];return s?s!==cU&&s.push(n):console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),r()}};ck.ObjectMultiplex=cq;var cH=t_(ck.ObjectMultiplex);let cF=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;cF.writable=e=>cF(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,cF.readable=e=>cF(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,cF.duplex=e=>cF.writable(e)&&cF.readable(e),cF.transform=e=>cF.duplex(e)&&"function"==typeof e._transform;var cz,cW,cK,cV=class extends a5{constructor(e,{jsonRpcStreamName:t,logger:r=console,maxEventListeners:i=100,rpcMiddleware:n=[]}){if(super({logger:r,maxEventListeners:i,rpcMiddleware:n}),!cF.duplex(e))throw Error(s_.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);let s=new cH;cA.pipeline(e,s,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=function(e={}){let t={},r=new cA.Duplex({objectMode:!0,read:()=>{},write:function(n,s,o){let a=null;try{n.id?function(e){let{id:r}=e;if(null===r)return;let i=t[r];if(!i)return void console.warn(`StreamMiddleware - Unknown response id "${r}"`);delete t[r],Object.assign(i.res,e),setTimeout(i.end)}(n):(e?.retryOnMessage&&n.method===e.retryOnMessage&&Object.values(t).forEach(({req:e,retryCount:i=0})=>{if(!e.id)return;if(i>=3)throw Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);let n=t[e.id];n&&(n.retryCount=i+1),r.push(e)}),i.emit("notification",n))}catch(e){a=e}o(a)}}),i=new aD;return{events:i,middleware:(e,i,n,s)=>{t[e.id]={req:e,res:i,next:n,end:s},r.push(e)},stream:r}}({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),cA.pipeline(this._jsonRpcConnection.stream,s.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",t=>{let{method:r,params:i}=t;"metamask_accountsChanged"===r?this._handleAccountsChanged(i):"metamask_unlockStateChanged"===r?this._handleUnlockStateChanged(i):"metamask_chainChanged"===r?this._handleChainChanged(i):a$.includes(r)?this.emit("message",{type:r,data:i}):"METAMASK_STREAM_FAILURE"===r&&e.destroy(Error(s_.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let e;try{e=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(e)}_handleStreamDisconnect(e,t){let r=`MetaMask: Lost connection to "${e}".`;t?.stack&&(r+=`
${t.stack}`),this._log.warn(r),this.listenerCount("error")>0&&this.emit("error",r),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){var r;aH(e)&&(r=t)&&"string"==typeof r?"loading"===t?this._handleDisconnect(!0):super._handleChainChanged({chainId:e}):this._log.error(s_.errors.invalidNetworkParams(),{chainId:e,networkVersion:t})}},cG=class extends cV{constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:r=console,maxEventListeners:i=100,shouldSendMetadata:n}={}){if(super(e,{jsonRpcStreamName:t,logger:r,maxEventListeners:i,rpcMiddleware:aU(r)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},aZ(this,cK,void 0),this._initializeStateAsync(),aJ(this,cK,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",e=>{let{method:t}=e;a$.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))}),n){if("complete"===document.readyState)az(this._rpcEngine,this._log);else{let e=()=>{az(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(s_.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(s_.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),aG(this,cK)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(s_.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),aG(this,cK)&&!e&&aJ(this,cK,null)}_warnOfDeprecation(e){!1===this._sentWarnings?.events[e]&&(this._log.warn(s_.warnings.events[e]),this._sentWarnings.events[e]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(s_.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},aq(e,t))}catch(e){t(e)}})}send(e,t){return this._sentWarnings.send||(this._log.warn(s_.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise((r,i)=>{try{this._rpcRequest({method:e,params:t},aq(r,i,!1))}catch(e){i(e)}})}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(e,aF),t=!0;break;case"net_version":t=aG(this,cK)??null;break;default:throw Error(s_.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(e=>{this.on("_initialized",()=>e())}),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw ai({message:"Batch requests must be made with an array of request objects.",data:e});return new Promise((t,r)=>{this._rpcRequest(e,aq(t,r))})}},{get:(e,t,...r)=>(this._sentWarnings.experimentalMethods||(this._log.warn(s_.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...r))})}_handleChainChanged({chainId:e,networkVersion:t}={}){super._handleChainChanged({chainId:e,networkVersion:t}),this._state.isConnected&&t!==aG(this,cK)&&(aJ(this,cK,t),this._state.initialized&&this.emit("networkChanged",aG(this,cK)))}};cK=new WeakMap;let cZ=d()("MM_SDK");cZ.color="#FFAC1C";var cJ={},cY={};Object.defineProperty(cY,"__esModule",{value:!0}),cY.EthereumProviderError=cY.EthereumRpcError=void 0;class cX extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return o4.default(this.serialize(),cQ,2)}}function cQ(e,t){if("[Circular]"!==t)return t}cY.EthereumRpcError=cX,cY.EthereumProviderError=class extends cX{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};var c0={},c1={};Object.defineProperty(c1,"__esModule",{value:!0}),c1.errorValues=c1.errorCodes=void 0,c1.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},c1.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let t=c1.errorCodes.rpc.internal,r={code:t,message:i(t)};function i(t,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(t)){let r=t.toString();if(o(c1.errorValues,r))return c1.errorValues[r].message;if(t>=-32099&&t<=-32e3)return e.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function n(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!c1.errorValues[t]||!!(e>=-32099&&e<=-32e3)}function s(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=i,e.isValidCode=n,e.serializeError=function(e,{fallbackError:t=r,shouldIncludeStack:a=!1}={}){if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw Error("Must provide fallback error with integer number code and string message.");if(e instanceof cY.EthereumRpcError)return e.serialize();let l={};if(e&&"object"==typeof e&&!Array.isArray(e)&&o(e,"code")&&n(e.code))l.code=e.code,e.message&&"string"==typeof e.message?(l.message=e.message,o(e,"data")&&(l.data=e.data)):(l.message=i(l.code),l.data={originalError:s(e)});else{l.code=t.code;let r=null==e?void 0:e.message;l.message=r&&"string"==typeof r?r:t.message,l.data={originalError:s(e)}}let c=null==e?void 0:e.stack;return a&&e&&c&&"string"==typeof c&&(l.stack=c),l}}(c0);var c2={};function c3(e,t){let[r,i]=c4(t);return new cY.EthereumRpcError(e,r||c0.getMessageFromCode(e),i)}function c5(e,t){let[r,i]=c4(t);return new cY.EthereumProviderError(e,r||c0.getMessageFromCode(e),i)}function c4(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}Object.defineProperty(c2,"__esModule",{value:!0}),c2.ethErrors=void 0,c2.ethErrors={rpc:{parse:e=>c3(c1.errorCodes.rpc.parse,e),invalidRequest:e=>c3(c1.errorCodes.rpc.invalidRequest,e),invalidParams:e=>c3(c1.errorCodes.rpc.invalidParams,e),methodNotFound:e=>c3(c1.errorCodes.rpc.methodNotFound,e),internal:e=>c3(c1.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return c3(t,e)},invalidInput:e=>c3(c1.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>c3(c1.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>c3(c1.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>c3(c1.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>c3(c1.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>c3(c1.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>c5(c1.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>c5(c1.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>c5(c1.errorCodes.provider.unsupportedMethod,e),disconnected:e=>c5(c1.errorCodes.provider.disconnected,e),chainDisconnected:e=>c5(c1.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new cY.EthereumProviderError(t,r,i)}}},Object.defineProperty(cJ,"__esModule",{value:!0}),cJ.getMessageFromCode=cJ.serializeError=cJ.EthereumProviderError=cJ.EthereumRpcError=cJ.ethErrors=cJ.errorCodes=void 0,Object.defineProperty(cJ,"EthereumRpcError",{enumerable:!0,get:function(){return cY.EthereumRpcError}}),Object.defineProperty(cJ,"EthereumProviderError",{enumerable:!0,get:function(){return cY.EthereumProviderError}}),Object.defineProperty(cJ,"serializeError",{enumerable:!0,get:function(){return c0.serializeError}}),Object.defineProperty(cJ,"getMessageFromCode",{enumerable:!0,get:function(){return c0.getMessageFromCode}}),Object.defineProperty(cJ,"ethErrors",{enumerable:!0,get:function(){return c2.ethErrors}}),Object.defineProperty(cJ,"errorCodes",{enumerable:!0,get:function(){return c1.errorCodes}});var c6={exports:{}};c6.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,(function(t){return e[t]}).bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(n,s),a=0,l=e.map([t,r],function(t){var r=o-e.getVersionPrecision(t),i=t+Array(r+1).join(".0");return e.map(i.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});for(i&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return -1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.find=function(e,t){var r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(n));for(t=0,r=n.length;t<r;t+=1)(function(){var r=n[t];"object"==typeof r&&null!==r&&Object.keys(r).forEach(function(t){e[t]=r[t]})})();return e},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=n,e.exports=t.default},18:function(e,t,r){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18),o=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}]),e}();t.default=o,e.exports=t.default},91:function(e,t,r){t.__esModule=!0,t.default=void 0;var i=l(r(92)),n=l(r(93)),s=l(r(94)),o=l(r(95)),a=l(r(17));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(n.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},s=0;if(Object.keys(e).forEach(function(t){var o=e[t];"string"==typeof o?(n[t]=o,s+=1):"object"==typeof o&&(r[t]=o,i+=1)}),i>0){var o=Object.keys(r),l=a.default.find(o,function(e){return t.isOS(e)});if(l){var c=this.satisfies(r[l]);if(void 0!==c)return c}var u=a.default.find(o,function(e){return t.isPlatform(e)});if(u){var h=this.satisfies(r[u]);if(void 0!==h)return h}}if(s>0){var d=Object.keys(n),p=a.default.find(d,function(e){return t.isBrowser(e,!0)});if(void 0!==p)return this.compareVersion(n[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(i=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=c,e.exports=t.default},92:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=n.default.getMacOSVersionName(t),i={name:s.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:s.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||n.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}});var c8=t_(c6.exports);let c9={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class c7{constructor({shouldSetOnWindow:e,connectionStream:t,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:n}){let s=new ur({connectionStream:t,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),o=new Proxy(s,{deleteProperty:()=>!0});if(this.provider=o,this.sdkInstance=n,e&&"undefined"!=typeof window)try{window.ethereum=s,window.dispatchEvent(new Event("ethereum#initialized"))}catch(e){cZ("[Ethereum] Unable to set global provider - window.ethereum may be read-only",e)}if(i&&"undefined"!=typeof window)try{!function(e,t=console){let r=!1,i=!1;if(!window.web3){let n="__isMetaMaskShim__",s={currentProvider:e};Object.defineProperty(s,n,{value:!0,enumerable:!0,configurable:!1,writable:!1}),s=new Proxy(s,{get:(s,o,...a)=>("currentProvider"!==o||r?"currentProvider"===o||o===n||i||(i=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch(e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)})):(r=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(s,o,...a)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:s,enumerable:!1,configurable:!0,writable:!0})}}(this.provider)}catch(e){cZ("[Ethereum] Unable to shim web3 - window.web3 may be read-only",e)}this.provider.on("display_uri",e=>{this.sdkInstance.emit(c9.DisplayURI,e)}),this.provider.on("_initialized",()=>{let e={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(c9.Initialized,e),cZ("[Ethereum: constructor()] provider initialized",e)})}static init(e){var t;return cZ("[Ethereum: init()] Initializing Ethereum service"),this.instance=new c7(e),null===(t=this.instance)||void 0===t?void 0:t.provider}static destroy(){}static getInstance(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class ue{constructor({useDeepLink:e,preferredOpenLink:t,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=t,this.state.debug=r}openDeeplink(e,t,r){return function(e,t,r,i){let{state:n}=e;cZ(`[PlatfformManager: openDeeplink()] universalLink --> ${t}`),cZ(`[PlatfformManager: openDeeplink()] deepLink --> ${r}`);try{if(n.preferredOpenLink)return void n.preferredOpenLink(n.useDeeplink?r:t,i);if(cZ(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${n.useDeeplink} link=${n.useDeeplink?r:t}`),n.useDeeplink)"undefined"!=typeof window&&(window.location.href=r);else if("undefined"!=typeof document){let e=document.createElement("a");e.href=t,e.target="_self",e.rel="noreferrer noopener",e.click()}}catch(e){console.log("[PlatfformManager: openDeeplink()] can't open link",e)}}(this,e,t,r)}isReactNative(){var e;return this.isNotBrowser()&&"undefined"!=typeof window&&(null==window?void 0:window.navigator)&&"ReactNative"===(null===(e=window.navigator)||void 0===e?void 0:e.product)}isMetaMaskInstalled(){return function(){let e=c7.getProvider()||(null==window?void 0:window.ethereum);return cZ(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${null==e?void 0:e.isMetaMask} isConnected=${null==e?void 0:e.isConnected()}`),(null==e?void 0:e.isMetaMask)&&(null==e?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,t;let r=c8.parse(window.navigator.userAgent);return"mobile"===(null===(e=null==r?void 0:r.platform)||void 0===e?void 0:e.type)||"tablet"===(null===(t=null==r?void 0:r.platform)||void 0===t?void 0:t.type)}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return"undefined"!=typeof window&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===ow.MobileWeb}static isNotBrowser(){var e;return"undefined"==typeof window||!(null==window?void 0:window.navigator)||void 0!==eF&&"ReactNative"===(null===(e=null==eF?void 0:eF.navigator)||void 0===e?void 0:e.product)||"ReactNative"===(null==navigator?void 0:navigator.product)}isNotBrowser(){return ue.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return ue.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){let{state:t}=e;return t.platformType?t.platformType:e.isReactNative()?ow.ReactNative:e.isNotBrowser()?ow.NonBrowser:e.isMetaMaskMobileWebView()?ow.MetaMaskMobileWebview:e.isMobile()?ow.MobileWeb:ow.DesktopWeb}(this)}}let ut=e=>eH(void 0,void 0,void 0,function*(){if(ue.isBrowser()){let{StorageManagerWeb:t}=yield Promise.resolve().then(function(){return uY});return new t(e)}return Promise.resolve({persistChannelConfig:()=>eH(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>eH(void 0,void 0,void 0,function*(){}),persistAccounts:()=>eH(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>eH(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>eH(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>eH(void 0,void 0,void 0,function*(){}),terminate:()=>eH(void 0,void 0,void 0,function*(){})})});class ur extends cG{constructor({connectionStream:e,shouldSendMetadata:t,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:t}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},cZ(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return eH(this,void 0,void 0,function*(){return cZ(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){cZ("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;let{accounts:t}=this._state;return t&&0!==t.length?(null===(e=t[0])||void 0===e?void 0:e.toLowerCase())||"":(cZ("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,t){return this._handleAccountsChanged(e,t)}handleDisconnect({terminate:e=!1}){!function({terminate:e=!1,instance:t}){let{state:r}=t;cZ(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${e}`,t),e&&(t._state.accounts=null,t._state.isUnlocked=!1,t._state.isPermanentlyDisconnected=!0,t._state.initialized=!1),t._handleAccountsChanged([]),t._state.isConnected=!1,t.emit("disconnect",cJ.ethErrors.provider.disconnected()),r.providerStateRequested=!1}({terminate:e,instance:this})}_initializeStateAsync(){return eH(this,void 0,void 0,function*(){return function(e){var t,r;return eH(this,void 0,void 0,function*(){let i;void 0===e.state&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});let{state:n}=e;if(n.providerStateRequested)cZ("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let s;n.providerStateRequested=!0;let o=null,a=!1,l=!1,c=yield ut({enabled:!0});if(c){let e=yield c.getPersistedChannelConfig({});a=null!==(t=null==e?void 0:e.relayPersistence)&&void 0!==t&&t,s=yield c.getCachedChainId();let r=yield c.getCachedAccounts();r.length>0&&(o=r[0])}if(cZ(`[SDKProvider: initializeStateAsync()] relayPersistence=${a}`,{relayPersistence:a,cachedChainId:s,cachedSelectedAddress:o}),a){if(s&&o)i={accounts:[o],chainId:s,isUnlocked:!1},l=!0;else try{i=yield e.request({method:"metamask_getProviderState"})}catch(t){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",t),void(n.providerStateRequested=!1)}}if(0===(null===(r=null==i?void 0:i.accounts)||void 0===r?void 0:r.length)){if(e.getSelectedAddress())i.accounts=[e.getSelectedAddress()];else{cZ("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");let t=yield e.request({method:"eth_requestAccounts",params:[]});i.accounts=t}}e._initializeState(i),n.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:null==i?void 0:i.chainId}))}})}(this)})}_initializeState(e){var t;return cZ("[SDKProvider: _initializeState()]",e),t=super._initializeState.bind(this),cZ("[SDKProvider: initializeState()] set state._initialized to false"),this._state.initialized=!1,t(e)}_handleChainChanged({chainId:e,networkVersion:t}={}){this.state.chainId=e,this.state.networkVersion=t,function({instance:e,chainId:t,networkVersion:r,superHandleChainChanged:i}){cZ(`[SDKProvider: handleChainChanged()] chainId=${t} networkVersion=${r}`);let n=r;r||(cZ("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),n="1"),t!==s&&(p.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(null!=t?t:"0x1",16)}`}),s=t),e._state.isConnected=!0,e.emit("connect",{chainId:t}),i({chainId:t,networkVersion:n})}({instance:this,chainId:e,networkVersion:t,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var ui,un={version:"0.33.1"};(hf=ui||(ui={})).INPAGE="metamask-inpage",hf.CONTENT_SCRIPT="metamask-contentscript",hf.PROVIDER="metamask-provider";let us="direct",uo="https://metamask.app.link/connect",ua="metamask://connect",ul={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},uc=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,uu={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},uh={[uu.ETH_REQUESTACCOUNTS]:!0,[uu.ETH_SENDTRANSACTION]:!0,[uu.ETH_SIGNTRANSACTION]:!0,[uu.ETH_SIGN]:!0,[uu.PERSONAL_SIGN]:!0,[uu.ETH_ACCOUNTS]:!1,[uu.ETH_CHAINID]:!1,[uu.PERSONAL_SIGN]:!0,[uu.ETH_SIGNTYPEDDATA]:!0,[uu.ETH_SIGNTYPEDDATA_V3]:!0,[uu.ETH_SIGNTYPEDDATA_V4]:!0,[uu.WALLET_REQUESTPERMISSIONS]:!0,[uu.WALLET_GETPERMISSIONS]:!0,[uu.WALLET_WATCHASSET]:!0,[uu.WALLET_ADDETHEREUMCHAIN]:!0,[uu.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[uu.METAMASK_CONNECTSIGN]:!0,[uu.METAMASK_CONNECTWITH]:!0,[uu.PERSONAL_EC_RECOVER]:!0,[uu.METAMASK_BATCH]:!0,[uu.METAMASK_OPEN]:!0},ud=Object.keys(uh).filter(e=>!0===uh[e]).map(e=>e.toLowerCase()),up=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(e=>e.toLowerCase()),uf=".sdk-comm",ug="providerType",um=".MMSDK_cached_address",uy=".MMSDK_cached_chainId",uv={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"};(hg=hy||(hy={})).TERMINATE="terminate",hg.EXTENSION="extension",hg.INITIALIZED="initialized";let ub="undefined"!=typeof window&&window.localStorage;function uw(e){var t,r;return eH(this,void 0,void 0,function*(){cZ("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension;try{let e=yield null===(t=window.extension)||void 0===t?void 0:t.request({method:"eth_requestAccounts"});cZ(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${e}`)}catch(e){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",e)}localStorage.setItem(ug,"extension"),e.extensionActive=!0,e.emit(c9.ProviderUpdate,hy.EXTENSION),e.options.enableAnalytics&&(null===(r=e.analytics)||void 0===r||r.send({event:om.SDK_USE_EXTENSION}))})}function uE(e){let t;if(void 0!==e3)t=e3.from(e,"utf8").toString("base64");else if("function"==typeof btoa)t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/gu,(e,t)=>String.fromCharCode(parseInt(t,16))));else{if("object"!=typeof eF||!("Buffer"in eF))throw Error("Unable to base64 encode: No available method.");t=eF.Buffer.from(e,"utf8").toString("base64")}return t}class u_ extends cA.Duplex{constructor({name:e,remote:t,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=t,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(od.MESSAGE,this._onMessage)}_write(e,t,r){return eH(this,void 0,void 0,function*(){return function(e,t,r,i){var n,s,o,a,l,c,u,h,d,p,f,g,m,y,v,b,w,E,_,C;return eH(this,void 0,void 0,function*(){let r=null===(n=e.state.remote)||void 0===n?void 0:n.isReady(),S=null===(s=e.state.remote)||void 0===s?void 0:s.isConnected(),I=null===(o=e.state.remote)||void 0===o?void 0:o.isPaused(),x=c7.getProvider(),A=null===(a=e.state.remote)||void 0===a?void 0:a.getChannelId(),k=null===(l=e.state.remote)||void 0===l?void 0:l.isAuthorized(),{deeplinkProtocol:O}=e.state,{method:P,data:R,triggeredInstaller:N}=(e=>{var t,r,i,n;let s;e3.isBuffer(e)?(s=e.toJSON())._isBuffer=!0:s=e;let o=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.method,a=!1;return"object"==typeof(null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.params)&&!0===(null===(n=null===(i=null==s?void 0:s.data)||void 0===i?void 0:i.params)||void 0===n?void 0:n.__triggeredInstaller)&&(a=!0,s.data.params=s.data.params.wrappedParams),{method:o,data:s,triggeredInstaller:a}})(t);if(cZ(`[RCPMS: write()] method='${P}' isRemoteReady=${r} channelId=${A} isSocketConnected=${S} isRemotePaused=${I} providerConnected=${x.isConnected()}`,t),!A)return P!==uu.METAMASK_GETPROVIDERSTATE&&cZ(`[RCPMS: write()] ${P} --> channelId is undefined`),i(Error("disconnected"));cZ(`[RCPMS: write()] remote.isPaused()=${null===(c=e.state.remote)||void 0===c?void 0:c.isPaused()} authorized=${k} ready=${r} socketConnected=${S}`,t);let T=null===(u=e.state.platformManager)||void 0===u?void 0:u.isSecure(),M=null!==(d=null===(h=e.state.platformManager)||void 0===h?void 0:h.isMobileWeb())&&void 0!==d&&d,L=null!==(f=null===(p=e.state.remote)||void 0===p?void 0:p.hasDeeplinkProtocol())&&void 0!==f&&f&&M&&k;try{if(!N){let t=JSON.stringify(null==R?void 0:R.data);if(t.length>1e6)return i(Error(`Message size ${t.length} exceeds maximum allowed size of 1000000 bytes`));null===(g=e.state.remote)||void 0===g||g.sendMessage(null==R?void 0:R.data).then(()=>{cZ(`[RCPMS: _write()] ${P} sent successfully`)}).catch(e=>{cZ("[RCPMS: _write()] error sending message",e)})}if(!T)return cZ(`[RCPMS: _write()] unsecure platform for method ${P} -- return callback`),i();if(N)return cZ("[RCPMS: _write()] prevent deeplink -- installation completed separately."),i();let t=null!==(v=null===(y=null===(m=e.state.remote)||void 0===m?void 0:m.getKeyInfo())||void 0===y?void 0:y.ecies.public)&&void 0!==v?v:"",r=encodeURI(`channelId=${A}&pubkey=${t}&comm=socket&t=d&v=2`);if(L){let t=JSON.stringify(null==R?void 0:R.data),n=null===(b=e.state.remote)||void 0===b?void 0:b.encrypt(t);if(!n)return cZ("[RCPMS: _write()] error encrypting message"),i(Error("RemoteCommunicationPostMessageStream - disconnected"));r+=`&scheme=${O}&rpc=${uE(n)}`}if(!(null===(w=e.state.platformManager)||void 0===w?void 0:w.isMetaMaskInstalled()))return cZ("[RCPMS: _write()] prevent deeplink until installation is completed."),i();uh[P]?(cZ(`[RCPMS: _write()] redirect link for '${P}' socketConnected=${S} connect?${r}`),null===(E=e.state.platformManager)||void 0===E||E.openDeeplink(`${uo}?${r}`,`${ua}?${r}`,"_self")):(null===(_=e.state.remote)||void 0===_?void 0:_.isPaused())?(cZ(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${P}`),null===(C=e.state.platformManager)||void 0===C||C.openDeeplink(`${uo}?redirect=true&${r}`,`${ua}?redirect=true&${r}`,"_self")):cZ(`[RCPMS: _write()] method ${P} doesn't need redirect.`)}catch(e){return cZ("[RCPMS: _write()] error sending message",e),i(Error("RemoteCommunicationPostMessageStream - disconnected"))}return i()})}(this,e,0,r)})}_read(){}_onMessage(e){return function(e,t){try{if(cZ("[RCPMS: onMessage()] message",t),!t||"object"!=typeof t||"object"!=typeof(null==t?void 0:t.data))return;if(!(null==t?void 0:t.name))return void cZ("[RCPMS: onMessage()] ignore message without name",t);if((null==t?void 0:t.name)!==ui.PROVIDER)return void cZ(`[RCPMS: onMessage()] ignore message with wrong name message=${t}`);if(e3.isBuffer(t)){let r=e3.from(t);e.push(r)}else e.push(t)}catch(e){cZ(`[RCPMS: onMessage()] ignore message error err=${e}`)}}(this,e)}start(){}}let uC=1,uS=e=>new Promise(t=>{setTimeout(()=>{t(!0)},e)}),uI=({checkInstallationOnAllCalls:e=!1,communicationLayerPreference:t,injectProvider:r,shouldShimWeb3:i,platformManager:n,installer:s,sdk:o,remoteConnection:a,debug:l})=>eH(void 0,void 0,void 0,function*(){var c,h;let d=(({name:e,remoteConnection:t})=>{if(!t||!(null==t?void 0:t.getConnector()))throw Error("Missing remote connection parameter");return new u_({name:e,remote:null==t?void 0:t.getConnector(),deeplinkProtocol:null==t?void 0:t.state.deeplinkProtocol,platformManager:null==t?void 0:t.getPlatformManager()})})({name:ui.INPAGE,target:ui.CONTENT_SCRIPT,platformManager:n,communicationLayerPreference:t,remoteConnection:a}),p=n.getPlatformType(),f=o.options.dappMetadata,g=`Sdk/Javascript SdkVersion/${un.version} Platform/${p} dApp/${null!==(c=f.url)&&void 0!==c?c:f.name} dAppTitle/${f.name}`,m=null,y=null,v=null===(h=o.options.storage)||void 0===h?void 0:h.storageManager;if(v){try{let e=yield v.getCachedAccounts();e.length>0&&(m=e[0])}catch(e){console.error(`[initializeMobileProvider] failed to get cached addresses: ${e}`)}try{let e=yield v.getCachedChainId();e&&(y=e)}catch(e){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${e}`)}}cZ(`[initializeMobileProvider] cachedAccountAddress: ${m}, cachedChainId: ${y}`);let b=!(!r||p===ow.NonBrowser||p===ow.ReactNative),w=c7.init({shouldSetOnWindow:b,connectionStream:d,shouldShimWeb3:i,sdkInstance:o}),E=!1,_=e=>{E=e},C=()=>E,S=(t,r,i,l)=>eH(void 0,void 0,void 0,function*(){var c,h,d,p,f,b,w,S,I;let x=c7.getProvider();if(E){x.emit("display_uri",(null==a?void 0:a.state.qrcodeLink)||""),null==a||a.showActiveModal();let e=C();for(;e;){let t=C(),r=null==a?void 0:a.isAuthorized();e=t&&!r,cZ(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${t} authorized: ${r}`),yield uS(1e3)}return cZ("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),i(...r)}let A=n.isMetaMaskInstalled(),k=null==a?void 0:a.isConnected(),O=null,P=null,R=null;if(O=null!==(c=x.getSelectedAddress())&&void 0!==c?c:m,R=x.getChainId()||y,O&&v&&O!==m&&v.persistAccounts([O]).catch(e=>{console.error(`[initializeMobileProvider] failed to persist account: ${e}`)}),R&&(y=R,v&&v.persistChainId(R).catch(e=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${e}`)})),cZ("[initializeMobileProvider: sendRequest()]",{selectedAddress:O,chainId:R}),l&&cZ(`[initializeMobileProvider: sendRequest()] method=${t} ongoing=${E} selectedAddress=${O} isInstalled=${A} checkInstallationOnAllCalls=${e} socketConnected=${k}`),O&&t.toLowerCase()===uu.ETH_ACCOUNTS.toLowerCase())return[O];if(R&&t.toLowerCase()===uu.ETH_CHAINID.toLowerCase())return R;let N=[uu.ETH_REQUESTACCOUNTS,uu.WALLET_REQUESTPERMISSIONS,uu.METAMASK_CONNECTSIGN,uu.METAMASK_CONNECTWITH],T=!uh[t],M=null===(h=o.options.readonlyRPCMap)||void 0===h?void 0:h[R];if(M&&T)try{let e=null===(d=null==r?void 0:r[0])||void 0===d?void 0:d.params,i=yield(({rpcEndpoint:e,method:t,sdkInfo:r,params:i})=>eH(void 0,void 0,void 0,function*(){let n;let s=JSON.stringify({jsonrpc:"2.0",method:t,params:i,id:uC+=1}),o={Accept:"application/json","Content-Type":"application/json"};e.includes("infura")&&(o["Metamask-Sdk-Info"]=r);try{n=yield u()(e,{method:"POST",headers:o,body:s})}catch(e){throw e instanceof Error?Error(`Failed to fetch from RPC: ${e.message}`):Error(`Failed to fetch from RPC: ${e}`)}if(!n.ok)throw Error(`Server responded with a status of ${n.status}`);return(yield n.json()).result}))({rpcEndpoint:M,sdkInfo:g,method:t,params:e||[]});return l&&cZ(`initializeProvider::ReadOnlyRPCResponse ${i}`),i}catch(e){console.warn(`[initializeMobileProvider: sendRequest()] method=${t} readOnlyRPCRequest failed:`,e)}if((!A||A&&!k)&&t!==uu.METAMASK_GETPROVIDERSTATE){let l=(null===(p=null==r?void 0:r[0])||void 0===p?void 0:p.params)||[];if(-1!==N.indexOf(t)||e){_(!0);let e=t===uu.METAMASK_CONNECTWITH,n=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:e?{method:t,id:n,params:l}:void 0}),yield new Promise((e,t)=>{(null==a?void 0:a.isAuthorized())&&(cZ("[initializeMobileProvider: sendRequest()] already authorized"),e(!0)),null==a||a.getConnector().once(od.AUTHORIZED,()=>{e(!0)}),o.once(od.PROVIDER_UPDATE,e=>{cZ(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${e}`),e===hy.EXTENSION?t(od.PROVIDER_UPDATE):t(Error("Connection Terminated"))})})}catch(e){if(hy.EXTENSION===e){if(cZ(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${t} on the active provider`),t.toLowerCase()===uu.METAMASK_CONNECTSIGN.toLowerCase()){let e=yield null===(f=o.getProvider())||void 0===f?void 0:f.request({method:uu.ETH_REQUESTACCOUNTS,params:[]});if(!e.length)throw Error("SDK state invalid -- undefined accounts");let t=yield null===(b=o.getProvider())||void 0===b?void 0:b.request({method:uu.PERSONAL_SIGN,params:[l[0],e[0]]});return o.emit(c9.ConnectWithResponse,t),t}if(t.toLowerCase()===uu.METAMASK_CONNECTWITH.toLowerCase()){let[e]=l,t=yield(({method:e,sdk:t,params:r})=>eH(void 0,void 0,void 0,function*(){var i,n,s,o;if(!t.isExtensionActive())throw Error("SDK state invalid -- extension is not active");cZ("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",e,r);let a=yield null===(i=t.getProvider())||void 0===i?void 0:i.request({method:uu.ETH_REQUESTACCOUNTS,params:[]});if(!a.length)throw Error("SDK state invalid -- undefined accounts");if((null==e?void 0:e.toLowerCase())===uu.PERSONAL_SIGN.toLowerCase()){let i={method:e,params:[r[0],a[0]]};return yield null===(n=t.getProvider())||void 0===n?void 0:n.request(i)}if((null==e?void 0:e.toLowerCase())===uu.ETH_SENDTRANSACTION.toLowerCase()){let i={method:e,params:[Object.assign(Object.assign({},r[0]),{from:a[0]})]};return yield null===(s=t.getProvider())||void 0===s?void 0:s.request(i)}return up.includes(e.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${e} -- not handled by the extension -- call separately`),a):yield null===(o=t.getProvider())||void 0===o?void 0:o.request({method:e,params:r})}))({method:e.method,sdk:o,params:e.params});return o.emit(c9.ConnectWithResponse,t),t}return cZ(`[initializeMobileProvider: sendRequest()] sending '${t}' on active provider`,l),yield null===(w=o.getProvider())||void 0===w?void 0:w.request({method:t,params:l})}if(e===od.REJECTED)throw null==a||a.closeModal(),null===(S=o.getProvider())||void 0===S||S.handleDisconnect({terminate:!1}),Object.assign(Error("User rejected connection"),{code:4001});throw cZ(`[initializeMobileProvider: sendRequest()] failed to start installer: ${e}`),e}finally{_(!1)}if(t===uu.ETH_REQUESTACCOUNTS)return P=yield new Promise(e=>{let t=setInterval(()=>{let{accounts:r}=x.getState();r&&(clearInterval(t),e(r))},100)}),cZ(`[initializeMobileProvider: sendRequest()] selectedAddress: ${O} --- SKIP rpc call`),P;if(t===uu.METAMASK_CONNECTWITH)try{let e,t,r=0,i=({resolve:e,reject:t})=>{r+=1;let i=null==a?void 0:a.getConnector().getRPCMethodTracker(),s=null==i?void 0:i[n];return cZ(`TRACKER: update method ${n}`,s),(null==s?void 0:s.result)?(cZ("[initializeMobileProvider: sendRequest()] found result",s.result),o.emit(c9.ConnectWithResponse,s.result),void e(s.result)):(null==s?void 0:s.error)?(cZ("[initializeMobileProvider: sendRequest()] found error",s.error),void t(s.error)):r>=5?(cZ("[initializeMobileProvider: sendRequest()] max message count reached without result"),void t(Error("Max message count reached without result"))):void cZ("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")},s=yield new Promise((r,s)=>{let o=null==a?void 0:a.getConnector().getRPCMethodTracker();cZ(`TRACKER: method ${n}`,o),(null==o?void 0:o[n].result)?(cZ("[initializeMobileProvider: sendRequest()] found result",null==o?void 0:o[n].result),r(null==o?void 0:o[n].result)):(null==o?void 0:o[n].error)&&(cZ("[initializeMobileProvider: sendRequest()] found error",null==o?void 0:o[n].error),s(null==o?void 0:o[n].error)),t=()=>i({resolve:r,reject:s}),e=null==a?void 0:a.getConnector().on(od.RPC_UPDATE,t)});return t&&(null==e||e.off(od.RPC_UPDATE,t)),cZ("TRACKER: result",s),s}catch(e){throw cZ("[initializeMobileProvider: sendRequest()] error:",e),e}return r[0]&&"object"==typeof r[0]&&(r[0].params={__triggeredInstaller:!0,wrappedParams:r[0].params}),i(...r)}if(n.isSecure()&&uh[t])return i(...r);if(o.isExtensionActive())return cZ(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${t}' to it`,r,l),yield null===(I=o.getProvider())||void 0===I?void 0:I.request({method:t,params:l});throw cZ(`[initializeMobileProvider: sendRequest()] method=${t} --- skip --- not connected/installed`),Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{let e=yield i(...r);if(cZ(`[initializeMobileProvider: sendRequest()] method=${t} rpcResponse`,e),t===uu.WALLET_REQUESTPERMISSIONS){let t=e.reduce((e,t)=>{var r;if("eth_accounts"===t.parentCapability){let i=null===(r=t.caveats.find(e=>"restrictReturnedAccounts"===e.type))||void 0===r?void 0:r.value;i&&e.push(...i)}return e},[]);cZ("[initializeMobileProvider: sendRequest()] accountsToPersist:",t),t.length>0&&(x.handleAccountsChanged(t,!1),null==v||v.persistAccounts(t))}return e}catch(e){throw console.error("[initializeMobileProvider: sendRequest()] error:",e),e}}),{request:I}=w;w.request=(...e)=>eH(void 0,void 0,void 0,function*(){return S(null==e?void 0:e[0].method,e,I,l)});let{send:x}=w;return w.send=(...e)=>eH(void 0,void 0,void 0,function*(){return S(null==e?void 0:e[0],e,x,l)}),cZ("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),w});class ux{constructor({serverUrl:e,enabled:t,originatorInfo:r}){this.serverURL=sr,this.serverURL=e,this.originatorInfo=r,this.enabled=null==t||t}send({event:e,params:t}){if(!this.enabled)return;let r=Object.assign(Object.assign({id:"sdk",event:e,sdkVersion:un.version},this.originatorInfo),{params:t});cZ(`[Analytics: send()] event: ${e}`,r),n7(r,this.serverURL).catch(e=>{cZ(`[Analytics: send()] error: ${e}`)})}}let uA=()=>{let e;if("undefined"==typeof document)return;let t=document.getElementsByTagName("link");for(let r=0;r<t.length;r++)"icon"!==t[r].getAttribute("rel")&&"shortcut icon"!==t[r].getAttribute("rel")||(e=t[r].getAttribute("href"));return e};function uk(e){var t,r,i;let{dappMetadata:n}=e,s=function({url:e,name:t}){var r;let i=uE(e+t);if(!localStorage)return"";let n=null!==(r=localStorage.getItem(i))&&void 0!==r?r:"";if(!n){n=_();try{localStorage.setItem(i,n)}catch(e){return""}}return n}({url:null!==(t=null==n?void 0:n.url)&&void 0!==t?t:"no_url",name:null!==(r=null==n?void 0:n.name)&&void 0!==r?r:"no_name"}),o=null===(i=e.platformManager)||void 0===i?void 0:i.getPlatformType(),a=o===ow.DesktopWeb,l=o===ow.MetaMaskMobileWebview,c="N/A";return a?c="extension":l&&(c="mobile"),{id:s,from:c}}let uO=(e,t,r)=>{if(so(e)){if(r||t&&"object"==typeof t&&null!==t&&"error"in t){let i=r||(null==t?void 0:t.error);i&&4001===i.code?p.analytics.track("sdk_action_rejected",{action:e}):p.analytics.track("sdk_action_failed",{action:e})}else p.analytics.track("sdk_action_succeeded",{action:e})}},uP=({provider:e,sdkInstance:t})=>{if("state"in e)throw Error("INVALID EXTENSION PROVIDER");return new Proxy(e,{get:(r,i)=>"request"===i?function(e){var i,n;return eH(this,void 0,void 0,function*(){cZ("[wrapExtensionProvider()] Overwriting request method",e);let{method:s,params:o}=e,a=ud.includes(s.toLowerCase()),{id:l,from:c}=uk(t);if(a&&(null===(i=t.analytics)||void 0===i||i.send({event:om.SDK_RPC_REQUEST,params:{method:s,from:c,id:l}})),so(s)&&p.analytics.track("sdk_action_requested",{action:s}),s===uu.METAMASK_BATCH&&Array.isArray(o))return(({target:e,args:t,trackEvent:r,sdkInstance:i})=>eH(void 0,void 0,void 0,function*(){var n,s;if("metamask_batch"!==t.method)throw Error("Invalid usage");let o=[];for(let r of null!==(n=null==t?void 0:t.params)&&void 0!==n?n:[]){let t=yield null==e?void 0:e.request({method:r.method,params:r.params});o.push(t)}let{id:a,from:l}=uk(i);for(let e of(r&&(null===(s=i.analytics)||void 0===s||s.send({event:om.SDK_RPC_REQUEST_DONE,params:{method:t.method,from:l,id:a}})),o))uO(t.method,e,null);return o}))({target:r,args:e,trackEvent:a,sdkInstance:t});if(s.toLowerCase()===uu.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(o))return(({target:e,params:t})=>eH(void 0,void 0,void 0,function*(){let r,i=null;try{let i=yield e.request({method:uu.ETH_REQUESTACCOUNTS,params:[]});if(!i.length)throw Error("SDK state invalid -- undefined accounts");return r=yield e.request({method:uu.PERSONAL_SIGN,params:[t[0],i[0]]})}catch(e){throw i=e,e}finally{uO(uu.PERSONAL_SIGN,r,i)}}))({target:r,params:o});if(s.toLowerCase()===uu.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(o))return(({target:e,params:t})=>eH(void 0,void 0,void 0,function*(){let[r]=t,i=r.method,n=r.params,s,o=null;try{let t=yield e.request({method:uu.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(t)||!t.length)throw Error("SDK state invalid -- undefined accounts");return(null==i?void 0:i.toLowerCase())===uu.PERSONAL_SIGN.toLowerCase()?s=yield e.request({method:i,params:[n[0],t[0]]}):(null==i?void 0:i.toLowerCase())===uu.ETH_SENDTRANSACTION.toLowerCase()?s=yield e.request({method:i,params:[Object.assign(Object.assign({},n[0]),{from:t[0]})]}):up.includes(i.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${i} -- not handled by the extension -- call separately`),s=t):s=yield e.request({method:i,params:n})}catch(e){throw o=e,e}finally{uO(i,s,o)}}))({target:r,params:o});let u,h=null;try{return u=yield r.request(e)}catch(e){throw h=e,e}finally{a&&(null===(n=t.analytics)||void 0===n||n.send({event:om.SDK_RPC_REQUEST_DONE,params:{method:s,from:c,id:l}})),uO(s,u,h)}})}:"getChainId"===i?function(){return e.chainId}:"getNetworkVersion"===i?function(){return e.networkVersion}:"getSelectedAddress"===i?function(){return e.selectedAddress}:"isConnected"===i?function(){return e._state.isConnected}:r[i]})};(hm=hv||(hv={})).Announce="eip6963:announceProvider",hm.Request="eip6963:requestProvider";let uR=e=>eH(void 0,void 0,void 0,function*(){let{options:t}=e,{infuraAPIKey:r}=t;if(!r)return;let i={"0x1":`https://mainnet.infura.io/v3/${r}`,"0x5":`https://goerli.infura.io/v3/${r}`,"0xaa36a7":`https://sepolia.infura.io/v3/${r}`,"0xe708":`https://linea-mainnet.infura.io/v3/${r}`,"0xe704":`https://linea-goerli.infura.io/v3/${r}`,"0x89":`https://polygon-mainnet.infura.io/v3/${r}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${r}`,"0x45":`https://optimism-mainnet.infura.io/v3/${r}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${r}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${r}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${r}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${r}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${r}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${r}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${r}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${r}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${r}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${r}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${r}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${r}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${r}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${r}`};e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),i):e.options.readonlyRPCMap=i}),uN=e=>eH(void 0,void 0,void 0,function*(){let{options:t}=e,{readonlyRPCMap:r}=t;if(r)try{cZ("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",r),e.setReadOnlyRPCCalls(!0)}catch(e){throw Error("Invalid Infura Settings")}});var uT="INSTALLED",uM="NOT_INSTALLED",uL="REGISTERED",uD="REGISTERING",uB="RELOADING",uj={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},u$="REGISTRATION_IN_PROGRESS",uU="FORWARDER_ID",uq=function(){function e(t){var r=void 0===t?{}:t,i=r.forwarderOrigin,n=r.forwarderMode,s=void 0===n?e.FORWARDER_MODE.INJECT:n;this.forwarderOrigin=void 0===i?"https://fwd.metamask.io":i,this.forwarderMode=s,this.state=e.isMetaMaskInstalled()?uT:uM;var o=e._detectBrowser();this.downloadUrl=o?uj[o]:uj.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===e.FORWARDER_MODE.INJECT&&"true"===sessionStorage.getItem(u$)&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return"metamask:reload"===e.data.type?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},e.prototype._onMessageUnknownStateError=function(e){throw Error("Unknown state: '"+e+"'")},e.prototype._onMessageFromForwarder=function(t){var r,i,n;return r=this,i=void 0,n=function(){return function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,function(r){switch(r.label){case 0:switch(this.state){case uB:return[3,1];case uM:return[3,2];case uT:return[3,3];case uD:return[3,5];case uL:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=uB,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=uD,[4,e._register()];case 4:return r.sent(),this.state=uL,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),r.label=8;case 8:return[2]}})},new(i||(i=Promise))(function(e,t){function s(e){try{a(n.next(e))}catch(e){t(e)}}function o(e){try{a(n.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(s,o)}a((n=n.apply(r,[])).next())})},e.prototype.startOnboarding=function(){sessionStorage.setItem(u$,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){"true"===sessionStorage.getItem(u$)&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),e._removeForwarder()),sessionStorage.setItem(u$,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(e){var t=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",uU),t.insertBefore(r,t.children[0])},e._removeForwarder=function(){var e;null===(e=document.getElementById(uU))||void 0===e||e.remove()},e._detectBrowser=function(){var e=c8.parse(window.navigator.userAgent);return"Firefox"===e.browser.name?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}();class uH{constructor({remote:e,preferDesktop:t,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=t,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return function(){return eH(this,void 0,void 0,function*(){cZ("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),(new uq).startOnboarding()})}()}redirectToProperInstall(){return eH(this,void 0,void 0,function*(){return function(e){var t,r;return eH(this,void 0,void 0,function*(){let{state:i}=e,n=null===(t=i.platformManager)||void 0===t?void 0:t.getPlatformType();if(cZ(`[MetamaskInstaller: redirectToProperInstall()] platform=${n}`),n===ow.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield null===(r=i.remote)||void 0===r?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(e){throw i.isInstalling=!1,e}return!0})}(this)})}checkInstallation(){return eH(this,void 0,void 0,function*(){return function(e){var t;return eH(this,void 0,void 0,function*(){let{state:r}=e,i=null===(t=r.platformManager)||void 0===t?void 0:t.isMetaMaskInstalled();return cZ(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:t}){return eH(this,void 0,void 0,function*(){this.state.connectWith=t,cZ(`[MetaMaskInstaller: start()] wait=${e}`,t),yield function(e,{wait:t=!1}){return eH(this,void 0,void 0,function*(){return cZ(`[MetamaskInstaller: startInstaller()] wait=${t}`),t&&(yield uS(1e3)),yield e.checkInstallation()})}(this,{wait:e})})}}class uF{constructor({debug:e,sdkVersion:t}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=null!=e&&e,this.sdkVersion=t}loadComponent(e){return eH(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{let e=yield Promise.resolve().then(function(){return dr});console.log("loader",e),e.defineCustomElements()}catch(t){console.error(`Failed to load ${e} modal:`,t)}}})}renderInstallModal(e){var t;return eH(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");let r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:t}})=>e.onClose(t)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",t=>{var r;return null===(r=e.onAnalyticsEvent)||void 0===r?void 0:r.call(e,t.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var t;return eH(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");let r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:t}})=>e.onClose(t)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var t;return eH(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");let r=document.createElement("mm-pending-modal");r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:t}})=>e.updateOTPValue(t)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){let t=()=>{var t;let r=null===(t=this.containers.pending)||void 0===t?void 0:t.querySelector("mm-pending-modal");return!!r&&(r.otpCode=e,!0)};setTimeout(()=>{t()},800)}updateQRCode(e){var t,r;let i=null===(t=this.containers.install)||void 0===t?void 0:t.querySelector("mm-install-modal");if(i)i.link=e;else{let t=null===(r=this.containers.select)||void 0===r?void 0:r.querySelector("mm-select-modal");t&&(t.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,t])=>{var r;null===(r=null==t?void 0:t.parentNode)||void 0===r||r.removeChild(t),this.containers[e]=void 0})}}let uz=({link:e,debug:t,installer:r,terminate:i,connectWithExtension:n,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,l=null;cZ("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),cZ(`[UI: InstallModal-web: sdkWebInstallModal()] link=${e}`),cZ(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --ios`),cZ(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --android`),cZ(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${e}"`);let c=e=>{var t;cZ("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",e,l),(null==l?void 0:l.parentNode)&&(null===(t=l.parentNode)||void 0===t||t.removeChild(l)),l=null,a=null,!0===e&&(null==i||i())};return{mount:i=>{if(cZ("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",l),l)return l.style.display="block",void(null==a||a.updateQRCode(i));a=new uF({debug:t,sdkVersion:un.version}),l=document.createElement("div"),document.body.appendChild(l),window.extension?a.renderSelectModal({parentElement:l,connectWithExtension:()=>{c(),null==n||n()},onClose:c,link:e,preferDesktop:null!=s&&s}).catch(e=>{console.error(e)}):a.renderInstallModal({parentElement:l,preferDesktop:null!=s&&s,link:e,metaMaskInstaller:r,onClose:c,onAnalyticsEvent:o}).catch(e=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",e)})},unmount:c}},uW=({onDisconnect:e,debug:t})=>{let r=null,i=null,n=()=>{cZ("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",r),(null==r?void 0:r.parentNode)&&r.parentNode.removeChild(r),r=null,i=null},s=e=>{cZ("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",e),i&&i.updateOTPValue(e)},o=({displayOTP:o}={displayOTP:!0})=>{cZ("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",r),r?r.style.display="block":(i=new uF({debug:t,sdkVersion:un.version}),r=document.createElement("div"),document.body.appendChild(r),i.renderPendingModal({parentElement:r,onClose:n,onDisconnect:e,updateOTPValue:s,displayOTP:o}).catch(e=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",e)}))};return o(),{mount:o,unmount:n,updateOTPValue:s}};function uK(e,t){var r,i,n,s;e.connector||(cZ("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new sE({anonId:t.anonId,platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:un.version,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(cZ("[RemoteConnection: initializeConnector()] reset background timer",t.timer),null===(i=null===(r=t.timer)||void 0===r?void 0:r.stopBackgroundTimer)||void 0===i||i.call(r),null===(s=null===(n=t.timer)||void 0===n?void 0:n.runBackgroundTimer)||void 0===s||s.call(n,()=>!1,1e4)))}function uV(e){e.listeners.forEach(({event:t,handler:r})=>{var i;null===(i=e.connector)||void 0===i||i.off(t,r)}),e.listeners=[]}function uG(e,t){function r(t,r){var i;null===(i=e.connector)||void 0===i||i.on(t,r),e.listeners.push({event:t,handler:r})}e.connector&&(uV(e),r(od.WALLET_INIT,({accounts:e,chainId:t})=>eH(this,void 0,void 0,function*(){cZ(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${e} chainId=${t}`);let r=c7.getProvider();r._setConnected(),r._initializeState({accounts:e,chainId:t,isUnlocked:!1}),r.emit("chainChanged",t),r.emit("accountsChanged",e)})),r(od.AUTHORIZED,()=>eH(this,void 0,void 0,function*(){var t,r,i,n;try{cZ("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal);let s=c7.getProvider();s._setConnected(),null===(r=null===(t=e.pendingModal)||void 0===t?void 0:t.unmount)||void 0===r||r.call(t),null===(n=null===(i=e.installModal)||void 0===i?void 0:i.unmount)||void 0===n||n.call(i,!1),e.otpAnswer=void 0,e.authorized=!0,cZ("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",s.getState()),yield s.forceInitializeState()}catch(e){}})),r(od.TERMINATE,()=>{var t,r,i,n,s;null===(r=null===(t=e.pendingModal)||void 0===t?void 0:t.unmount)||void 0===r||r.call(t),null===(n=null===(i=e.installModal)||void 0===i?void 0:i.unmount)||void 0===n||n.call(i,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,null===(s=e.connector)||void 0===s||s.disconnect({terminate:!0}),e.authorized=!1,c7.getProvider().handleDisconnect({terminate:!0}),uV(e),cZ("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}class uZ{constructor(e){var t,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;let n=!0===(null===(t=e.logging)||void 0===t?void 0:t.developerMode)||!0===(null===(r=e.logging)||void 0===r?void 0:r.sdk);this.state.developerMode=n,this.state.analytics=e.analytics,this.state.preferDesktop=null!==(i=e.preferDesktop)&&void 0!==i&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=uz),e.modals.otp||(e.modals.otp=uW)}startConnection(e){return eH(this,void 0,void 0,function*(){return function(e,t,{initialCheck:r,connectWith:i}={}){var n,s,o,a,l,c,u,h,d,f,g,m,y,v,b,w,E,_,C;return eH(this,void 0,void 0,function*(){try{if(uK(e,t),!e.connector)throw Error("no connector defined");uG(e);let S=c7.getProvider();e.authorized=!1,S.emit("connecting");let I=yield null===(n=e.connector)||void 0===n?void 0:n.originatorSessionConnect();cZ(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${r}`,I);let x=null!==(s=null==I?void 0:I.channelId)&&void 0!==s?s:"",A=null!==(a=null===(o=e.connector.getKeyInfo())||void 0===o?void 0:o.ecies.public)&&void 0!==a?a:"",k=null!==(c=null===(l=e.connector.getKeyInfo())||void 0===l?void 0:l.ecies.private)&&void 0!==c?c:"";if(r&&!I)return Promise.resolve();if(!I&&!r){let t=yield e.connector.generateChannelIdConnect();x=null!==(u=t.channelId)&&void 0!==u?u:"",A=null!==(h=t.pubKey)&&void 0!==h?h:"",k=null!==(d=t.privKey)&&void 0!==d?d:"";let r=Date.now();null===(f=e.connector.state.storageManager)||void 0===f||f.persistChannelConfig({channelId:x,localKey:k,lastActive:r,validUntil:r+6048e5})}if(r&&(null==I?void 0:I.channelId))return(null===(g=e.connector)||void 0===g?void 0:g.isConnected())||(cZ(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${r}`,I),yield null===(m=e.connector)||void 0===m?void 0:m.connectToChannel({channelId:x})),Promise.resolve();!I||(null===(y=e.connector)||void 0===y?void 0:y.isConnected())||(cZ("[RemoteConnection: startConnection()] reconnecting to channel",I),yield null===(v=e.connector)||void 0===v?void 0:v.connectToChannel({channelId:x}));let O=(null===(b=e.platformManager)||void 0===b?void 0:b.isSecure())?"":"&t=q",P=un.version,{iconUrl:R,name:N,url:T,scheme:M}=t.dappMetadata||{},L=null===(w=e.platformManager)||void 0===w?void 0:w.getPlatformType(),D="N/A";"undefined"!=typeof window&&window.location&&window.location.hostname?D=window.location.hostname:void 0!==N?D=N:void 0!==T&&(D=T);let B={url:null!=T?T:"",title:null!=N?N:"",icon:R,scheme:null!=M?M:"",apiVersion:P,dappId:D||T||"N/A",anonId:t.anonId,platform:null!=L?L:"",source:null!==(E=t._source)&&void 0!==E?E:""},j=uE(JSON.stringify(B)),$=`channelId=${x}&v=2&comm=${null!==(_=e.communicationLayerPreference)&&void 0!==_?_:""}&pubkey=${A}${O}&originatorInfo=${j}`;if(i){$+=`&rpc=${uE(JSON.stringify(i))}`;let t=e.connector.getRPCMethodTracker();t&&(t[`${i.id}`]=Object.assign(Object.assign({},i),{id:`${i.id}`,timestamp:Date.now()}))}let U=encodeURI($),q=`${e.useDeeplink?ua:uo}?${$}`;if(e.qrcodeLink=q,e.developerMode&&cZ(`[RemoteConnection: startConnection()] qrcodeLink=${U}`),S.emit("display_uri",q),p.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),null===(C=e.platformManager)||void 0===C?void 0:C.isSecure()){let t=setTimeout(()=>{p.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(e,t){var r,i;return eH(this,void 0,void 0,function*(){let n=`${uo}?${t}`,s=`${ua}?${t}`;null===(i=null===(r=e.platformManager)||void 0===r?void 0:r.openDeeplink)||void 0===i||i.call(r,n,s,"_self")})}(e,U),new Promise((r,i)=>{var n,s,o;if(null===(n=e.connector)||void 0===n?void 0:n.isAuthorized())return clearTimeout(t),void r();null===(s=e.connector)||void 0===s||s.once(od.AUTHORIZED,()=>{clearTimeout(t),r()}),null===(o=e.connector)||void 0===o||o.once(od.REJECTED,()=>{clearTimeout(t),i(od.REJECTED)})})}return function(e,t,r){return eH(this,void 0,void 0,function*(){let i=setTimeout(()=>{p.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((n,s)=>{var o,a,l,c;if(!e.connector)return void s(Error("No connector available"));cZ("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:r});let u=`${e.useDeeplink?ua:uo}?${r}`;e.installModal=null===(a=(o=t.modals).install)||void 0===a?void 0:a.call(o,{link:u,preferDesktop:e.preferDesktop,installer:t.getMetaMaskInstaller(),terminate:()=>{cZ("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),t.sdk.terminate().catch(e=>{console.warn("[MMSDK] failed to terminate connection",e)})},debug:e.developerMode,connectWithExtension:()=>{var e;return null===(e=t.connectWithExtensionProvider)||void 0===e||e.call(t),!1},onAnalyticsEvent:({event:r,params:i})=>{var n,s,o;let a=Object.assign(Object.assign({},i),{sdkVersion:t.sdk.getVersion(),dappId:null===(n=t.dappMetadata)||void 0===n?void 0:n.name,source:t._source,url:null===(s=t.dappMetadata)||void 0===s?void 0:s.url});null===(o=e.analytics)||void 0===o||o.send({event:r,params:a})}}),null===(c=null===(l=e.installModal)||void 0===l?void 0:l.mount)||void 0===c||c.call(l,u),t.sdk.once(od.PROVIDER_UPDATE,e=>eH(this,void 0,void 0,function*(){if(cZ("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),e===hy.TERMINATE)return clearTimeout(i),void s({code:4001,message:"User rejected the request."});s(e)})),e.connector.once(od.AUTHORIZED,()=>{clearTimeout(i),n()}),e.connector.once(od.REJECTED,()=>{clearTimeout(i),s(od.REJECTED)}),e.connector.once(od.CLIENTS_READY,()=>eH(this,void 0,void 0,function*(){cZ("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(i),n()}))})})}(e,t,U)}catch(e){throw console.error("[startConnection] error",e),e}})}(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var t,r,i;return eH(this,void 0,void 0,function*(){let n=yield null===(r=null===(t=e.options.storage)||void 0===t?void 0:t.storageManager)||void 0===r?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){let e={privateKey:null==n?void 0:n.localKey};this.options.ecies=e}uK(this.state,this.options),yield null===(i=this.getConnector())||void 0===i?void 0:i.initFromDappStorage(),uG(this.state,this.options)})}showActiveModal(){var e,t,r,i,n;(e=this.state).authorized?cZ("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?null===(r=(t=e.pendingModal).mount)||void 0===r||r.call(t):e.installModal&&(null===(n=(i=e.installModal).mount)||void 0===n||n.call(i,e.qrcodeLink||""))}closeModal(){var e,t,r,i;null===(t=null===(e=this.state.pendingModal)||void 0===e?void 0:e.unmount)||void 0===t||t.call(e),null===(i=null===(r=this.state.installModal)||void 0===r?void 0:r.unmount)||void 0===i||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getChannelConfig()}getKeyInfo(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isReady())||!1}isAuthorized(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isAuthorized())||!1}isPaused(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.isPaused()}disconnect(e){var t,r,i,n;cZ("[RemoteConnection: disconnect()]",e),(null==e?void 0:e.terminate)&&(c7.getProvider().handleDisconnect({terminate:!0}),null===(r=null===(t=this.state.pendingModal)||void 0===t?void 0:t.unmount)||void 0===r||r.call(t),this.state.otpAnswer=void 0),null===(i=this.state.connector)||void 0===i||i.disconnect(e),n=this.state,cZ("[RemoteConnection: cleanupConnector()] cleaning up connector"),n.connector&&(uV(n),n.connector.disconnect({terminate:!0}).catch(e=>{cZ("[RemoteConnection: cleanupConnector()] error disconnecting connector",e)}))}}class uJ extends g(){constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:us,i18nOptions:{enabled:!1}}){var t,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",d().disable();let n=!0===(null===(t=e.logging)||void 0===t?void 0:t.developerMode);if(((null===(r=e.logging)||void 0===r?void 0:r.sdk)||n)&&d().enable("MM_SDK"),cZ("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(null===(i=e.dappMetadata)||void 0===i?void 0:i.url)){if("undefined"==typeof window||"undefined"==typeof document)throw Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=us),this.init().then(()=>{cZ("[MetaMaskSDK: constructor()]: initialized successfully."),"undefined"!=typeof window&&(window.mmsdk=this)}).catch(e=>{console.error("[MetaMaskSDK: constructor()] error during initialization",e)})}init(){return eH(this,void 0,void 0,function*(){return function(e){var t;return eH(this,void 0,void 0,function*(){if("undefined"!=typeof window&&(null===(t=window.mmsdk)||void 0===t?void 0:t.isInitialized()))return cZ("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return cZ("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return cZ("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=function(e){var t,r,i,n,s,o,a,l,c,u,h;return eH(this,void 0,void 0,function*(){let{options:f}=e;if(f.logging=null!==(t=f.logging)&&void 0!==t?t:{},f.communicationLayerPreference=null!==(r=f.communicationLayerPreference)&&void 0!==r?r:ob.SOCKET,void 0!==f.enableDebug&&(d().enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=null===(i=f.enableAnalytics)||void 0===i||i,f.injectProvider=null===(n=f.injectProvider)||void 0===n||n,f.shouldShimWeb3=null===(s=f.shouldShimWeb3)||void 0===s||s,f.extensionOnly=null===(o=f.extensionOnly)||void 0===o||o,f.useDeeplink=null===(a=f.useDeeplink)||void 0===a||a,f.storage=null!==(l=f.storage)&&void 0!==l?l:{enabled:!0},f.headless){d()("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");let e=()=>{};f.modals={install:()=>({mount:e,unmount:e})},f.ui={installer:e}}let g=!0===(null===(c=f.logging)||void 0===c?void 0:c.developerMode);e.debug=(null===(u=f.logging)||void 0===u?void 0:u.sdk)||g,cZ("[MetaMaskSDK: performSDKInitialization()] options",e.options);let m=Object.assign({},f.logging);g&&(m.sdk=!0,m.eciesLayer=!0,m.keyExchangeLayer=!0,m.remoteLayer=!0,m.serviceLayer=!0,m.plaintext=!0),yield function(e){var t;return eH(this,void 0,void 0,function*(){let{options:r}=e;e.platformManager=new ue({useDeepLink:null!==(t=r.useDeeplink)&&void 0!==t&&t,preferredOpenLink:r.openDeeplink,debug:e.debug})})}(e),yield function(e){var t,r,i,n,s;return eH(this,void 0,void 0,function*(){let{options:o}=e,a=null===(t=e.platformManager)||void 0===t?void 0:t.getPlatformType();e.analytics=new ux({serverUrl:null!==(r=o.communicationServerUrl)&&void 0!==r?r:sr,enabled:o.enableAnalytics,originatorInfo:{url:null!==(i=o.dappMetadata.url)&&void 0!==i?i:"",title:null!==(n=o.dappMetadata.name)&&void 0!==n?n:"",dappId:e.getDappId(),platform:null!=a?a:"",source:null!==(s=o._source)&&void 0!==s?s:"",anonId:""}})})}(e),yield function(e){var t,r,i;return eH(this,void 0,void 0,function*(){if(!e.options.enableAnalytics||!(null===(t=e.platformManager)||void 0===t?void 0:t.isBrowser())&&!(null===(r=e.platformManager)||void 0===r?void 0:r.isReactNative()))return;let n=e.getVersion(),s=e.getDappId(),o=yield e.getAnonId(),a=null===(i=e.platformManager)||void 0===i?void 0:i.getPlatformType(),l=e.options._source;p.analytics.setGlobalProperty("sdk_version",n),p.analytics.setGlobalProperty("dapp_id",s),p.analytics.setGlobalProperty("anon_id",o),p.analytics.setGlobalProperty("platform",a),p.analytics.setGlobalProperty("integration_type",l),p.analytics.enable(),p.analytics.track("sdk_initialized",{})})}(e),yield function(e){var t;return eH(this,void 0,void 0,function*(){let{options:r}=e;!0!==(null===(t=r.storage)||void 0===t?void 0:t.enabled)||r.storage.storageManager||(r.storage.storageManager=yield ut(r.storage))})}(e),yield function(e){return eH(this,void 0,void 0,function*(){let{options:t}=e,r=/^(http|https):\/\/[^\s]*$/;if(t.dappMetadata){t.dappMetadata.iconUrl&&!r.test(t.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),t.dappMetadata.iconUrl=void 0),t.dappMetadata.base64Icon&&t.dappMetadata.base64Icon.length>163400&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),t.dappMetadata.base64Icon=void 0),t.dappMetadata.url&&!r.test(t.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");let e=uA();if(e&&!t.dappMetadata.iconUrl&&!t.dappMetadata.base64Icon){let r=`${window.location.protocol}//${window.location.host}${e}`;t.dappMetadata.iconUrl=r}}e.dappMetadata=t.dappMetadata})}(e),yield uR(e),yield uN(e);let{metamaskBrowserExtension:y,preferExtension:v,shouldReturn:b}=yield function(e){var t,r,i,n;return eH(this,void 0,void 0,function*(){let{options:s}=e,o,a=!1,l=!1;if("undefined"==typeof window||!window.ethereum||(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView()))(null===(r=e.platformManager)||void 0===r?void 0:r.isMetaMaskMobileWebView())&&(null===(i=e.analytics)||void 0===i||i.send({event:om.SDK_USE_INAPP_BROWSER}),e.activeProvider=uP({provider:window.ethereum,sdkInstance:e}),e._initialized=!0,l=!0);else{a="extension"===localStorage.getItem(ug);try{o=yield function({mustBeMetaMask:e,sdkInstance:t}){return eH(this,void 0,void 0,function*(){if("undefined"==typeof window)throw Error("window not available");try{let e=yield new Promise((e,t)=>{let r=setTimeout(()=>{t(Error("eip6963RequestProvider timed out"))},500);window.addEventListener(hv.Announce,t=>{let{detail:{info:i,provider:n}={}}=t,{name:s,rdns:o,uuid:a}=null!=i?i:{};uc.test(a)&&s.startsWith(ul.NAME)&&ul.RDNS.includes(o)&&(clearTimeout(r),e(n))}),window.dispatchEvent(new Event(hv.Request))});return uP({provider:e,sdkInstance:t})}catch(r){if(!e&&window.ethereum)return uP({provider:window.ethereum,sdkInstance:t});throw Error("Provider not found")}})}({mustBeMetaMask:!0,sdkInstance:e}),window.extension=o,o.on(uv.CHAIN_CHANGED,t=>{cZ(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${t}`),e.sdkProvider&&e.getMobileProvider().emit(uv.CHAIN_CHANGED,t)}),o.on(uv.ACCOUNTS_CHANGED,t=>eH(this,void 0,void 0,function*(){var r;cZ(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${t}`);let i=!!e.sdkProvider,n=!!e.extensionActive;if(i&&e.getMobileProvider().emit(uv.ACCOUNTS_CHANGED,t),n&&0===(null==t?void 0:t.length)&&0===(yield null===(r=e.getProvider())||void 0===r?void 0:r.request({method:uu.WALLET_GETPERMISSIONS,params:[]})).length)try{yield e.terminate()}catch(e){cZ("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",e)}})),o.on(uv.DISCONNECT,t=>{cZ(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${t}`),e.sdkProvider&&e.getMobileProvider().emit(uv.DISCONNECT,t)}),o.on(uv.CONNECT,t=>{cZ(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${t}`),e.sdkProvider&&e.getMobileProvider().emit(uv.CONNECT,t)}),o.on(uv.CONNECTED,t=>{cZ("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",t),e.sdkProvider&&e.getMobileProvider().emit(uv.CONNECTED,t)})}catch(e){window.extension=void 0}}return o&&s.extensionOnly&&(cZ("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),null===(n=e.analytics)||void 0===n||n.send({event:om.SDK_USE_EXTENSION}),e.activeProvider=o,e.extensionActive=!0,e.extension=o,e._initialized=!0,l=!0),{preferExtension:a,shouldReturn:l,metamaskBrowserExtension:o}})}(e);if(b)cZ("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(e,t){var r,i,n,s,o;return eH(this,void 0,void 0,function*(){let{options:a}=e,l=Object.assign({},a.logging);e.remoteConnection=new uZ({anonId:yield e.getAnonId(),preferDesktop:null!==(r=a.preferDesktop)&&void 0!==r&&r,communicationLayerPreference:null!==(i=a.communicationLayerPreference)&&void 0!==i?i:ob.SOCKET,analytics:e.analytics,dappMetadata:a.dappMetadata,_source:a._source,enableAnalytics:null===(n=a.enableAnalytics)||void 0===n||n,timer:a.timer,sdk:e,platformManager:e.platformManager,transports:a.transports,communicationServerUrl:a.communicationServerUrl,storage:null!==(s=a.storage)&&void 0!==s?s:{enabled:!0},getMetaMaskInstaller:()=>{if(!e.installer)throw Error("Invalid SDK status -- installer not initialized");return e.installer},logging:l,connectWithExtensionProvider:void 0===t?void 0:()=>uw(e),modals:Object.assign(Object.assign({},a.modals),{onPendingModalDisconnect:e.terminate.bind(e)})}),yield e.remoteConnection.initRemoteCommunication({sdkInstance:e}),e.installer=new uH({remote:e.remoteConnection,preferDesktop:null!==(o=a.preferDesktop)&&void 0!==o&&o,platformManager:e.platformManager,debug:e.debug})})}(e,y),yield function(e){var t,r,i,n;return eH(this,void 0,void 0,function*(){var s,o,a,l;let{options:c}=e,u={communicationLayerPreference:null!==(t=c.communicationLayerPreference)&&void 0!==t?t:ob.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:c.checkInstallationOnAllCalls,injectProvider:null===(r=c.injectProvider)||void 0===r||r,shouldShimWeb3:null===(i=c.shouldShimWeb3)||void 0===i||i,extensionOnly:null===(n=c.extensionOnly)||void 0===n||n,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug},h=yield uI(u);e.activeProvider=h,null===(o=null===(s=e.remoteConnection)||void 0===s?void 0:s.getConnector())||void 0===o||o.on(c9.ConnectionStatus,t=>{e.emit(c9.ConnectionStatus,t)}),null===(l=null===(a=e.remoteConnection)||void 0===a?void 0:a.getConnector())||void 0===l||l.on(c9.ServiceStatus,t=>{e.emit(c9.ServiceStatus,t)})})}(e),yield function(e,t){var r,i;return eH(this,void 0,void 0,function*(){let{options:n}=e;t?(cZ("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),null===(r=e.analytics)||void 0===r||r.send({event:om.SDK_EXTENSION_UTILIZED}),uw(e).catch(e=>{console.warn("Can't connect with MetaMask extension...",e),localStorage.removeItem(ug)})):n.checkInstallationImmediately&&((null===(i=e.platformManager)||void 0===i?void 0:i.isDesktopWeb())?(cZ("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),e.connect().catch(e=>{cZ(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${e}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),e._initialized=!0})}(e,v);try{yield null===(h=e.remoteConnection)||void 0===h?void 0:h.startConnection({initialCheck:!0})}catch(e){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",e)}e.emit(c9.ProviderUpdate,hy.INITIALIZED)}})}(e),yield e.sdkInitPromise}catch(e){throw console.error(e),e}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return"undefined"!=typeof window&&!!(null===(e=window.ethereum)||void 0===e?void 0:e.isMetaMask)}connect(){return eH(this,void 0,void 0,function*(){return function(e){return eH(this,void 0,void 0,function*(){if(e._initialized||(cZ("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),cZ(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");let t=e.activeProvider.getSelectedAddress();return t?[t]:e.activeProvider.request({method:uu.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return eH(this,void 0,void 0,function*(){return function({instance:e,msg:t}){return eH(this,void 0,void 0,function*(){if(e._initialized||(cZ("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield e.init()),cZ(`[MetaMaskSDK: connectAndSign()] activeProvider=${e.activeProvider}`),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");let r=/^0x([0-9A-Fa-f]{2})*$/u.test(t)?t:function(e){let t;if(void 0!==e3)t=e3.from(e,"utf8").toString("hex");else if("undefined"!=typeof TextEncoder)t=Array.from((new TextEncoder).encode(e)).map(e=>e.toString(16).padStart(2,"0")).join("");else{if("object"!=typeof eF||!("Buffer"in eF))throw Error("Unable to convert string to hex: No available method.");t=eF.Buffer.from(e,"utf8").toString("hex")}return`0x${t}`}(t);return e.activeProvider.request({method:uu.METAMASK_CONNECTWITH,params:[{method:uu.PERSONAL_SIGN,params:[r]}]})})}({instance:this,msg:e})})}connectWith(e){return eH(this,void 0,void 0,function*(){return function({instance:e,rpc:t}){return eH(this,void 0,void 0,function*(){if(e._initialized||(cZ("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield e.init()),cZ(`[MetaMaskSDK: connectWith()] method: ${t.method} rpc=${t}`),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");return e.activeProvider.request({method:uu.METAMASK_CONNECTWITH,params:[t]})})}({instance:this,rpc:e})})}resume(){return function(e){var t,r,i;return eH(this,void 0,void 0,function*(){if(!(null===(r=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===r?void 0:r.isReady()))return cZ("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void(null===(i=e.remoteConnection)||void 0===i||i.startConnection());cZ("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;null===(e=this.remoteConnection)||void 0===e||e.isAuthorized()}terminate(){return function(e){var t,r,i;return eH(this,void 0,void 0,function*(){if(!(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView())){if(ub&&(window.localStorage.removeItem(ug),window.localStorage.removeItem(uy),window.localStorage.removeItem(um)),e.extensionActive){try{yield null===(r=e.activeProvider)||void 0===r?void 0:r.request({method:uu.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(e){cZ("[MetaMaskSDK: terminate()] error revoking permissions",e)}return e.options.extensionOnly?(e.emit(c9.ProviderUpdate,hy.TERMINATE),void cZ("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(c9.ProviderUpdate,hy.TERMINATE))}e.emit(c9.ProviderUpdate,hy.TERMINATE),cZ(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),null===(i=e.remoteConnection)||void 0===i||i.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;let t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getUniversalLink();if(!t)throw Error("No Universal Link available, please call eth_requestAccounts first.");return t}getChannelId(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig())||void 0===t?void 0:t.channelId}getRPCHistory(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getRPCMethodTracker()}getVersion(){return un.version}getDappId(){var e,t,r,i;return"undefined"==typeof window||void 0===window.location?null!==(i=null!==(t=null===(e=this.options.dappMetadata)||void 0===e?void 0:e.name)&&void 0!==t?t:null===(r=this.options.dappMetadata)||void 0===r?void 0:r.url)&&void 0!==i?i:"N/A":window.location.hostname}getAnonId(){var e,t;return eH(this,void 0,void 0,function*(){let r;return this._anonId?this._anonId:(r=(null===(e=this.platformManager)||void 0===e?void 0:e.isBrowser())?this.getBrowserAnonId():(null===(t=this.platformManager)||void 0===t?void 0:t.isReactNative())?yield this.getReactNativeAnonId():_(),this._anonId=r,r)})}getBrowserAnonId(){let e=this.ANON_ID_STORAGE_KEY;try{let t=localStorage.getItem(e);if(t)return t;let r=_();return localStorage.setItem(e,r),r}catch(e){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",e),_()}}getReactNativeAnonId(){return eH(this,void 0,void 0,function*(){let e=this.ANON_ID_STORAGE_KEY;try{let t=r(11679).default,i=yield t.getItem(e);if(i)return i;let n=_();return yield t.setItem(e,n),n}catch(e){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",e),_()}})}getWalletStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getConnectionStatus()}_getChannelConfig(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig()}_ping(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.ping()}_keyCheck(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.keyCheck()}_getServiceStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getKeyInfo()}_resetKeys(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t)}}var uY=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:e}={enabled:!1}){this.enabled=!1,this.enabled=e}persistChannelConfig(e){return eH(this,void 0,void 0,function*(){let t=JSON.stringify(e);cZ(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,e),localStorage.setItem(uf,t)})}getPersistedChannelConfig(){return eH(this,void 0,void 0,function*(){let e;try{if(cZ(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),e=localStorage.getItem(uf),cZ("[StorageManagerWeb: getPersistedChannelConfig()]",e),!e)return;let t=JSON.parse(e);return cZ("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",t),t}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(e){return eH(this,void 0,void 0,function*(){cZ(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,e);let t=JSON.stringify(e);localStorage.setItem(um,t)})}getCachedAccounts(){return eH(this,void 0,void 0,function*(){try{let e=localStorage.getItem(um);return e?JSON.parse(e):[]}catch(e){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",e),e}})}persistChainId(e){return eH(this,void 0,void 0,function*(){cZ(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,e),localStorage.setItem(uy,e)})}getCachedChainId(){return eH(this,void 0,void 0,function*(){try{let e=localStorage.getItem(uy);return null!=e?e:void 0}catch(e){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",e),e}})}terminate(){return eH(this,void 0,void 0,function*(){cZ(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(uf)})}}}),uX=Object.defineProperty,uQ=new WeakMap,u0=e=>uQ.get(e),u1=(e,t)=>uQ.set(t.$lazyInstance$=e,t),u2=(e,t)=>t in e,u3=(e,t)=>(0,console.error)(e,t),u5=new Map,u4=new Map,u6="slot-fb{display:contents}slot-fb[hidden]{display:none}",u8="undefined"!=typeof window?window:{},u9=u8.document||{head:{}},u7={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},he=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),ht=!1,hr=[],hi=[],hn=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){u3(e)}e.length=0},hs=()=>{hn(hr),hn(hi),(ht=hr.length>0)&&u7.raf(hs)},ho=e=>Promise.resolve(void 0).then(e),ha=e=>{hi.push(e),ht||(ht=!0,4&u7.$flags$?ho(hs):u7.raf(hs))},hl={},hc=e=>"object"==(e=typeof e)||"function"===e;function hu(e){var t,r,i;return null!=(i=null==(r=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:r.getAttribute("content"))?i:void 0}((e,t)=>{for(var r in t)uX(e,r,{get:t[r],enumerable:!0})})({},{err:()=>hd,map:()=>hp,ok:()=>hh,unwrap:()=>hw,unwrapErr:()=>hE});var hh=e=>({isOk:!0,isErr:!1,value:e}),hd=e=>({isOk:!1,isErr:!0,value:e});function hp(e,t){if(e.isOk){let r=t(e.value);return r instanceof Promise?r.then(e=>hh(e)):hh(r)}if(e.isErr)return hd(e.value);throw"should never get here"}var hf,hg,hm,hy,hv,hb,hw=e=>{if(e.isOk)return e.value;throw e.value},hE=e=>{if(e.isErr)return e.value;throw e.value},h_=(e,t,...r)=>{let i=null,n=!1,s=!1,o=[],a=t=>{for(let r=0;r<t.length;r++)Array.isArray(i=t[r])?a(i):null!=i&&"boolean"!=typeof i&&((n="function"!=typeof e&&!hc(i))&&(i=String(i)),n&&s?o[o.length-1].$text$+=i:o.push(n?hC(null,i):i),s=n)};if(a(r),t){let e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}if("function"==typeof e)return e(null===t?{}:t,o,hI);let l=hC(e,null);return l.$attrs$=t,o.length>0&&(l.$children$=o),l},hC=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null}),hS={},hI={forEach:(e,t)=>e.map(hx).forEach(t),map:(e,t)=>e.map(hx).map(t).map(hA)},hx=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),hA=e=>{if("function"==typeof e.vtag){let t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),h_(e.vtag,t,...e.vchildren||[])}let t=hC(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},hk=e=>u0(e).$hostElement$,hO=(e,t,r)=>{let i=hk(e);return{emit:e=>hP(i,t,{bubbles:!!(4&r),composed:!!(2&r),cancelable:!!(1&r),detail:e})}},hP=(e,t,r)=>{let i=u7.ce(t,r);return e.dispatchEvent(i),i},hR=new WeakMap,hN=e=>{let t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=(t.$tagName$,()=>{}),s=((e,t,r)=>{var i;let n=hT(t),s=u4.get(n);if(e=11===e.nodeType?e:u9,s){if("string"==typeof s){e=e.head||e;let r,o=hR.get(e);if(o||hR.set(e,o=new Set),!o.has(n)){{(r=u9.createElement("style")).innerHTML=s;let n=null!=(i=u7.$nonce$)?i:hu(u9);if(null!=n&&r.setAttribute("nonce",n),!(1&t.$flags$)){if("HEAD"===e.nodeName){let t=e.querySelectorAll("link[rel=preconnect]"),i=t.length>0?t[t.length-1].nextSibling:e.querySelector("style");e.insertBefore(r,i)}else if("host"in e){if(he){let t=new CSSStyleSheet;t.replaceSync(s),e.adoptedStyleSheets=[t,...e.adoptedStyleSheets]}else{let t=e.querySelector("style");t?t.innerHTML=s+t.innerHTML:e.prepend(r)}}else e.append(r)}1&t.$flags$&&"HEAD"!==e.nodeName&&e.insertBefore(r,null)}4&t.$flags$&&(r.innerHTML+=u6),o&&o.add(n)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s])}return n})(r.shadowRoot?r.shadowRoot:r.getRootNode(),t);10&i&&2&i&&(r["s-sc"]=s,r.classList.add(s+"-h")),n()},hT=(e,t)=>"sc-"+e.$tagName$,hM=(e,t,r,i,n,s)=>{if(r!==i){let o=u2(e,t),a=t.toLowerCase();if("class"===t){let t=e.classList,n=hD(r),s=hD(i);t.remove(...n.filter(e=>e&&!s.includes(e))),t.add(...s.filter(e=>e&&!n.includes(e)))}else if("style"===t){for(let t in r)i&&null!=i[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(let t in i)r&&i[t]===r[t]||(t.includes("-")?e.style.setProperty(t,i[t]):e.style[t]=i[t])}else if(o||"o"!==t[0]||"n"!==t[1]){let a=hc(i);if((o||a&&null!==i)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{let n=null==i?"":i;"list"===t?o=!1:null!=r&&e[t]==n||("function"==typeof e.__lookupSetter__(t)?e[t]=n:e.setAttribute(t,n))}}catch(e){}null==i||!1===i?!1===i&&""!==e.getAttribute(t)||e.removeAttribute(t):(!o||4&s||n)&&!a&&(i=!0===i?"":i,e.setAttribute(t,i))}else if(t="-"===t[2]?t.slice(3):u2(u8,a)?a.slice(2):a[2]+t.slice(3),r||i){let n=t.endsWith(hB);t=t.replace(hj,""),r&&u7.rel(e,t,r,n),i&&u7.ael(e,t,i,n)}}},hL=/\s/,hD=e=>e?e.split(hL):[],hB="Capture",hj=RegExp(hB+"$"),h$=(e,t,r)=>{let i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,n=e&&e.$attrs$||hl,s=t.$attrs$||hl;for(let e of hU(Object.keys(n)))e in s||hM(i,e,n[e],void 0,r,t.$flags$);for(let e of hU(Object.keys(s)))hM(i,e,n[e],s[e],r,t.$flags$)};function hU(e){return e.includes("ref")?[...e.filter(e=>"ref"!==e),"ref"]:e}var hq=!1,hH=(e,t,r,i)=>{let n=t.$children$[r],s,o,a=0;if(null!==n.$text$)s=n.$elm$=u9.createTextNode(n.$text$);else{if(hq||(hq="svg"===n.$tag$),s=n.$elm$=u9.createElementNS(hq?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n.$tag$),hq&&"foreignObject"===n.$tag$&&(hq=!1),h$(null,n,hq),s.getRootNode().querySelector("body"),n.$children$)for(a=0;a<n.$children$.length;++a)(o=hH(e,n,a))&&s.appendChild(o);"svg"===n.$tag$?hq=!1:"foreignObject"===s.tagName&&(hq=!0)}return s["s-hn"]=hb,s},hF=(e,t,r,i,n,s)=>{let o,a=e;for(a.shadowRoot&&a.tagName===hb&&(a=a.shadowRoot);n<=s;++n)i[n]&&(o=hH(null,r,n))&&(i[n].$elm$=o,hV(a,o,t))},hz=(e,t,r)=>{for(let i=t;i<=r;++i){let t=e[i];if(t){let e=t.$elm$;e&&e.remove()}}},hW=(e,t,r=!1)=>e.$tag$===t.$tag$,hK=(e,t,r=!1)=>{let i=t.$elm$=e.$elm$,n=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;null===a?(h$(e,t,hq="svg"===o||"foreignObject"!==o&&hq),null!==n&&null!==s?((e,t,r,i,n=!1)=>{let s,o=0,a=0,l=t.length-1,c=t[0],u=t[l],h=i.length-1,d=i[0],p=i[h];for(;o<=l&&a<=h;)null==c?c=t[++o]:null==u?u=t[--l]:null==d?d=i[++a]:null==p?p=i[--h]:hW(c,d,n)?(hK(c,d,n),c=t[++o],d=i[++a]):hW(u,p,n)?(hK(u,p,n),u=t[--l],p=i[--h]):hW(c,p,n)?(hK(c,p,n),hV(e,c.$elm$,u.$elm$.nextSibling),c=t[++o],p=i[--h]):hW(u,d,n)?(hK(u,d,n),hV(e,u.$elm$,c.$elm$),u=t[--l],d=i[++a]):(s=hH(t&&t[a],r,a),d=i[++a],s&&hV(c.$elm$.parentNode,s,c.$elm$));o>l?hF(e,null==i[h+1]?null:i[h+1].$elm$,r,i,a,h):a>h&&hz(t,o,l)})(i,n,t,s,r):null!==s?(null!==e.$text$&&(i.textContent=""),hF(i,null,t,s,0,s.length-1)):r||null===n||hz(n,0,n.length-1),hq&&"svg"===o&&(hq=!1)):e.$text$!==a&&(i.data=a)},hV=(e,t,r)=>null==e?void 0:e.insertBefore(t,r),hG=(e,t,r=!1)=>{let i=e.$hostElement$,n=e.$cmpMeta$,s=e.$vnode$||hC(null,null),o=t&&t.$tag$===hS?t:h_(null,null,t);if(hb=i.tagName,r&&o.$attrs$)for(let e of Object.keys(o.$attrs$))i.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(o.$attrs$[e]=i[e]);o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=s.$elm$=i.shadowRoot||i,i["s-sc"],n.$flags$,hK(s,o,r)},hZ=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(t=>e.$onRenderResolve$=t))},hJ=(e,t)=>(e.$flags$|=16,4&e.$flags$)?void(e.$flags$|=512):(hZ(e,e.$ancestorComponent$),ha(()=>hY(e,t))),hY=(e,t)=>{let r=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),n=e.$lazyInstance$;if(!n)throw Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return i(),hX(void 0,()=>h0(e,n,t))},hX=(e,t)=>hQ(e)?e.then(t).catch(e=>{console.error(e),t()}):t(),hQ=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,h0=async(e,t,r)=>{var i;let n=e.$hostElement$,s=(e.$cmpMeta$.$tagName$,()=>{}),o=n["s-rc"];r&&hN(e);let a=(e.$cmpMeta$.$tagName$,()=>{});h1(e,t,n,r),o&&(o.map(e=>e()),n["s-rc"]=void 0),a(),s();{let t=null!=(i=n["s-p"])?i:[],r=()=>h2(e);0===t.length?r():(Promise.all(t).then(r),e.$flags$|=4,t.length=0)}},h1=(e,t,r,i)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,hG(e,t,i)}catch(t){u3(t,e.$hostElement$)}return null},h2=e=>{e.$cmpMeta$.$tagName$;let t=e.$hostElement$,r=()=>{},i=e.$lazyInstance$,n=e.$ancestorComponent$;64&e.$flags$?r():(e.$flags$|=64,h4(t),h5(i,"componentDidLoad"),r(),e.$onReadyResolve$(t),n||h3()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&ho(()=>hJ(e,!1)),e.$flags$&=-517},h3=e=>{h4(u9.documentElement),ho(()=>hP(u8,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},h5=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){u3(e)}},h4=e=>e.classList.add("hydrated"),h6=(e,t,r,i)=>{var n,s;let o=u0(e);if(!o)throw Error(`Couldn't find host element for "${i.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);let a=o.$hostElement$,l=o.$instanceValues$.get(t),c=o.$flags$,u=o.$lazyInstance$;n=r,s=i.$members$[t][0],r=null==n||hc(n)?n:4&s?"false"!==n&&(""===n||!!n):1&s?String(n):n;let h=Number.isNaN(l)&&Number.isNaN(r);if((!(8&c)||void 0===l)&&r!==l&&!h&&(o.$instanceValues$.set(t,r),u)){if(i.$watchers$&&128&c){let e=i.$watchers$[t];e&&e.map(e=>{try{u[e](r,l,t)}catch(e){u3(e,a)}})}2==(18&c)&&hJ(o,!1)}},h8=(e,t,r)=>{var i,n;let s=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);let o=Object.entries(null!=(i=t.$members$)?i:{});if(o.map(([e,[i]])=>{(31&i||2&r&&32&i)&&Object.defineProperty(s,e,{get(){return u0(this).$instanceValues$.get(e)},set(r){h6(this,e,r,t)},configurable:!0,enumerable:!0})}),1&r){let r=new Map;s.attributeChangedCallback=function(e,i,n){u7.jmp(()=>{var o;let a=r.get(e);if(this.hasOwnProperty(a))n=this[a],delete this[a];else{if(s.hasOwnProperty(a)&&"number"==typeof this[a]&&this[a]==n)return;if(null==a){let r=u0(this),s=null==r?void 0:r.$flags$;if(s&&!(8&s)&&128&s&&n!==i){let s=r.$lazyInstance$,a=null==(o=t.$watchers$)?void 0:o[e];null==a||a.forEach(t=>{null!=s[t]&&s[t].call(s,n,i,e)})}return}}this[a]=(null!==n||"boolean"!=typeof this[a])&&n})},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(n=t.$watchers$)?n:{}),...o.filter(([e,t])=>15&t[0]).map(([e,t])=>{let i=t[1]||e;return r.set(i,e),i})]))}}return e},h9=async(e,t,r,i)=>{let n;if(0==(32&t.$flags$)){if(t.$flags$|=32,r.$lazyBundleId$){let e=((e,t,r)=>{let i=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$;if(!n)return;let s=u5.get(n);return s?s[i]:"mm-install-modal_3"===n?Promise.resolve().then(function(){return d$}).then(e=>(u5.set(n,e),e[i]),u3):import(`./${n}.entry.js`).then(e=>(u5.set(n,e),e[i]),u3)})(r);if(!(n=e&&"then"in e?await e:e))throw Error(`Constructor for "${r.$tagName$}#${t.$modeName$}" was not found`);n.isProxied||(r.$watchers$=n.watchers,h8(n,r,2),n.isProxied=!0);let i=(r.$tagName$,()=>{});t.$flags$|=8;try{new n(t)}catch(e){u3(e)}t.$flags$&=-9,t.$flags$|=128,i(),h7(t.$lazyInstance$)}else{n=e.constructor;let r=e.localName;customElements.whenDefined(r).then(()=>t.$flags$|=128)}if(n&&n.style){let e;"string"==typeof n.style&&(e=n.style);let t=hT(r);if(!u4.has(t)){var s,o;let i;let n=(r.$tagName$,()=>{});s=e,o=!!(1&r.$flags$),i=u4.get(t),he&&o?"string"==typeof(i=i||new CSSStyleSheet)?i=s:i.replaceSync(s):i=s,u4.set(t,i),n()}}}let a=t.$ancestorComponent$,l=()=>hJ(t,!0);a&&a["s-rc"]?a["s-rc"].push(l):l()},h7=e=>{h5(e,"connectedCallback")},de=e=>{h5(e,"disconnectedCallback")},dt=(e,t={})=>{var r;let i=[],n=t.exclude||[],s=u8.customElements,o=u9.head,a=o.querySelector("meta[charset]"),l=u9.createElement("style"),c=[],u,h=!0;Object.assign(u7,t),u7.$resourcesUrl$=new URL(t.resourcesUrl||"./",u9.baseURI).href;let d=!1;if(e.map(e=>{e[1].map(t=>{var r;let o={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};4&o.$flags$&&(d=!0),o.$members$=t[2],o.$watchers$=null!=(r=t[4])?r:{};let a=o.$tagName$,l=class extends HTMLElement{constructor(e){if(super(e),this.hasRegisteredEventListeners=!1,((e,t)=>{let r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};r.$onReadyPromise$=new Promise(e=>r.$onReadyResolve$=e),e["s-p"]=[],e["s-rc"]=[],uQ.set(e,r)})(e=this,o),1&o.$flags$){if(e.shadowRoot){if("open"!==e.shadowRoot.mode)throw Error(`Unable to re-use existing shadow root for ${o.$tagName$}! Mode is set to ${e.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else e.attachShadow({mode:"open"})}}connectedCallback(){u0(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),h?c.push(this):u7.jmp(()=>(e=>{if(0==(1&u7.$flags$)){let t=u0(e),r=t.$cmpMeta$,i=(r.$tagName$,()=>{});if(1&t.$flags$)(null==t?void 0:t.$lazyInstance$)?h7(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then(()=>h7(t.$lazyInstance$));else{t.$flags$|=1;{let r=e;for(;r=r.parentNode||r.host;)if(r["s-p"]){hZ(t,t.$ancestorComponent$=r);break}}r.$members$&&Object.entries(r.$members$).map(([t,[r]])=>{if(31&r&&e.hasOwnProperty(t)){let r=e[t];delete e[t],e[t]=r}}),h9(e,t,r)}i()}})(this))}disconnectedCallback(){u7.jmp(()=>(async e=>{if(0==(1&u7.$flags$)){let t=u0(e);(null==t?void 0:t.$lazyInstance$)?de(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then(()=>de(t.$lazyInstance$))}})(this))}componentOnReady(){return u0(this).$onReadyPromise$}};o.$lazyBundleId$=e[0],n.includes(a)||s.get(a)||(i.push(a),s.define(a,h8(l,o,1)))})}),i.length>0&&(d&&(l.textContent+=u6),l.textContent+=i.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",l.innerHTML.length)){l.setAttribute("data-styles","");let e=null!=(r=u7.$nonce$)?r:hu(u9);null!=e&&l.setAttribute("nonce",e),o.insertBefore(l,a?a.nextSibling:o.firstChild)}h=!1,c.length?c.map(e=>e.connectedCallback()):u7.jmp(()=>u=setTimeout(h3,30))};!function(){if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}();var dr=Object.freeze({__proto__:null,defineCustomElements:async(e,t)=>{if("undefined"!=typeof window)return await void 0,dt([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],t)},setNonce:e=>u7.$nonce$=e});let di={fontFamily:"Roboto, sans-serif"},dn=({className:e},t)=>h_("div",{style:di,class:e},t),ds=({Icon:e,text:t})=>h_("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},h_("div",{class:"flexItem1"},h_(e,null)),h_("div",{class:"flexItem11"},h_("span",{style:{lineHeight:"2",color:"black"}},t))),da=()=>h_("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),h_("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),dl=()=>h_("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),dc=()=>h_("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),du=()=>h_("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),h_("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),h_("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function dh({version:e}){return h_("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",e?`v${e}`:"unknown")}let dd=()=>h_("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("rect",{width:"16",height:"16",fill:"white"}),h_("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),dp=()=>h_("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},h_("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function df(e,t){return e.toString(2).padStart(t,"0")}function dg(e,t){let r=e%t;return r>=0?r:t+r}function dm(e,t){return Array(e).fill(t)}function dy(...e){let t=0;for(let r of e)t=Math.max(t,r.length);let r=[];for(let i=0;i<t;i++)for(let t of e)i>=t.length||r.push(t[i]);return new Uint8Array(r)}function dv(e,t,r){if(r<0||r+t.length>e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[r+i])return!1;return!0}function db(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})},encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(function(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})}}}class dw{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){let t;let r=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),i=r.length,n=Array(i);for(let e of r){let r=e.split("").map(e=>{if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw Error(`Bitmap.fromString: unknown symbol=${e}`)});if(t&&r.length!==t)throw Error(`Bitmap.fromString different row sizes: width=${t} cur=${r.length}`);t=r.length,n.push(r)}return t||(t=0),new dw({height:i,width:t},n)}constructor(e,t){let{height:r,width:i}=dw.size(e);this.data=t||Array.from({length:r},()=>dm(i,void 0)),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};let{x:t,y:r}=this.xy(e);return{height:this.height-r,width:this.width-t}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw Error(`Bitmap: wrong y=${e.y}`);return e.x=dg(e.x,this.width),e.y=dg(e.y,this.height),e}rect(e,t,r){let{x:i,y:n}=this.xy(e),{height:s,width:o}=dw.size(t,this.size({x:i,y:n}));for(let e=0;e<s;e++)for(let t=0;t<o;t++)this.data[n+e][i+t]="function"==typeof r?r({x:t,y:e},this.data[n+e][i+t]):r;return this}rectRead(e,t,r){return this.rect(e,t,(e,t)=>(r(e,t),t))}hLine(e,t,r){return this.rect(e,{width:t,height:1},r)}vLine(e,t,r){return this.rect(e,{width:1,height:t},r)}border(e=2,t){let r=this.height+2*e,i=this.width+2*e,n=dm(e,t),s=Array.from({length:e},()=>dm(i,t));return new dw({height:r,width:i},[...s,...this.data.map(e=>[...n,...e,...n]),...s])}embed(e,t){return this.rect(e,t.size(),({x:e,y:r})=>t.data[r][e])}rectSlice(e,t=this.size()){let r=new dw(dw.size(t,this.size(this.xy(e))));return this.rect(e,t,({x:e,y:t},i)=>r.data[t][e]=i),r}inverse(){let{height:e,width:t}=this;return new dw({height:t,width:e}).rect({x:0,y:0},1/0,({x:e,y:t})=>this.data[e][t])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw Error(`Wrong scale factor: ${e}`);let{height:t,width:r}=this;return new dw({height:e*t,width:e*r}).rect({x:0,y:0},1/0,({x:t,y:r})=>this.data[Math.floor(r/e)][Math.floor(t/e)])}clone(){return new dw(this.size()).rect({x:0,y:0},this.size(),({x:e,y:t})=>this.data[t][e])}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if("boolean"!=typeof t)throw Error("Invalid color type="+typeof t)})}toString(){return this.data.map(e=>e.map(e=>void 0===e?"?":e?"X":" ").join("")).join("\n")}toASCII(){let{height:e,width:t,data:r}=this,i="";for(let n=0;n<e;n+=2){for(let s=0;s<t;s++){let t=r[n][s],o=n+1>=e||r[n+1][s];t||o?!t&&o?i+="":t&&!o?i+="":t&&o&&(i+=" "):i+=""}i+="\n"}return i}toTerm(){let e="\x1b[0m",t=`[1;47m  ${e}`,r=`[40m  ${e}`;return this.data.map(e=>e.map(e=>e?r:t).join("")).join("\n")}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:t,y:r},i)=>{i&&(e+=`<rect x="${t}" y="${r}" width="1" height="1" />`)}),e+="</svg>"}toGIF(){let e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(e,t)=>r.push(+(!0===t)));let i=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...dm(381,0),44,0,0,0,0,...t,0,7],n=Math.floor(r.length/126);for(let e=0;e<n;e++)i.push(127,128,...r.slice(126*e,126*(e+1)).map(e=>+e));return i.push(r.length%126+1,128,...r.slice(126*n).map(e=>+e)),i.push(1,129,0,59),new Uint8Array(i)}toImage(e=!1){let{height:t,width:r}=this.size(),i=new Uint8Array(t*r*(e?3:4)),n=0;for(let s=0;s<t;s++)for(let t=0;t<r;t++){let r=this.data[s][t]?0:255;i[n++]=r,i[n++]=r,i[n++]=r,e||(i[n++]=255)}return{height:t,width:r,data:i}}}let dE=["low","medium","quartile","high"],d_=["numeric","alphanumeric","byte","kanji","eci"],dC=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],dS={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},dI={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},dx={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[];let t=dx.size.encode(e)-6-1,r=t-6,i=Math.ceil(r/28),n=Math.floor(r/i);n%2?n+=1:r%i*2>=i&&(n+=2);let s=[6];for(let e=1;e<i;e++)s.push(t-(i-e)*n);return s.push(t),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){let r=dx.ECCode[e]<<3|t,i=r;for(let e=0;e<10;e++)i=i<<1^1335*(i>>9);return(r<<10|i)^dx.formatMask},versionBits(e){let t=e;for(let e=0;e<12;e++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:db("0123456789"),alphanumerc:db("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[t][dx.sizeType(e)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){let r=dC[e-1],i=dS[t][e-1],n=dI[t][e-1],s=Math.floor(r/n)-i,o=n-r%n;return{words:i,numBlocks:n,shortBlocks:o,blockLen:s,capacity:8*(r-i*n),total:(i+s)*n+n-o}}},dA=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,(e,t)=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],dk={tables:(e=>{let t=dm(256,0),r=dm(256,0);for(let e=0,i=1;e<256;e++)t[e]=i,r[i]=e,256&(i<<=1)&&(i^=285);return{exp:t,log:r}})(),exp:e=>dk.tables.exp[e],log(e){if(0===e)throw Error(`GF.log: wrong arg=${e}`);return dk.tables.log[e]%255},mul:(e,t)=>0===e||0===t?0:dk.tables.exp[(dk.tables.log[e]+dk.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>dk.tables.exp[dk.tables.log[e]*t%255],inv(e){if(0===e)throw Error(`GF.inverse: wrong arg=${e}`);return dk.tables.exp[255-dk.tables.log[e]]},polynomial(e){if(0==e.length)throw Error("GF.polymomial: wrong length");if(0!==e[0])return e;let t=0;for(;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw Error(`GF.monomial: wrong degree=${e}`);if(0==t)return[0];let r=dm(e+1,0);return r[0]=t,dk.polynomial(r)},degree:e=>e.length-1,coefficient:(e,t)=>e[dk.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];let r=dm(e.length+t.length-1,0);for(let i=0;i<e.length;i++)for(let n=0;n<t.length;n++)r[i+n]=dk.add(r[i+n],dk.mul(e[i],t[n]));return dk.polynomial(r)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;let r=dm(e.length,0);for(let i=0;i<e.length;i++)r[i]=dk.mul(e[i],t);return dk.polynomial(r)},mulPolyMonomial(e,t,r){if(t<0)throw Error("GF.mulPolyMonomial: wrong degree");if(0==r)return[0];let i=dm(e.length+t,0);for(let t=0;t<e.length;t++)i[t]=dk.mul(e[t],r);return dk.polynomial(i)},addPoly(e,t){if(0===e[0])return t;if(0===t[0])return e;let r=e,i=t;r.length>i.length&&([r,i]=[i,r]);let n=dm(i.length,0),s=i.length-r.length,o=i.slice(0,s);for(let e=0;e<o.length;e++)n[e]=o[e];for(let e=s;e<i.length;e++)n[e]=dk.add(r[e-s],i[e]);return dk.polynomial(n)},remainderPoly(e,t){let r=Array.from(e);for(let i=0;i<e.length-t.length+1;i++){let e=r[i];if(0!==e)for(let n=1;n<t.length;n++)0!==t[n]&&(r[i+n]=dk.add(r[i+n],dk.mul(t[n],e)))}return r.slice(e.length-t.length+1,r.length)},divisorPoly(e){let t=[1];for(let r=0;r<e;r++)t=dk.mulPoly(t,[1,dk.pow(2,r)]);return t},evalPoly(e,t){if(0==t)return dk.coefficient(e,0);let r=e[0];for(let i=1;i<e.length;i++)r=dk.add(dk.mul(t,r),e[i]);return r},euclidian(e,t,r){dk.degree(e)<dk.degree(t)&&([e,t]=[t,e]);let i=e,n=t,s=[0],o=[1];for(;2*dk.degree(n)>=r;){let e=i,t=s;if(i=n,s=o,0===i[0])throw Error("rLast[0] === 0");n=e;let r=[0],a=dk.inv(i[0]);for(;dk.degree(n)>=dk.degree(i)&&0!==n[0];){let e=dk.degree(n)-dk.degree(i),t=dk.mul(n[0],a);r=dk.addPoly(r,dk.monomial(e,t)),n=dk.addPoly(n,dk.mulPolyMonomial(i,e,t))}if(r=dk.mulPoly(r,s),o=dk.addPoly(r,t),dk.degree(n)>=dk.degree(i))throw Error(`Division failed r: ${n}, rLast: ${i}`)}let a=dk.coefficient(o,0);if(0==a)throw Error("sigmaTilde(0) was zero");let l=dk.inv(a);return[dk.mulPolyScalar(o,l),dk.mulPolyScalar(n,l)]}};function dO(e,t,r,i){let n="",s=r.length;if("numeric"===i){let e=dx.alphabet.numeric.decode(r.split("")),t=e.length;for(let r=0;r<t-2;r+=3)n+=df(100*e[r]+10*e[r+1]+e[r+2],10);t%3==1?n+=df(e[t-1],4):t%3==2&&(n+=df(10*e[t-2]+e[t-1],7))}else if("alphanumeric"===i){let e=dx.alphabet.alphanumerc.decode(r.split("")),t=e.length;for(let r=0;r<t-1;r+=2)n+=df(45*e[r]+e[r+1],11);t%2==1&&(n+=df(e[t-1],6))}else{if("byte"!==i)throw Error("encode: unsupported type");{let e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(r);s=e.length,n=Array.from(e).map(e=>df(e,8)).join("")}}let{capacity:o}=dx.capacity(e,t),a=df(s,dx.lengthBits(e,i)),l=dx.modeBits[i]+a+n;if(l.length>o)throw Error("Capacity overflow");(l+="0".repeat(Math.min(4,Math.max(0,o-l.length)))).length%8&&(l+="0".repeat(8-l.length%8));for(let e=0;l.length!==o;e++)l+="1110110000010001"[e%16];let c=Uint8Array.from(l.match(/(.{8})/g).map(e=>Number(`0b${e}`)));return(function(e,t){let{words:r,shortBlocks:i,numBlocks:n,blockLen:s,total:o}=dx.capacity(e,t),a={encode(e){let t=dk.divisorPoly(r),i=Array.from(e);return i.push(...t.slice(0,-1).fill(0)),Uint8Array.from(dk.remainderPoly(i,t))},decode(e){let t=e.slice(),i=dk.polynomial(Array.from(e)),n=dm(r,0),s=!1;for(let e=0;e<r;e++){let t=dk.evalPoly(i,dk.exp(e));n[n.length-1-e]=t,0!==t&&(s=!0)}if(!s)return t;n=dk.polynomial(n);let o=dk.monomial(r,1),[a,l]=dk.euclidian(o,n,r),c=dm(dk.degree(a),0),u=0;for(let e=1;e<256&&u<c.length;e++)0===dk.evalPoly(a,e)&&(c[u++]=dk.inv(e));if(u!==c.length)throw Error("RS.decode: wrong errors number");for(let e=0;e<c.length;e++){let r=t.length-1-dk.log(c[e]);if(r<0)throw Error("RS.decode: wrong error location");let i=dk.inv(c[e]),n=1;for(let t=0;t<c.length;t++)e!==t&&(n=dk.mul(n,dk.add(1,dk.mul(c[t],i))));t[r]=dk.add(t[r],dk.mul(dk.evalPoly(l,i),dk.inv(n)))}return t}};return{encode(e){let t=[],r=[];for(let o=0;o<n;o++){let n=s+(o<i?0:1);t.push(e.subarray(0,n)),r.push(a.encode(e.subarray(0,n))),e=e.subarray(n)}let o=dy(...t),l=dy(...r),c=new Uint8Array(o.length+l.length);return c.set(o),c.set(l,o.length),c},decode(e){if(e.length!==o)throw Error(`interleave.decode: len(data)=${e.length}, total=${o}`);let t=[];for(let e=0;e<n;e++){let n=e<i;t.push(new Uint8Array(r+s+(n?0:1)))}let l=0;for(let r=0;r<s;r++)for(let i=0;i<n;i++)t[i][r]=e[l++];for(let r=i;r<n;r++)t[r][s]=e[l++];for(let o=s;o<s+r;o++)for(let r=0;r<n;r++){let n=r<i;t[r][o+(n?0:1)]=e[l++]}let c=[];for(let e of t)c.push(...Array.from(a.decode(e)).slice(0,-r));return Uint8Array.from(c)}}})(e,t).encode(c)}function dP(e,t,r,i,n=!1){let s=function(e,t,r,i=!1){let n=dx.size.encode(e),s=new dw(n+2),o=new dw(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);s=(s=s.embed(0,o).embed({x:-o.width,y:0},o).embed({x:0,y:-o.height},o)).rectSlice(1,n);let a=new dw(1).rect(0,1,!0).border(1,!1).border(1,!0),l=dx.alignmentPatterns(e);for(let e of l)for(let t of l)void 0===s.data[e][t]&&s.embed({x:t-2,y:e-2},a);s=s.hLine({x:0,y:6},1/0,({x:e},t)=>void 0===t?e%2==0:t).vLine({x:6,y:0},1/0,({y:e},t)=>void 0===t?e%2==0:t);{let e=dx.formatBits(t,r),o=t=>!i&&1==(e>>t&1);for(let e=0;e<6;e++)s.data[e][8]=o(e);for(let e=6;e<8;e++)s.data[e+1][8]=o(e);for(let e=8;e<15;e++)s.data[n-15+e][8]=o(e);for(let e=0;e<8;e++)s.data[8][n-e-1]=o(e);for(let e=8;e<9;e++)s.data[8][15-e-1+1]=o(e);for(let e=9;e<15;e++)s.data[8][15-e-1]=o(e);s.data[n-8][8]=!i}if(e>=7){let t=dx.versionBits(e);for(let e=0;e<18;e+=1){let r=!i&&1==(t>>e&1),o=Math.floor(e/3),a=e%3+n-8-3;s.data[o][a]=r,s.data[a][o]=r}}return s}(e,t,i,n),o=0,a=8*r.length;if(function(e,t,r){let i=e.height,n=dA[t],s=-1,o=i-1;for(let t=i-1;t>0;t-=2){for(6==t&&(t=5);;o+=s){for(let i=0;i<2;i+=1){let s=t-i;void 0===e.data[o][s]&&r(s,o,n(s,o))}if(o+s<0||o+s>=i)break}s=-s}}(s,i,(e,t,i)=>{let n=!1;o<a&&(n=0!=(r[o>>>3]>>(7-o&7)&1),o++),s.data[t][e]=n!==i}),o!==a)throw Error("QR: bytes left after draw");return s}function dR(e,t="raw",r={}){let i=void 0!==r.ecc?r.ecc:"medium";!function(e){if(!dE.includes(e))throw Error(`Invalid error correction mode=${e}. Expected: ${dE}`)}(i);let n=void 0!==r.encoding?r.encoding:function(e){let t="numeric";for(let r of e)if(!dx.alphabet.numeric.has(r)&&(t="alphanumeric",!dx.alphabet.alphanumerc.has(r)))return"byte";return t}(e);!function(e){if(!d_.includes(e))throw Error(`Encoding: invalid mode=${e}. Expected: ${d_}`);if("kanji"===e||"eci"===e)throw Error(`Encoding: ${e} is not supported (yet?).`)}(n),void 0!==r.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!dA[e])throw Error(`Invalid mask=${e}. Expected number [0..7]`)}(r.mask);let s,o=r.version,a=Error("Unknown error");if(void 0!==o)!function(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw Error(`Invalid version=${e}. Expected number [1..40]`)}(o),s=dO(o,i,e,n);else for(let t=1;t<=40;t++)try{s=dO(t,i,e,n),o=t;break}catch(e){a=e}if(!o||!s)throw a;let l=function(e,t,r,i){if(void 0===i){let n,s;let o=(s=1/0,{add(e,t){e>=s||(n=t,s=e)},get:()=>n,score:()=>s});for(let i=0;i<dA.length;i++)o.add(function(e){let t=e.inverse(),r=e=>{let t=0;for(let r,i=0,n=1;i<e.length;i++)r===e[i]&&(n++,i!==e.length-1)||(n>=5&&(t+=n-5+3),r=e[i],n=1);return t},i=0;e.data.forEach(e=>i+=r(e)),t.data.forEach(e=>i+=r(e));let n=0,s=e.data,o=e.width-1,a=e.height-1;for(let e=0;e<o;e++)for(let t=0;t<a;t++){let r=e+1,i=t+1;s[e][t]===s[r][t]&&s[r][t]===s[e][i]&&s[r][t]===s[r][i]&&(n+=3)}let l=e=>{let t=[!0,!1,!0,!0,!0,!1,!0],r=[!1,!1,!1,!1],i=[...t,...r],n=[...r,...t],s=0;for(let t=0;t<e.length;t++)dv(e,i,t)&&(s+=40),dv(e,n,t)&&(s+=40);return s},c=0;for(let t of e.data)c+=l(t);for(let e of t.data)c+=l(e);let u=0;e.rectRead(0,1/0,(e,t)=>u+=t?1:0);let h=u/(e.height*e.width)*100;return i+n+c+10*Math.floor(Math.abs(h-50)/5)}(dP(e,t,r,i,!0)),i);i=o.get()}if(void 0===i)throw Error("Cannot find mask");return dP(e,t,r,i)}(o,i,s,r.mask);l.assertDrawn();let c=void 0===r.border?2:r.border;if(!Number.isSafeInteger(c))throw Error("Wrong border type="+typeof c);if(l=l.border(c,!1),void 0!==r.scale&&(l=l.scale(r.scale)),"raw"===t)return l.data;if("ascii"===t)return l.toASCII();if("svg"===t)return l.toSVG();if("gif"===t)return l.toGIF();if("term"===t)return l.toTerm();throw Error(`Unknown output: ${t}`)}let dN={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class dT{constructor(e){var t;this.translations=dN,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=null!==(t=null==e?void 0:e.baseUrl)&&void 0!==t?t:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(e=>e.toLowerCase().startsWith("en")))return"en";let e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){let t=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(t)}async loadTranslations(e){let t=e.split("-")[0];if("en"!==t&&this.supportedLocales.includes(t))try{let e=`${this.baseUrl}/${t}.json`,r=await fetch(e);if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);this.translations=await r.json()}catch(e){console.warn(` Failed to load ${t} translations, falling back to English:`,e),this.translations=dN}else this.translations=dN}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,t){let r=e.split("."),i=t;for(let e of r){if("object"!=typeof i)return"";i=i[e]}return"string"==typeof i?i:""}}(o=a||(a={})).SDK_MODAL_VIEWED="sdk_modal_viewed",o.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",o.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed";let dM=class{constructor(e){u1(this,e),this.close=hO(this,"close",7),this.startDesktopOnboarding=hO(this,"startDesktopOnboarding",7),this.trackAnalytics=hO(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new dT}componentDidLoad(){this.trackAnalytics.emit({event:a.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:1===this.tab?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}onClose(e=!1){this.close.emit({shouldTerminate:e})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:a.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(e,t=!1){t&&this.trackAnalytics.emit({event:a.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:1===this.tab?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=e,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;let e=e=>this.i18nInstance.t(e),t=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=dR(this.link,"svg",{ecc:"medium",scale:2});return h_(dn,{className:"install-model"},h_("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),h_("div",{class:"modal"},h_("div",{class:"closeButtonContainer"},h_("div",{class:"right"},h_("span",{class:"closeButton",onClick:()=>this.onClose(!0)},h_(dd,null)))),h_("div",{class:"logoContainer"},h_(dp,null)),h_("div",null,h_("div",{class:"tabcontainer"},h_("div",{class:"flexContainer"},h_("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(1===t?"tabactive":"")},e("DESKTOP")),h_("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(2===t?"tabactive":"")},e("MOBILE")))),h_("div",{style:{display:1===t?"none":"block"}},h_("div",{class:"flexContainer"},h_("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},r&&h_("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:r}),h_("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT")," ",h_("br",null),h_("span",{class:"blue"},h_("b",null,e("META_MASK_MOBILE_APP"))))))),h_("div",{style:{display:2===t?"none":"block"}},h_("div",{class:"item"},h_(ds,{Icon:dl,text:e("INSTALL_MODAL.TRUSTED_BY_USERS")})),h_("div",{class:"item"},h_(ds,{Icon:da,text:e("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),h_("div",{class:"item"},h_(ds,{Icon:dc,text:e("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),h_("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},h_(du,null),h_("span",{class:"installExtensionText"},e("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),h_(dh,{version:this.sdkVersion})))}get el(){return hk(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};dM.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";let dL=class{constructor(e){u1(this,e),this.close=hO(this,"close",7),this.disconnect=hO(this,"disconnect",7),this.updateOTPValue=hO(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new dT}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(e){this.updateOTPValue.emit({otpValue:e})}disconnectedCallback(){this.onClose()}render(){var e;if(!this.translationsLoaded)return null;let t=null===(e=this.displayOTP)||void 0===e||e,r=this.sdkVersion,i=e=>this.i18nInstance.t(e);return h_(dn,{className:"pending-modal"},h_("div",{class:"backdrop",onClick:()=>this.onClose()}),h_("div",{class:"modal"},h_("div",{class:"closeButtonContainer"},h_("div",{class:"right"},h_("span",{class:"closeButton",onClick:()=>this.onClose()},h_(dd,null)))),h_("div",{class:"logoContainer"},h_(dp,null)),h_("div",null,h_("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},h_("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},i(t?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),h_("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),t&&h_("div",{class:"notice"},"* ",i("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),h_("div",{style:{marginTop:"20px"}},h_("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},i("PENDING_MODAL.DISCONNECT")))),h_(dh,{version:r})))}get el(){return hk(this)}};dL.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";let dD=()=>h_("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),dB=()=>h_("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h_("rect",{width:"400",height:"300",fill:"white"}),h_("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),h_("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),h_("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),h_("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),h_("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),h_("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),h_("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),h_("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),h_("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),h_("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),h_("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),h_("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),h_("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),h_("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),h_("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),h_("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),h_("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),h_("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),h_("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),h_("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),h_("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),h_("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),dj=class{constructor(e){u1(this,e),this.close=hO(this,"close",7),this.connectWithExtension=hO(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new dT,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(e=!1){this.close.emit({shouldTerminate:e})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(e){this.tab=e,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;let e=e=>this.i18nInstance.t(e),t=this.sdkVersion,r=this.isDefaultTab?this.preferDesktop?1:2:this.tab,i=dR(this.link,"svg",{ecc:"medium",scale:2});return h_(dn,{className:"select-modal"},h_("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),h_("div",{class:"modal"},h_("div",{class:"closeButtonContainer"},h_("div",{class:"right"},h_("span",{class:"closeButton",onClick:()=>this.onClose(!0)},h_(dd,null)))),h_("div",{class:"logoContainer"},h_(dp,null)),h_("div",null,h_("div",{class:"tabcontainer"},h_("div",{class:"flexContainer"},h_("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(1===r?"tabactive":"")},e("DESKTOP")),h_("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(2===r?"tabactive":"")},e("MOBILE")))),h_("div",{style:{display:1===r?"none":"block"}},h_("div",{class:"flexContainer"},h_("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},h_("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:i}),h_("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT"),h_("br",null),h_("span",{class:"blue"},h_("b",null,e("META_MASK_MOBILE_APP"))))))),h_("div",{style:{display:2===r?"none":"block"}},h_("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},h_(dB,null)),h_("div",{class:"extensionLabel"},e("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),h_("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},h_(dD,null),h_("span",{class:"installExtensionText"},e("CONNECT_WITH_EXTENSION"))))),h_(dh,{version:t})))}get el(){return hk(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};dj.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";var d$=Object.freeze({__proto__:null,mm_install_modal:dM,mm_pending_modal:dL,mm_select_modal:dj})},7583:function(e,t,r){let i;var n=r(62601);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(i=!1,()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(80500)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},80500:function(e,t,r){e.exports=function(e){function t(e){let r,n,s;let o=null;function a(...e){if(!a.enabled)return;let i=Number(new Date),n=i-(r||i);a.diff=n,a.prev=r,a.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";s++;let n=t.formatters[i];if("function"==typeof n){let t=e[s];r=n.call(a,t),e.splice(s,1),s--}return r}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){let i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,i;if("*"===e[e.length-1])return!0;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(11443),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},11443:function(e){function t(e,t,r,i){return Math.round(e/r)+" "+i+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var i,n,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===s&&isFinite(e))return r.long?(i=Math.abs(e))>=864e5?t(e,i,864e5,"day"):i>=36e5?t(e,i,36e5,"hour"):i>=6e4?t(e,i,6e4,"minute"):i>=1e3?t(e,i,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},81431:function(e,t,r){"use strict";function i(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){let e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=i,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}},51164:function(e,t,r){"use strict";var i=r(62601);function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==i&&void 0!==i.versions&&void 0!==i.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=n,t.isNode=s,t.isBrowser=function(){return!n()&&!s()}},36014:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(75031);i.__exportStar(r(81431),t),i.__exportStar(r(51164),t)},75031:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return w},__asyncGenerator:function(){return b},__asyncValues:function(){return E},__await:function(){return v},__awaiter:function(){return u},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return x},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return n},__generator:function(){return h},__importDefault:function(){return S},__importStar:function(){return C},__makeTemplateObject:function(){return _},__metadata:function(){return c},__param:function(){return l},__read:function(){return g},__rest:function(){return o},__spread:function(){return m},__spreadArrays:function(){return y},__values:function(){return f}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function l(e,t){return function(r,i){t(r,i,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})}function h(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof v?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:v(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function x(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},8696:function(e,t,r){"use strict";r.d(t,{EthereumProvider:function(){return cG}});var i=r(512),n=r.n(i),s=r(69954),o=r(58619),a=r(849),l=r(36073),c=r(57031),u=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let l=(e.length-s)*n+1>>>0,c=new Uint8Array(l);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=l-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*c[e]>>>0,c[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let u=l-a;for(;u!==l&&0===c[u];)u++;let h=new Uint8Array(o+(l-u)),d=o;for(;u!==l;)h[d++]=c[u++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,l=t.length;for(;a!==l&&0===t[a];)a++,n++;let c=(l-a)*s+1>>>0,u=new Uint8Array(c);for(;a!==l;){let e=t[a],i=0;for(let t=c-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let h=c-o;for(;h!==c&&0===u[h];)h++;let d=i.repeat(n);for(;h<c;++h)d+=e.charAt(u[h]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),h=r(99022),d=r(55601),p=r(18431),f=r(62601),g=r(67133).Buffer;function m(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function y(e,t=[]){let r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;let n=e[i];r.push(...n.accounts)}),r}function v(e,t){return e.includes(":")?[e]:t.chains||[]}var b=Object.defineProperty,w=Object.defineProperties,E=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&I(e,r,t[r]);if(_)for(var r of _(t))S.call(t,r)&&I(e,r,t[r]);return e},A=(e,t)=>w(e,E(t));let k={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function O(){return"u">typeof f&&"u">typeof f.versions&&"u">typeof f.versions.node}function P(){return!(0,a.getDocument)()&&!!(0,a.getNavigator)()&&"ReactNative"===navigator.product}function R(){return!O()&&!!(0,a.getNavigator)()&&!!(0,a.getDocument)()}function N(){return P()?k.reactNative:O()?k.node:R()?k.browser:k.unknown}function T(){var e;try{return P()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function M(){return(0,l.D)()||{name:"",description:"",url:"",icons:[""]}}function L(e,t,i){let n=function(){if(N()===k.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let e=(0,s.qY)();if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),o=function(){var e;let t=N();return t===k.browser?[t,(null==(e=(0,a.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,o].join("/")}function D(e,t){return e.filter(e=>t.includes(e)).length===e.length}function B(e){return Object.fromEntries(e.entries())}function j(e){return new Map(Object.entries(e))}function $(e=o.FIVE_MINUTES,t){let r,i,n,s;let a=(0,o.toMiliseconds)(e||o.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,o)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),o(e)},a),r=e,i=o})}}function U(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function q(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function H(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function F(e,t){return(0,o.fromMiliseconds)((t||Date.now())+(0,o.toMiliseconds)(e))}function z(e){return Date.now()>=(0,o.toMiliseconds)(e)}function W(e,t){return`${e}${t?`:${t}`:""}`}function K(e=[],t=[]){return[...new Set([...e,...t])]}async function V({id:e,topic:t,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let l=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=g.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),c=N();if(c===k.browser){let e;if(!(null!=(n=(0,a.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||l.startsWith("https://")||l.startsWith("http://"))&&(e="_blank"),window.open(l,e,"noreferrer noopener")}else c===k.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(l)}catch(e){console.error(e)}}async function G(e,t){let r="";try{if(R()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function Z(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function J(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function Y(){return"u">typeof f&&"true"===f.env.IS_VITEST}function X(e){return g.from(e,"base64").toString("utf-8")}function Q(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function ee(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function et(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");Q(e.outputLen),Q(e.blockLen)}function er(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function ei(e,t){ee(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let en=BigInt(4294967296-1),es=BigInt(32),eo=(e,t,r)=>e<<r|t>>>32-r,ea=(e,t,r)=>t<<r|e>>>32-r,el=(e,t,r)=>t<<r-32|e>>>64-r,ec=(e,t,r)=>e<<r-32|t>>>64-r,eu="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function eh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ed(e,t){return e<<32-t|e>>>t}let ep=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function ef(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function eg(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),ee(e),e}class em{clone(){return this._cloneInto()}}function ey(e){let t=t=>e().update(eg(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ev(e=32){if(eu&&"function"==typeof eu.getRandomValues)return eu.getRandomValues(new Uint8Array(e));if(eu&&"function"==typeof eu.randomBytes)return eu.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let eb=[],ew=[],eE=[],e_=BigInt(0),eC=BigInt(1),eS=BigInt(2),eI=BigInt(7),ex=BigInt(256),eA=BigInt(113);for(let e=0,t=eC,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],eb.push(2*(5*i+r)),ew.push((e+1)*(e+2)/2%64);let n=e_;for(let e=0;e<7;e++)(t=(t<<eC^(t>>eI)*eA)%ex)&eS&&(n^=eC<<(eC<<BigInt(e))-eC);eE.push(n)}let[ek,eO]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&en),l:Number(e>>es&en)}:{h:0|Number(e>>es&en),l:0|Number(e&en)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(eE,!0),eP=(e,t,r)=>r>32?el(e,t,r):eo(e,t,r),eR=(e,t,r)=>r>32?ec(e,t,r):ea(e,t,r);class eN extends em{constructor(e,t,r,i=!1,n=24){var s;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Q(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){ep||ef(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=eP(s,o,1)^r[i],l=eR(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ew[r],s=eP(t,n,i),o=eR(t,n,i),a=eb[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=ek[i],e[1]^=eO[i]}r.fill(0)}(this.state32,this.rounds),ep||ef(this.state32),this.posOut=0,this.pos=0}update(e){er(this);let{blockLen:t,state:r}=this,i=(e=eg(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){er(this,!1),ee(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Q(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ei(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new eN(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let eT=ey(()=>new eN(136,1,32));function eM(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+g.from(eT(r)).toString("hex")}async function eL(e,t,r,i,n,s){switch(r.t){case"eip191":return await eD(e,t,r.s);case"eip1271":return await eB(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function eD(e,t,r){return(await (0,c.R)({hash:eM(t),signature:r})).toLowerCase()===e.toLowerCase()}async function eB(e,t,r,i,n,s){let o=m(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),l=eM(t).substring(2),c=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:o+l+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a},"latest"]})}),{result:u}=await c.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var ej=Object.defineProperty,e$=Object.defineProperties,eU=Object.getOwnPropertyDescriptors,eq=Object.getOwnPropertySymbols,eH=Object.prototype.hasOwnProperty,eF=Object.prototype.propertyIsEnumerable,ez=(e,t,r)=>t in e?ej(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eW=(e,t)=>{for(var r in t||(t={}))eH.call(t,r)&&ez(e,r,t[r]);if(eq)for(var r of eq(t))eF.call(t,r)&&ez(e,r,t[r]);return e},eK=(e,t)=>e$(e,eU(t));let eV=e=>e?.split(":"),eG=e=>{let t=e&&eV(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},eZ=e=>{let t=e&&eV(e);if(t)return t[2]+":"+t[3]},eJ=e=>{let t=e&&eV(e);if(t)return t.pop()};async function eY(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=eX(n,n.iss),o=eJ(n.iss);return await eL(o,s,i,eZ(n.iss),r)}let eX=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=eJ(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${eG(t)}`,l=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,f=e5(e.resources);return f&&(n=function(e="",t){eQ(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,e1(f))),[r,i,"",n,"",s,o,a,l,c,u,h,d,p].filter(e=>null!=e).join(`
`)};function eQ(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function e0(e){return eQ(e),`urn:recap:${g.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function e1(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(g.from(t,"base64").toString("utf-8")));return eQ(r),r}function e2(e){var t;let r=e1(e);eQ(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function e3(e){let t=e1(e);eQ(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function e5(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function e4(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function e6(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function e8(e,...t){if(!e6(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function e9(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function e7(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let te=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),tt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function tr(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(e6(e))e=ts(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function ti(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function tn(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}function ts(e){return Uint8Array.from(e)}function to(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let ta=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),tl=ta("expand 16-byte k"),tc=ta("expand 32-byte k"),tu=te(tl),th=te(tc);function td(e,t){return e<<t|e>>>32-t}function tp(e){return e.byteOffset%4==0}let tf=4294967296-1,tg=new Uint32Array,tm=(e,t)=>255&e[t++]|(255&e[t++])<<8;class ty{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e8(e=tr(e),32);let t=tm(e,0),r=tm(e,2),i=tm(e,4),n=tm(e,6),s=tm(e,8),o=tm(e,10),a=tm(e,12),l=tm(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=tm(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=n[7],p=n[8],f=n[9],g=tm(e,t+0),m=tm(e,t+2),y=tm(e,t+4),v=tm(e,t+6),b=tm(e,t+8),w=tm(e,t+10),E=tm(e,t+12),_=tm(e,t+14),C=i[0]+(8191&g),S=i[1]+((g>>>13|m<<3)&8191),I=i[2]+((m>>>10|y<<6)&8191),x=i[3]+((y>>>7|v<<9)&8191),A=i[4]+((v>>>4|b<<12)&8191),k=i[5]+(b>>>1&8191),O=i[6]+((b>>>14|w<<2)&8191),P=i[7]+((w>>>11|E<<5)&8191),R=i[8]+((E>>>8|_<<8)&8191),N=i[9]+(_>>>5|(r?0:2048)),T=0,M=0+C*s+5*f*S+5*p*I+5*d*x+5*h*A;T=M>>>13,M&=8191,M+=5*u*k+5*c*O+5*l*P+5*a*R+5*o*N,T+=M>>>13,M&=8191;let L=T+C*o+S*s+5*f*I+5*p*x+5*d*A;T=L>>>13,L&=8191,L+=5*h*k+5*u*O+5*c*P+5*l*R+5*a*N,T+=L>>>13,L&=8191;let D=T+C*a+S*o+I*s+5*f*x+5*p*A;T=D>>>13,D&=8191,D+=5*d*k+5*h*O+5*u*P+5*c*R+5*l*N,T+=D>>>13,D&=8191;let B=T+C*l+S*a+I*o+x*s+5*f*A;T=B>>>13,B&=8191,B+=5*p*k+5*d*O+5*h*P+5*u*R+5*c*N,T+=B>>>13,B&=8191;let j=T+C*c+S*l+I*a+x*o+A*s;T=j>>>13,j&=8191,j+=5*f*k+5*p*O+5*d*P+5*h*R+5*u*N,T+=j>>>13,j&=8191;let $=T+C*u+S*c+I*l+x*a+A*o;T=$>>>13,$&=8191,$+=k*s+5*f*O+5*p*P+5*d*R+5*h*N,T+=$>>>13,$&=8191;let U=T+C*h+S*u+I*c+x*l+A*a;T=U>>>13,U&=8191,U+=k*o+O*s+5*f*P+5*p*R+5*d*N,T+=U>>>13,U&=8191;let q=T+C*d+S*h+I*u+x*c+A*l;T=q>>>13,q&=8191,q+=k*a+O*o+P*s+5*f*R+5*p*N,T+=q>>>13,q&=8191;let H=T+C*p+S*d+I*h+x*u+A*c;T=H>>>13,H&=8191,H+=k*l+O*a+P*o+R*s+5*f*N,T+=H>>>13,H&=8191;let F=T+C*f+S*p+I*d+x*h+A*u;T=F>>>13,F&=8191,F+=k*c+O*l+P*a+R*o+N*s,T+=F>>>13,F&=8191,M=8191&(T=(T=(T<<2)+T|0)+M|0),T>>>=13,L+=T,i[0]=M,i[1]=L,i[2]=D,i[3]=B,i[4]=j,i[5]=$,i[6]=U,i[7]=q,i[8]=H,i[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;to(r)}update(e){e9(this);let{buffer:t,blockLen:r}=this,i=(e=tr(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){to(this.h,this.r,this.buffer,this.pad)}digestInto(e){e9(this),function(e,t){e8(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let tv=function(e){let t=(t,r)=>e(r).update(tr(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new ty(e)),tb=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return e4(n),e4(o),e7(s),e7(r),(t,a,l,c,u=0)=>{e8(t),e8(a),e8(l);let h=l.length;if(void 0===c&&(c=new Uint8Array(h)),e8(c),e4(u),u<0||u>=tf)throw Error("arx: counter overflow");if(c.length<h)throw Error(`arx: output (${c.length}) is shorter than data (${h})`);let d=[],p=t.length,f,g;if(32===p)d.push(f=ts(t)),g=th;else if(16===p&&r)(f=new Uint8Array(32)).set(t),f.set(t,16),g=tu,d.push(f);else throw Error(`arx: invalid 32-byte key, got length=${p}`);tp(a)||d.push(a=ts(a));let m=te(f);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,m,te(a.subarray(0,16)),m),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let l=n.length,c=new Uint8Array(64),u=te(c),h=tp(n)&&tp(s),d=h?te(n):tg,p=h?te(s):tg;for(let f=0;f<l;o++){if(e(t,r,i,u,o,a),o>=tf)throw Error("arx: counter overflow");let g=Math.min(64,l-f);if(h&&64===g){let e=f/4;if(f%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)p[r=e+t]=d[r]^u[t];f+=64;continue}for(let e=0,t;e<g;e++)s[t=f+e]=n[t]^c[e];f+=g}}(e,g,m,te(a),l,c,u,o),to(...d),c}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],v=r[0],b=r[1],w=r[2],E=o,_=a,C=l,S=c,I=u,x=h,A=d,k=p,O=f,P=g,R=m,N=y,T=n,M=v,L=b,D=w;for(let e=0;e<s;e+=2)O=O+(T=td(T^(E=E+I|0),16))|0,E=E+(I=td(I^O,12))|0,O=O+(T=td(T^E,8))|0,I=td(I^O,7),P=P+(M=td(M^(_=_+x|0),16))|0,_=_+(x=td(x^P,12))|0,P=P+(M=td(M^_,8))|0,x=td(x^P,7),R=R+(L=td(L^(C=C+A|0),16))|0,C=C+(A=td(A^R,12))|0,R=R+(L=td(L^C,8))|0,A=td(A^R,7),N=N+(D=td(D^(S=S+k|0),16))|0,S=S+(k=td(k^N,12))|0,N=N+(D=td(D^S,8))|0,k=td(k^N,7),R=R+(D=td(D^(E=E+x|0),16))|0,E=E+(x=td(x^R,12))|0,R=R+(D=td(D^E,8))|0,x=td(x^R,7),N=N+(T=td(T^(_=_+A|0),16))|0,_=_+(A=td(A^N,12))|0,N=N+(T=td(T^_,8))|0,A=td(A^N,7),O=O+(M=td(M^(C=C+k|0),16))|0,C=C+(k=td(k^O,12))|0,O=O+(M=td(M^C,8))|0,k=td(k^O,7),P=P+(L=td(L^(S=S+I|0),16))|0,S=S+(I=td(I^P,12))|0,P=P+(L=td(L^S,8))|0,I=td(I^P,7);let B=0;i[B++]=o+E|0,i[B++]=a+_|0,i[B++]=l+C|0,i[B++]=c+S|0,i[B++]=u+I|0,i[B++]=h+x|0,i[B++]=d+A|0,i[B++]=p+k|0,i[B++]=f+O|0,i[B++]=g+P|0,i[B++]=m+R|0,i[B++]=y+N|0,i[B++]=n+T|0,i[B++]=v+M|0,i[B++]=b+L|0,i[B++]=w+D|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),tw=new Uint8Array(16),tE=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(tw.subarray(r))},t_=new Uint8Array(32);function tC(e,t,r,i,n){let s=e(t,r,t_),o=tv.create(s);n&&tE(o,n),tE(o,i);let a=new Uint8Array(16),l=tt(a);tn(l,0,BigInt(n?n.length:0),!0),tn(l,8,BigInt(i.length),!0),o.update(a);let c=o.digest();return to(s,a),c}let tS=((e,t)=>{function r(i,...n){if(e8(i),void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?e8(t):e8(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&e8(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");e8(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,e8(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(e8(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=ti(s+16,n,!1)).set(i);let o=n.subarray(0,-16);tb(e,t,o,o,1);let a=tC(tb,e,t,o,r);return n.set(a,s),to(a),n},decrypt(i,n){n=ti(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=tC(tb,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),tb(e,t,n,n,1),to(a),n}}));class tI extends em{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,et(e);let r=eg(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return er(this),this.iHash.update(e),this}digestInto(e){er(this),ee(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let tx=(e,t,r)=>new tI(e,t).update(r).digest();tx.create=(e,t)=>new tI(e,t);let tA=new Uint8Array([0]),tk=new Uint8Array,tO=(e,t,r,i,n)=>{var s;return function(e,t,r,i=32){if(et(e),Q(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=tk);let s=new Uint8Array(n*e.outputLen),o=tx.create(e,t),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)tA[0]=t+1,a.update(0===t?tk:l).update(r).update(tA).digestInto(l),s.set(l,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),tA.fill(0),s.slice(0,i)}(e,(s=r,et(e),void 0===s&&(s=new Uint8Array(e.outputLen)),tx(e,eg(s),eg(t))),i,n)};class tP extends em{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eh(this.buffer)}update(e){er(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=eg(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=eh(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){er(this),ei(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=eh(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let tR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tN=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tT=new Uint32Array(64);class tM extends tP{constructor(){super(64,32,8,!1),this.A=0|tN[0],this.B=0|tN[1],this.C=0|tN[2],this.D=0|tN[3],this.E=0|tN[4],this.F=0|tN[5],this.G=0|tN[6],this.H=0|tN[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tT[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tT[e-15],r=tT[e-2],i=ed(t,7)^ed(t,18)^t>>>3,n=ed(r,17)^ed(r,19)^r>>>10;tT[e]=n+tT[e-7]+i+tT[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,h,d,p;let t=c+(ed(o,6)^ed(o,11)^ed(o,25))+((u=o)&a^~u&l)+tR[e]+tT[e]|0,f=(ed(r,2)^ed(r,13)^ed(r,22))+((h=r)&(d=i)^h&(p=n)^d&p)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+f|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){tT.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let tL=ey(()=>new tM),tD=BigInt(0),tB=BigInt(1),tj=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function t$(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tU(e){if(!t$(e))throw Error("Uint8Array expected")}function tq(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let tH=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tF(e){tU(e);let t="";for(let r=0;r<e.length;r++)t+=tH[e[r]];return t}function tz(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function tW(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tD:BigInt("0x"+e)}let tK={_0:48,_9:57,A:65,F:70,a:97,f:102};function tV(e){return e>=tK._0&&e<=tK._9?e-tK._0:e>=tK.A&&e<=tK.F?e-(tK.A-10):e>=tK.a&&e<=tK.f?e-(tK.a-10):void 0}function tG(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=tV(e.charCodeAt(n)),s=tV(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function tZ(e){return tW(tF(e))}function tJ(e){return tU(e),tW(tF(Uint8Array.from(e).reverse()))}function tY(e,t){return tG(e.toString(16).padStart(2*t,"0"))}function tX(e,t){return tY(e,t).reverse()}function tQ(e,t,r){let i;if("string"==typeof t)try{i=tG(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(t$(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function t0(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];tU(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let t1=e=>"bigint"==typeof e&&tD<=e;function t2(e,t,r){return t1(e)&&t1(t)&&t1(r)&&t<=e&&e<r}function t3(e,t,r,i){if(!t2(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function t5(e){let t;for(t=0;e>tD;e>>=tB,t+=1);return t}let t4=e=>(tj<<BigInt(e-1))-tB,t6=e=>new Uint8Array(e),t8=e=>Uint8Array.from(e);function t9(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=t6(e),n=t6(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=t6())=>{n=a(t8([0]),e),i=a(),0!==e.length&&(n=a(t8([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return t0(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let t7={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||t$(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function re(e,t,r={}){let i=(t,r,i)=>{let n=t7[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function rt(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}var rr=Object.freeze({__proto__:null,isBytes:t$,abytes:tU,abool:tq,bytesToHex:tF,numberToHexUnpadded:tz,hexToNumber:tW,hexToBytes:tG,bytesToNumberBE:tZ,bytesToNumberLE:tJ,numberToBytesBE:tY,numberToBytesLE:tX,numberToVarBytesBE:function(e){return tG(tz(e))},ensureBytes:tQ,concatBytes:t0,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},inRange:t2,aInRange:t3,bitLen:t5,bitGet:function(e,t){return e>>BigInt(t)&tB},bitSet:function(e,t,r){return e|(r?tB:tD)<<BigInt(t)},bitMask:t4,createHmacDrbg:t9,validateObject:re,notImplemented:()=>{throw Error("not implemented")},memoized:rt});let ri=BigInt(0),rn=BigInt(1),rs=BigInt(2),ro=BigInt(3),ra=BigInt(4),rl=BigInt(5),rc=BigInt(8);function ru(e,t){let r=e%t;return r>=ri?r:t+r}function rh(e,t,r){if(t<ri)throw Error("invalid exponent, negatives unsupported");if(r<=ri)throw Error("invalid modulus");if(r===rn)return ri;let i=rn;for(;t>ri;)t&rn&&(i=i*e%r),e=e*e%r,t>>=rn;return i}function rd(e,t,r){let i=e;for(;t-- >ri;)i*=i,i%=r;return i}function rp(e,t){if(e===ri)throw Error("invert: expected non-zero number");if(t<=ri)throw Error("invert: expected positive modulus, got "+t);let r=ru(e,t),i=t,n=ri,s=rn;for(;r!==ri;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==rn)throw Error("invert: does not exist");return ru(n,t)}let rf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rg(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function rm(e,t,r=!1,i={}){let n;if(e<=ri)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=rg(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:t4(s),ZERO:ri,ONE:rn,create:t=>ru(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return ri<=t&&t<e},is0:e=>e===ri,isOdd:e=>(e&rn)===rn,neg:t=>ru(-t,e),eql:(e,t)=>e===t,sqr:t=>ru(t*t,e),add:(t,r)=>ru(t+r,e),sub:(t,r)=>ru(t-r,e),mul:(t,r)=>ru(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<ri)throw Error("invalid exponent, negatives unsupported");if(r===ri)return e.ONE;if(r===rn)return t;let i=e.ONE,n=t;for(;r>ri;)r&rn&&(i=e.mul(i,n)),n=e.sqr(n),r>>=rn;return i})(a,e,t),div:(t,r)=>ru(t*rp(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>rp(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%ra===ro){let t=(e+rn)/ra;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%rc===rl){let t=(e-rl)/rc;return function(e,r){let i=e.mul(r,rs),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,rs),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-rn)/rs;for(t=e-rn,r=0;t%rs===ri;t/=rs,r++);for(i=rs;i<e&&rh(i,n,e)!==e-rn;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+rn)/ra;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+rn)/rs;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,rn<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?tX(e,o):tY(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?tJ(e):tZ(e)}});return Object.freeze(a)}function ry(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function rv(e){let t=ry(e);return t+Math.ceil(t/2)}let rb=BigInt(0),rw=BigInt(1);function rE(e,t){let r=t.negate();return e?r:t}function r_(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function rC(e,t){return r_(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let rS=new WeakMap,rI=new WeakMap;function rx(e){return rI.get(e)||1}function rA(e){return re(e.Fp,rf.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),re(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);let rk=BigInt(0),rO=BigInt(1),rP=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let rR=BigInt(1),rN=BigInt(2),rT=BigInt(3),rM=BigInt(5);BigInt(8);let rL=function(e){let t=(re(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>ru(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),l=t.powPminus2||(e=>rh(e,r-BigInt(2),r));function c(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let u=(t.a-BigInt(2))/BigInt(4);function h(e,t){let h=function(e,t){t3("u",e,rk,r),t3("scalar",t,rk,r);let s=rO,o=rk,a=e,h=rO,d=rk,p;for(let r=BigInt(n-1);r>=rk;r--){let n=t>>r&rO;d^=n,s=(p=c(d,s,a))[0],a=p[1],o=(p=c(d,o,h))[0],h=p[1],d=n;let l=s+o,f=i(l*l),g=s-o,m=i(g*g),y=f-m,v=a+h,b=i((a-h)*l),w=i(v*g),E=b+w,_=b-w;a=i(E*E),h=i(e*i(_*_)),s=i(f*m),o=i(y*(f+i(u*y)))}return s=(p=c(d,s,a))[0],a=p[1],o=(p=c(d,o,h))[0],h=p[1],i(s*l(o))}(function(e){let t=tQ("u coordinate",e,s);return 32===o&&(t[31]&=127),tJ(t)}(t),function(e){let t=tQ("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return tJ(a(t))}(e));if(h===rk)throw Error("invalid private or public key received");return tX(i(h),s)}let d=tX(i(t.Gu),s);function p(e){return h(e,d)}return{scalarMult:h,scalarMultBase:p,getSharedSecret:(e,t)=>h(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:d}}({P:rP,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%rP*e%rP,o=rd(s,rN,rP)*s%rP,a=rd(o,rR,rP)*e%rP,l=rd(a,rM,rP)*a%rP,c=rd(l,t,rP)*l%rP,u=rd(c,r,rP)*c%rP,h=rd(u,i,rP)*u%rP,d=rd(h,n,rP)*h%rP,p=rd(d,n,rP)*h%rP,f=rd(p,t,rP)*l%rP;return{pow_p_5_8:rd(f,rN,rP)*e%rP,b2:s}}(e);return ru(rd(t,rT,rP)*r,rP)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:ev});function rD(e){void 0!==e.lowS&&tq("lowS",e.lowS),void 0!==e.prehash&&tq("prehash",e.prehash)}let{bytesToNumberBE:rB,hexToBytes:rj}=rr;class r$ extends Error{constructor(e=""){super(e)}}let rU={Err:r$,_tlv:{encode:(e,t)=>{let{Err:r}=rU;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=tz(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?tz(n.length/2|128):"";return tz(e)+s+n+t},decode(e,t){let{Err:r}=rU,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=rU;if(e<rq)throw new t("integer: negative integers are not allowed");let r=tz(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=rU;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return rB(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=rU,n="string"==typeof e?rj(e):e;tU(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=rU,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},rq=BigInt(0),rH=BigInt(1);BigInt(2);let rF=BigInt(3);BigInt(4);let rz=rm(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),rW=function(e,t){let r=t=>(function(e){let t=function(e){let t=rA(e);return re(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return ru(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){var t;let r=function(e){let t=rA(e);re(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:i}=r,n=rm(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let n=t.toAffine();return t0(Uint8Array.from([4]),i.toBytes(n.x),i.toBytes(n.y))}),o=r.fromBytes||(e=>{let t=e.subarray(1);return{x:i.fromBytes(t.subarray(0,i.BYTES)),y:i.fromBytes(t.subarray(i.BYTES,2*i.BYTES))}});function a(e){let{a:t,b:n}=r,s=i.sqr(e),o=i.mul(s,e);return i.add(i.add(o,i.mul(e,t)),n)}if(!i.eql(i.sqr(r.Gy),a(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=r;if(i&&"bigint"!=typeof e){if(t$(e)&&(e=tF(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{t="bigint"==typeof e?e:tZ(tQ("private key",e,n))}catch{throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(t=ru(t,o)),t3("private key",t,rH,o),t}function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let u=rt((e,t)=>{let{px:r,py:n,pz:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),l=i.mul(n,t),c=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(c,i.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),h=rt(e=>{if(e.is0()){if(r.allowInfinityPoint&&!i.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!i.isValid(t)||!i.isValid(n))throw Error("bad point: x or y not FE");let s=i.sqr(n),o=a(t);if(!i.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!i.isValid(e))throw Error("x required");if(null==t||!i.isValid(t))throw Error("y required");if(null==r||!i.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let n=e=>i.eql(e,i.ZERO);return n(t)&&n(r)?d.ZERO:new d(t,r,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(tQ("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=t5(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(d,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(i.isOdd)return!i.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:n}=this,{px:s,py:o,pz:a}=e,l=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return l&&u}negate(){return new d(this.px,i.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,n=i.mul(t,rF),{px:s,py:o,pz:a}=this,l=i.ZERO,c=i.ZERO,u=i.ZERO,h=i.mul(s,s),p=i.mul(o,o),f=i.mul(a,a),g=i.mul(s,o);return g=i.add(g,g),u=i.mul(s,a),u=i.add(u,u),l=i.mul(e,u),c=i.mul(n,f),c=i.add(l,c),l=i.sub(p,c),c=i.add(p,c),c=i.mul(l,c),l=i.mul(g,l),u=i.mul(n,u),f=i.mul(e,f),g=i.sub(h,f),g=i.mul(e,g),g=i.add(g,u),u=i.add(h,h),h=i.add(u,h),h=i.add(h,f),h=i.mul(h,g),c=i.add(c,h),f=i.mul(o,a),f=i.add(f,f),h=i.mul(f,g),l=i.sub(l,h),u=i.mul(f,p),u=i.add(u,u),new d(l,c,u=i.add(u,u))}add(e){c(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=i.ZERO,h=i.ZERO,p=i.ZERO,f=r.a,g=i.mul(r.b,rF),m=i.mul(t,o),y=i.mul(n,a),v=i.mul(s,l),b=i.add(t,n),w=i.add(o,a);b=i.mul(b,w),w=i.add(m,y),b=i.sub(b,w),w=i.add(t,s);let E=i.add(o,l);return w=i.mul(w,E),E=i.add(m,v),w=i.sub(w,E),E=i.add(n,s),u=i.add(a,l),E=i.mul(E,u),u=i.add(y,v),E=i.sub(E,u),p=i.mul(f,w),u=i.mul(g,v),p=i.add(u,p),u=i.sub(y,p),p=i.add(y,p),h=i.mul(u,p),y=i.add(m,m),y=i.add(y,m),v=i.mul(f,v),w=i.mul(g,w),y=i.add(y,v),v=i.sub(m,v),v=i.mul(f,v),w=i.add(w,v),m=i.mul(y,w),h=i.add(h,m),m=i.mul(E,w),u=i.mul(b,u),u=i.sub(u,m),m=i.mul(b,y),p=i.mul(E,p),new d(u,h,p=i.add(p,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=r;t3("scalar",e,rq,n);let s=d.ZERO;if(e===rq)return s;if(this.is0()||e===rH)return this;if(!t||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:c}=t.splitScalar(e),u=s,h=s,p=this;for(;a>rq||c>rq;)a&rH&&(u=u.add(p)),c&rH&&(h=h.add(p)),p=p.double(),a>>=rH,c>>=rH;return o&&(u=u.negate()),l&&(h=h.negate()),h=new d(i.mul(h.px,t.beta),h.py,h.pz),u.add(h)}multiply(e){let t,n;let{endo:s,n:o}=r;if(t3("scalar",e,rH,o),s){let{k1neg:r,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(r,c),h=f.constTimeNegate(a,h),h=new d(i.mul(h.px,s.beta),h.py,h.pz),t=c.add(h),n=u.add(p)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return d.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=d.BASE,n=(e,t)=>t!==rq&&t!==rH&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===rH)return!0;if(t)return t(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===rH?this:t?t(d,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return tq("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return tq("isCompressed",e),tF(this.toRawBytes(e))}}d.BASE=new d(r.Gx,r.Gy,i.ONE),d.ZERO=new d(i.ZERO,i.ONE,i.ZERO);let p=r.nBitLength,f=(t=r.endo?Math.ceil(p/2):p,{constTimeNegate:rE,hasPrecomputes:e=>1!==rx(e),unsafeLadder(e,t,r=d.ZERO){let i=e;for(;t>rb;)t&rw&&(r=r.add(i)),i=i.double(),t>>=rw;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=rC(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=rC(e,t),o=d.ZERO,a=d.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=rw);let h=t+Math.abs(n)-1,d=e%2!=0,p=n<0;0===n?a=a.add(rE(d,r[t])):o=o.add(rE(p,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=d.ZERO){let{windows:s,windowSize:o}=rC(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===rb)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=rw),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=rS.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&rS.set(t,r(i))),i},wNAFCached(e,t,r){let i=rx(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=rx(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){r_(r,t),rI.set(e,r),rS.delete(e)}});return{CURVE:r,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return t2(e,rH,r.n)}}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x);return tq("isCompressed",i),i?t0(Uint8Array.from([t.hasEvenY()?2:3]),s):t0(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=tZ(o);if(!t2(t,rH,r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&rH)===rH)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+s+", got "+t)}}),h=e=>tF(tY(e,t.nByteLength)),d=(e,t,r)=>tZ(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(d(e=tQ("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=rU.toSig(tQ("DER",e));return new p(t,r)}assertValidity(){t3("r",this.r,rH,i),t3("s",this.s,rH,i)}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:s,recovery:l}=this,c=m(tQ("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",p=a.fromHex(d+h(u)),f=rp(u,i),g=o(-c*f),y=o(s*f),v=a.BASE.multiplyAndAddUnsafe(p,g,y);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>i>>rH}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return tG(this.toDERHex())}toDERHex(){return rU.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tG(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function f(e){let t=t$(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=tZ(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},m=t.bits2int_modN||function(e){return o(g(e))},y=t4(t.nBitLength);function v(e){return t3("num < 2^"+t.nBitLength,e,rq,y),tY(e,t.nByteLength)}let b={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(f(e))throw Error("first arg must be private key");if(!f(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=b){let{seed:c,k2sig:h}=function(e,n,s=b){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:f,extraEntropy:y}=s;null==d&&(d=!0),e=tQ("msgHash",e),rD(s),f&&(e=tQ("prehashed msgHash",c(e)));let w=m(e),E=l(n),_=[v(E),v(w)];if(null!=y&&!1!==y){let e=!0===y?h(r.BYTES):y;_.push(tQ("extraEntropy",e))}return{seed:t0(..._),k2sig:function(e){let t=g(e);if(!u(t))return;let r=rp(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===rq)return;let l=o(r*o(w+s*E));if(l===rq)return;let c=(n.x===s?0:2)|Number(n.y&rH),h=l;return d&&l>i>>rH&&(h=l>i>>rH?o(-l):l,c^=1),new p(s,h,c)}}}(e,n,s);return t9(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=w){let l,c;r=tQ("msgHash",r),n=tQ("publicKey",n);let{lowS:u,prehash:h,format:d}=s;if(rD(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let f="string"==typeof e||t$(e),g=!f&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(l=new p(e.r,e.s)),f){try{"compact"!==d&&(l=p.fromDER(e))}catch(e){if(!(e instanceof rU.Err))throw e}l||"der"===d||(l=p.fromCompact(e))}c=a.fromHex(n)}catch{return!1}if(!l||u&&l.hasHighS())return!1;h&&(r=t.hash(r));let{r:y,s:v}=l,b=m(r),E=rp(v,i),_=o(b*E),C=o(y*E),S=a.BASE.multiplyAndAddUnsafe(c,_,C)?.toAffine();return!!S&&o(S.x)===y},ProjectivePoint:a,Signature:p,utils:{isValidPrivateKey(e){try{return l(e),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=rv(t.n);return function(e,t,r=!1){let i=e.length,n=ry(t),s=rv(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=ru(r?tJ(e):tZ(e),t-rn)+rn;return r?tX(o,n):tY(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>tx(t,e,function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];ee(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}(...r)),randomBytes:ev});return{...r(t),create:r}}({a:rz.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:rz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},tL),rK="base10",rV="base16",rG="base64pad",rZ="base64url",rJ="utf8";function rY(){let e=ev(32);return(0,d.BB)(e,rV)}function rX(e){let t=tL((0,d.mL)(e,rV));return(0,d.BB)(t,rV)}function rQ(e){let t=tL((0,d.mL)(e,rJ));return(0,d.BB)(t,rV)}function r0(e){return(0,d.mL)(`${e}`,rK)}function r1(e){return Number((0,d.BB)(e,rK))}function r2(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function r3(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function r5(e){if(2===r1(e.type))return(0,d.BB)((0,d.zo)([e.type,e.sealed]),rG);if(1===r1(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,d.BB)((0,d.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),rG)}return(0,d.BB)((0,d.zo)([e.type,e.iv,e.sealed]),rG)}function r4(e){let t=(e.encoding||rG)===rZ?r3(e.encoded):e.encoded,r=(0,d.mL)(t,rG),i=r.slice(0,1);if(1===r1(i)){let e=r.slice(1,33),t=r.slice(33,45);return{type:i,sealed:r.slice(45),iv:t,senderPublicKey:e}}if(2===r1(i))return{type:i,sealed:r.slice(1),iv:ev(12)};let n=r.slice(1,13);return{type:i,sealed:r.slice(13),iv:n}}function r6(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function r8(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function r9(e){return e?.relay||{protocol:"irn"}}function r7(e){let t=p.iO[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function ie(e){var t;if(!e.includes("wc:")){let t=X(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o="u">typeof i?e.substring(i):"",a=new URLSearchParams(o),l={};a.forEach((e,t)=>{l[t]=e});let c="string"==typeof l.methods?l.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:l.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(l),methods:c,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function it(e){let t=new URLSearchParams,r=function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay);Object.keys(r).sort().forEach(e=>{t.set(e,r[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function ir(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}var ii=Object.defineProperty,is=Object.defineProperties,io=Object.getOwnPropertyDescriptors,ia=Object.getOwnPropertySymbols,il=Object.prototype.hasOwnProperty,ic=Object.prototype.propertyIsEnumerable,iu=(e,t,r)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ih=(e,t)=>{for(var r in t||(t={}))il.call(t,r)&&iu(e,r,t[r]);if(ia)for(var r of ia(t))ic.call(t,r)&&iu(e,r,t[r]);return e},id=(e,t)=>is(e,io(t));function ip(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function ig(e){return e.includes(":")}function im(e){return ig(e)?e.split(":")[0]:e}function iy(e){var t,r,i;let n={};if(!iS(e))return n;for(let[s,o]of Object.entries(e)){let e=ig(s)?[s]:o.chains,a=o.methods||[],l=o.events||[],c=im(s);n[c]=id(ih({},n[c]),{chains:K(e,null==(t=n[c])?void 0:t.chains),methods:K(a,null==(r=n[c])?void 0:r.methods),events:K(l,null==(i=n[c])?void 0:i.events)})}return n}function iv(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=K(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}let ib={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},iw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function iE(e,t){let{message:r,code:i}=iw[e];return{message:t?`${r} ${t}`:r,code:i}}function i_(e,t){let{message:r,code:i}=ib[e];return{message:t?`${r} ${t}`:r,code:i}}function iC(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function iS(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function iI(e){return typeof e>"u"}function ix(e,t){return!!(t&&iI(e))||"string"==typeof e&&!!e.trim().length}function iA(e,t){return!!(t&&iI(e))||"number"==typeof e&&!isNaN(e)}function ik(e){return!!(ix(e,!1)&&e.includes(":"))&&2===e.split(":").length}function iO(e){let t=!0;return iC(e)?e.length&&(t=e.every(e=>ix(e,!1))):t=!1,t}function iP(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,iO(e?.methods)?iO(e?.events)||(n=i_("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=i_("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function iR(e,t){let r=null;if(e&&iS(e)){let i;let n=iP(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,iC(r)?r.forEach(e=>{s||function(e){if(ix(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&ik(e)}}return!1}(e)||(s=i_("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=i_("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=iE("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function iN(e){return ix(e.protocol,!0)}function iT(e){return"u">typeof e}function iM(e,t){return!(!ik(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...ip(e.accounts))}),t})(e).includes(t))}function iL(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=ip(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),l=iD(Object.keys(e)),c=iD(Object.keys(t)),u=l.filter(e=>!c.includes(e));return u.length&&(i=iE("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),D(o,a)||(i=iE("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=ip(t[e].accounts);n.includes(e)||(i=iE("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(D(n[e].methods,s[e].methods)?D(n[e].events,s[e].events)||(i=iE("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=iE("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function iD(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function iB(){let e=N();return new Promise(t=>{switch(e){case k.browser:t(R()&&navigator?.onLine);break;case k.reactNative:t(ij());break;case k.node:default:t(!0)}})}async function ij(){if(P()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let i$={};class iU{static get(e){return i$[e]}static set(e,t){i$[e]=t}static delete(e){delete i$[e]}}var iq=r(50545),iH=r(34149),iF=r(67133).Buffer;function iz(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function iW(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return iW(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let iK="base64:";function iV(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function iG(e){return(e=iV(e))?e+":":""}let iZ=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function iJ(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function iY(e){"function"==typeof e.dispose&&await iz(e.dispose)}var iX=r(5484),iQ=r(43283),i0=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=(0,iX.MT)(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await (0,iX.U2)(i(e),t)>"u"),getItem:async e=>await (0,iX.U2)(i(e),t)??null,setItem:(e,r)=>(0,iX.t8)(i(e),r,t),removeItem:e=>(0,iX.IV)(i(e),t),getKeys:()=>(0,iX.XP)(t),clear:()=>(0,iX.ZH)(t)}};class i1{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||iZ()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=iV(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await iJ(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=iV(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},l=r(n);s(l).items.push({key:n,value:o,relativeKey:l.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},l={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=iV(e));return iz(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=iV(e));return iz(n.getItem,i,t).then(e=>(0,iH.ZP)(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?iz(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return iV(e.join(":"))}(e.base,t.key),value:(0,iH.ZP)(t.value)}))):Promise.all(e.items.map(t=>iz(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:(0,iH.ZP)(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=iV(e));return n.getItemRaw?iz(n.getItemRaw,i,t):iz(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(iK)?(t=e.slice(iK.length),globalThis.Buffer?iF.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return l.removeItem(e);let{relativeKey:s,driver:o}=r(e=iV(e));o.setItem&&(await iz(o.setItem,s,iW(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return iz(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:iW(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>iz(e.driver.setItem,t.relativeKey,iW(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return l.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=iV(e));if(o.setItemRaw)await iz(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await iz(o.setItem,s,"string"==typeof t?t:iK+(globalThis.Buffer?iF.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=iV(e));s.removeItem&&(await iz(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await iz(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=iV(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await iz(n.getMeta,i,t)),!t.nativeOnly){let e=await iz(n.getItem,i+"$",t).then(e=>(0,iH.ZP)(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=iG(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await iz(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+iV(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=iG(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?iz(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>iY(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=iG(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(iJ(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),l},async unmount(e,r=!0){(e=iG(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await iY(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=iV(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=iV(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>l.getKeys(e,t),get:(e,t={})=>l.getItem(e,t),set:(e,t,r={})=>l.setItem(e,t,r),has:(e,t={})=>l.hasItem(e,t),del:(e,t={})=>l.removeItem(e,t),remove:(e,t={})=>l.removeItem(e,t)};return l}({driver:i0({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,iQ.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var i2="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},i3={exports:{}};function i5(e){var t;return[e[0],(0,iQ.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof i2&&i2.localStorage?i3.exports=i2.localStorage:"u">typeof window&&window.localStorage?i3.exports=window.localStorage:i3.exports=new e}();class i4{constructor(){this.localStorage=i3.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(i5)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,iQ.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,iQ.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}let i6=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),i8(e,o)},i8=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class i9{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new i4;this.storage=e;try{let t=new i1;i6(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var i7=r(33234),ne=r(95097),nt=Object.defineProperty,nr=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ni=(e,t,r)=>nr(e,"symbol"!=typeof t?t+"":t,r);class nn extends ne.q{constructor(e){super(),this.opts=e,ni(this,"protocol","wc"),ni(this,"version",2)}}var ns=Object.defineProperty,no=(e,t,r)=>t in e?ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,na=(e,t,r)=>no(e,"symbol"!=typeof t?t+"":t,r);class nl extends ne.q{constructor(e,t){super(),this.core=e,this.logger=t,na(this,"records",new Map)}}class nc{constructor(e,t){this.logger=e,this.core=t}}class nu extends ne.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class nh extends ne.q{constructor(e){super()}}class nd{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class np extends ne.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class nf extends ne.q{constructor(e,t){super(),this.core=e,this.logger=t}}class ng{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class nm{constructor(e,t){this.projectId=e,this.logger=t}}class ny{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var nv=Object.defineProperty,nb=(e,t,r)=>t in e?nv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nw=(e,t,r)=>nb(e,"symbol"!=typeof t?t+"":t,r);class nE{constructor(e){this.opts=e,nw(this,"protocol","wc"),nw(this,"version",2)}}class n_{constructor(e){this.client=e}}var nC=r(45280),nS=r(53620),nI=r(12869),nx=r(67133).Buffer,nA=r(62601);let nk="core",nO=`wc@2:${nk}:`,nP={logger:"error"},nR={database:":memory:"},nN="client_ed25519_seed",nT=o.ONE_DAY,nM=o.SIX_HOURS,nL="wss://relay.walletconnect.org",nD={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},nB={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nj="2.21.1",n$={link_mode:"link_mode",relay:"relay"},nU={inbound:"inbound",outbound:"outbound"},nq="WALLETCONNECT_LINK_MODE_APPS",nH={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},nF=(o.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:o.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:o.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:o.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:o.ONE_DAY,prompt:!1,tag:0},res:{ttl:o.ONE_DAY,prompt:!1,tag:0}}}),nz={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},nW={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},nK={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nV="https://verify.walletconnect.org",nG=`${nV}/v3`,nZ=["https://verify.walletconnect.com",nV],nJ={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},nY={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},nX={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},nQ={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},n0={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},n1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var n2=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=s-n;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(i+(s-p)),g=i;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,p=o-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var g=l.repeat(r);f<o;++f)g+=e.charAt(c[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let n3=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},n5=e=>new TextEncoder().encode(e),n4=e=>new TextDecoder().decode(e);class n6{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class n8{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return n7(this,e)}}class n9{constructor(e){this.decoders=e}or(e){return n7(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let n7=(e,t)=>new n9({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class se{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new n6(e,t,r),this.decoder=new n8(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let st=({name:e,prefix:t,encode:r,decode:i})=>new se(e,t,r,i),sr=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=n2(r,t);return st({prefix:e,name:t,encode:i,decode:e=>n3(n(e))})},si=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},sn=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},ss=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>st({prefix:t,name:e,encode:e=>sn(e,i,r),decode:t=>si(t,i,r,e)});var so=Object.freeze({__proto__:null,identity:st({prefix:"\x00",name:"identity",encode:e=>n4(e),decode:e=>n5(e)})}),sa=Object.freeze({__proto__:null,base2:ss({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),sl=Object.freeze({__proto__:null,base8:ss({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),sc=Object.freeze({__proto__:null,base10:sr({prefix:"9",name:"base10",alphabet:"0123456789"})}),su=Object.freeze({__proto__:null,base16:ss({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:ss({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let sh=ss({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sd=ss({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sp=ss({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sf=ss({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sg=ss({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sm=ss({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var sy=Object.freeze({__proto__:null,base32:sh,base32upper:sd,base32pad:sp,base32padupper:sf,base32hex:sg,base32hexupper:sm,base32hexpad:ss({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:ss({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:ss({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),sv=Object.freeze({__proto__:null,base36:sr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:sr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),sb=Object.freeze({__proto__:null,base58btc:sr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:sr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let sw=ss({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var sE=Object.freeze({__proto__:null,base64:sw,base64pad:ss({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:ss({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:ss({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let s_=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sC=s_.reduce((e,t,r)=>(e[r]=t,e),[]),sS=s_.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var sI=Object.freeze({__proto__:null,base256emoji:st({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=sC[t],"")},decode:function(e){let t=[];for(let r of e){let e=sS[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})}),sx={encode:function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let sA=(e,t,r=0)=>(sx.encode(e,t,r),t),sk=e=>sx.encodingLength(e),sO=(e,t)=>{let r=t.byteLength,i=sk(e),n=i+sk(r),s=new Uint8Array(n+r);return sA(e,s,0),sA(r,s,i),s.set(t,n),new sP(e,r,t,s)};class sP{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let sR=({name:e,code:t,encode:r})=>new sN(e,t,r);class sN{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?sO(this.code,t):t.then(e=>sO(this.code,e))}throw Error("Unknown type, must be binary type")}}let sT=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var sM=Object.freeze({__proto__:null,sha256:sR({name:"sha2-256",code:18,encode:sT("SHA-256")}),sha512:sR({name:"sha2-512",code:19,encode:sT("SHA-512")})}),sL=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:n3,digest:e=>sO(0,n3(e))}});new TextEncoder,new TextDecoder;let sD={...so,...sa,...sl,...sc,...su,...sy,...sv,...sb,...sE,...sI};function sB(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...sM,...sL});let sj=sB("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),s$=sB("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),sU={utf8:sj,"utf-8":sj,hex:sD.base16,latin1:s$,ascii:s$,binary:s$,...sD};var sq=Object.defineProperty,sH=(e,t,r)=>t in e?sq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sF=(e,t,r)=>sH(e,"symbol"!=typeof t?t+"":t,r);class sz{constructor(e,t){this.core=e,this.logger=t,sF(this,"keychain",new Map),sF(this,"name","keychain"),sF(this,"version","0.3"),sF(this,"initialized",!1),sF(this,"storagePrefix",nO),sF(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),sF(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),sF(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),sF(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=iE("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),sF(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=(0,i7.Ep)(t,this.name)}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,B(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?j(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var sW=Object.defineProperty,sK=(e,t,r)=>t in e?sW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sV=(e,t,r)=>sK(e,"symbol"!=typeof t?t+"":t,r);class sG{constructor(e,t,r){this.core=e,this.logger=t,sV(this,"name","crypto"),sV(this,"keychain"),sV(this,"randomSessionIdentifier",rY()),sV(this,"initialized",!1),sV(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),sV(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),sV(this,"getClientId",async()=>{this.isInitialized();let e=await this.getClientSeed(),t=h.Au(e);return h.bG(t.publicKey)}),sV(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=rL.utils.randomPrivateKey(),t=rL.getPublicKey(e);return{privateKey:(0,d.BB)(e,rV),publicKey:(0,d.BB)(t,rV)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),sV(this,"signJWT",async e=>{this.isInitialized();let t=await this.getClientSeed(),r=h.Au(t),i=this.randomSessionIdentifier;return await h.vf(i,e,nT,r)}),sV(this,"generateSharedKey",(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=tO(tL,rL.getSharedSecret((0,d.mL)(e,rV),(0,d.mL)(t,rV)),void 0,void 0,32);return(0,d.BB)(r,rV)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)}),sV(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||rX(e);return await this.keychain.set(r,e),r}),sV(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),sV(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),sV(this,"encode",async(e,t,r)=>{this.isInitialized();let i=r6(r),n=(0,iQ.u)(t);if(2===i.type)return function(e,t){let r=r0(2),i=ev(12),n=r5({type:r,sealed:(0,d.mL)(e,rJ),iv:i});return t===rZ?r2(n):n}(n,r?.encoding);if(r8(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){let t=r0("u">typeof e.type?e.type:0);if(1===r1(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?(0,d.mL)(e.senderPublicKey,rV):void 0,i="u">typeof e.iv?(0,d.mL)(e.iv,rV):ev(12),n=r5({type:t,sealed:tS((0,d.mL)(e.symKey,rV),i).encrypt((0,d.mL)(e.message,rJ)),iv:i,senderPublicKey:r});return e.encoding===rZ?r2(n):n}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),sV(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=r4({encoded:e,encoding:t?.encoding});return r6({type:r1(r.type),senderPublicKey:"u">typeof r.senderPublicKey?(0,d.BB)(r.senderPublicKey,rV):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type){let e=function(e,t){let{sealed:r}=r4({encoded:e,encoding:t});return(0,d.BB)(r,rJ)}(t,r?.encoding);return(0,iQ.D)(e)}if(r8(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=(0,d.mL)(e.symKey,rV),{sealed:r,iv:i}=r4({encoded:e.encoded,encoding:e.encoding}),n=tS(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return(0,d.BB)(n,rJ)}({symKey:i,encoded:t,encoding:r?.encoding});return(0,iQ.D)(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),sV(this,"getPayloadType",(e,t=rG)=>r1(r4({encoded:e,encoding:t}).type)),sV(this,"getPayloadSenderPublicKey",(e,t=rG)=>{let r=r4({encoded:e,encoding:t});return r.senderPublicKey?(0,d.BB)(r.senderPublicKey,rV):void 0}),this.core=e,this.logger=(0,i7.Ep)(t,this.name),this.keychain=r||new sz(this.core,this.logger)}get context(){return(0,i7.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(nN)}catch{e=rY(),await this.keychain.set(nN,e)}return function(e,t="utf8"){let r=sU[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var sZ=Object.defineProperty,sJ=Object.defineProperties,sY=Object.getOwnPropertyDescriptors,sX=Object.getOwnPropertySymbols,sQ=Object.prototype.hasOwnProperty,s0=Object.prototype.propertyIsEnumerable,s1=(e,t,r)=>t in e?sZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s2=(e,t)=>{for(var r in t||(t={}))sQ.call(t,r)&&s1(e,r,t[r]);if(sX)for(var r of sX(t))s0.call(t,r)&&s1(e,r,t[r]);return e},s3=(e,t)=>sJ(e,sY(t)),s5=(e,t,r)=>s1(e,"symbol"!=typeof t?t+"":t,r);class s4 extends nc{constructor(e,t){super(e,t),this.logger=e,this.core=t,s5(this,"messages",new Map),s5(this,"messagesWithoutClientAck",new Map),s5(this,"name","messages"),s5(this,"version","0.3"),s5(this,"initialized",!1),s5(this,"storagePrefix",nO),s5(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),s5(this,"set",async(e,t,r)=>{this.isInitialized();let i=rQ(t),n=this.messages.get(e);if(typeof n>"u"&&(n={}),"u">typeof n[i])return i;if(n[i]=t,this.messages.set(e,n),r===nU.inbound){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,s3(s2({},r),{[i]:t}))}return await this.persist(),i}),s5(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),s5(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),s5(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[rQ(t)])),s5(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let i=rQ(t);delete r[i],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),s5(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=(0,i7.Ep)(e,this.name),this.core=t}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,B(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,B(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?j(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?j(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var s6=Object.defineProperty,s8=Object.defineProperties,s9=Object.getOwnPropertyDescriptors,s7=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,or=(e,t,r)=>t in e?s6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oi=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&or(e,r,t[r]);if(s7)for(var r of s7(t))ot.call(t,r)&&or(e,r,t[r]);return e},on=(e,t)=>s8(e,s9(t)),os=(e,t,r)=>or(e,"symbol"!=typeof t?t+"":t,r);class oo extends nu{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,os(this,"events",new i.EventEmitter),os(this,"name","publisher"),os(this,"queue",new Map),os(this,"publishTimeout",(0,o.toMiliseconds)(o.ONE_MINUTE)),os(this,"initialPublishTimeout",(0,o.toMiliseconds)(15*o.ONE_SECOND)),os(this,"needsTransportRestart",!1),os(this,"publish",async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||nM,s=r9(r),o=r?.prompt||!1,a=r?.tag||0,l=r?.id||(0,nS.getBigIntRpcId)().toString(),c={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${l} tag:${a}`;try{let i=new Promise(async i=>{let s=({id:e})=>{c.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(nD.publish,s),i(c))};this.relayer.events.on(nD.publish,s);let u=U(new Promise((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch(e=>{this.logger.warn(e,e?.message),s(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${l} tag:${a}`);try{await u,this.events.removeListener(nD.publish,s)}catch(e){this.queue.set(l,on(oi({},c),{attempt:1})),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:l,topic:e,message:t,opts:r}}),await U(i,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(l)}}),os(this,"on",(e,t)=>{this.events.on(e,t)}),os(this,"once",(e,t)=>{this.events.once(e,t)}),os(this,"off",(e,t)=>{this.events.off(e,t)}),os(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,i7.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,i7.Fd)(this.logger)}async rpcPublish(e){var t,r,i,n;let{topic:s,message:o,ttl:a=nM,prompt:l,tag:c,id:u,attestation:h,tvf:d}=e,p={method:r7(r9().protocol).publish,params:oi({topic:s,message:o,ttl:a,prompt:l,tag:c,attestation:h},d),id:u};iI(null==(t=p.params)?void 0:t.prompt)&&(null==(r=p.params)||delete r.prompt),iI(null==(i=p.params)?void 0:i.tag)&&(null==(n=p.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});let f=await this.relayer.request(p);return this.relayer.events.emit(nD.publish,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let r=e.attempt+1;this.queue.set(t,on(oi({},e),{attempt:r}));let{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(on(oi({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(iq.Lx.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(nD.connection_stalled);return}this.checkQueue()}),this.relayer.on(nD.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var oa=Object.defineProperty,ol=(e,t,r)=>t in e?oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oc=(e,t,r)=>ol(e,"symbol"!=typeof t?t+"":t,r);class ou{constructor(){oc(this,"map",new Map),oc(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),oc(this,"get",e=>this.map.get(e)||[]),oc(this,"exists",(e,t)=>this.get(e).includes(t)),oc(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),oc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var oh=Object.defineProperty,od=Object.defineProperties,op=Object.getOwnPropertyDescriptors,of=Object.getOwnPropertySymbols,og=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,oy=(e,t,r)=>t in e?oh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ov=(e,t)=>{for(var r in t||(t={}))og.call(t,r)&&oy(e,r,t[r]);if(of)for(var r of of(t))om.call(t,r)&&oy(e,r,t[r]);return e},ob=(e,t)=>od(e,op(t)),ow=(e,t,r)=>oy(e,"symbol"!=typeof t?t+"":t,r);class oE extends np{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ow(this,"subscriptions",new Map),ow(this,"topicMap",new ou),ow(this,"events",new i.EventEmitter),ow(this,"name","subscription"),ow(this,"version","0.3"),ow(this,"pending",new Map),ow(this,"cached",[]),ow(this,"initialized",!1),ow(this,"storagePrefix",nO),ow(this,"subscribeTimeout",(0,o.toMiliseconds)(o.ONE_MINUTE)),ow(this,"initialSubscribeTimeout",(0,o.toMiliseconds)(15*o.ONE_SECOND)),ow(this,"clientId"),ow(this,"batchSubscribeTopicsLimit",500),ow(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ow(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=r9(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),ow(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),ow(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),ow(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),ow(this,"on",(e,t)=>{this.events.on(e,t)}),ow(this,"once",(e,t)=>{this.events.once(e,t)}),ow(this,"off",(e,t)=>{this.events.off(e,t)}),ow(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),ow(this,"start",async()=>{await this.onConnect()}),ow(this,"stop",async()=>{await this.onDisconnect()}),ow(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ow(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),ow(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(iq.Lx.pulse,async()=>{await this.checkPending()}),this.events.on(nH.created,async e=>{let t=nH.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(nH.deleted,async e=>{let t=nH.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=(0,i7.Ep)(t,this.name),this.clientId=""}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=r9(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=i_("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r&&r?.transportType!==n$.relay||await this.restartToComplete({topic:e,id:e,relay:t});let n={method:r7(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(r?.transportType===n$.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,o.toMiliseconds)(o.ONE_SECOND)),t;let i=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(nH.created,r),t(i.id))};this.events.on(nH.created,r);try{let i=await U(new Promise((e,t)=>{this.relayer.request(n).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(nH.created,r),t(i)}catch{}}),a=await U(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!a&&s)throw Error(`Subscribing to ${e} failed, please try again`);return a?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nD.connection_stalled),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:r7(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await U(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(nD.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:r7(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await U(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(nD.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let i={method:r7(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,ob(ov({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,ov({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,ov({},t)),this.topicMap.set(t.topic,e),this.events.emit(nH.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=iE("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(nH.deleted,ob(ov({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(nH.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(nH.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=iE("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>ob(ov({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,o.toMiliseconds)(o.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return rQ(e+await this.getClientId())}}var o_=Object.defineProperty,oC=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,oI=Object.prototype.propertyIsEnumerable,ox=(e,t,r)=>t in e?o_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oA=(e,t)=>{for(var r in t||(t={}))oS.call(t,r)&&ox(e,r,t[r]);if(oC)for(var r of oC(t))oI.call(t,r)&&ox(e,r,t[r]);return e},ok=(e,t,r)=>ox(e,"symbol"!=typeof t?t+"":t,r);class oO extends nh{constructor(e){super(e),ok(this,"protocol","wc"),ok(this,"version",2),ok(this,"core"),ok(this,"logger"),ok(this,"events",new i.EventEmitter),ok(this,"provider"),ok(this,"messages"),ok(this,"subscriber"),ok(this,"publisher"),ok(this,"name","relayer"),ok(this,"transportExplicitlyClosed",!1),ok(this,"initialized",!1),ok(this,"connectionAttemptInProgress",!1),ok(this,"relayUrl"),ok(this,"projectId"),ok(this,"packageName"),ok(this,"bundleId"),ok(this,"hasExperiencedNetworkDisruption",!1),ok(this,"pingTimeout"),ok(this,"heartBeatTimeout",(0,o.toMiliseconds)(o.THIRTY_SECONDS+o.FIVE_SECONDS)),ok(this,"reconnectTimeout"),ok(this,"connectPromise"),ok(this,"reconnectInProgress",!1),ok(this,"requestsInFlight",[]),ok(this,"connectTimeout",(0,o.toMiliseconds)(15*o.ONE_SECOND)),ok(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||(0,nS.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),ok(this,"resetPingTimeout",()=>{O()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(e){this.logger.warn(e,e?.message)}},this.heartBeatTimeout))}),ok(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),ok(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(nD.connect)}),ok(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),ok(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(nD.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ok(this,"registerProviderListeners",()=>{this.provider.on(nB.payload,this.onPayloadHandler),this.provider.on(nB.connect,this.onConnectHandler),this.provider.on(nB.disconnect,this.onDisconnectHandler),this.provider.on(nB.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,i7.Ep)(e.logger,this.name):(0,i7.gw)((0,i7.jI)({level:e.logger||"error"})),this.messages=new s4(this.logger,e.core),this.subscriber=new oE(this,this.logger),this.publisher=new oo(this,this.logger),this.relayUrl=e?.relayUrl||nL,this.projectId=e.projectId,P()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="android"?this.packageName=T():P()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="ios"&&(this.bundleId=T()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,i7.Fd)(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:n$.relay},nU.outbound)}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,l=t=>{t.topic===e&&(this.subscriber.off(nH.created,l),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(nH.created,l)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,oA({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await U(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await iB())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=F(o.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(nD.message,e),await this.recordMessageEvent(e,nU.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(nB.disconnect,r),await U(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(nB.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(nB.disconnect,r),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(nB.disconnect,r)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,o.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,i,n;if(O())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new nC.r(new nI.Z(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:l}){let c=r.split("?"),u=L(e,t,i),h=function(e,t){let r=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(c[1]||"",{auth:n,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:l||void 0,bundleId:a||void 0});return c[0]+"?"+h}({sdkVersion:nj,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,nS.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:n$.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oA({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,nS.isJsonRpcResponse)(e)&&this.events.emit(nD.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,nU.inbound),this.events.emit(nD.message,e))}async acknowledgePayload(e){let t=(0,nS.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(nB.payload,this.onPayloadHandler),this.provider.off(nB.connect,this.onConnectHandler),this.provider.off(nB.disconnect,this.onDisconnectHandler),this.provider.off(nB.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await iB();(function(e){switch(N()){case k.browser:!P()&&R()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case k.reactNative:P()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case k.node:}})(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(iq.Lx.pulse,async()=>{var e;if(!this.transportExplicitlyClosed&&!this.connected&&(!(R()&&(0,a.getDocument)())||(null==(e=(0,a.getDocument)())?void 0:e.visibilityState)==="visible"))try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(nD.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,o.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function oP(){}function oR(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function oN(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function oT(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let oM="[object Arguments]",oL="[object Object]";var oD=Object.defineProperty,oB=Object.getOwnPropertySymbols,oj=Object.prototype.hasOwnProperty,o$=Object.prototype.propertyIsEnumerable,oU=(e,t,r)=>t in e?oD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oq=(e,t)=>{for(var r in t||(t={}))oj.call(t,r)&&oU(e,r,t[r]);if(oB)for(var r of oB(t))o$.call(t,r)&&oU(e,r,t[r]);return e},oH=(e,t,r)=>oU(e,"symbol"!=typeof t?t+"":t,r);class oF extends nd{constructor(e,t,r,i=nO,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,oH(this,"map",new Map),oH(this,"version","0.3"),oH(this,"cached",[]),oH(this,"initialized",!1),oH(this,"getKey"),oH(this,"storagePrefix",nO),oH(this,"recentlyDeleted",[]),oH(this,"recentlyDeletedLimit",200),oH(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!iI(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),oH(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),oH(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),oH(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>(function e(t,r,i,n,s,o,a){let l=a(t,r,i,n,s,o);if(void 0!==l)return l;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,i,n,s){if(Object.is(r,i))return!0;let o=oT(r),a=oT(i);if(o===oM&&(o=oL),a===oM&&(a=oL),o!==a)return!1;switch(o){case"[object String]":return r.toString()===i.toString();case"[object Number]":{let e=r.valueOf(),t=i.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),i.valueOf());case"[object RegExp]":return r.source===i.source&&r.flags===i.flags;case"[object Function]":return r===i}let l=(n=n??new Map).get(r),c=n.get(i);if(null!=l&&null!=c)return l===i;n.set(r,i),n.set(i,r);try{switch(o){case"[object Map]":if(r.size!==i.size)return!1;for(let[t,o]of r.entries())if(!i.has(t)||!e(o,i.get(t),t,r,i,n,s))return!1;return!0;case"[object Set]":{if(r.size!==i.size)return!1;let t=Array.from(r.values()),o=Array.from(i.values());for(let a=0;a<t.length;a++){let l=t[a],c=o.findIndex(t=>e(l,t,void 0,r,i,n,s));if(-1===c)return!1;o.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof nx&&nx.isBuffer(r)!==nx.isBuffer(i)||r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],i[t],t,r,i,n,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===i.byteLength&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object DataView]":return r.byteLength===i.byteLength&&r.byteOffset===i.byteOffset&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object Error]":return r.name===i.name&&r.message===i.message;case oL:{if(!(t(r.constructor,i.constructor,n,s)||oR(r)&&oR(i)))return!1;let o=[...Object.keys(r),...oN(r)],a=[...Object.keys(i),...oN(i)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],l=r[a];if(!Object.hasOwn(i,a))return!1;let c=i[a];if(!e(l,c,a,r,i,n,s))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(i)}}(t,r,o,a)})(t[r],e[r],void 0,void 0,void 0,void 0,oP))):this.values)),oH(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=oq(oq({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),oH(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=(0,i7.Ep)(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=iE("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=iE("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=iE("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var oz=Object.defineProperty,oW=(e,t,r)=>t in e?oz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oK=(e,t,r)=>oW(e,"symbol"!=typeof t?t+"":t,r);class oV{constructor(e,t){this.core=e,this.logger=t,oK(this,"name","pairing"),oK(this,"version","0.3"),oK(this,"events",new(n())),oK(this,"pairings"),oK(this,"initialized",!1),oK(this,"storagePrefix",nO),oK(this,"ignoredPayloadTypes",[1]),oK(this,"registeredMethods",[]),oK(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),oK(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),oK(this,"create",async e=>{this.isInitialized();let t=rY(),r=await this.core.crypto.setSymKey(t),i=F(o.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},a=it({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(nz.create,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:a}}),oK(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[nJ.pairing_started]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:a,methods:l}=ie(e.uri);if(r.props.properties.topic=i,r.addTrace(nJ.pairing_uri_validation_success),r.addTrace(nJ.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace(nJ.existing_pairing),t.active)throw r.setError(nY.active_pairing_already_exists),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace(nJ.pairing_not_expired)}let c=a||F(o.FIVE_MINUTES),u={topic:i,relay:s,expiry:c,active:!1,methods:l};this.core.expirer.set(i,c),await this.pairings.set(i,u),r.addTrace(nJ.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(nz.create,u),r.addTrace(nJ.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace(nJ.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(nY.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError(nY.subscribe_pairing_topic_failure),e}return r.addTrace(nJ.subscribe_pairing_topic_success),u}),oK(this,"activate",async({topic:e})=>{this.isInitialized();let t=F(o.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),oK(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=$();this.events.once(W("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),oK(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),oK(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),oK(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),oK(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",i_("USER_DISCONNECTED")),await this.deletePairing(t))}),oK(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return it({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),oK(this,"sendRequest",async(e,t,r)=>{let i=(0,nS.formatJsonRpcRequest)(t,r),n=await this.core.crypto.encode(e,i),s=nF[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),oK(this,"sendResult",async(e,t,r)=>{let i=(0,nS.formatJsonRpcResult)(e,r),n=await this.core.crypto.encode(t,i),s=nF[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),oK(this,"sendError",async(e,t,r)=>{let i=(0,nS.formatJsonRpcError)(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=nF[s]?nF[s].res:nF.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),oK(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,i_("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),oK(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>z(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),oK(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),oK(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),oK(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(nz.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oK(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,nS.isJsonRpcResult)(t)?this.events.emit(W("pairing_ping",r),{}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("pairing_ping",r),{error:t.error})},500)}),oK(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(nz.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oK(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=i_("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oK(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(i_("WC_METHOD_UNSUPPORTED",e))}),oK(this,"isValidPair",(e,t)=>{var r;if(!iT(e)){let{message:r}=iE("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(nY.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(ix(e,!1)){if(t(e))return!0;let r=X(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=iE("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(nY.malformed_pairing_uri),Error(r)}let i=ie(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=iE("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(nY.malformed_pairing_uri),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=iE("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(nY.malformed_pairing_uri),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,o.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(nY.pairing_expired);let{message:e}=iE("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),oK(this,"isValidPing",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),oK(this,"isValidDisconnect",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),oK(this,"isValidPairingTopic",async e=>{if(!ix(e,!1)){let{message:t}=iE("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=iE("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(z(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=iE("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=(0,i7.Ep)(t,this.name),this.pairings=new oF(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,i7.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(nD.message,async e=>{let{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==n$.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);(0,nS.isJsonRpcRequest)(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):(0,nS.isJsonRpcResponse)(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(nK.expired,async e=>{let{topic:t}=H(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(nz.expire,{topic:t}))})}}var oG=Object.defineProperty,oZ=(e,t,r)=>t in e?oG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oJ=(e,t,r)=>oZ(e,"symbol"!=typeof t?t+"":t,r);class oY extends nl{constructor(e,t){super(e,t),this.core=e,this.logger=t,oJ(this,"records",new Map),oJ(this,"events",new i.EventEmitter),oJ(this,"name","history"),oJ(this,"version","0.3"),oJ(this,"cached",[]),oJ(this,"initialized",!1),oJ(this,"storagePrefix",nO),oJ(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),oJ(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:F(o.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(nW.created,i)}),oJ(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,nS.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(nW.updated,t))}),oJ(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),oJ(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(nW.deleted,r))}),this.persist()}),oJ(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),oJ(this,"on",(e,t)=>{this.events.on(e,t)}),oJ(this,"once",(e,t)=>{this.events.once(e,t)}),oJ(this,"off",(e,t)=>{this.events.off(e,t)}),oJ(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,i7.Ep)(t,this.name)}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,nS.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=iE("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(nW.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=iE("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(nW.created,e=>{let t=nW.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(nW.updated,e=>{let t=nW.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(nW.deleted,e=>{let t=nW.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(iq.Lx.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,o.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(nW.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var oX=Object.defineProperty,oQ=(e,t,r)=>t in e?oX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o0=(e,t,r)=>oQ(e,"symbol"!=typeof t?t+"":t,r);class o1 extends nf{constructor(e,t){super(e,t),this.core=e,this.logger=t,o0(this,"expirations",new Map),o0(this,"events",new i.EventEmitter),o0(this,"name","expirer"),o0(this,"version","0.3"),o0(this,"cached",[]),o0(this,"initialized",!1),o0(this,"storagePrefix",nO),o0(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),o0(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),o0(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(nK.created,{target:r,expiration:i})}),o0(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),o0(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(nK.deleted,{target:t,expiration:r})}}),o0(this,"on",(e,t)=>{this.events.on(e,t)}),o0(this,"once",(e,t)=>{this.events.once(e,t)}),o0(this,"off",(e,t)=>{this.events.off(e,t)}),o0(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,i7.Ep)(t,this.name)}get context(){return(0,i7.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return q("topic",e);if("number"==typeof e)return q("id",e);let{message:t}=iE("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(nK.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=iE("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=iE("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,o.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(nK.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(iq.Lx.pulse,()=>this.checkExpirations()),this.events.on(nK.created,e=>{let t=nK.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(nK.expired,e=>{let t=nK.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(nK.deleted,e=>{let t=nK.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}}var o2=Object.defineProperty,o3=(e,t,r)=>t in e?o2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o5=(e,t,r)=>o3(e,"symbol"!=typeof t?t+"":t,r);class o4 extends ng{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,o5(this,"name","verify-api"),o5(this,"abortController"),o5(this,"isDevEnv"),o5(this,"verifyUrlV3",nG),o5(this,"storagePrefix",nO),o5(this,"version",2),o5(this,"publicKey"),o5(this,"fetchPromise"),o5(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,o.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),o5(this,"register",async e=>{if(!R()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,a.getDocument)(),t=this.startAbortTimer(5*o.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",l),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let l=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if((0,h.xp)(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",l),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",l,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""}),o5(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if((0,h.xp)(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),o5(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*o.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),o5(this,"getVerifyUrl",e=>{let t=e||nV;return nZ.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${nV}`),t=nV),t}),o5(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(o.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),o5(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),o5(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),o5(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),o5(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),o5(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),o5(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=g.from(r3(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32),a=s.slice(32,64),l=tL(`${r}.${i}`),c=function(e){let t=g.from(e.x,"base64"),r=g.from(e.y,"base64");return(0,d.zo)([new Uint8Array([4]),t,r])}(t);if(!rW.verify((0,d.zo)([o,a]),l,c))throw Error("Invalid signature");return(0,h.xp)(e).payload}(e,t.publicKey),i={hasExpired:(0,o.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=(0,i7.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=Y(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,i7.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,o.toMiliseconds)(e))}}var o6=Object.defineProperty,o8=(e,t,r)=>t in e?o6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o9=(e,t,r)=>o8(e,"symbol"!=typeof t?t+"":t,r);class o7 extends nm{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,o9(this,"context","echo"),o9(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=(0,i7.Ep)(t,this.context)}}var ae=Object.defineProperty,at=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,an=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,as=(e,t)=>{for(var r in t||(t={}))ar.call(t,r)&&an(e,r,t[r]);if(at)for(var r of at(t))ai.call(t,r)&&an(e,r,t[r]);return e},ao=(e,t,r)=>an(e,"symbol"!=typeof t?t+"":t,r);class aa extends ny{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,ao(this,"context","event-client"),ao(this,"storagePrefix",nO),ao(this,"storageVersion",.1),ao(this,"events",new Map),ao(this,"shouldPersist",!1),ao(this,"init",async()=>{if(!Y())try{let e={eventId:J(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:L(this.core.relayer.protocol,this.core.relayer.version,nj)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),ao(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=J(),o=this.core.projectId||"",a=as({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),ao(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return as(as({},i),this.setMethods(i.eventId))}),ao(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),ao(this,"setEventListeners",()=>{this.core.heartbeat.on(iq.Lx.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,o.fromMiliseconds)(Date.now())-(0,o.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),ao(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),ao(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),ao(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),ao(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ao(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,as(as({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),ao(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),ao(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${nj}${t}`,{method:"POST",body:JSON.stringify(e)})}),ao(this,"getAppDomain",()=>M().url),this.logger=(0,i7.Ep)(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var al=Object.defineProperty,ac=Object.getOwnPropertySymbols,au=Object.prototype.hasOwnProperty,ah=Object.prototype.propertyIsEnumerable,ad=(e,t,r)=>t in e?al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ap=(e,t)=>{for(var r in t||(t={}))au.call(t,r)&&ad(e,r,t[r]);if(ac)for(var r of ac(t))ah.call(t,r)&&ad(e,r,t[r]);return e},af=(e,t,r)=>ad(e,"symbol"!=typeof t?t+"":t,r);class ag extends nn{constructor(e){var t;super(e),af(this,"protocol","wc"),af(this,"version",2),af(this,"name",nk),af(this,"relayUrl"),af(this,"projectId"),af(this,"customStoragePrefix"),af(this,"events",new i.EventEmitter),af(this,"logger"),af(this,"heartbeat"),af(this,"relayer"),af(this,"crypto"),af(this,"storage"),af(this,"history"),af(this,"expirer"),af(this,"pairing"),af(this,"verify"),af(this,"echoClient"),af(this,"linkModeSupportedApps"),af(this,"eventClient"),af(this,"initialized",!1),af(this,"logChunkController"),af(this,"on",(e,t)=>this.events.on(e,t)),af(this,"once",(e,t)=>this.events.once(e,t)),af(this,"off",(e,t)=>this.events.off(e,t)),af(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),af(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:n$.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})});let r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||nL,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let n=(0,i7.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:nP.logger,name:nk}),{logger:s,chunkLoggerController:o}=(0,i7.Rt)({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,i7.Ep)(s,this.name),this.heartbeat=new iq.C$,this.crypto=new sG(this,this.logger,e?.keychain),this.history=new oY(this,this.logger),this.expirer=new o1(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new i9(ap(ap({},nR),e?.storageOptions)),this.relayer=new oO({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new oV(this,this.logger),this.verify=new o4(this,this.logger,this.storage),this.echoClient=new o7(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new aa(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){let t=new ag(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,i7.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nq,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nq)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;let t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){console.warn("Failed to get global WalletConnect core",e);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;let r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return"u">typeof nA&&"true"===nA.env.DISABLE_GLOBAL_CORE}catch{return!0}}}let am="client",ay=`wc@2:${am}:`,av={name:am,logger:"error"},ab="WALLETCONNECT_DEEPLINK_CHOICE",aw="Proposal expired",aE=o.SEVEN_DAYS,a_={wc_sessionPropose:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1104},res:{ttl:o.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1106},res:{ttl:o.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:o.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1112},res:{ttl:o.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:o.ONE_DAY,prompt:!1,tag:1114},res:{ttl:o.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:o.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:o.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:o.FIVE_MINUTES,prompt:!1,tag:1119}}},aC={min:o.FIVE_MINUTES,max:o.SEVEN_DAYS},aS={idle:"IDLE",active:"ACTIVE"},aI={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},ax=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],aA="wc@1.5:auth:",ak=`${aA}:PUB_KEY`;var aO=Object.defineProperty,aP=Object.defineProperties,aR=Object.getOwnPropertyDescriptors,aN=Object.getOwnPropertySymbols,aT=Object.prototype.hasOwnProperty,aM=Object.prototype.propertyIsEnumerable,aL=(e,t,r)=>t in e?aO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aD=(e,t)=>{for(var r in t||(t={}))aT.call(t,r)&&aL(e,r,t[r]);if(aN)for(var r of aN(t))aM.call(t,r)&&aL(e,r,t[r]);return e},aB=(e,t)=>aP(e,aR(t)),aj=(e,t,r)=>aL(e,"symbol"!=typeof t?t+"":t,r);class a$ extends n_{constructor(e){super(e),aj(this,"name","engine"),aj(this,"events",new(n())),aj(this,"initialized",!1),aj(this,"requestQueue",{state:aS.idle,queue:[]}),aj(this,"sessionRequestQueue",{state:aS.idle,queue:[]}),aj(this,"requestQueueDelay",o.ONE_SECOND),aj(this,"expectedPairingMethodMap",new Map),aj(this,"recentlyDeletedMap",new Map),aj(this,"recentlyDeletedLimit",200),aj(this,"relayMessageCache",[]),aj(this,"pendingSessions",new Map),aj(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(a_)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,o.toMiliseconds)(this.requestQueueDelay)))}),aj(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=aB(aD({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t),t.optionalNamespaces=function(e,t){var r,i,n,s,o,a;let l=iy(e),c=iy(t),u={};for(let e of Object.keys(l).concat(Object.keys(c)))u[e]={chains:K(null==(r=l[e])?void 0:r.chains,null==(i=c[e])?void 0:i.chains),methods:K(null==(n=l[e])?void 0:n.methods,null==(s=c[e])?void 0:s.methods),events:K(null==(o=l[e])?void 0:o.events,null==(a=c[e])?void 0:a.events)};return u}(t.requiredNamespaces,t.optionalNamespaces),t.requiredNamespaces={};let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:a,relays:l}=t,c=r,u,h=!1;try{if(c){let e=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),e}if(!c||!h){let{topic:e,uri:t}=await this.client.core.pairing.create();c=e,u=t}if(!c){let{message:e}=iE("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw Error(e)}let d=await this.client.core.crypto.generateKeyPair(),p=a_.wc_sessionPropose.req.ttl||o.FIVE_MINUTES,f=F(p),g=aB(aD(aD({requiredNamespaces:i,optionalNamespaces:n,relays:l??[{protocol:"irn"}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:c},s&&{sessionProperties:s}),a&&{scopedProperties:a}),{id:(0,nS.payloadId)()}),m=W("session_connect",g.id),{reject:y,resolve:v,done:b}=$(p,aw),w=({id:e})=>{e===g.id&&(this.client.events.off("proposal_expire",w),this.pendingSessions.delete(g.id),this.events.emit(m,{error:{message:aw,code:0}}))};return this.client.events.on("proposal_expire",w),this.events.once(m,({error:e,session:t})=>{this.client.events.off("proposal_expire",w),e?y(e):t&&v(t)}),await this.sendRequest({topic:c,method:"wc_sessionPropose",params:g,throwOnFailedPublish:!0,clientRpcId:g.id}),await this.setProposal(g.id,g),{uri:u,approval:b}}),aj(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),aj(this,"approve",async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[nX.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(nQ.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(nQ.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(nQ.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:l,scopedProperties:c,sessionConfig:u}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:d,proposer:p,requiredNamespaces:f,optionalNamespaces:g}=h,m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:nX.session_approve_started,properties:{topic:d,trace:[nX.session_approve_started,nX.session_namespaces_validation_success]}}));let y=await this.client.core.crypto.generateKeyPair(),v=p.publicKey,b=await this.client.core.crypto.generateSharedKey(y,v),w=aD(aD(aD({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:F(aE)},l&&{sessionProperties:l}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),E=n$.relay;m.addTrace(nX.subscribing_session_topic);try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError(nQ.subscribe_session_topic_failure),e}m.addTrace(nX.subscribe_session_topic_success);let _=aB(aD({},w),{topic:b,requiredNamespaces:f,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:w.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:n$.relay});await this.client.session.set(b,_),m.addTrace(nX.store_session);try{m.addTrace(nX.publishing_session_settle),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(nQ.session_settle_publish_failure),e}),m.addTrace(nX.session_settle_publish_success),m.addTrace(nX.publishing_session_approve),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(nQ.session_approve_publish_failure),e}),m.addTrace(nX.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,i_("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.client.proposal.delete(s,i_("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,F(aE)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}}),aj(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:a_.wc_sessionPropose.reject}),await this.client.proposal.delete(r,i_("USER_DISCONNECTED")))}),aj(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=$(),o=(0,nS.payloadId)(),a=(0,nS.getBigIntRpcId)().toString(),l=this.client.session.get(t).namespaces;return this.events.once(W("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:l}),s(e)}),{acknowledged:i}}),aj(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=(0,nS.payloadId)(),{done:i,resolve:n,reject:s}=$();return this.events.once(W("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,F(aE)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}}),aj(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=a_.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===n$.relay&&await this.confirmOnlineStateOrThrow();let o=(0,nS.payloadId)(),a=(0,nS.getBigIntRpcId)().toString(),{done:l,resolve:c,reject:u}=$(n,"Request expired. Please try again.");this.events.once(W("session_request",o),({error:e,result:t})=>{e?u(e):c(t)});let h="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:{request:aB(aD({},r),{expiryTimestamp:F(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:d}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await l();let p={request:aB(aD({},r),{expiryTimestamp:F(n)}),chainId:t},f=this.shouldSetTVF(h,p);return await Promise.all([new Promise(async e=>{await this.sendRequest(aD({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:p,expiry:n,throwOnFailedPublish:!0},f&&{tvf:this.getTVFParams(o,p)})).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await G(this.client.core.storage,ab);await V({id:o,topic:i,wcDeepLink:e})}e()}),l()]).then(e=>e[2])}),aj(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===n$.relay&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);(0,nS.isJsonRpcResult)(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):(0,nS.isJsonRpcError)(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)}),aj(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,nS.payloadId)(),r=(0,nS.getBigIntRpcId)().toString(),{done:i,resolve:n,reject:s}=$();this.events.once(W("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),aj(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=(0,nS.getBigIntRpcId)().toString(),s=(0,nS.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})}),aj(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:i_("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=iE("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),aj(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!D(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=ip(i),l=r[t];D(v(t,l),a)&&D(l.methods,n)&&D(l.events,o)||(s=!1)}),s)})(t,e)))),aj(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),aj(this,"authenticate",async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?n$.link_mode:n$.relay;a===n$.relay&&await this.confirmOnlineStateOrThrow();let{chains:l,statement:c="",uri:u,domain:h,nonce:d,type:p,exp:f,nbf:g,methods:y=[],expiry:v}=e,b=[...e.resources||[]],{topic:w,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:E}});let _=await this.client.core.crypto.generateKeyPair(),C=rX(_);if(await Promise.all([this.client.auth.authKeys.set(ak,{responseTopic:C,publicKey:_}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${w}`),y.length>0){let{namespace:e}=m(l[0]),t=e0(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",y));e5(b)&&(i=t,n=b.pop(),t=e0(function(e,t){eQ(e),eQ(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=eK(eW({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})})}),i}(e1(i),e1(n)))),b.push(t)}let S=v&&v>a_.wc_sessionAuthenticate.req.ttl?v:a_.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:p??"caip122",chains:l,statement:c,aud:u,domain:h,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:b},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:F(S)},x={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:l,methods:[...new Set(["personal_sign",...y])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:F(a_.wc_sessionPropose.req.ttl),id:(0,nS.payloadId)()},{done:A,resolve:k,reject:O}=$(S,"Request expired"),P=(0,nS.payloadId)(),R=W("session_connect",x.id),N=W("session_request",P),T=async({error:e,session:t})=>{this.events.off(N,M),e?O(e):t&&k({session:t})},M=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),e.error){let t=i_("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(R,T),O(e.error.message))}await this.deleteProposal(x.id),this.events.off(R,T);let{cacaos:o,responder:l}=e.result,c=[],u=[];for(let e of o){await eY({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),O(i_("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=e5(t.resources),i=[eZ(t.iss)],n=eJ(t.iss);if(r){let e=e2(r),t=e3(r);c.push(...e),i.push(...t)}for(let e of i)u.push(`${e}:${n}`)}let h=await this.client.core.crypto.generateSharedKey(_,l.publicKey);c.length>0&&(s={topic:h,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:l,controller:l.publicKey,expiry:F(aE),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:iv([...new Set(c)],[...new Set(u)]),transportType:a},await this.client.core.relayer.subscribe(h,{transportType:a}),await this.client.session.set(h,s),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:l.metadata}),s=this.client.session.get(h)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=l.metadata.redirect)&&i.linkMode&&null!=(n=l.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.session.update(h,{transportType:n$.link_mode})),k({auths:o,session:s})};this.events.once(R,T),this.events.once(N,M);try{if(o){let e=(0,nS.formatJsonRpcRequest)("wc_sessionAuthenticate",I,P);this.client.core.history.set(w,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:rZ});s=ir(t,w,r)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:I,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:x,expiry:a_.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:x.id})])}catch(e){throw this.events.off(R,T),this.events.off(N,M),e}return await this.setProposal(x.id,x),await this.setAuthRequest(P,{request:aB(aD({},I),{verifyContext:{}}),pairingTopic:w,transportType:a}),{uri:s??E,response:A}}),aj(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[n0.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw n.setError(n1.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError(n1.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||n$.relay;o===n$.relay&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),c=rX(a),u={type:1,receiverPublicKey:a,senderPublicKey:l},h=[],d=[];for(let e of i){if(!await eY({cacao:e,projectId:this.client.core.projectId})){n.setError(n1.invalid_cacao);let e=i_("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:c,error:e,encodeOpts:u}),Error(e.message)}n.addTrace(n0.cacaos_verified);let{p:t}=e,i=e5(t.resources),s=[eZ(t.iss)],o=eJ(t.iss);if(i){let e=e2(i),t=e3(i);h.push(...e),s.push(...t)}for(let e of s)d.push(`${e}:${o}`)}let p=await this.client.core.crypto.generateSharedKey(l,a);if(n.addTrace(n0.create_authenticated_session_topic),h?.length>0){t={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:F(aE),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:iv([...new Set(h)],[...new Set(d)]),transportType:o},n.addTrace(n0.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:o})}catch(e){throw n.setError(n1.subscribe_authenticated_session_topic_failure),e}n.addTrace(n0.subscribe_authenticated_session_topic_success),await this.client.session.set(p,t),n.addTrace(n0.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace(n0.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError(n1.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}}),aj(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===n$.relay&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=rX(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:a_.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,i_("USER_DISCONNECTED"))}),aj(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return eX(t,r)}),aj(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),aj(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),aj(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,i_("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(ab).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,i_("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=aS.idle),n&&this.client.events.emit("session_delete",{id:s,topic:r})}),aj(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(nQ.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,i_("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),aj(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=aS.idle,this.client.events.emit("session_request_expire",{id:e}))}),aj(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),aj(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),aj(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,F(a_.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),aj(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=n$.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})}),aj(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||F(a_.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})}),aj(this,"sendRequest",async e=>{let t,i;let{topic:n,method:s,params:o,expiry:a,relayRpcId:l,clientRpcId:c,throwOnFailedPublish:u,appLink:h,tvf:d}=e,p=(0,nS.formatJsonRpcRequest)(s,o,c),f=!!h;try{let e=f?rZ:rG;t=await this.client.core.crypto.encode(n,p,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(ax.includes(s)){let e=rQ(JSON.stringify(p)),r=rQ(t);i=await this.client.core.verify.register({id:r,decryptedId:e})}let g=a_[s].req;if(g.attestation=i,a&&(g.ttl=a),l&&(g.id=l),this.client.core.history.set(n,p),f){let e=ir(h,n,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=a_[s].req;a&&(e.ttl=a),l&&(e.id=l),e.tvf=aB(aD({},d),{correlationId:p.id}),u?(e.internal=aB(aD({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}return p.id}),aj(this,"sendResult",async e=>{let t,i,n;let{id:s,topic:o,result:a,throwOnFailedPublish:l,encodeOpts:c,appLink:u}=e,h=(0,nS.formatJsonRpcResult)(s,a),d=u&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=d?rZ:rG;t=await this.client.core.crypto.encode(o,h,aB(aD({},c||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),e}try{let e=(i=await this.client.core.history.get(o,s)).request;try{this.shouldSetTVF(e.method,e.params)&&(n=this.getTVFParams(s,e.params,a))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${s}) failed`),e}if(d){let e=ir(u,o,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=a_[i.request.method].res;e.tvf=aB(aD({},n),{correlationId:s}),l?(e.internal=aB(aD({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,t,e)):this.client.core.relayer.publish(o,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(h)}),aj(this,"sendError",async e=>{let t,i;let{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:l,appLink:c}=e,u=(0,nS.formatJsonRpcError)(n,o),h=c&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=h?rZ:rG;t=await this.client.core.crypto.encode(s,u,aB(aD({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(h){let e=ir(c,s,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=i.request.method,r=l||a_[e].res;this.client.core.relayer.publish(s,t,r)}await this.client.core.history.resolve(u)}),aj(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;z(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{z(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),aj(this,"onProviderMessageEvent",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),aj(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),aj(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===aS.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=aS.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=aS.idle}),aj(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}}),aj(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}}),aj(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=iE("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),aj(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),aj(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(nY.proposal_listener_not_found)),this.isValidConnect(aD({},r.params));let a=s.expiryTimestamp||F(a_.wc_sessionPropose.req.ttl),l=aD({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,l);let c=await this.getVerifyContext({attestationId:i,hash:rQ(JSON.stringify(r)),encryptedId:n,metadata:l.proposer.metadata});e?.addTrace(nJ.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:c})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:a_.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),aj(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:i}=t;if((0,nS.isJsonRpcResult)(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let l=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:e,proposalId:i,publicKey:o});let c=await this.client.core.relayer.subscribe(l,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if((0,nS.isJsonRpcError)(t)){await this.client.proposal.delete(i,i_("USER_DISCONNECTED"));let e=W("session_connect",i);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),aj(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:l,sessionConfig:c}=t.params,u=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);let h=this.client.proposal.get(u.proposalId),d=aB(aD(aD(aD({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:n.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),l&&{scopedProperties:l}),c&&{sessionConfig:c}),{transportType:n$.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(W("session_connect",u.proposalId),{session:d}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aj(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;(0,nS.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(W("session_approve",r),{})):(0,nS.isJsonRpcError)(t)&&(await this.client.session.delete(e,i_("USER_DISCONNECTED")),this.events.emit(W("session_approve",r),{error:t.error}))}),aj(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=iU.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:i_("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(aD({topic:e},r));try{iU.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw iU.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),aj(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),aj(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,i=W("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nS.isJsonRpcResult)(t)?this.events.emit(W("session_update",r),{}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("session_update",r),{error:t.error})}),aj(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,F(aE)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aj(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,i=W("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nS.isJsonRpcResult)(t)?this.events.emit(W("session_extend",r),{}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("session_extend",r),{error:t.error})}),aj(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aj(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,i=W("session_ping",r);setTimeout(()=>{if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners 2176`);(0,nS.isJsonRpcResult)(t)?this.events.emit(W("session_ping",r),{}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("session_ping",r),{error:t.error})},500)}),aj(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(nD.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:i_("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),aj(this,"onSessionRequest",async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:l}=e,{id:c,params:u}=s;try{await this.isValidRequest(aD({topic:n},u));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:rQ(JSON.stringify((0,nS.formatJsonRpcRequest)("wc_sessionRequest",u,c))),encryptedId:a,metadata:e.peer.metadata,transportType:l}),h={id:c,topic:n,params:u,verifyContext:s};await this.setPendingSessionRequest(h),l===n$.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(e){await this.sendError({id:c,topic:n,error:e}),this.client.logger.error(e)}}),aj(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,i=W("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nS.isJsonRpcResult)(t)?this.events.emit(W("session_request",r),{result:t.result}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("session_request",r),{error:t.error})}),aj(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=iU.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(aD({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),iU.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aj(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,nS.isJsonRpcResult)(t)?this.events.emit(W("session_request",r),{result:t.result}):(0,nS.isJsonRpcError)(t)&&this.events.emit(W("session_request",r),{error:t.error})}),aj(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:l}=i.params,c=await this.getVerifyContext({attestationId:n,hash:rQ(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:c,expiryTimestamp:l};await this.setAuthRequest(i.id,{request:u,pairingTopic:r,transportType:o}),o===n$.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:c})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:a_.wc_sessionAuthenticate.autoReject,appLink:n})}}),aj(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),aj(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=aS.idle,this.processSessionRequestQueue()},(0,o.toMiliseconds)(this.requestQueueDelay))}),aj(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=W("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(W("session_request",e.request.id),{error:t})})}),aj(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===aS.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=aS.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),aj(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),aj(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,nS.formatJsonRpcRequest)("wc_sessionPropose",aB(aD({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}),aj(this,"isValidConnect",async e=>{let t;if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=e;if(iI(r)||await this.isValidPairingTopic(r),t=!1,a?a&&iC(a)&&a.length&&a.forEach(e=>{t=iN(e)}):t=!0,!t){let{message:e}=iE("MISSING_OR_INVALID",`connect() relays: ${a}`);throw Error(e)}if(!iI(i)&&0!==iS(i)){let e="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(e):this.client.logger.warn(e),this.validateNamespaces(i,"requiredNamespaces")}if(iI(n)||0===iS(n)||this.validateNamespaces(n,"optionalNamespaces"),iI(s)||this.validateSessionProps(s,"sessionProperties"),!iI(o)){this.validateSessionProps(o,"scopedProperties");let e=Object.keys(i||{}).concat(Object.keys(n||{}));if(!Object.keys(o).every(t=>e.includes(t)))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}}),aj(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let i=null;if(e&&iS(e)){let n;let s=iP(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let l=(s=v(e,i),o=`${t} ${r}`,a=null,iC(s)&&s.length?s.forEach(e=>{a||ik(e)||(a=i_("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):ik(e)||(a=i_("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);l&&(n=l)}),n);o&&(i=o)}else i=iE("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)}),aj(this,"isValidApprove",async e=>{if(!iT(e))throw Error(iE("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let o=this.client.proposal.get(t),a=iR(r,"approve()");if(a)throw Error(a.message);let l=iL(o.requiredNamespaces,r,"approve()");if(l)throw Error(l.message);if(!ix(i,!0)){let{message:e}=iE("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}if(iI(n)||this.validateSessionProps(n,"sessionProperties"),!iI(s)){this.validateSessionProps(s,"scopedProperties");let e=new Set(Object.keys(r));if(!Object.keys(s).every(t=>e.has(t)))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}}),aj(this,"isValidReject",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!iA(r.code,!1)||!r.message||!ix(r.message,!1)){let{message:e}=iE("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),aj(this,"isValidSessionSettleRequest",e=>{let t;if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!iN(r)){let{message:e}=iE("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,ix(i?.publicKey,!1)||(t=iE("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=iR(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(z(s)){let{message:e}=iE("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),aj(this,"isValidUpdate",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=iR(r,"update()");if(n)throw Error(n.message);let s=iL(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),aj(this,"isValidExtend",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),aj(this,"isValidRequest",async e=>{var t;if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!iM(o,n)){let{message:e}=iE("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(iI(i)||!ix(i.method,!1)){let{message:e}=iE("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(ix(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{ip(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=iE("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!iA(s,!1)||!(s<=aC.max)||!(s>=aC.min))){let{message:e}=iE("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${aC.min} and ${aC.max}`);throw Error(e)}}),aj(this,"isValidRespond",async e=>{var t;if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(iI(i)||iI(i.result)&&iI(i.error)||!iA(i.id,!1)||!ix(i.jsonrpc,!1)){let{message:e}=iE("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}}),aj(this,"isValidPing",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),aj(this,"isValidEmit",async e=>{var t;if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!iM(s,n)){let{message:e}=iE("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(iI(i)||!ix(i.name,!1)){let{message:e}=iE("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(ix(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{ip(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=iE("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}}),aj(this,"isValidDisconnect",async e=>{if(!iT(e)){let{message:t}=iE("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),aj(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!ix(r,!1))throw Error("uri is required parameter");if(!ix(i,!1))throw Error("domain is required parameter");if(!ix(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>m(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=m(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),aj(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||nV,validation:"UNKNOWN",origin:n.url||""}};try{if(s===n$.link_mode){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o}),aj(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((r,i)=>{if(null==r){let{message:n}=iE("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[i]}`);throw Error(n)}})}),aj(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),aj(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),aj(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=iE("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),aj(this,"isLinkModeEnabled",(e,t)=>{var i,n,s,o,a,l,c,u,h;return!!e&&t===n$.link_mode&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(l=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:l.universal)!==""&&(null==(c=e?.redirect)?void 0:c.universal)!==void 0&&(null==(u=e?.redirect)?void 0:u.universal)!==""&&(null==(h=e?.redirect)?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==r.g?void 0:r.g.Linking)}),aj(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),aj(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=Z(e,"topic")||"",r=decodeURIComponent(Z(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:n$.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})}),aj(this,"registerLinkModeListeners",async()=>{var e;if(Y()||P()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==r.g?void 0:r.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),aj(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:r}=t;return Object.keys(aI).includes(r.method)}),aj(this,"getTVFParams",(e,t,r)=>{var i,n;try{let s=t.request.method,o=this.extractTxHashesFromResult(s,r);return aB(aD({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),aj(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1}),aj(this,"extractTxHashesFromResult",(e,t)=>{try{let r=aI[e];if("string"==typeof t)return[t];let i=t[r.key];if(iC(i))return"solana_signAllTransactions"===e?i.map(e=>(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=r[0];if(0===i)throw Error("No signatures found");if(r.length<1+64*i)throw Error("Transaction data too short for claimed signature count");if(r.length<100)throw Error("Transaction too short");let n=g.from(e,"base64").slice(1,65);return u.encode(n)})(e)):i;if("string"==typeof i)return[i]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}async processPendingMessageEvents(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[e,r]of Object.entries(t))for(let t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){let{message:e}=iE("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(nD.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(ak)?this.client.auth.authKeys.get(ak):{responseTopic:void 0,publicKey:void 0};try{let e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===n$.link_mode?rZ:rG});(0,nS.isJsonRpcRequest)(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:i,transportType:n,encryptedId:rQ(r)})):(0,nS.isJsonRpcResponse)(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(nK.expired,async e=>{let{topic:t,id:r}=H(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,iE("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,iE("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(nz.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(nz.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ix(e,!1)){let{message:t}=iE("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=iE("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(z(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=iE("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!ix(e,!1)){let{message:t}=iE("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=iE("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(z(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=iE("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=iE("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ix(e,!1)){let{message:t}=iE("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=iE("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=iE("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=iE("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(z(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=iE("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class aU extends oF{constructor(e,t){super(e,t,"proposal",ay),this.core=e,this.logger=t}}class aq extends oF{constructor(e,t){super(e,t,"session",ay),this.core=e,this.logger=t}}class aH extends oF{constructor(e,t){super(e,t,"request",ay,e=>e.id),this.core=e,this.logger=t}}class aF extends oF{constructor(e,t){super(e,t,"authKeys",aA,()=>ak),this.core=e,this.logger=t}}class az extends oF{constructor(e,t){super(e,t,"pairingTopics",aA),this.core=e,this.logger=t}}class aW extends oF{constructor(e,t){super(e,t,"requests",aA,e=>e.id),this.core=e,this.logger=t}}var aK=Object.defineProperty,aV=(e,t,r)=>t in e?aK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aG=(e,t,r)=>aV(e,"symbol"!=typeof t?t+"":t,r);class aZ{constructor(e,t){this.core=e,this.logger=t,aG(this,"authKeys"),aG(this,"pairingTopics"),aG(this,"requests"),this.authKeys=new aF(this.core,this.logger),this.pairingTopics=new az(this.core,this.logger),this.requests=new aW(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var aJ=Object.defineProperty,aY=(e,t,r)=>t in e?aJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aX=(e,t,r)=>aY(e,"symbol"!=typeof t?t+"":t,r);class aQ extends nE{constructor(e){super(e),aX(this,"protocol","wc"),aX(this,"version",2),aX(this,"name",av.name),aX(this,"metadata"),aX(this,"core"),aX(this,"logger"),aX(this,"events",new i.EventEmitter),aX(this,"engine"),aX(this,"session"),aX(this,"proposal"),aX(this,"pendingRequest"),aX(this,"auth"),aX(this,"signConfig"),aX(this,"on",(e,t)=>this.events.on(e,t)),aX(this,"once",(e,t)=>this.events.once(e,t)),aX(this,"off",(e,t)=>this.events.off(e,t)),aX(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),aX(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),aX(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),aX(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),aX(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||av.name,this.metadata=function(e){var t,r;let i=M();try{return null!=e&&e.url&&i.url&&new URL(e.url).host!==new URL(i.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${i.url}. This is probably unintended and can lead to issues.`),e.url=i.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(e=>""!==e)),A(x(x({},i),e),{url:e?.url||i.url,name:e?.name||i.name,description:e?.description||i.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:i.icons})}catch(t){return console.warn("Error populating app metadata",t),e||i}}(e?.metadata),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,i7.gw)((0,i7.jI)({level:e?.logger||av.logger}));this.core=e?.core||new ag(e),this.logger=(0,i7.Ep)(t,this.name),this.session=new aq(this.core,this.logger),this.proposal=new aU(this.core,this.logger),this.pendingRequest=new aH(this.core,this.logger),this.engine=new a$(this),this.auth=new aZ(this.core,this.logger)}static async init(e){let t=new aQ(e);return await t.initialize(),t}get context(){return(0,i7.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,o.toMiliseconds)(o.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var a0=r(54967),a1=r(67133).Buffer;let a2="error",a3="wc@2:universal_provider:",a5="https://rpc.walletconnect.org/v1/",a4="generic",a6=`${a5}bundler`,a8={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function a9(){}function a7(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function le(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lt(e){return"object"==typeof e&&null!==e}function lr(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function li(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let ln="[object String]",ls="[object Number]",lo="[object Boolean]",la="[object Arguments]";function ll(e,t,r,i=new Map,n){let s=n?.(e,t,r,i);if(null!=s)return s;if(a7(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){let t=Array(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=ll(e[s],s,r,i,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,o]of(i.set(e,t),e))t.set(s,ll(o,s,r,i,n));return t}if(e instanceof Set){let t=new Set;for(let s of(i.set(e,t),e))t.add(ll(s,void 0,r,i,n));return t}if("u">typeof a1&&a1.isBuffer(e))return e.subarray();if(le(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=ll(e[s],s,r,i,n);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),lc(t,e,r,i,n),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return i.set(e,t),lc(t,e,r,i,n),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return i.set(e,t),lc(t,e,r,i,n),t}if(e instanceof Error){let t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,lc(t,e,r,i,n),t}if("object"==typeof e&&function(e){switch(li(e)){case la:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case lo:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case ls:case"[object Object]":case"[object RegExp]":case"[object Set]":case ln:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),lc(t,e,r,i,n),t}return e}function lc(e,t,r=e,i,n){let s=[...Object.keys(t),...lr(t)];for(let o=0;o<s.length;o++){let a=s[o],l=Object.getOwnPropertyDescriptor(e,a);(null==l||l.writable)&&(e[a]=ll(t[a],a,r,i,n))}}function lu(e){return ll(e,void 0,e,new Map,(t,r,i,n)=>{let s=void 0;if(null!=s)return s;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case ls:case ln:case lo:{let t=new e.constructor(e?.valueOf());return lc(t,e),t}case la:{let t={};return lc(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}function lh(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===li(e)}var ld=Object.defineProperty,lp=Object.defineProperties,lf=Object.getOwnPropertyDescriptors,lg=Object.getOwnPropertySymbols,lm=Object.prototype.hasOwnProperty,ly=Object.prototype.propertyIsEnumerable,lv=(e,t,r)=>t in e?ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lb=(e,t)=>{for(var r in t||(t={}))lm.call(t,r)&&lv(e,r,t[r]);if(lg)for(var r of lg(t))ly.call(t,r)&&lv(e,r,t[r]);return e},lw=(e,t)=>lp(e,lf(t));function lE(e,t,r){var i;let n=m(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`${a5}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function l_(e){return e.includes(":")?e.split(":")[1]:e}function lC(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function lS(e={},t={}){return function(e,...t){return function(e,...t){let r=t.slice(0,-1),i=t[t.length-1],n=e;for(let e=0;e<r.length;e++)n=function e(t,r,i,n){if(a7(t)&&(t=Object(t)),null==r||"object"!=typeof r)return t;if(n.has(r))return function(e){if(a7(e))return e;if(Array.isArray(e)||le(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){let t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){let t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new r([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(n.get(r));if(n.set(r,t),Array.isArray(r)){r=r.slice();for(let e=0;e<r.length;e++)r[e]=r[e]??void 0}let s=[...Object.keys(r),...lr(r)];for(let o=0;o<s.length;o++){let a=s[o],l=r[a],c=t[a];if(lh(l)&&(l={...l}),lh(c)&&(c={...c}),"u">typeof a1&&a1.isBuffer(l)&&(l=lu(l)),Array.isArray(l)){if("object"==typeof c&&null!=c){let e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){let i=t[r];e[i]=c[i]}c=e}else c=[]}let u=i(c,l,a,t,r,n);null!=u?t[a]=u:Array.isArray(l)||lt(c)&&lt(l)?t[a]=e(c,l,i,n):null==c&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return!!(null!=t&&Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(l)?t[a]=e({},l,i,n):null==c&&le(l)?t[a]=lu(l):(void 0===c||void 0!==l)&&(t[a]=l)}return t}(n,r[e],i,new Map);return n}(e,...t,a9)}(lI(e),lI(t))}function lI(e){var t,r,i,n,s;let o={};if(!iS(e))return o;for(let[a,l]of Object.entries(e)){let e=ig(a)?[a]:l.chains,c=l.methods||[],u=l.events||[],h=l.rpcMap||{},d=im(a);o[d]=lw(lb(lb({},o[d]),l),{chains:K(e,null==(t=o[d])?void 0:t.chains),methods:K(c,null==(r=o[d])?void 0:r.methods),events:K(u,null==(i=o[d])?void 0:i.events)}),(iS(h)||iS((null==(n=o[d])?void 0:n.rpcMap)||{}))&&(o[d].rpcMap=lb(lb({},h),null==(s=o[d])?void 0:s.rpcMap))}return o}function lx(e){return e.includes(":")?e.split(":")[2]:e}function lA(e){let t={};for(let[r,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],s=i.accounts||[],o=ig(r)?[r]:i.chains?i.chains:lC(i.accounts);t[r]={chains:o,methods:e,events:n,accounts:s}}return t}function lk(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let lO={},lP=e=>lO[e],lR=(e,t)=>{lO[e]=t};var lN=Object.defineProperty,lT=(e,t,r)=>t in e?lN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lM=(e,t,r)=>lT(e,"symbol"!=typeof t?t+"":t,r);class lL{constructor(e){lM(this,"name","polkadot"),lM(this,"client"),lM(this,"httpProviders"),lM(this,"events"),lM(this,"namespace"),lM(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=l_(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var lD=Object.defineProperty,lB=Object.defineProperties,lj=Object.getOwnPropertyDescriptors,l$=Object.getOwnPropertySymbols,lU=Object.prototype.hasOwnProperty,lq=Object.prototype.propertyIsEnumerable,lH=(e,t,r)=>t in e?lD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lF=(e,t)=>{for(var r in t||(t={}))lU.call(t,r)&&lH(e,r,t[r]);if(l$)for(var r of l$(t))lq.call(t,r)&&lH(e,r,t[r]);return e},lz=(e,t)=>lB(e,lj(t)),lW=(e,t,r)=>lH(e,"symbol"!=typeof t?t+"":t,r);class lK{constructor(e){lW(this,"name","eip155"),lW(this,"client"),lW(this,"chainId"),lW(this,"namespace"),lW(this,"httpProviders"),lW(this,"events"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||lE(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.k(r,lP("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=parseInt(l_(t));e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,n,s;let o=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0],a=(null==(n=null==(i=e.request)?void 0:i.params)?void 0:n[1])||[],l=`${o}${a.join(",")}`;if(!o)throw Error("Missing address parameter in `wallet_getCapabilities` request");let c=this.client.session.get(e.topic),u=(null==(s=c?.sessionProperties)?void 0:s.capabilities)||{};if(null!=u&&u[l])return u?.[l];let h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:lz(lF({},c.sessionProperties||{}),{capabilities:lz(lF({},u||{}),{[l]:h})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return h}async getCallStatus(e){var t,r;let i=this.client.session.get(e.topic),n=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(n){let t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let s=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;let i=new URL(e),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,nS.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!n.ok)throw Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${a6}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var lV=Object.defineProperty,lG=(e,t,r)=>t in e?lV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lZ=(e,t,r)=>lG(e,"symbol"!=typeof t?t+"":t,r);class lJ{constructor(e){lZ(this,"name","solana"),lZ(this,"client"),lZ(this,"httpProviders"),lZ(this,"events"),lZ(this,"namespace"),lZ(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=l_(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var lY=Object.defineProperty,lX=(e,t,r)=>t in e?lY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lQ=(e,t,r)=>lX(e,"symbol"!=typeof t?t+"":t,r);class l0{constructor(e){lQ(this,"name","cosmos"),lQ(this,"client"),lQ(this,"httpProviders"),lQ(this,"events"),lQ(this,"namespace"),lQ(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=l_(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var l1=Object.defineProperty,l2=(e,t,r)=>t in e?l1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l3=(e,t,r)=>l2(e,"symbol"!=typeof t?t+"":t,r);class l5{constructor(e){l3(this,"name","algorand"),l3(this,"client"),l3(this,"httpProviders"),l3(this,"events"),l3(this,"namespace"),l3(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||lE(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var l4=Object.defineProperty,l6=(e,t,r)=>t in e?l4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l8=(e,t,r)=>l6(e,"symbol"!=typeof t?t+"":t,r);class l9{constructor(e){l8(this,"name","cip34"),l8(this,"client"),l8(this,"httpProviders"),l8(this,"events"),l8(this,"namespace"),l8(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t),i=l_(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var l7=Object.defineProperty,ce=(e,t,r)=>t in e?l7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ct=(e,t,r)=>ce(e,"symbol"!=typeof t?t+"":t,r);class cr{constructor(e){ct(this,"name","elrond"),ct(this,"client"),ct(this,"httpProviders"),ct(this,"events"),ct(this,"namespace"),ct(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=l_(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var ci=Object.defineProperty,cn=(e,t,r)=>t in e?ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cs=(e,t,r)=>cn(e,"symbol"!=typeof t?t+"":t,r);class co{constructor(e){cs(this,"name","multiversx"),cs(this,"client"),cs(this,"httpProviders"),cs(this,"events"),cs(this,"namespace"),cs(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=l_(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var ca=Object.defineProperty,cl=(e,t,r)=>t in e?ca(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cc=(e,t,r)=>cl(e,"symbol"!=typeof t?t+"":t,r);class cu{constructor(e){cc(this,"name","near"),cc(this,"client"),cc(this,"httpProviders"),cc(this,"events"),cc(this,"namespace"),cc(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||lE(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace);return typeof r>"u"?void 0:new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var ch=Object.defineProperty,cd=(e,t,r)=>t in e?ch(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cp=(e,t,r)=>cd(e,"symbol"!=typeof t?t+"":t,r);class cf{constructor(e){cp(this,"name","tezos"),cp(this,"client"),cp(this,"httpProviders"),cp(this,"events"),cp(this,"namespace"),cp(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||lE(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace);return typeof r>"u"?void 0:new nC.r(new a0.Z(r))}}var cg=Object.defineProperty,cm=(e,t,r)=>t in e?cg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cy=(e,t,r)=>cm(e,"symbol"!=typeof t?t+"":t,r);class cv{constructor(e){cy(this,"name",a4),cy(this,"client"),cy(this,"httpProviders"),cy(this,"events"),cy(this,"namespace"),cy(this,"chainId"),this.namespace=e.namespace,this.events=lP("events"),this.client=lP("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(a8.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=m(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),r}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lE(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nC.r(new a0.Z(r,lP("disableProviderPing")))}}var cb=Object.defineProperty,cw=Object.defineProperties,cE=Object.getOwnPropertyDescriptors,c_=Object.getOwnPropertySymbols,cC=Object.prototype.hasOwnProperty,cS=Object.prototype.propertyIsEnumerable,cI=(e,t,r)=>t in e?cb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cx=(e,t)=>{for(var r in t||(t={}))cC.call(t,r)&&cI(e,r,t[r]);if(c_)for(var r of c_(t))cS.call(t,r)&&cI(e,r,t[r]);return e},cA=(e,t)=>cw(e,cE(t)),ck=(e,t,r)=>cI(e,"symbol"!=typeof t?t+"":t,r);class cO{constructor(e){ck(this,"client"),ck(this,"namespaces"),ck(this,"optionalNamespaces"),ck(this,"sessionProperties"),ck(this,"scopedProperties"),ck(this,"events",new(n())),ck(this,"rpcProviders",{}),ck(this,"session"),ck(this,"providerOpts"),ck(this,"logger"),ck(this,"uri"),ck(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,i7.gw)((0,i7.jI)({level:e?.logger||a2})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new cO(e);return await t.initialize(),t}async request(e,t,r){let[i,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:cx({},e),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){let n=new Date().getTime();this.request(e,r,i).then(e=>t(null,(0,nS.formatJsonRpcResult)(n,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:i_("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));let n=await i();if(this.session=n.session,this.session){let e=lA(this.session.namespaces);this.namespaces=lS(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await r();this.session=i;let n=lA(i.namespaces);return this.namespaces=lS(this.namespaces,n),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,i]=this.validateChain(e),n=this.getProvider(r);n.name===a4?n.setDefaultChain(`${r}:${i}`,t):n.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(iC(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await aQ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||a2,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>im(e)))];lR("client",this.client),lR("events",this.events),lR("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let i=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;i.push(...r)}),i}(e,this.session),r=lC(t),i=cA(cx({},lS(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new lK({namespace:i});break;case"algorand":this.rpcProviders[e]=new l5({namespace:i});break;case"solana":this.rpcProviders[e]=new lJ({namespace:i});break;case"cosmos":this.rpcProviders[e]=new l0({namespace:i});break;case"polkadot":this.rpcProviders[e]=new lL({namespace:i});break;case"cip34":this.rpcProviders[e]=new l9({namespace:i});break;case"elrond":this.rpcProviders[e]=new cr({namespace:i});break;case"multiversx":this.rpcProviders[e]=new co({namespace:i});break;case"near":this.rpcProviders[e]=new cu({namespace:i});break;case"tezos":this.rpcProviders[e]=new cf({namespace:i});break;default:this.rpcProviders[a4]?this.rpcProviders[a4].updateNamespace(i):this.rpcProviders[a4]=new cv({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:r,topic:i}=e;if(i!==(null==(t=this.session)?void 0:t.topic))return;let{event:n}=r;if("accountsChanged"===n.name){let e=n.data;e&&iC(e)&&this.events.emit("accountsChanged",e.map(lx))}else if("chainChanged"===n.name){let e=r.chainId,t=r.event.data,i=im(e),n=lk(e)!==lk(t)?`${i}:${lk(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==(null==(r=this.session)?void 0:r.topic))return;let{namespaces:n}=t,s=null==(i=this.client)?void 0:i.session.get(e);this.session=cA(cx({},s),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",cA(cx({},i_("USER_DISCONNECTED")),{data:e.topic})))}),this.on(a8.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[a4]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:n}=e;this.optionalNamespaces=lS(t,r),this.sessionProperties=i,this.scopedProperties=n}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>im(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let i=im(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);let n=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:n,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var i,n;try{if(t===r)return;let s=null==(n=null==(i=this.session)?void 0:i.namespaces[e])?void 0:n.accounts;if(!s)return;let o=s.filter(e=>e.includes(`${r}:`)).map(lx);if(!iC(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;let r=this.namespaces[e]?e:`${e}:${t}`;this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]={chains:[],methods:[],events:[],defaultChain:t}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;let i=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${a3}/${e}${i}`,t)}async getFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${a3}/${e}${r}`)}async deleteFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${a3}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(a3)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}let cP=["eth_sendTransaction","personal_sign"],cR=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],cN=["chainChanged","accountsChanged"],cT=["chainChanged","accountsChanged","message","disconnect","connect"],cM=async()=>{let{createAppKit:e}=await Promise.all([r.e(67),r.e(736)]).then(r.bind(r,99542));return e};var cL=Object.defineProperty,cD=Object.defineProperties,cB=Object.getOwnPropertyDescriptors,cj=Object.getOwnPropertySymbols,c$=Object.prototype.hasOwnProperty,cU=Object.prototype.propertyIsEnumerable,cq=(e,t,r)=>t in e?cL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cH=(e,t)=>{for(var r in t||(t={}))c$.call(t,r)&&cq(e,r,t[r]);if(cj)for(var r of cj(t))cU.call(t,r)&&cq(e,r,t[r]);return e},cF=(e,t)=>cD(e,cB(t)),cz=(e,t,r)=>cq(e,"symbol"!=typeof t?t+"":t,r);function cW(e){return Number(e[0].split(":")[1])}function cK(e){return`0x${e.toString(16)}`}class cV{constructor(){cz(this,"events",new i.EventEmitter),cz(this,"namespace","eip155"),cz(this,"accounts",[]),cz(this,"signer"),cz(this,"chainId",1),cz(this,"modal"),cz(this,"rpc"),cz(this,"STORAGE_KEY","wc@2:ethereum_provider:"),cz(this,"on",(e,t)=>(this.events.on(e,t),this)),cz(this,"once",(e,t)=>(this.events.once(e,t),this)),cz(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),cz(this,"off",(e,t)=>(this.events.off(e,t),this)),cz(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){let t=new cV;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,r){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),r)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var t;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:r,optional:i}=function(e){let{chains:t,optionalChains:r,methods:i,optionalMethods:n,events:s,optionalEvents:o,rpcMap:a}=e;if(!iC(t))throw Error("Invalid chains");let l={chains:t,methods:i||cP,events:s||cN,rpcMap:cH({},t.length?{[cW(t)]:a[cW(t)]}:{})},c=s?.filter(e=>!cN.includes(e)),u=i?.filter(e=>!cP.includes(e));if(!r&&!o&&!n&&!(null!=c&&c.length)&&!(null!=u&&u.length))return{required:t.length?l:void 0};let h=c?.length&&u?.length||!r,d={chains:[...new Set(h?l.chains.concat(r||[]):r)],methods:[...new Set(l.methods.concat(null!=n&&n.length?n:cR))],events:[...new Set(l.events.concat(null!=o&&o.length?o:cT))],rpcMap:a};return{required:t.length?l:void 0,optional:r.length?d:void 0}}(this.rpc);try{let t=await new Promise(async(t,n)=>{var s,o;this.rpc.showQrModal&&(null==(s=this.modal)||s.open(),null==(o=this.modal)||o.subscribeState(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),n(Error("Connection request reset. Please try again.")))}));let a=null!=e&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(cF(cH({namespaces:cH({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic,scopedProperties:a})).then(e=>{t(e)}).catch(e=>{var t;null==(t=this.modal)||t.showErrorMessage("Unable to connect"),n(Error(e.message))})});if(!t)return;let n=y(t.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:n),this.setAccounts(n),this.events.emit("connect",{chainId:cK(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{null==(t=this.modal)||t.close()}}async authenticate(e,t){var r;if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{let r=await new Promise(async(r,i)=>{var n,s;this.rpc.showQrModal&&(null==(n=this.modal)||n.open(),null==(s=this.modal)||s.subscribeState(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),i(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(cF(cH({},e),{chains:this.rpc.chains}),t).then(e=>{r(e)}).catch(e=>{var t;null==(t=this.modal)||t.showErrorMessage("Unable to connect"),i(Error(e.message))})}),i=r.session;if(i){let e=y(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:cK(this.chainId)})}return r}catch(e){throw this.signer.logger.error(e),e}finally{null==(r=this.modal)||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",cK(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",cF(cH({},i_("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",cK(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;let i=null!=(t=e?.chains)?t:[],n=null!=(r=e?.optionalChains)?r:[],s=i.concat(n);if(!s.length)throw Error("No chains specified in either `chains` or `optionalChains`");let o=i.length?e?.methods||cP:[],a=i.length?e?.events||cN:[],l=e?.optionalMethods||[],c=e?.optionalEvents||[],u=e?.rpcMap||this.buildRpcMap(s,e.projectId),h=e?.qrModalOptions||void 0;return{chains:i?.map(e=>this.formatChainId(e)),optionalChains:n.map(e=>this.formatChainId(e)),methods:o,events:a,optionalMethods:l,optionalEvents:c,rpcMap:u,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let r={};return e.forEach(e=>{r[e]=this.getRpcUrl(e,t)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?cW(this.rpc.chains):cW(this.rpc.optionalChains),this.signer=await cO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let t=await cM(),{convertWCMToAppKitOptions:r}=await Promise.resolve().then(function(){return c6}),i=r(cF(cH({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!i.networks.length)throw Error("No networks found for WalletConnect\xb7");e=t(cF(cH({},i),{universalProvider:this.signer,manualWCControl:!0}))}catch(e){throw console.warn(e),Error("To use QR modal, please install @reown/appkit package")}if(e)try{this.modal=e}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:r,rpcMap:i}=e;t&&iC(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)})),r&&iC(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(e=>this.formatChainId(e)),r.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{let e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}}let cG=cV;var cZ=Object.defineProperty,cJ=Object.defineProperties,cY=Object.getOwnPropertyDescriptors,cX=Object.getOwnPropertySymbols,cQ=Object.prototype.hasOwnProperty,c0=Object.prototype.propertyIsEnumerable,c1=(e,t,r)=>t in e?cZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c2=(e,t)=>{for(var r in t||(t={}))cQ.call(t,r)&&c1(e,r,t[r]);if(cX)for(var r of cX(t))c0.call(t,r)&&c1(e,r,t[r]);return e},c3=(e,t)=>cJ(e,cY(t));let c5=e=>{let[t,r]=e.split(":");return c4({id:r,caipNetworkId:e,chainNamespace:t,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function c4(e){return c2({formatters:void 0,fees:void 0,serializers:void 0},e)}var c6=Object.freeze({__proto__:null,convertWCMToAppKitOptions:function(e){var t,r,i,n,s,o,a;let l=null==(t=e.chains)?void 0:t.map(c5).filter(Boolean);if(0===l.length)throw Error("At least one chain must be specified");let c=l.find(t=>{var r;return t.id===(null==(r=e.defaultChain)?void 0:r.id)}),u={projectId:e.projectId,networks:l,themeMode:e.themeMode,themeVariables:function(e){if(e)return{"--w3m-font-family":e["--wcm-font-family"],"--w3m-accent":e["--wcm-accent-color"],"--w3m-color-mix":e["--wcm-background-color"],"--w3m-z-index":e["--wcm-z-index"]?Number(e["--wcm-z-index"]):void 0,"--w3m-qr-color":e["--wcm-accent-color"],"--w3m-font-size-master":e["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":e["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}(e.themeVariables),chainImages:e.chainImages,connectorImages:e.walletImages,defaultNetwork:c,metadata:c3(c2({},e.metadata),{name:(null==(r=e.metadata)?void 0:r.name)||"WalletConnect",description:(null==(i=e.metadata)?void 0:i.description)||"Connect to WalletConnect-compatible wallets",url:(null==(n=e.metadata)?void 0:n.url)||"https://walletconnect.org",icons:(null==(s=e.metadata)?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:"NONE"===e.explorerRecommendedWalletIds?[]:Array.isArray(e.explorerRecommendedWalletIds)?e.explorerRecommendedWalletIds:[],excludeWalletIds:"ALL"===e.explorerExcludedWalletIds?[]:Array.isArray(e.explorerExcludedWalletIds)?e.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if(null!=(o=e.mobileWallets)&&o.length||null!=(a=e.desktopWallets)&&a.length){let t=[...(e.mobileWallets||[]).map(e=>({id:e.id,name:e.name,links:e.links})),...(e.desktopWallets||[]).map(e=>({id:e.id,name:e.name,links:{native:e.links.native,universal:e.links.universal}}))],r=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],i=t.filter(e=>!r.includes(e.id));i.length&&(u.customWallets=i)}return u},defineChain:c4})},95097:function(e,t,r){"use strict";r.d(t,{q:function(){return i}});class i{}},50545:function(e,t,r){"use strict";r.d(t,{C$:function(){return c},Lx:function(){return l}});var i=r(512),n=r(58619),s=r(95097);class o extends s.q{constructor(e){super()}}let a=n.FIVE_SECONDS,l={pulse:"heartbeat_pulse"};class c extends o{constructor(e){super(e),this.events=new i.EventEmitter,this.interval=a,this.interval=e?.interval||a}static async init(e){let t=new c(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,n.toMiliseconds)(this.interval))}pulse(){this.events.emit(l.pulse)}}},54967:function(e,t,r){"use strict";r.d(t,{Z:function(){return v},k:function(){return v}});var i=r(512),n=r(69719),s=r.n(n),o=r(43283),a=r(53620),l=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&f(e,r,t[r]);if(h)for(var r of h(t))p.call(t,r)&&f(e,r,t[r]);return e},m=(e,t)=>c(e,u(t));let y={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class v{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new i.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,o.u)(e),r=await (await s()(this.url,m(g({},y),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,a.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,o.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await s()(e,m(g({},y),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,o.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=r.message||r.toString(),n=(0,a.formatJsonRpcError)(e,i);this.events.emit("payload",n)}parseError(e,t=this.url){return(0,a.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}},69719:function(e,t,r){var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();(function(e){var t=void 0!==n&&n||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function d(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(i.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(i.blob)return this.blob().then(p);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,i,n,s=h(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),n=(i=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?i[1]:"utf-8",t.readAsText(e,n),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=l(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},i.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,r){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(r=r||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new u(r.headers)),this.method=(n=(i=r.method||this.method||"GET").toUpperCase(),m.indexOf(n)>-1?n:i),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var w=[301,302,303,307,308];b.redirect=function(e,t){if(-1===w.indexOf(t))throw RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(r,n){return new Promise(function(s,o){var c=new y(r,n);if(c.signal&&c.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function d(){h.abort()}if(h.onload=function(){var e,t,r={statusText:h.statusText,headers:(e=h.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();try{t.append(i,n)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(h.status<200||h.status>599)?r.status=200:r.status=h.status,r.url="responseURL"in h?h.responseURL:r.headers.get("X-Request-URL");var i="response"in h?h.response:h.responseText;setTimeout(function(){s(new b(i,r))},0)},h.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},h.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},h.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},h.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?h.withCredentials=!0:"omit"===c.credentials&&(h.withCredentials=!1),"responseType"in h&&(i.blob?h.responseType="blob":i.arrayBuffer&&(h.responseType="arraybuffer")),n&&"object"==typeof n.headers&&!(n.headers instanceof u||t.Headers&&n.headers instanceof t.Headers)){var p=[];Object.getOwnPropertyNames(n.headers).forEach(function(e){p.push(a(e)),h.setRequestHeader(e,l(n.headers[e]))}),c.headers.forEach(function(e,t){-1===p.indexOf(t)&&h.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){h.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",d),h.onreadystatechange=function(){4===h.readyState&&c.signal.removeEventListener("abort",d)}),h.send(void 0===c._bodyInit?null:c._bodyInit)})}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=u,t.Request=y,t.Response=b),e.Headers=u,e.Request=y,e.Response=b,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})})({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=i.fetch?i:n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},45280:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var i=r(512),n=r(53620);class s extends n.IJsonRpcProvider{constructor(e){super(e),this.events=new i.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,n.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,n.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{(0,n.isJsonRpcError)(e)?i(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){i(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,n.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}},34103:function(e,t,r){"use strict";r.d(t,{CA:function(){return n},JV:function(){return a},O4:function(){return i},dQ:function(){return s},xK:function(){return o}});let i="INTERNAL_ERROR",n="SERVER_ERROR",s=[-32700,-32600,-32601,-32602,-32603],o={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[i]:{code:-32603,message:"Internal error"},[n]:{code:-32e3,message:"Server error"}},a=n},26637:function(e,t,r){"use strict";var i=r(36014);r.o(i,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return i.IJsonRpcProvider}}),r.o(i,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return i.formatJsonRpcError}}),r.o(i,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return i.formatJsonRpcRequest}}),r.o(i,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return i.formatJsonRpcResult}}),r.o(i,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return i.getBigIntRpcId}}),r.o(i,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return i.isHttpUrl}}),r.o(i,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return i.isJsonRpcError}}),r.o(i,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return i.isJsonRpcRequest}}),r.o(i,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return i.isJsonRpcResponse}}),r.o(i,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return i.isJsonRpcResult}}),r.o(i,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return i.isLocalhostUrl}}),r.o(i,"isReactNative")&&r.d(t,{isReactNative:function(){return i.isReactNative}}),r.o(i,"isWsUrl")&&r.d(t,{isWsUrl:function(){return i.isWsUrl}}),r.o(i,"payloadId")&&r.d(t,{payloadId:function(){return i.payloadId}})},77507:function(e,t,r){"use strict";r.d(t,{CX:function(){return a},L2:function(){return o},by:function(){return s},i5:function(){return n}});var i=r(34103);function n(e){return i.dQ.includes(e)}function s(e){return Object.keys(i.xK).includes(e)?i.xK[e]:i.xK[i.JV]}function o(e){return Object.values(i.xK).find(t=>t.code===e)||i.xK[i.JV]}function a(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${r} RPC url at ${t}`):e}},17957:function(e,t,r){"use strict";r.d(t,{CS:function(){return o},RI:function(){return c},o0:function(){return s},sT:function(){return a},tm:function(){return l}});var i=r(77507),n=r(34103);function s(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function o(e=6){return BigInt(s(e))}function a(e,t,r){return{id:r||s(),jsonrpc:"2.0",method:e,params:t}}function l(e,t){return{id:e,jsonrpc:"2.0",result:t}}function c(e,t,r){var s;return{id:e,jsonrpc:"2.0",error:void 0===(s=t)?(0,i.by)(n.O4):("string"==typeof s&&(s=Object.assign(Object.assign({},(0,i.by)(n.CA)),{message:s})),void 0!==r&&(s.data=r),(0,i.i5)(s.code)&&(s=(0,i.L2)(s.code)),s)}}},53620:function(e,t,r){"use strict";r.d(t,{IJsonRpcProvider:function(){return o.x0},formatJsonRpcError:function(){return s.RI},formatJsonRpcRequest:function(){return s.sT},formatJsonRpcResult:function(){return s.tm},getBigIntRpcId:function(){return s.CS},isHttpUrl:function(){return a.jK},isJsonRpcError:function(){return l.jg},isJsonRpcRequest:function(){return l.DW},isJsonRpcResponse:function(){return l.u},isJsonRpcResult:function(){return l.k4},isLocalhostUrl:function(){return a.JF},isWsUrl:function(){return a.UZ},parseConnectionError:function(){return i.CX},payloadId:function(){return s.o0}}),r(34103);var i=r(77507),n=r(26637);r.o(n,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return n.IJsonRpcProvider}}),r.o(n,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return n.formatJsonRpcError}}),r.o(n,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return n.formatJsonRpcRequest}}),r.o(n,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return n.formatJsonRpcResult}}),r.o(n,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return n.getBigIntRpcId}}),r.o(n,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return n.isHttpUrl}}),r.o(n,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return n.isJsonRpcError}}),r.o(n,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return n.isJsonRpcRequest}}),r.o(n,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return n.isJsonRpcResponse}}),r.o(n,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return n.isJsonRpcResult}}),r.o(n,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return n.isLocalhostUrl}}),r.o(n,"isReactNative")&&r.d(t,{isReactNative:function(){return n.isReactNative}}),r.o(n,"isWsUrl")&&r.d(t,{isWsUrl:function(){return n.isWsUrl}}),r.o(n,"payloadId")&&r.d(t,{payloadId:function(){return n.payloadId}});var s=r(17957),o=r(32801),a=r(59490),l=r(7739)},32801:function(e,t,r){"use strict";r.d(t,{x0:function(){return s}});class i{}class n extends i{constructor(){super()}}class s extends n{constructor(e){super()}}},59490:function(e,t,r){"use strict";function i(e,t){let r=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function n(e){return i(e,"^https?:")}function s(e){return i(e,"^wss?:")}function o(e){return RegExp("wss?://localhost(:d{2,5})?").test(e)}r.d(t,{JF:function(){return o},UZ:function(){return s},jK:function(){return n}})},7739:function(e,t,r){"use strict";function i(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function n(e){return i(e)&&"method"in e}function s(e){return i(e)&&(o(e)||a(e))}function o(e){return"result"in e}function a(e){return"error"in e}r.d(t,{DW:function(){return n},jg:function(){return a},k4:function(){return o},u:function(){return s}})},12869:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var i=r(512),n=r(43283),s=r(53620);let o=()=>"u">typeof WebSocket||"u">typeof r.g&&"u">typeof r.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,a=e=>e.split("?")[0],l="u">typeof WebSocket?WebSocket:"u">typeof r.g&&"u">typeof r.g.WebSocket?r.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:r(44623);class c{constructor(e){if(this.url=e,this.events=new i.EventEmitter,this.registering=!1,!(0,s.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,n.u)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,s.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let i=(0,s.isReactNative)()?void 0:{rejectUnauthorized:!(0,s.isLocalhostUrl)(e)},n=new l(e,[],i);o()?n.onerror=e=>{r(this.emitError(e.error))}:n.on("error",e=>{r(this.emitError(e))}),n.onopen=()=>{this.onOpen(n),t(n)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,n.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=r.message||r.toString(),n=(0,s.formatJsonRpcError)(e,i);this.events.emit("payload",n)}parseError(e,t=this.url){return(0,s.parseConnectionError)(e,a(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${a(this.url)}`));return this.events.emit("register_error",t),t}}},44623:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},33234:function(e,t,r){"use strict";r.d(t,{Ep:function(){return S},Fd:function(){return C},Rt:function(){return I},gw:function(){return n.a},jI:function(){return _}});var i=r(90440),n=r.n(i),s=r(43283);let o={level:"info"},a="custom_context";class l{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class c{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new l(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}class u{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=i.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new c(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===i.levels.values.error?console.error(e):t===i.levels.values.warn?console.warn(e):t===i.levels.values.debug?console.debug(e):t===i.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,s.u)({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new c(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push((0,s.u)({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class h{constructor(e,t=1024e3){this.baseChunkLogger=new u(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class d{constructor(e,t=1024e3){this.baseChunkLogger=new u(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var p=Object.defineProperty,f=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&b(e,r,t[r]);if(m)for(var r of m(t))v.call(t,r)&&b(e,r,t[r]);return e},E=(e,t)=>f(e,g(t));function _(e){return E(w({},e),{level:e?.level||o.level})}function C(e,t=a){return typeof e.bindings>"u"?function(e,t=a){return e[t]||""}(e,t):e.bindings().context||""}function S(e,t,r=a){let i=function(e,t,r=a){let i=C(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=a){return e[r]=t,e}(e.child({context:i}),i,r)}function I(e){return"u">typeof e.loggerOverride&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,r;let i=new h(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(E(w({},e.opts),{level:"trace",browser:E(w({},null==(r=e.opts)?void 0:r.browser),{write:e=>i.write(e)})})),chunkLoggerController:i}}(e):function(e){var t;let r=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(E(w({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}},18431:function(e,t,r){"use strict";r.d(t,{iO:function(){return i}});let i={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}},99022:function(e,t,r){"use strict";r.d(t,{Au:function(){return tI},bG:function(){return tC},vf:function(){return tx},xp:function(){return tS}});var i=r(58619),n=r(43283);function s(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let a="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,l=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),s(e),e}class u{clone(){return this._cloneInto()}}function h(e=32){if(a&&"function"==typeof a.getRandomValues)return a.getRandomValues(new Uint8Array(e));if(a&&"function"==typeof a.randomBytes)return a.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class d extends u{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l(this.buffer)}update(e){o(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=c(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=l(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){o(this),function(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let c=l(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let h=u/4,d=this.get();if(h>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<h;e++)c.setUint32(4*e,d[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let p=BigInt(4294967296-1),f=BigInt(32);function g(e,t=!1){return t?{h:Number(e&p),l:Number(e>>f&p)}:{h:0|Number(e>>f&p),l:0|Number(e&p)}}let m={fromBig:g,split:function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=g(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]},toBig:(e,t)=>BigInt(e>>>0)<<f|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)},[y,v]=m.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),b=new Uint32Array(80),w=new Uint32Array(80);class E extends d{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,i,n,s,o,a,l,c,u,h,d,p,f,g]}set(e,t,r,i,n,s,o,a,l,c,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)b[r]=e.getUint32(t),w[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|b[e-15],r=0|w[e-15],i=m.rotrSH(t,r,1)^m.rotrSH(t,r,8)^m.shrSH(t,r,7),n=m.rotrSL(t,r,1)^m.rotrSL(t,r,8)^m.shrSL(t,r,7),s=0|b[e-2],o=0|w[e-2],a=m.rotrSH(s,o,19)^m.rotrBH(s,o,61)^m.shrSH(s,o,6),l=m.rotrSL(s,o,19)^m.rotrBL(s,o,61)^m.shrSL(s,o,6),c=m.add4L(n,l,w[e-7],w[e-16]),u=m.add4H(c,i,a,b[e-7],b[e-16]);b[e]=0|u,w[e]=0|c}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:E,Hl:_}=this;for(let e=0;e<80;e++){let t=m.rotrSH(u,h,14)^m.rotrSH(u,h,18)^m.rotrBH(u,h,41),C=m.rotrSL(u,h,14)^m.rotrSL(u,h,18)^m.rotrBL(u,h,41),S=u&d^~u&f,I=h&p^~h&g,x=m.add5L(_,C,I,v[e],w[e]),A=m.add5H(x,E,t,S,y[e],b[e]),k=0|x,O=m.rotrSH(r,i,28)^m.rotrBH(r,i,34)^m.rotrBH(r,i,39),P=m.rotrSL(r,i,28)^m.rotrBL(r,i,34)^m.rotrBL(r,i,39),R=r&n^r&o^n&o,N=i&s^i&a^s&a;E=0|f,_=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=m.add(0|l,0|c,0|A,0|k)),l=0|o,c=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let T=m.add3L(k,P,N);r=m.add3H(T,A,O,R),i=0|T}({h:r,l:i}=m.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=m.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=m.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=m.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=m.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=m.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=m.add(0|this.Gh,0|this.Gl,0|f,0|g)),({h:E,l:_}=m.add(0|this.Hh,0|this.Hl,0|E,0|_)),this.set(r,i,n,s,o,a,l,c,u,h,d,p,f,g,E,_)}roundClean(){b.fill(0),w.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let _=function(e){let t=t=>e().update(c(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new E),C=BigInt(0),S=BigInt(1),I=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function x(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function A(e){if(!x(e))throw Error("Uint8Array expected")}function k(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let O=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function P(e){A(e);let t="";for(let r=0;r<e.length;r++)t+=O[e[r]];return t}function R(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?C:BigInt("0x"+e)}let N={_0:48,_9:57,A:65,F:70,a:97,f:102};function T(e){return e>=N._0&&e<=N._9?e-N._0:e>=N.A&&e<=N.F?e-(N.A-10):e>=N.a&&e<=N.f?e-(N.a-10):void 0}function M(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=T(e.charCodeAt(n)),s=T(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function L(e){return A(e),R(P(Uint8Array.from(e).reverse()))}function D(e,t){return M(e.toString(16).padStart(2*t,"0"))}function B(e,t){return D(e,t).reverse()}function j(e,t,r){let i;if("string"==typeof t)try{i=M(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(x(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function $(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];A(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let U=e=>"bigint"==typeof e&&C<=e;function q(e,t,r,i){if(!(U(t)&&U(r)&&U(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}let H=e=>(I<<BigInt(e-1))-S,F={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||x(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function z(e,t,r={}){let i=(t,r,i)=>{let n=F[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function W(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}let K=BigInt(0),V=BigInt(1),G=BigInt(2),Z=BigInt(3),J=BigInt(4),Y=BigInt(5),X=BigInt(8);function Q(e,t){let r=e%t;return r>=K?r:t+r}function ee(e,t,r){let i=e;for(;t-- >K;)i*=i,i%=r;return i}function et(e,t){if(e===K)throw Error("invert: expected non-zero number");if(t<=K)throw Error("invert: expected positive modulus, got "+t);let r=Q(e,t),i=t,n=K,s=V;for(;r!==K;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==V)throw Error("invert: does not exist");return Q(n,t)}let er=(e,t)=>(Q(e,t)&V)===V,ei=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function en(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function es(e,t,r=!1,i={}){let n;if(e<=K)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=en(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:H(s),ZERO:K,ONE:V,create:t=>Q(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return K<=t&&t<e},is0:e=>e===K,isOdd:e=>(e&V)===V,neg:t=>Q(-t,e),eql:(e,t)=>e===t,sqr:t=>Q(t*t,e),add:(t,r)=>Q(t+r,e),sub:(t,r)=>Q(t-r,e),mul:(t,r)=>Q(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<K)throw Error("invalid exponent, negatives unsupported");if(r===K)return e.ONE;if(r===V)return t;let i=e.ONE,n=t;for(;r>K;)r&V&&(i=e.mul(i,n)),n=e.sqr(n),r>>=V;return i})(a,e,t),div:(t,r)=>Q(t*et(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>et(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%J===Z){let t=(e+V)/J;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%X===Y){let t=(e-Y)/X;return function(e,r){let i=e.mul(r,G),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,G),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-V)/G;for(t=e-V,r=0;t%G===K;t/=G,r++);for(i=G;i<e&&function(e,t,r){if(t<K)throw Error("invalid exponent, negatives unsupported");if(r<=K)throw Error("invalid modulus");if(r===V)return K;let i=V;for(;t>K;)t&V&&(i=i*e%r),e=e*e%r,t>>=V;return i}(i,n,e)!==e-V;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+V)/J;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+V)/G;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,V<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?B(e,o):D(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?L(e):R(P(e))}});return Object.freeze(a)}let eo=BigInt(0),ea=BigInt(1);function el(e,t){let r=t.negate();return e?r:t}function ec(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function eu(e,t){return ec(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let eh=new WeakMap,ed=new WeakMap;function ep(e){return ed.get(e)||1}let ef=BigInt(0),eg=BigInt(1),em=BigInt(2),ey=BigInt(8),ev={zip215:!0};BigInt(0),BigInt(1);let eb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ew=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let eE=BigInt(1),e_=BigInt(2);BigInt(3);let eC=BigInt(5),eS=BigInt(8),eI=es(eb,void 0,!0),ex=function(e){var t;let r=function(e){let t=(z(e.Fp,ei.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),z(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...en(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return z(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:i,n:n,prehash:s,hash:o,randomBytes:a,nByteLength:l,h:c}=r,u=em<<BigInt(8*l)-eg,h=i.create,d=es(r.n,r.nBitLength),p=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch{return{isValid:!1,value:ef}}}),f=r.adjustScalarBytes||(e=>e),g=r.domain||((e,t,r)=>{if(k("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function m(e,t){q("coordinate "+e,t,ef,u)}function y(e){if(!(e instanceof w))throw Error("ExtendedPoint expected")}let v=W((e,t)=>{let{ex:r,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?ey:i.inv(s));let a=h(r*t),l=h(n*t),c=h(s*t);if(o)return{x:ef,y:eg};if(c!==eg)throw Error("invZ was invalid");return{x:a,y:l}}),b=W(e=>{let{a:t,d:i}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,l=h(n*n),c=h(s*s),u=h(o*o),d=h(u*u),p=h(l*t);if(h(u*h(p+c))!==h(d+h(i*h(l*c))))throw Error("bad point: equation left != right (1)");if(h(n*s)!==h(o*a))throw Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,m("x",e),m("y",t),m("z",r),m("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new w(t,r,eg,h(t*r))}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(w.fromAffine)}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=function(e){let t;for(t=0;e>C;e>>=S,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(w,d,e,t)}_setWindowSize(e){I.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){y(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=h(t*o),l=h(n*i),c=h(r*o),u=h(s*i);return a===l&&c===u}is0(){return this.equals(w.ZERO)}negate(){return new w(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){let{a:e}=r,{ex:t,ey:i,ez:n}=this,s=h(t*t),o=h(i*i),a=h(em*h(n*n)),l=h(e*s),c=t+i,u=h(h(c*c)-s-o),d=l+o,p=d-a,f=l-o,g=h(u*p),m=h(d*f),y=h(u*f);return new w(g,m,h(p*d),y)}add(e){y(e);let{a:t,d:i}=r,{ex:n,ey:s,ez:o,et:a}=this,{ex:l,ey:c,ez:u,et:d}=e;if(t===BigInt(-1)){let e=h((s-n)*(c+l)),t=h((s+n)*(c-l)),r=h(t-e);if(r===ef)return this.double();let i=h(o*em*d),p=h(a*em*u),f=p+i,g=t+e,m=p-i,y=h(f*r),v=h(g*m),b=h(f*m);return new w(y,v,h(r*g),b)}let p=h(n*l),f=h(s*c),g=h(a*i*d),m=h(o*u),v=h((n+s)*(l+c)-p-f),b=m-g,E=m+g,_=h(f-t*p),C=h(v*b),S=h(E*_),I=h(v*_);return new w(C,S,h(b*E),I)}subtract(e){return this.add(e.negate())}wNAF(e){return I.wNAFCached(this,e,w.normalizeZ)}multiply(e){q("scalar",e,eg,n);let{p:t,f:r}=this.wNAF(e);return w.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=w.ZERO){return q("scalar",e,ef,n),e===ef?_:this.is0()||e===eg?this:I.wNAFCachedUnsafe(this,e,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(e){return v(this,e)}clearCofactor(){let{h:e}=r;return e===eg?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:n,a:s}=r,o=i.BYTES;e=j("pointHex",e,o),k("zip215",t);let a=e.slice(),l=e[o-1];a[o-1]=-129&l;let c=L(a);q("pointHex.y",c,ef,t?u:i.ORDER);let d=h(c*c),{isValid:f,value:g}=p(h(d-eg),h(n*d-s));if(!f)throw Error("Point.fromHex: invalid y coordinate");let m=(g&eg)===eg,y=(128&l)!=0;if(!t&&g===ef&&y)throw Error("Point.fromHex: x=0 and x_0=1");return y!==m&&(g=h(-g)),w.fromAffine({x:g,y:c})}static fromPrivateKey(e){return x(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=B(t,i.BYTES);return r[r.length-1]|=e&eg?128:0,r}toHex(){return P(this.toRawBytes())}}w.BASE=new w(r.Gx,r.Gy,eg,h(r.Gx*r.Gy)),w.ZERO=new w(ef,eg,eg,ef);let{BASE:E,ZERO:_}=w,I=(t=8*l,{constTimeNegate:el,hasPrecomputes:e=>1!==ep(e),unsafeLadder(e,t,r=w.ZERO){let i=e;for(;t>eo;)t&ea&&(r=r.add(i)),i=i.double(),t>>=ea;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=eu(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=eu(e,t),o=w.ZERO,a=w.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=ea);let h=t+Math.abs(n)-1,d=e%2!=0,p=n<0;0===n?a=a.add(el(d,r[t])):o=o.add(el(p,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=w.ZERO){let{windows:s,windowSize:o}=eu(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===eo)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=ea),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=eh.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&eh.set(t,r(i))),i},wNAFCached(e,t,r){let i=ep(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=ep(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){ec(r,t),ed.set(e,r),eh.delete(e)}});function x(e){let t=i.BYTES;e=j("private key",e,t);let r=j("hashed private key",o(e),2*t),s=f(r.slice(0,t)),a=r.slice(t,2*t),l=Q(L(s),n),c=E.multiply(l),u=c.toRawBytes();return{head:s,prefix:a,scalar:l,point:c,pointBytes:u}}function A(e=new Uint8Array,...t){return Q(L(o(g($(...t),j("context",e),!!s))),n)}return E._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return x(e).pointBytes},sign:function(e,t,r={}){e=j("message",e),s&&(e=s(e));let{prefix:o,scalar:a,pointBytes:l}=x(t),c=A(r.context,o,e),u=E.multiply(c).toRawBytes(),h=Q(c+A(r.context,u,l,e)*a,n);return q("signature.s",h,ef,n),j("result",$(u,B(h,i.BYTES)),2*i.BYTES)},verify:function(e,t,r,n=ev){let o,a,l;let{context:c,zip215:u}=n,h=i.BYTES;e=j("signature",e,2*h),t=j("message",t),r=j("publicKey",r,h),void 0!==u&&k("zip215",u),s&&(t=s(t));let d=L(e.slice(h,2*h));try{o=w.fromHex(r,u),a=w.fromHex(e.slice(0,h),u),l=E.multiplyUnsafe(d)}catch{return!1}if(!u&&o.isSmallOrder())return!1;let p=A(c,a.toRawBytes(),o.toRawBytes(),t);return a.add(o.multiplyUnsafe(p)).subtract(l).clearCofactor().equals(w.ZERO)},ExtendedPoint:w,utils:{getExtendedPublicKey:x,randomPrivateKey:()=>a(i.BYTES),precompute:(e=8,t=w.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:eI,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:eS,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_,randomBytes:h,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=Q(t*t*t,eb),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%eb*e%eb,o=ee(s,e_,eb)*s%eb,a=ee(o,eE,eb)*e%eb,l=ee(a,eC,eb)*a%eb,c=ee(l,t,eb)*l%eb,u=ee(c,r,eb)*c%eb,h=ee(u,i,eb)*u%eb,d=ee(h,n,eb)*h%eb,p=ee(d,n,eb)*h%eb,f=ee(p,t,eb)*l%eb;return{pow_p_5_8:ee(f,e_,eb)*e%eb,b2:s}}(e*Q(r*r*t,eb)).pow_p_5_8,n=Q(e*r*i,eb),s=Q(t*n*n,eb),o=n,a=Q(n*ew,eb),l=s===e,c=s===Q(-e,eb),u=s===Q(-e*ew,eb);return l&&(n=o),(c||u)&&(n=a),er(n,eb)&&(n=Q(-n,eb)),{isValid:l||c,value:n}}}),eA="base64url",ek="utf8",eO="utf8",eP="base58btc";function eR(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function eN(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?eR(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function eT(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=eN(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return eR(r)}var eM=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=s-n;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(i+(s-p)),g=i;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,p=o-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var g=l.repeat(r);f<o;++f)g+=e.charAt(c[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let eL=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},eD=e=>new TextEncoder().encode(e),eB=e=>new TextDecoder().decode(e);class ej{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e${constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return eq(this,e)}}class eU{constructor(e){this.decoders=e}or(e){return eq(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let eq=(e,t)=>new eU({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class eH{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new ej(e,t,r),this.decoder=new e$(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let eF=({name:e,prefix:t,encode:r,decode:i})=>new eH(e,t,r,i),ez=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=eM(r,t);return eF({prefix:e,name:t,encode:i,decode:e=>eL(n(e))})},eW=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},eK=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},eV=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>eF({prefix:t,name:e,encode:e=>eK(e,i,r),decode:t=>eW(t,i,r,e)});var eG=Object.freeze({__proto__:null,identity:eF({prefix:"\x00",name:"identity",encode:e=>eB(e),decode:e=>eD(e)})}),eZ=Object.freeze({__proto__:null,base2:eV({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),eJ=Object.freeze({__proto__:null,base8:eV({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),eY=Object.freeze({__proto__:null,base10:ez({prefix:"9",name:"base10",alphabet:"0123456789"})}),eX=Object.freeze({__proto__:null,base16:eV({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:eV({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let eQ=eV({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),e0=eV({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e1=eV({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e2=eV({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e3=eV({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),e5=eV({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var e4=Object.freeze({__proto__:null,base32:eQ,base32upper:e0,base32pad:e1,base32padupper:e2,base32hex:e3,base32hexupper:e5,base32hexpad:eV({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:eV({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:eV({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),e6=Object.freeze({__proto__:null,base36:ez({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:ez({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),e8=Object.freeze({__proto__:null,base58btc:ez({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:ez({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let e9=eV({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var e7=Object.freeze({__proto__:null,base64:e9,base64pad:eV({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:eV({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:eV({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let te=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),tt=te.reduce((e,t,r)=>(e[r]=t,e),[]),tr=te.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var ti=Object.freeze({__proto__:null,base256emoji:eF({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=tt[t],"")},decode:function(e){let t=[];for(let r of e){let e=tr[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})}),tn={encode:function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let ts=(e,t,r=0)=>(tn.encode(e,t,r),t),to=e=>tn.encodingLength(e),ta=(e,t)=>{let r=t.byteLength,i=to(e),n=i+to(r),s=new Uint8Array(n+r);return ts(e,s,0),ts(r,s,i),s.set(t,n),new tl(e,r,t,s)};class tl{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let tc=({name:e,code:t,encode:r})=>new tu(e,t,r);class tu{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ta(this.code,t):t.then(e=>ta(this.code,e))}throw Error("Unknown type, must be binary type")}}let th=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var td=Object.freeze({__proto__:null,sha256:tc({name:"sha2-256",code:18,encode:th("SHA-256")}),sha512:tc({name:"sha2-512",code:19,encode:th("SHA-512")})}),tp=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:eL,digest:e=>ta(0,eL(e))}});new TextEncoder,new TextDecoder;let tf={...eG,...eZ,...eJ,...eY,...eX,...e4,...e6,...e8,...e7,...ti};function tg(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...td,...tp});let tm=tg("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ty=tg("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=eN((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),tv={utf8:tm,"utf-8":tm,hex:tf.base16,latin1:ty,ascii:ty,binary:ty,...tf};function tb(e,t="utf8"){let r=tv[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function tw(e,t="utf8"){let r=tv[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?eR(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function tE(e){return(0,n.D)(tb(tw(e,eA),ek))}function t_(e){return tb(tw((0,n.u)(e),ek),eA)}function tC(e){return["did","key","z"+tb(eT([tw("K36",eP),e]),eP)].join(":")}function tS(e){let t=e.split("."),r=tE(t[0]);return{header:r,payload:tE(t[1]),signature:tw(t[2],eA),data:tw(t.slice(0,2).join("."),eO)}}function tI(e=h(32)){let t=ex.getPublicKey(e);return{secretKey:eT([e,t]),publicKey:t}}async function tx(e,t,r,n,s=(0,i.fromMiliseconds)(Date.now())){var o,a;let l={alg:"EdDSA",typ:"JWT"},c={iss:tC(n.publicKey),sub:e,aud:t,iat:s,exp:s+r},u=tw([t_((o={header:l,payload:c}).header),t_(o.payload)].join("."),eO);return[t_((a={header:l,payload:c,signature:ex.sign(u,n.secretKey.slice(0,32))}).header),t_(a.payload),tb(a.signature,eA)].join(".")}},43283:function(e,t,r){"use strict";r.d(t,{D:function(){return s},u:function(){return o}});let i=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),n=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function s(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return n(e)}catch(t){return e}}function o(e){return"string"==typeof e?e:i(e)||""}},72852:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(1812);i.__exportStar(r(83343),t),i.__exportStar(r(38520),t)},83343:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},38520:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},58619:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(1812);i.__exportStar(r(6954),t),i.__exportStar(r(91895),t),i.__exportStar(r(21087),t),i.__exportStar(r(72852),t)},21087:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(1812).__exportStar(r(36448),t)},36448:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},24810:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let i=r(72852);t.toMiliseconds=function(e){return e*i.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/i.ONE_THOUSAND)}},18995:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},6954:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(1812);i.__exportStar(r(18995),t),i.__exportStar(r(24810),t)},91895:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},1812:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return w},__asyncGenerator:function(){return b},__asyncValues:function(){return E},__await:function(){return v},__awaiter:function(){return u},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return x},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return n},__generator:function(){return h},__importDefault:function(){return S},__importStar:function(){return C},__makeTemplateObject:function(){return _},__metadata:function(){return c},__param:function(){return l},__read:function(){return g},__rest:function(){return o},__spread:function(){return m},__spreadArrays:function(){return y},__values:function(){return f}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function l(e,t){return function(r,i){t(r,i,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})}function h(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof v?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:v(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function x(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},849:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function i(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=i,t.getDocumentOrThrow=function(){return i("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return i("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return i("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return i("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return i("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},36073:function(e,t,r){"use strict";t.D=void 0;let i=r(849);t.D=function(){let e,t,r;try{e=i.getDocumentOrThrow(),t=i.getLocationOrThrow()}catch(e){return null}function n(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let i=r[e],n=["itemprop","property","name"].map(e=>i.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=i.getAttribute("content");if(e)return e}}return""}let s=((r=n("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),o=n("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let i=t.pathname.split("/");i.pop(),r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;i.push(r)}else i.push(e)}}}return i}(),name:s}}},65816:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(50044),n=r(71236),s=function(){function e(){this._semaphore=new n.default(1)}return e.prototype.acquire=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return[4,this._semaphore.acquire()];case 1:return[2,e.sent()[1]]}})})},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();t.default=s},71236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(50044),n=function(){function e(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise(function(t){return e._queue.push(t)});return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,r,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.acquire()];case 1:r=(t=i.sent())[0],n=t[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,i.sent()];case 4:return n(),[7];case 5:return[2]}})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._dispatch())},t([this._value--,this._currentReleaser])}},e}();t.default=n},72140:function(e,t,r){"use strict";t.WU=void 0;var i=r(65816);Object.defineProperty(t,"WU",{enumerable:!0,get:function(){return i.default}}),r(71236),r(41335)},41335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var i=r(50044);t.withTimeout=function(e,t,r){var n=this;return void 0===r&&(r=Error("timeout")),{acquire:function(){return new Promise(function(s,o){return i.__awaiter(n,void 0,void 0,function(){var n,a;return i.__generator(this,function(i){switch(i.label){case 0:return n=!1,setTimeout(function(){n=!0,o(r)},t),[4,e.acquire()];case 1:return a=i.sent(),n?(Array.isArray(a)?a[1]:a)():s(a),[2]}})})})},runExclusive:function(e){return i.__awaiter(this,void 0,void 0,function(){var t,r;return i.__generator(this,function(i){switch(i.label){case 0:t=function(){},i.label=1;case 1:return i.trys.push([1,,7,8]),[4,this.acquire()];case 2:if(!Array.isArray(r=i.sent()))return[3,4];return t=r[1],[4,e(r[0])];case 3:case 5:return[2,i.sent()];case 4:return t=r,[4,e()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}})})},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}},34699:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,s=l(e),o=s[0],a=s[1],c=new n((o+a)*3/4-a),u=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(function(e,t,i){for(var n,s=[],o=t;o<i;o+=3)s.push(r[(n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&s.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},56662:function(e,t,r){!function(e,t){"use strict";function i(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(46601).Buffer}catch(e){}function o(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void i(!1,"Invalid character in "+e)}function a(e,t,r){var i=o(e,r);return r-1>=t&&(i|=o(e,r-1)<<4),i}function l(e,t,r,n){for(var s=0,o=0,a=Math.min(e.length,r),l=t;l<a;l++){var c=e.charCodeAt(l)-48;s*=n,o=c>=49?c-49+10:c>=17?c-17+10:c,i(c>=0&&o<n,"Invalid character"),s+=o}return s}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return 0>e.cmp(t)?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===r)for(o=e.length-1,n=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===r)for(o=0,n=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,c=0,u=r;u<a;u+=i)c=l(e,u,u+i,t),this.imuln(n),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){c(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=67108863&o,l=o/67108864|0;r.words[0]=a;for(var c=1;c<i;c++){for(var u=l>>>26,h=67108863&l,d=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=d;p++){var f=c-p|0;u+=(o=(n=0|e.words[f])*(s=0|t.words[p])+h)/67108864|0,h=67108863&o}r.words[c]=0|h,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r._strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var r,n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],l=((a<<n|s)&16777215).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),r=0!==s||o!==this.length-1?d[6-l.length]+l+r:l+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=p[e],u=f[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(u).toString(e);r=(h=h.idivn(u)).isZero()?g+r:d[c-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},h&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(h,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),s=r||Math.max(1,n);i(n<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0");var o=e.allocUnsafe?e.allocUnsafe(s):new e(s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return i((this.negative|e.negative)==0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return i((this.negative|e.negative)==0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return i((this.negative|e.negative)==0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),t?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this._strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var t,r,i,n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,i=this.iadd(e);return e.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(t=this,r=e):(t=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(i=(0|t.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&i;for(;0!==s&&o<t.length;o++)s=(i=(0|t.words[o])+s)>>26,this.words[o]=67108863&i;if(0===s&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var i,n,s,o=e.words,a=t.words,l=r.words,c=0,u=0|o[0],h=8191&u,d=u>>>13,p=0|o[1],f=8191&p,g=p>>>13,m=0|o[2],y=8191&m,v=m>>>13,b=0|o[3],w=8191&b,E=b>>>13,_=0|o[4],C=8191&_,S=_>>>13,I=0|o[5],x=8191&I,A=I>>>13,k=0|o[6],O=8191&k,P=k>>>13,R=0|o[7],N=8191&R,T=R>>>13,M=0|o[8],L=8191&M,D=M>>>13,B=0|o[9],j=8191&B,$=B>>>13,U=0|a[0],q=8191&U,H=U>>>13,F=0|a[1],z=8191&F,W=F>>>13,K=0|a[2],V=8191&K,G=K>>>13,Z=0|a[3],J=8191&Z,Y=Z>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],es=8191&en,eo=en>>>13,ea=0|a[7],el=8191&ea,ec=ea>>>13,eu=0|a[8],eh=8191&eu,ed=eu>>>13,ep=0|a[9],ef=8191&ep,eg=ep>>>13;r.negative=e.negative^t.negative,r.length=19;var em=(c+(i=Math.imul(h,q))|0)+((8191&(n=(n=Math.imul(h,H))+Math.imul(d,q)|0))<<13)|0;c=((s=Math.imul(d,H))+(n>>>13)|0)+(em>>>26)|0,em&=67108863,i=Math.imul(f,q),n=(n=Math.imul(f,H))+Math.imul(g,q)|0,s=Math.imul(g,H);var ey=(c+(i=i+Math.imul(h,z)|0)|0)+((8191&(n=(n=n+Math.imul(h,W)|0)+Math.imul(d,z)|0))<<13)|0;c=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(ey>>>26)|0,ey&=67108863,i=Math.imul(y,q),n=(n=Math.imul(y,H))+Math.imul(v,q)|0,s=Math.imul(v,H),i=i+Math.imul(f,z)|0,n=(n=n+Math.imul(f,W)|0)+Math.imul(g,z)|0,s=s+Math.imul(g,W)|0;var ev=(c+(i=i+Math.imul(h,V)|0)|0)+((8191&(n=(n=n+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;c=((s=s+Math.imul(d,G)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=67108863,i=Math.imul(w,q),n=(n=Math.imul(w,H))+Math.imul(E,q)|0,s=Math.imul(E,H),i=i+Math.imul(y,z)|0,n=(n=n+Math.imul(y,W)|0)+Math.imul(v,z)|0,s=s+Math.imul(v,W)|0,i=i+Math.imul(f,V)|0,n=(n=n+Math.imul(f,G)|0)+Math.imul(g,V)|0,s=s+Math.imul(g,G)|0;var eb=(c+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,Y)|0)+Math.imul(d,J)|0))<<13)|0;c=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(eb>>>26)|0,eb&=67108863,i=Math.imul(C,q),n=(n=Math.imul(C,H))+Math.imul(S,q)|0,s=Math.imul(S,H),i=i+Math.imul(w,z)|0,n=(n=n+Math.imul(w,W)|0)+Math.imul(E,z)|0,s=s+Math.imul(E,W)|0,i=i+Math.imul(y,V)|0,n=(n=n+Math.imul(y,G)|0)+Math.imul(v,V)|0,s=s+Math.imul(v,G)|0,i=i+Math.imul(f,J)|0,n=(n=n+Math.imul(f,Y)|0)+Math.imul(g,J)|0,s=s+Math.imul(g,Y)|0;var ew=(c+(i=i+Math.imul(h,Q)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;c=((s=s+Math.imul(d,ee)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=67108863,i=Math.imul(x,q),n=(n=Math.imul(x,H))+Math.imul(A,q)|0,s=Math.imul(A,H),i=i+Math.imul(C,z)|0,n=(n=n+Math.imul(C,W)|0)+Math.imul(S,z)|0,s=s+Math.imul(S,W)|0,i=i+Math.imul(w,V)|0,n=(n=n+Math.imul(w,G)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,G)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,Y)|0)+Math.imul(v,J)|0,s=s+Math.imul(v,Y)|0,i=i+Math.imul(f,Q)|0,n=(n=n+Math.imul(f,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0;var eE=(c+(i=i+Math.imul(h,er)|0)|0)+((8191&(n=(n=n+Math.imul(h,ei)|0)+Math.imul(d,er)|0))<<13)|0;c=((s=s+Math.imul(d,ei)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=67108863,i=Math.imul(O,q),n=(n=Math.imul(O,H))+Math.imul(P,q)|0,s=Math.imul(P,H),i=i+Math.imul(x,z)|0,n=(n=n+Math.imul(x,W)|0)+Math.imul(A,z)|0,s=s+Math.imul(A,W)|0,i=i+Math.imul(C,V)|0,n=(n=n+Math.imul(C,G)|0)+Math.imul(S,V)|0,s=s+Math.imul(S,G)|0,i=i+Math.imul(w,J)|0,n=(n=n+Math.imul(w,Y)|0)+Math.imul(E,J)|0,s=s+Math.imul(E,Y)|0,i=i+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(v,Q)|0,s=s+Math.imul(v,ee)|0,i=i+Math.imul(f,er)|0,n=(n=n+Math.imul(f,ei)|0)+Math.imul(g,er)|0,s=s+Math.imul(g,ei)|0;var e_=(c+(i=i+Math.imul(h,es)|0)|0)+((8191&(n=(n=n+Math.imul(h,eo)|0)+Math.imul(d,es)|0))<<13)|0;c=((s=s+Math.imul(d,eo)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=67108863,i=Math.imul(N,q),n=(n=Math.imul(N,H))+Math.imul(T,q)|0,s=Math.imul(T,H),i=i+Math.imul(O,z)|0,n=(n=n+Math.imul(O,W)|0)+Math.imul(P,z)|0,s=s+Math.imul(P,W)|0,i=i+Math.imul(x,V)|0,n=(n=n+Math.imul(x,G)|0)+Math.imul(A,V)|0,s=s+Math.imul(A,G)|0,i=i+Math.imul(C,J)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,Y)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,ee)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,ee)|0,i=i+Math.imul(y,er)|0,n=(n=n+Math.imul(y,ei)|0)+Math.imul(v,er)|0,s=s+Math.imul(v,ei)|0,i=i+Math.imul(f,es)|0,n=(n=n+Math.imul(f,eo)|0)+Math.imul(g,es)|0,s=s+Math.imul(g,eo)|0;var eC=(c+(i=i+Math.imul(h,el)|0)|0)+((8191&(n=(n=n+Math.imul(h,ec)|0)+Math.imul(d,el)|0))<<13)|0;c=((s=s+Math.imul(d,ec)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=67108863,i=Math.imul(L,q),n=(n=Math.imul(L,H))+Math.imul(D,q)|0,s=Math.imul(D,H),i=i+Math.imul(N,z)|0,n=(n=n+Math.imul(N,W)|0)+Math.imul(T,z)|0,s=s+Math.imul(T,W)|0,i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(P,V)|0,s=s+Math.imul(P,G)|0,i=i+Math.imul(x,J)|0,n=(n=n+Math.imul(x,Y)|0)+Math.imul(A,J)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(C,Q)|0,n=(n=n+Math.imul(C,ee)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,ee)|0,i=i+Math.imul(w,er)|0,n=(n=n+Math.imul(w,ei)|0)+Math.imul(E,er)|0,s=s+Math.imul(E,ei)|0,i=i+Math.imul(y,es)|0,n=(n=n+Math.imul(y,eo)|0)+Math.imul(v,es)|0,s=s+Math.imul(v,eo)|0,i=i+Math.imul(f,el)|0,n=(n=n+Math.imul(f,ec)|0)+Math.imul(g,el)|0,s=s+Math.imul(g,ec)|0;var eS=(c+(i=i+Math.imul(h,eh)|0)|0)+((8191&(n=(n=n+Math.imul(h,ed)|0)+Math.imul(d,eh)|0))<<13)|0;c=((s=s+Math.imul(d,ed)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=67108863,i=Math.imul(j,q),n=(n=Math.imul(j,H))+Math.imul($,q)|0,s=Math.imul($,H),i=i+Math.imul(L,z)|0,n=(n=n+Math.imul(L,W)|0)+Math.imul(D,z)|0,s=s+Math.imul(D,W)|0,i=i+Math.imul(N,V)|0,n=(n=n+Math.imul(N,G)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,G)|0,i=i+Math.imul(O,J)|0,n=(n=n+Math.imul(O,Y)|0)+Math.imul(P,J)|0,s=s+Math.imul(P,Y)|0,i=i+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,ee)|0)+Math.imul(A,Q)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(C,er)|0,n=(n=n+Math.imul(C,ei)|0)+Math.imul(S,er)|0,s=s+Math.imul(S,ei)|0,i=i+Math.imul(w,es)|0,n=(n=n+Math.imul(w,eo)|0)+Math.imul(E,es)|0,s=s+Math.imul(E,eo)|0,i=i+Math.imul(y,el)|0,n=(n=n+Math.imul(y,ec)|0)+Math.imul(v,el)|0,s=s+Math.imul(v,ec)|0,i=i+Math.imul(f,eh)|0,n=(n=n+Math.imul(f,ed)|0)+Math.imul(g,eh)|0,s=s+Math.imul(g,ed)|0;var eI=(c+(i=i+Math.imul(h,ef)|0)|0)+((8191&(n=(n=n+Math.imul(h,eg)|0)+Math.imul(d,ef)|0))<<13)|0;c=((s=s+Math.imul(d,eg)|0)+(n>>>13)|0)+(eI>>>26)|0,eI&=67108863,i=Math.imul(j,z),n=(n=Math.imul(j,W))+Math.imul($,z)|0,s=Math.imul($,W),i=i+Math.imul(L,V)|0,n=(n=n+Math.imul(L,G)|0)+Math.imul(D,V)|0,s=s+Math.imul(D,G)|0,i=i+Math.imul(N,J)|0,n=(n=n+Math.imul(N,Y)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,Y)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,ee)|0,i=i+Math.imul(x,er)|0,n=(n=n+Math.imul(x,ei)|0)+Math.imul(A,er)|0,s=s+Math.imul(A,ei)|0,i=i+Math.imul(C,es)|0,n=(n=n+Math.imul(C,eo)|0)+Math.imul(S,es)|0,s=s+Math.imul(S,eo)|0,i=i+Math.imul(w,el)|0,n=(n=n+Math.imul(w,ec)|0)+Math.imul(E,el)|0,s=s+Math.imul(E,ec)|0,i=i+Math.imul(y,eh)|0,n=(n=n+Math.imul(y,ed)|0)+Math.imul(v,eh)|0,s=s+Math.imul(v,ed)|0;var ex=(c+(i=i+Math.imul(f,ef)|0)|0)+((8191&(n=(n=n+Math.imul(f,eg)|0)+Math.imul(g,ef)|0))<<13)|0;c=((s=s+Math.imul(g,eg)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=67108863,i=Math.imul(j,V),n=(n=Math.imul(j,G))+Math.imul($,V)|0,s=Math.imul($,G),i=i+Math.imul(L,J)|0,n=(n=n+Math.imul(L,Y)|0)+Math.imul(D,J)|0,s=s+Math.imul(D,Y)|0,i=i+Math.imul(N,Q)|0,n=(n=n+Math.imul(N,ee)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,ee)|0,i=i+Math.imul(O,er)|0,n=(n=n+Math.imul(O,ei)|0)+Math.imul(P,er)|0,s=s+Math.imul(P,ei)|0,i=i+Math.imul(x,es)|0,n=(n=n+Math.imul(x,eo)|0)+Math.imul(A,es)|0,s=s+Math.imul(A,eo)|0,i=i+Math.imul(C,el)|0,n=(n=n+Math.imul(C,ec)|0)+Math.imul(S,el)|0,s=s+Math.imul(S,ec)|0,i=i+Math.imul(w,eh)|0,n=(n=n+Math.imul(w,ed)|0)+Math.imul(E,eh)|0,s=s+Math.imul(E,ed)|0;var eA=(c+(i=i+Math.imul(y,ef)|0)|0)+((8191&(n=(n=n+Math.imul(y,eg)|0)+Math.imul(v,ef)|0))<<13)|0;c=((s=s+Math.imul(v,eg)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=67108863,i=Math.imul(j,J),n=(n=Math.imul(j,Y))+Math.imul($,J)|0,s=Math.imul($,Y),i=i+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,ee)|0)+Math.imul(D,Q)|0,s=s+Math.imul(D,ee)|0,i=i+Math.imul(N,er)|0,n=(n=n+Math.imul(N,ei)|0)+Math.imul(T,er)|0,s=s+Math.imul(T,ei)|0,i=i+Math.imul(O,es)|0,n=(n=n+Math.imul(O,eo)|0)+Math.imul(P,es)|0,s=s+Math.imul(P,eo)|0,i=i+Math.imul(x,el)|0,n=(n=n+Math.imul(x,ec)|0)+Math.imul(A,el)|0,s=s+Math.imul(A,ec)|0,i=i+Math.imul(C,eh)|0,n=(n=n+Math.imul(C,ed)|0)+Math.imul(S,eh)|0,s=s+Math.imul(S,ed)|0;var ek=(c+(i=i+Math.imul(w,ef)|0)|0)+((8191&(n=(n=n+Math.imul(w,eg)|0)+Math.imul(E,ef)|0))<<13)|0;c=((s=s+Math.imul(E,eg)|0)+(n>>>13)|0)+(ek>>>26)|0,ek&=67108863,i=Math.imul(j,Q),n=(n=Math.imul(j,ee))+Math.imul($,Q)|0,s=Math.imul($,ee),i=i+Math.imul(L,er)|0,n=(n=n+Math.imul(L,ei)|0)+Math.imul(D,er)|0,s=s+Math.imul(D,ei)|0,i=i+Math.imul(N,es)|0,n=(n=n+Math.imul(N,eo)|0)+Math.imul(T,es)|0,s=s+Math.imul(T,eo)|0,i=i+Math.imul(O,el)|0,n=(n=n+Math.imul(O,ec)|0)+Math.imul(P,el)|0,s=s+Math.imul(P,ec)|0,i=i+Math.imul(x,eh)|0,n=(n=n+Math.imul(x,ed)|0)+Math.imul(A,eh)|0,s=s+Math.imul(A,ed)|0;var eO=(c+(i=i+Math.imul(C,ef)|0)|0)+((8191&(n=(n=n+Math.imul(C,eg)|0)+Math.imul(S,ef)|0))<<13)|0;c=((s=s+Math.imul(S,eg)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=67108863,i=Math.imul(j,er),n=(n=Math.imul(j,ei))+Math.imul($,er)|0,s=Math.imul($,ei),i=i+Math.imul(L,es)|0,n=(n=n+Math.imul(L,eo)|0)+Math.imul(D,es)|0,s=s+Math.imul(D,eo)|0,i=i+Math.imul(N,el)|0,n=(n=n+Math.imul(N,ec)|0)+Math.imul(T,el)|0,s=s+Math.imul(T,ec)|0,i=i+Math.imul(O,eh)|0,n=(n=n+Math.imul(O,ed)|0)+Math.imul(P,eh)|0,s=s+Math.imul(P,ed)|0;var eP=(c+(i=i+Math.imul(x,ef)|0)|0)+((8191&(n=(n=n+Math.imul(x,eg)|0)+Math.imul(A,ef)|0))<<13)|0;c=((s=s+Math.imul(A,eg)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=67108863,i=Math.imul(j,es),n=(n=Math.imul(j,eo))+Math.imul($,es)|0,s=Math.imul($,eo),i=i+Math.imul(L,el)|0,n=(n=n+Math.imul(L,ec)|0)+Math.imul(D,el)|0,s=s+Math.imul(D,ec)|0,i=i+Math.imul(N,eh)|0,n=(n=n+Math.imul(N,ed)|0)+Math.imul(T,eh)|0,s=s+Math.imul(T,ed)|0;var eR=(c+(i=i+Math.imul(O,ef)|0)|0)+((8191&(n=(n=n+Math.imul(O,eg)|0)+Math.imul(P,ef)|0))<<13)|0;c=((s=s+Math.imul(P,eg)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=67108863,i=Math.imul(j,el),n=(n=Math.imul(j,ec))+Math.imul($,el)|0,s=Math.imul($,ec),i=i+Math.imul(L,eh)|0,n=(n=n+Math.imul(L,ed)|0)+Math.imul(D,eh)|0,s=s+Math.imul(D,ed)|0;var eN=(c+(i=i+Math.imul(N,ef)|0)|0)+((8191&(n=(n=n+Math.imul(N,eg)|0)+Math.imul(T,ef)|0))<<13)|0;c=((s=s+Math.imul(T,eg)|0)+(n>>>13)|0)+(eN>>>26)|0,eN&=67108863,i=Math.imul(j,eh),n=(n=Math.imul(j,ed))+Math.imul($,eh)|0,s=Math.imul($,ed);var eT=(c+(i=i+Math.imul(L,ef)|0)|0)+((8191&(n=(n=n+Math.imul(L,eg)|0)+Math.imul(D,ef)|0))<<13)|0;c=((s=s+Math.imul(D,eg)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=67108863;var eM=(c+(i=Math.imul(j,ef))|0)+((8191&(n=(n=Math.imul(j,eg))+Math.imul($,ef)|0))<<13)|0;return c=((s=Math.imul($,eg))+(n>>>13)|0)+(eM>>>26)|0,eM&=67108863,l[0]=em,l[1]=ey,l[2]=ev,l[3]=eb,l[4]=ew,l[5]=eE,l[6]=e_,l[7]=eC,l[8]=eS,l[9]=eI,l[10]=ex,l[11]=eA,l[12]=ek,l[13]=eO,l[14]=eP,l[15]=eR,l[16]=eN,l[17]=eT,l[18]=eM,0!==c&&(l[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,l=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=l;c++){var u=s-c,h=(0|e.words[u])*(0|t.words[c]),d=67108863&h;o=o+(h/67108864|0)|0,a=67108863&(d=d+a|0),n+=(o=o+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r._strip()}function v(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):i<63?g(this,e,t):y(this,e,t)},v.prototype.makeRBT=function(e){for(var t=Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},v.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},v.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},v.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,l=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var h=l,d=c,p=0;p<o;p++){var f=r[u+p],g=i[u+p],m=r[u+p+o],y=i[u+p+o],v=h*m-d*y;y=h*y+d*m,m=v,r[u+p]=f+m,i[u+p]=g+y,r[u+p+o]=f-m,i[u+p+o]=g-y,p!==a&&(v=l*h-c*d,d=l*d+c*h,h=v)}},v.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},v.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},v.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},v.prototype.convert13b=function(e,t,r,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)r[o]=0;i(0===s),i((-8192&s)==0)},v.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},v.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=Array(i),a=Array(i),l=Array(i),c=Array(i),u=Array(i),h=Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,c,i),this.transform(o,s,a,l,i,n),this.transform(c,s,u,h,i,n);for(var p=0;p<i;p++){var f=a[p]*u[p]-l[p]*h[p];l[p]=a[p]*h[p]+l[p]*u[p],a[p]=f}return this.conjugate(a,l,i),this.transform(a,l,d,s,i,n),this.conjugate(d,s,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var s=(0|this.words[n])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=(s/67108864|0)+(o>>>26),this.words[n]=67108863&o}return 0!==r&&(this.words[n]=r,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,l=(0|this.words[t])-a<<r;this.words[t]=l|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var n,s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s;if(n-=o,n=Math.max(0,n),r){for(var l=0;l<o;l++)r.words[l]=this.words[l];r.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=n);l--){var u=0|this.words[l];this.words[l]=c<<26-s|u>>>s,c=u&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return!(this.length<=r)&&!!(this.words[r]&1<<t)},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==t&&r++,this.length=Math.min(r,this.length),0!==t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this._strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return(i("number"==typeof e),i(e<67108864),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,s,o=e.length+r;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+r])+a;var l=(0|e.words[n])*t;s-=67108863&l,a=(s>>26)-(l/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)a=(s=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&s;if(0===a)return this._strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r,i=this.length-e.length,n=this.clone(),o=e,a=0|o.words[o.length-1];0!=(i=26-this._countBits(a))&&(o=o.ushln(i),n.iushln(i),a=0|o.words[o.length-1]);var l=n.length-o.length;if("mod"!==t){(r=new s(null)).length=l+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var u=n.clone()._ishlnsubmul(o,1,l);0===u.negative&&(n=u,r&&(r.words[l]=1));for(var h=l-1;h>=0;h--){var d=(0|n.words[o.length+h])*67108864+(0|n.words[o.length+h-1]);for(d=Math.min(d/a|0,67108863),n._ishlnsubmul(o,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,h),n.isZero()||(n.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),n._strip(),"div"!==t&&0!==i&&n.iushrn(i),{div:r||null,mod:n}},s.prototype.divmod=function(e,t,r){var n,o,a;return(i(!e.isZero()),this.isZero())?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=67108864%e,n=0,s=this.length-1;s>=0;s--)n=(r*n+(0|this.words[s]))%e;return t?-n:n},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*r;this.words[n]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),l=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),h=t.clone();!t.isZero();){for(var d=0,p=1;(t.words[0]&p)==0&&d<26;++d,p<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(h)),n.iushrn(1),o.iushrn(1);for(var f=0,g=1;(r.words[0]&g)==0&&f<26;++f,g<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(u),l.isub(h)),a.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(l)):(r.isub(t),a.isub(n),l.isub(o))}return{a:a,b:l,gcd:r.iushln(c)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t,r=this,n=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var o=new s(1),a=new s(0),l=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;(r.words[0]&u)==0&&c<26;++c,u<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var h=0,d=1;(n.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(a)):(n.isub(r),a.isub(o))}return 0>(t=0===r.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return -1===this.cmpn(e)},s.prototype.lt=function(e){return -1===this.cmp(e)},s.prototype.lten=function(e){return 0>=this.cmpn(e)},s.prototype.lte=function(e){return 0>=this.cmp(e)},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new I(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function x(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new s(null);return e.words=Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},n(E,w),E.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var n=e.words[9];for(i=10,t.words[t.length++]=4194303&n;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,w),n(C,w),n(S,w),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=(0|e.words[r])*19+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){var t;if(b[e])return b[e];if("k256"===e)t=new E;else if("p224"===e)t=new _;else if("p192"===e)t=new C;else if("p25519"===e)t=new S;else throw Error("Unknown prime "+e);return b[e]=t,t},I.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){i((e.negative|t.negative)==0,"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),l=a.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var h=this.pow(u,n),d=this.pow(e,n.addn(1).iushrn(1)),p=this.pow(e,n),f=o;0!==p.cmp(a);){for(var g=p,m=0;0!==g.cmp(a);m++)g=g.redSqr();i(m<f);var y=this.pow(h,new s(1).iushln(f-m-1));d=d.redMul(y),h=y.redSqr(),p=p.redMul(h),f=m}return d},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],u=l-1;u>=0;u--){var h=c>>u&1;if(n!==r[0]&&(n=this.sqr(n)),0===h&&0===o){a=0;continue}o<<=1,o|=h,(4==++a||0===i&&0===u)&&(n=this.mul(n,r[o]),a=0,o=0)}l=26}return n},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new x(e)},n(x,I),x.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},x.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},x.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},x.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},x.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},67133:function(e,t,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */let i=r(34699),n=r(19087),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|f(e,t),i=o(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(B(e,Uint8Array)){let t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(B(e,SharedArrayBuffer)||e&&B(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return a.from(i,t,r);let n=function(e){var t;if(a.isBuffer(e)){let t=0|p(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),o(e<0?0:0|p(e))}function h(e){let t=e.length<0?0:0|p(e.length),r=o(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function d(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),i}function p(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(n)return i?-1:M(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=j[e[i]];return n}(this,t,r);case"utf8":case"utf-8":return b(this,t,r);case"ascii":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":var s,o;return s=t,o=r,0===s&&o===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){var s;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){let s,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){let i=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===l)return i*o}else -1!==i&&(s-=s-i),i=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){let r=!0;for(let i=0;i<l;i++)if(c(e,s+i)!==c(t,i)){r=!1;break}if(r)return s}return -1}function b(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],s=null,o=t>239?4:t>223?3:t>191?2:1;if(n+o<=r){let r,i,a,l;switch(o){case 1:t<128&&(s=t);break;case 2:(192&(r=e[n+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[n+1],i=e[n+2],(192&r)==128&&(192&i)==128&&(l=(15&t)<<12|(63&r)<<6|63&i)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),n+=o}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,i,n,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function _(e,t,r,i,n){P(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function C(e,t,r,i,n){P(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function S(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,i,s){return t=+t,r>>>=0,s||S(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function x(e,t,r,i,s){return t=+t,r>>>=0,s||S(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(c(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return u(e)},a.allocUnsafeSlow=function(e){return u(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(B(t,Uint8Array))n+t.length>i.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else if(a.isBuffer(t))t.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return i},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,i,n){if(B(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;let s=n-i,o=r-t,l=Math.min(s,o),c=this.slice(i,n),u=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==u[e]){s=c[e],o=u[e];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,i){var n,s,o,a,l,c,u,h;if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let p=!1;for(;;)switch(i){case"hex":return function(e,t,r,i){let n;r=Number(r)||0;let s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;let o=t.length;for(i>o/2&&(i=o/2),n=0;n<i;++n){let i=parseInt(t.substr(2*n,2),16);if(i!=i)break;e[r+n]=i}return n}(this,e,t,r);case"utf8":case"utf-8":return n=t,s=r,D(M(e,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return o=t,a=r,D(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return l=t,c=r,D(L(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,h=r,D(function(e,t){let r,i;let n=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-u),this,u,h);default:if(p)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return i},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=$(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&N(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+16777216*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),a.prototype.readBigUInt64BE=$(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&N(e,this.length-8);let i=16777216*t+65536*this[++e]+256*this[++e]+this[++e],n=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let i=t,n=1,s=this[e+--i];for(;i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=$(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&N(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),a.prototype.readBigInt64BE=$(function(e){R(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&N(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}let n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}let n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=$(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=$(function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}let n=0,s=1,o=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/s>>0)-o&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}let n=r-1,s=1,o=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/s>>0)-o&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=$(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=$(function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},a.prototype.fill=function(e,t,r,i){let n;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let s=a.isBuffer(e)?e:a.from(e,i),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=s[n%o]}return this};let A={};function k(e,t,r){A[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function O(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function P(e,t,r,i,n,s){if(e>r||e<t){let i;let n="bigint"==typeof t?"n":"";throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`:`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** ${(s+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new A.ERR_OUT_OF_RANGE("value",i,e)}R(n,"offset"),(void 0===i[n]||void 0===i[n+s])&&N(n,i.length-(s+1))}function R(e,t){if("number"!=typeof e)throw new A.ERR_INVALID_ARG_TYPE(t,"number",e)}function N(e,t,r){if(Math.floor(e)!==e)throw R(e,r),new A.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new A.ERR_BUFFER_OUT_OF_BOUNDS;throw new A.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}k("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),k("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?n=O(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=O(n)),n+="n"),i+=` It must be ${t}. Received ${n}`},RangeError);let T=/[^+/0-9A-Za-z-_]/g;function M(e,t){let r;t=t||1/0;let i=e.length,n=null,s=[];for(let o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function L(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let j=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function $(e){return"undefined"==typeof BigInt?U:e}function U(){throw Error("BigInt not supported")}},6725:function(e,t,r){"use strict";var i=r(24316),n=r(30184),s=r(96751),o=r(4949);e.exports=o||i.call(s,n)},85475:function(e,t,r){"use strict";var i=r(24316),n=r(30184),s=r(6725);e.exports=function(){return s(i,n,arguments)}},30184:function(e){"use strict";e.exports=Function.prototype.apply},96751:function(e){"use strict";e.exports=Function.prototype.call},9166:function(e,t,r){"use strict";var i=r(24316),n=r(35281),s=r(96751),o=r(6725);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new n("a function is required");return o(i,s,e)}},4949:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},65775:function(e,t,r){"use strict";var i=r(91475),n=r(50228),s=r(9166),o=r(85475);e.exports=function(e){var t=s(arguments),r=e.length-(arguments.length-1);return i(t,1+(r>0?r:0),!0)},n?n(e.exports,"apply",{value:o}):e.exports.apply=o},18971:function(e,t,r){"use strict";var i=r(51597),n=r(9166),s=n([i("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&s(e,".prototype.")>-1?n([r]):r}},41765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletSDK=void 0;let i=r(42887),n=r(41753),s=r(85811),o=r(50749),a=r(59443),l=r(51644),c=r(73329),u=r(57098),h=r(45876),d=r(91505),p=r(67124);class f{constructor(e){var t,r,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;let a=e.linkAPIUrl||n.LINK_API_URL;void 0===e.overrideIsMetaMask?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=null===(t=e.overrideIsCoinbaseWallet)||void 0===t||t,this._overrideIsCoinbaseBrowser=null!==(r=e.overrideIsCoinbaseBrowser)&&void 0!==r&&r,this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=null===(i=e.reloadOnDisconnect)||void 0===i||i;let g=new URL(a),m=`${g.protocol}//${g.host}`;if(this._storage=new o.ScopedLocalStorage(`-walletlink:${m}`),this._storage.setItem("version",f.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new u.RelayEventManager;let y=(0,s.isMobileWeb)(),v=e.uiConstructor||(e=>y?new c.MobileRelayUI(e):new h.WalletLinkRelayUI(e)),b={linkAPIUrl:a,version:p.LIB_VERSION,darkMode:!!e.darkMode,headlessMode:!!e.headlessMode,uiConstructor:v,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:e.enableMobileWalletLink};if(this._relay=y?new l.MobileRelay(b):new d.WalletLinkRelay(b),this.setAppInfo(e.appName,e.appLogoUrl),e.headlessMode)return;this._relay.attachUI()}makeWeb3Provider(e="",t=1){let r=this.walletExtension;if(r)return this.isCipherProvider(r)||r.setProviderInfo(e,t),!1===this._reloadOnDisconnect&&"function"==typeof r.disableReloadOnDisconnect&&r.disableReloadOnDisconnect(),r;let i=this.coinbaseBrowser;if(i)return i;let n=this._relay;if(!n||!this._relayEventManager||!this._storage)throw Error("Relay not initialized, should never happen");return e||n.setConnectDisabled(!0),new a.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(n),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:t,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,t){var r;this._appName=e||"DApp",this._appLogoUrl=t||(0,s.getFavicon)();let i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):null===(r=this._relay)||void 0===r||r.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;let t=this===null||void 0===this?void 0:this.walletExtension;t?t.close():null===(e=this._relay)||void 0===e||e.resetAndReload()}getQrUrl(){var e,t;return null!==(t=null===(e=this._relay)||void 0===e?void 0:e.getQRCodeUrl())&&void 0!==t?t:null}getCoinbaseWalletLogo(e,t=240){return(0,i.walletLogo)(e,t)}get walletExtension(){var e;return null!==(e=window.coinbaseWalletExtension)&&void 0!==e?e:window.walletLinkExtension}get coinbaseBrowser(){var e,t;try{let r=null!==(e=window.ethereum)&&void 0!==e?e:null===(t=window.top)||void 0===t?void 0:t.ethereum;if(!r)return;if("isCoinbaseBrowser"in r&&r.isCoinbaseBrowser)return r;return}catch(e){return}}isCipherProvider(e){return"boolean"==typeof e.isCipher&&e.isCipher}}t.CoinbaseWalletSDK=f,f.VERSION=p.LIB_VERSION},42887:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walletLogo=void 0,t.walletLogo=(e,t)=>{let r;switch(e){case"standard":default:return r=t,`data:image/svg+xml,%3Csvg width='${t}' height='${r}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return r=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${r}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return r=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return r=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${r}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`}}},41753:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LINK_API_URL=void 0,t.LINK_API_URL="https://www.walletlink.org"},67253:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.standardErrorCodes=void 0,t.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}}},55719:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=void 0;let i=r(67253),n=r(51016);function s(e,t){let[r,i]=a(t);return new l(e,r||(0,n.getMessageFromCode)(e),i)}function o(e,t){let[r,i]=a(t);return new c(e,r||(0,n.getMessageFromCode)(e),i)}function a(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}t.standardErrors={rpc:{parse:e=>s(i.standardErrorCodes.rpc.parse,e),invalidRequest:e=>s(i.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>s(i.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>s(i.standardErrorCodes.rpc.methodNotFound,e),internal:e=>s(i.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return s(t,e)},invalidInput:e=>s(i.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>s(i.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>s(i.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>s(i.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>s(i.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>s(i.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>o(i.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(i.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(i.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>o(i.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>o(i.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>o(i.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new c(t,r,i)}}};class l extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}class c extends l{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},36769:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=t.standardErrorCodes=t.serializeError=t.getMessageFromCode=t.getErrorCode=void 0;let i=r(67253);Object.defineProperty(t,"standardErrorCodes",{enumerable:!0,get:function(){return i.standardErrorCodes}});let n=r(55719);Object.defineProperty(t,"standardErrors",{enumerable:!0,get:function(){return n.standardErrors}});let s=r(64251);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return s.serializeError}});let o=r(51016);Object.defineProperty(t,"getErrorCode",{enumerable:!0,get:function(){return o.getErrorCode}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return o.getMessageFromCode}})},64251:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=void 0;let i=r(66529),n=r(67124),s=r(67253),o=r(51016);t.serializeError=function(e,t){let r=(0,o.serialize)("string"==typeof e?{message:e,code:s.standardErrorCodes.rpc.internal}:(0,i.isErrorResponse)(e)?Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}}):e,{shouldIncludeStack:!0}),a=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");a.searchParams.set("version",n.LIB_VERSION),a.searchParams.set("code",r.code.toString());let l=function(e,t){let r=null==e?void 0:e.method;if(r)return r;if(void 0===t);else if("string"==typeof t)return t;else if(!Array.isArray(t))return t.method;else if(t.length>0)return t[0].method}(r.data,t);return l&&a.searchParams.set("method",l),a.searchParams.set("message",r.message),Object.assign(Object.assign({},r),{docUrl:a.href})}},51016:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.getErrorCode=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let i=r(67253),n="Unspecified error message.";function s(e,r=n){if(e&&Number.isInteger(e)){let r=e.toString();if(l(i.errorValues,r))return i.errorValues[r].message;if(e>=-32099&&e<=-32e3)return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function o(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(i.errorValues[t]||e>=-32099&&e<=-32e3)}function a(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=o,t.getErrorCode=function(e){var t;return"number"==typeof e?e:"object"==typeof e&&null!==e&&("number"==typeof e.code||"number"==typeof e.errorCode)?null!==(t=e.code)&&void 0!==t?t:e.errorCode:void 0},t.serialize=function(e,{shouldIncludeStack:t=!1}={}){let r={};return e&&"object"==typeof e&&!Array.isArray(e)&&l(e,"code")&&o(e.code)?(r.code=e.code,e.message&&"string"==typeof e.message?(r.message=e.message,l(e,"data")&&(r.data=e.data)):(r.message=s(r.code),r.data={originalError:a(e)})):(r.code=i.standardErrorCodes.rpc.internal,r.message=c(e,"message")?e.message:n,r.data={originalError:a(e)}),t&&(r.stack=c(e,"stack")?e.stack:void 0),r}},58749:function(e,t){"use strict";var r,i;function n(){return e=>e}Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0,t.OpaqueType=n,t.HexString=n(),t.AddressString=n(),t.BigIntString=n(),t.IntNumber=function(e){return Math.floor(e)},t.RegExpString=n(),(i=r||(t.ProviderType=r={})).CoinbaseWallet="CoinbaseWallet",i.MetaMask="MetaMask",i.Unselected=""},85811:function(e,t,r){"use strict";var i=r(67133).Buffer,n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileWeb=t.getLocation=t.isInIFrame=t.createQrUrl=t.getFavicon=t.range=t.isBigNumber=t.ensureParsedJSONObject=t.ensureBN=t.ensureRegExpString=t.ensureIntNumber=t.ensureBuffer=t.ensureAddressString=t.ensureEvenLengthHexString=t.ensureHexString=t.isHexString=t.prepend0x=t.strip0x=t.has0xPrefix=t.hexStringFromIntNumber=t.intNumberFromHexString=t.bigIntStringFromBN=t.hexStringFromBuffer=t.hexStringToUint8Array=t.uint8ArrayToHex=t.randomBytesHex=void 0;let s=n(r(56662)),o=r(36769),a=r(58749),l=/^[0-9]*$/,c=/^[a-f0-9]*$/;function u(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}function h(e){return e.startsWith("0x")||e.startsWith("0X")}function d(e){return h(e)?e.slice(2):e}function p(e){return h(e)?`0x${e.slice(2)}`:`0x${e}`}function f(e){if("string"!=typeof e)return!1;let t=d(e).toLowerCase();return c.test(t)}function g(e,t=!1){if("string"==typeof e){let r=d(e).toLowerCase();if(c.test(r))return(0,a.HexString)(t?`0x${r}`:r)}throw o.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function m(e,t=!1){let r=g(e,!1);return r.length%2==1&&(r=(0,a.HexString)(`0${r}`)),t?(0,a.HexString)(`0x${r}`):r}function y(e){if("number"==typeof e&&Number.isInteger(e))return(0,a.IntNumber)(e);if("string"==typeof e){if(l.test(e))return(0,a.IntNumber)(Number(e));if(f(e))return(0,a.IntNumber)(new s.default(m(e,!1),16).toNumber())}throw o.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}function v(e){if(null==e||"function"!=typeof e.constructor)return!1;let{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}function b(){try{return null!==window.frameElement}catch(e){return!1}}t.randomBytesHex=function(e){return u(crypto.getRandomValues(new Uint8Array(e)))},t.uint8ArrayToHex=u,t.hexStringToUint8Array=function(e){return new Uint8Array(e.match(/.{1,2}/g).map(e=>parseInt(e,16)))},t.hexStringFromBuffer=function(e,t=!1){let r=e.toString("hex");return(0,a.HexString)(t?`0x${r}`:r)},t.bigIntStringFromBN=function(e){return(0,a.BigIntString)(e.toString(10))},t.intNumberFromHexString=function(e){return(0,a.IntNumber)(new s.default(m(e,!1),16).toNumber())},t.hexStringFromIntNumber=function(e){return(0,a.HexString)(`0x${new s.default(e).toString(16)}`)},t.has0xPrefix=h,t.strip0x=d,t.prepend0x=p,t.isHexString=f,t.ensureHexString=g,t.ensureEvenLengthHexString=m,t.ensureAddressString=function(e){if("string"==typeof e){let t=d(e).toLowerCase();if(f(t)&&40===t.length)return(0,a.AddressString)(p(t))}throw o.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)},t.ensureBuffer=function(e){if(i.isBuffer(e))return e;if("string"==typeof e){if(f(e)){let t=m(e,!1);return i.from(t,"hex")}return i.from(e,"utf8")}throw o.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)},t.ensureIntNumber=y,t.ensureRegExpString=function(e){if(e instanceof RegExp)return(0,a.RegExpString)(e.toString());throw o.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)},t.ensureBN=function(e){if(null!==e&&(s.default.isBN(e)||v(e)))return new s.default(e.toString(10),10);if("number"==typeof e)return new s.default(y(e));if("string"==typeof e){if(l.test(e))return new s.default(e,10);if(f(e))return new s.default(m(e,!1),16)}throw o.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)},t.ensureParsedJSONObject=function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw o.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)},t.isBigNumber=v,t.range=function(e,t){return Array.from({length:t-e},(t,r)=>e+r)},t.getFavicon=function(){let e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:r}=document.location,i=e?e.getAttribute("href"):null;return!i||i.startsWith("javascript:")||i.startsWith("vbscript:")?null:i.startsWith("http://")||i.startsWith("https://")||i.startsWith("data:")?i:i.startsWith("//")?t+i:`${t}//${r}${i}`},t.createQrUrl=function(e,t,r,i,n,s){let o=new URLSearchParams({[i?"parent-id":"id"]:e,secret:t,server:r,v:n,chainId:s.toString()}).toString();return`${r}/#/link?${o}`},t.isInIFrame=b,t.getLocation=function(){try{if(b()&&window.top)return window.top.location;return window.location}catch(e){return window.location}},t.isMobileWeb=function(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(e=null==window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)}},51493:function(e,t,r){"use strict";let i=r(41765),n=r(59443);r(41765),r(59443),t.default=i.CoinbaseWalletSDK,"undefined"!=typeof window&&(window.CoinbaseWalletSDK=i.CoinbaseWalletSDK,window.CoinbaseWalletProvider=n.CoinbaseWalletProvider,window.WalletLink=i.CoinbaseWalletSDK,window.WalletLinkProvider=n.CoinbaseWalletProvider)},24020:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cipher=void 0;let i=r(85811);class n{constructor(e){this.secret=e}async encrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");let r=crypto.getRandomValues(new Uint8Array(12)),n=await crypto.subtle.importKey("raw",(0,i.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,s.encode(e)),a=o.slice(o.byteLength-16),l=o.slice(0,o.byteLength-16),c=new Uint8Array(a),u=new Uint8Array(l),h=new Uint8Array([...r,...c,...u]);return(0,i.uint8ArrayToHex)(h)}async decrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise((r,n)=>{!async function(){let s=await crypto.subtle.importKey("raw",(0,i.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=(0,i.hexStringToUint8Array)(e),a=o.slice(0,12),l=o.slice(12,28),c=o.slice(28),u=new Uint8Array([...c,...l]),h={name:"AES-GCM",iv:new Uint8Array(a)};try{let e=await window.crypto.subtle.decrypt(h,s,u),t=new TextDecoder;r(t.decode(e))}catch(e){n(e)}}()})}}t.Cipher=n},50749:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedLocalStorage=void 0;class r{constructor(e){this.scope=e}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){let e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);"string"==typeof i&&i.startsWith(e)&&t.push(i)}t.forEach(e=>localStorage.removeItem(e))}scopedKey(e){return`${this.scope}:${e}`}}t.ScopedLocalStorage=r},66472:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}'},10598:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.injectCssReset=void 0;let n=i(r(66472));t.injectCssReset=function(){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(n.default)),document.documentElement.appendChild(e)}},59443:function(e,t,r){"use strict";var i=r(67133).Buffer,n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=void 0;let s=n(r(56662)),o=r(28729),a=r(36769),l=r(85811),c=r(51644),u=r(59561),h=r(8546),d=r(66529),p=n(r(86642)),f=r(99078),g=r(82608),m=r(93772),y="DefaultChainId",v="DefaultJsonRpcUrl";class b extends o.EventEmitter{constructor(e){var t,r;super(),this._filterPolyfill=new g.FilterPolyfill(this),this._subscriptionManager=new m.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=null===(t=e.overrideIsCoinbaseWallet)||void 0===t||t,this.isCoinbaseBrowser=null!==(r=e.overrideIsCoinbaseBrowser)&&void 0!==r&&r,this.qrUrl=e.qrUrl;let i=this.getChainId(),n=(0,l.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:n});let s=this._storage.getItem(u.LOCAL_STORAGE_ADDRESSES_KEY);if(s){let e=s.split(" ");""!==e[0]&&(this._addresses=e.map(e=>(0,l.ensureAddressString)(e)),this.emit("accountsChanged",e))}this._subscriptionManager.events.on("notification",e=>{this.emit("message",{type:e.method,data:e.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",e=>{var t;if(e.origin===location.origin&&e.source===window&&"walletLinkMessage"===e.data.type&&"dappChainSwitched"===e.data.data.action){let r=e.data.data.chainId,i=null!==(t=e.data.data.jsonRpcUrl)&&void 0!==t?t:this.jsonRpcUrl;this.updateProviderInfo(i,Number(r))}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,l.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(v))&&void 0!==e?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(v,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,t){this.isCoinbaseBrowser||(this._chainIdFromOpts=t,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,t){this.jsonRpcUrl=e;let r=this.getChainId();this._storage.setItem(y,t.toString(10)),(0,l.ensureIntNumber)(t)===r&&this.hasMadeFirstChainChangedEmission||(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,t,r,i,n,s){let o=await this.initializeRelay(),a=await o.watchAsset(e,t,r,i,n,null==s?void 0:s.toString()).promise;return!(0,d.isErrorResponse)(a)&&!!a.result}async addEthereumChain(e,t,r,i,n,s){var o,a;if((0,l.ensureIntNumber)(e)===this.getChainId())return!1;let c=await this.initializeRelay(),u=c.inlineAddEthereumChain(e.toString());this._isAuthorized()||u||await c.requestEthereumAccounts().promise;let h=await c.addEthereumChain(e.toString(),t,n,r,i,s).promise;return!(0,d.isErrorResponse)(h)&&((null===(o=h.result)||void 0===o?void 0:o.isApproved)===!0&&this.updateProviderInfo(t[0],e),(null===(a=h.result)||void 0===a?void 0:a.isApproved)===!0)}async switchEthereumChain(e){let t=await this.initializeRelay(),r=await t.switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,d.isErrorResponse)(r)){if(!r.errorCode)return;if(r.errorCode===a.standardErrorCodes.provider.unsupportedChain)throw a.standardErrors.provider.unsupportedChain();throw a.standardErrors.provider.custom({message:r.errorMessage,code:r.errorCode})}let i=r.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}setAppInfo(e,t){this.initializeRelay().then(r=>r.setAppInfo(e,t))}async enable(){var e;return(null===(e=this.diagnostic)||void 0===e||e.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?h.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(e,t){try{let r=this._send(e,t);if(r instanceof Promise)return r.catch(t=>{throw(0,a.serializeError)(t,e)})}catch(t){throw(0,a.serializeError)(t,e)}}_send(e,t){if("string"==typeof e){let r=Array.isArray(t)?t:void 0!==t?[t]:[];return this._sendRequestAsync({jsonrpc:"2.0",id:0,method:e,params:r}).then(e=>e.result)}return"function"==typeof t?this._sendAsync(e,t):Array.isArray(e)?e.map(e=>this._sendRequest(e)):this._sendRequest(e)}async sendAsync(e,t){try{return this._sendAsync(e,t).catch(t=>{throw(0,a.serializeError)(t,e)})}catch(t){return Promise.reject((0,a.serializeError)(t,e))}}async _sendAsync(e,t){if("function"!=typeof t)throw Error("callback is required");if(Array.isArray(e)){this._sendMultipleRequestsAsync(e).then(e=>t(null,e)).catch(e=>t(e,null));return}return this._sendRequestAsync(e).then(e=>t(null,e)).catch(e=>t(e,null))}async request(e){try{return this._request(e).catch(t=>{throw(0,a.serializeError)(t,e.method)})}catch(t){return Promise.reject((0,a.serializeError)(t,e.method))}}async _request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw a.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw a.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw a.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});let i=void 0===r?[]:r,n=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:t,params:i,jsonrpc:"2.0",id:n})).result}async scanQRCode(e){let t=await this.initializeRelay(),r=await t.scanQRCode((0,l.ensureRegExpString)(e)).promise;if((0,d.isErrorResponse)(r))throw(0,a.serializeError)(r.errorMessage,"scanQRCode");if("string"!=typeof r.result)throw(0,a.serializeError)("result was not a string","scanQRCode");return r.result}async genericRequest(e,t){let r=await this.initializeRelay(),i=await r.genericRequest(e,t).promise;if((0,d.isErrorResponse)(i))throw(0,a.serializeError)(i.errorMessage,"generic");if("string"!=typeof i.result)throw(0,a.serializeError)("result was not a string","generic");return i.result}async connectAndSignIn(e){var t;let r;null===(t=this.diagnostic)||void 0===t||t.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?h.Session.hash(this._relay.session.id):void 0});try{let t=await this.initializeRelay();if(!(t instanceof c.MobileRelay))throw Error("connectAndSignIn is only supported on mobile");if(r=await t.connectAndSignIn(e).promise,(0,d.isErrorResponse)(r))throw Error(r.errorMessage)}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw a.standardErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!r.result)throw Error("accounts received is empty");let{accounts:i}=r.result;return this._setAddresses(i),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),r.result}async selectProvider(e){let t=await this.initializeRelay(),r=await t.selectProvider(e).promise;if((0,d.isErrorResponse)(r))throw(0,a.serializeError)(r.errorMessage,"selectProvider");if("string"!=typeof r.result)throw(0,a.serializeError)("result was not a string","selectProvider");return r.result}supportsSubscriptions(){return!1}subscribe(){throw Error("Subscriptions are not supported")}unsubscribe(){throw Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){let t={jsonrpc:"2.0",id:e.id},{method:r}=e;if(t.result=this._handleSynchronousMethods(e),void 0===t.result)throw Error(`Coinbase Wallet does not support calling ${r} synchronously without a callback. Please provide a callback parameter to call ${r} asynchronously.`);return t}_setAddresses(e,t){if(!Array.isArray(e))throw Error("addresses is not an array");let r=e.map(e=>(0,l.ensureAddressString)(e));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses=r,this.emit("accountsChanged",this._addresses),this._storage.setItem(u.LOCAL_STORAGE_ADDRESSES_KEY,r.join(" ")))}_sendRequestAsync(e){return new Promise((t,r)=>{try{let i=this._handleSynchronousMethods(e);if(void 0!==i)return t({jsonrpc:"2.0",id:e.id,result:i});let n=this._handleAsynchronousFilterMethods(e);if(void 0!==n){n.then(r=>t(Object.assign(Object.assign({},r),{id:e.id}))).catch(e=>r(e));return}let s=this._handleSubscriptionMethods(e);if(void 0!==s){s.then(r=>t({jsonrpc:"2.0",id:e.id,result:r.result})).catch(e=>r(e));return}}catch(e){return r(e)}this._handleAsynchronousMethods(e).then(r=>r&&t(Object.assign(Object.assign({},r),{id:e.id}))).catch(e=>r(e))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(e=>this._sendRequestAsync(e)))}_handleSynchronousMethods(e){let{method:t}=e,r=e.params||[];switch(t){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(r);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){let{method:t}=e,r=e.params||[];switch(t){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(r);case"eth_ecRecover":return this._eth_ecRecover(r);case"personal_sign":return this._personal_sign(r);case"personal_ecRecover":return this._personal_ecRecover(r);case"eth_signTransaction":return this._eth_signTransaction(r);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(r);case"eth_sendTransaction":return this._eth_sendTransaction(r);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(r);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(r);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(r);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(r);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(r);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(r);case"wallet_watchAsset":return this._wallet_watchAsset(r)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl).catch(t=>{var r;throw(t.code===a.standardErrorCodes.rpc.methodNotFound||t.code===a.standardErrorCodes.rpc.methodNotSupported)&&(null===(r=this.diagnostic)||void 0===r||r.log(f.EVENTS.METHOD_NOT_IMPLEMENTED,{method:e.method,sessionIdHash:this._relay?h.Session.hash(this._relay.session.id):void 0})),t})}_handleAsynchronousFilterMethods(e){let{method:t}=e,r=e.params||[];switch(t){case"eth_newFilter":return this._eth_newFilter(r);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(r);case"eth_getFilterLogs":return this._eth_getFilterLogs(r)}}_handleSubscriptionMethods(e){switch(e.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{let t=(0,l.ensureAddressString)(e);return this._addresses.map(e=>(0,l.ensureAddressString)(e)).includes(t)}catch(e){}return!1}_ensureKnownAddress(e){var t;if(!this._isKnownAddress(e))throw null===(t=this.diagnostic)||void 0===t||t.log(f.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),Error("Unknown Ethereum address")}_prepareTransactionParams(e){let t=e.from?(0,l.ensureAddressString)(e.from):this.selectedAddress;if(!t)throw Error("Ethereum address is unavailable");this._ensureKnownAddress(t);let r=e.to?(0,l.ensureAddressString)(e.to):null,n=null!=e.value?(0,l.ensureBN)(e.value):new s.default(0),o=e.data?(0,l.ensureBuffer)(e.data):i.alloc(0),a=null!=e.nonce?(0,l.ensureIntNumber)(e.nonce):null,c=null!=e.gasPrice?(0,l.ensureBN)(e.gasPrice):null,u=null!=e.maxFeePerGas?(0,l.ensureBN)(e.maxFeePerGas):null;return{fromAddress:t,toAddress:r,weiValue:n,data:o,nonce:a,gasPriceInWei:c,maxFeePerGas:u,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?(0,l.ensureBN)(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?(0,l.ensureBN)(e.gas):null,chainId:e.chainId?(0,l.ensureIntNumber)(e.chainId):this.getChainId()}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw a.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw a.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,t,r,i){this._ensureKnownAddress(t);try{let n=await this.initializeRelay(),s=await n.signEthereumMessage(e,t,r,i).promise;if((0,d.isErrorResponse)(s))throw Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw a.standardErrors.provider.userRejectedRequest("User denied message signature");throw e}}async _ethereumAddressFromSignedMessage(e,t,r){let i=await this.initializeRelay(),n=await i.ethereumAddressFromSignedMessage(e,t,r).promise;if((0,d.isErrorResponse)(n))throw Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,l.hexStringFromIntNumber)(this.getChainId())}getChainId(){let e=this._storage.getItem(y);if(!e)return(0,l.ensureIntNumber)(this._chainIdFromOpts);let t=parseInt(e,10);return(0,l.ensureIntNumber)(t)}async _eth_requestAccounts(){var e;let t;if(null===(e=this.diagnostic)||void 0===e||e.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?h.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});try{let e=await this.initializeRelay();if(t=await e.requestEthereumAccounts().promise,(0,d.isErrorResponse)(t))throw Error(t.errorMessage)}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw a.standardErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!t.result)throw Error("accounts received is empty");return this._setAddresses(t.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();let t=(0,l.ensureAddressString)(e[0]),r=(0,l.ensureBuffer)(e[1]);return this._signEthereumMessage(r,t,!1)}_eth_ecRecover(e){let t=(0,l.ensureBuffer)(e[0]),r=(0,l.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!1)}_personal_sign(e){this._requireAuthorization();let t=(0,l.ensureBuffer)(e[0]),r=(0,l.ensureAddressString)(e[1]);return this._signEthereumMessage(t,r,!0)}_personal_ecRecover(e){let t=(0,l.ensureBuffer)(e[0]),r=(0,l.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!0)}async _eth_signTransaction(e){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let e=await this.initializeRelay(),r=await e.signEthereumTransaction(t).promise;if((0,d.isErrorResponse)(r))throw Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw a.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_sendRawTransaction(e){let t=(0,l.ensureBuffer)(e[0]),r=await this.initializeRelay(),i=await r.submitEthereumTransaction(t,this.getChainId()).promise;if((0,d.isErrorResponse)(i))throw Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(e){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let e=await this.initializeRelay(),r=await e.signAndSubmitEthereumTransaction(t).promise;if((0,d.isErrorResponse)(r))throw Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw a.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_signTypedData_v1(e){this._requireAuthorization();let t=(0,l.ensureParsedJSONObject)(e[0]),r=(0,l.ensureAddressString)(e[1]);this._ensureKnownAddress(r);let i=p.default.hashForSignTypedDataLegacy({data:t}),n=JSON.stringify(t,null,2);return this._signEthereumMessage(i,r,!1,n)}async _eth_signTypedData_v3(e){this._requireAuthorization();let t=(0,l.ensureAddressString)(e[0]),r=(0,l.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let i=p.default.hashForSignTypedData_v3({data:r}),n=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,n)}async _eth_signTypedData_v4(e){this._requireAuthorization();let t=(0,l.ensureAddressString)(e[0]),r=(0,l.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let i=p.default.hashForSignTypedData_v4({data:r}),n=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,n)}async _cbwallet_arbitrary(e){let t=e[0],r=e[1];if("string"!=typeof r)throw Error("parameter must be a string");if("object"!=typeof t||null===t)throw Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(t,r)}}async _wallet_addEthereumChain(e){var t,r,i,n;let s=e[0];if((null===(t=s.rpcUrls)||void 0===t?void 0:t.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!s.chainName||""===s.chainName.trim())throw a.standardErrors.rpc.invalidParams("chainName is a required field");if(!s.nativeCurrency)throw a.standardErrors.rpc.invalidParams("nativeCurrency is a required field");let o=parseInt(s.chainId,16);return await this.addEthereumChain(o,null!==(r=s.rpcUrls)&&void 0!==r?r:[],null!==(i=s.blockExplorerUrls)&&void 0!==i?i:[],s.chainName,null!==(n=s.iconUrls)&&void 0!==n?n:[],s.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){let t=e[0];return await this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){let t=Array.isArray(e)?e[0]:e;if(!t.type)throw a.standardErrors.rpc.invalidParams("Type is required");if((null==t?void 0:t.type)!=="ERC20")throw a.standardErrors.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw a.standardErrors.rpc.invalidParams("Options are required");if(!(null==t?void 0:t.options.address))throw a.standardErrors.rpc.invalidParams("Address is required");let r=this.getChainId(),{address:i,symbol:n,image:s,decimals:o}=t.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(t.type,i,n,o,s,r)}}_eth_uninstallFilter(e){let t=(0,l.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(t)}async _eth_newFilter(e){let t=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(t)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){let t=(0,l.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(t)}_eth_getFilterLogs(e){let t=(0,l.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(t)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((e,t)=>this._setAddresses(e,t)),e.setChainCallback((e,t)=>{this.updateProviderInfo(t,parseInt(e,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}t.CoinbaseWalletProvider=b},99078:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=void 0,t.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"}},82608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterFromParam=t.FilterPolyfill=void 0;let i=r(58749),n=r(85811),s={jsonrpc:"2.0",id:0};class o{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,i.IntNumber)(1),this.REQUEST_THROTTLE_INTERVAL=1e3,this.lastFetchTimestamp=new Date(0),this.resolvers=[],this.provider=e}async newFilter(e){let t=a(e),r=this.makeFilterId(),i=await this.setInitialCursorPosition(r,t.fromBlock);return console.info(`Installing new log filter(${r}):`,t,"initial cursor position:",i),this.logFilters.set(r,t),this.setFilterTimeout(r),(0,n.hexStringFromIntNumber)(r)}async newBlockFilter(){let e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.blockFilters.add(e),this.setFilterTimeout(e),(0,n.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){let e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,n.hexStringFromIntNumber)(e)}uninstallFilter(e){let t=(0,n.intNumberFromHexString)(e);return console.info(`Uninstalling filter (${t})`),this.deleteFilter(t),!0}getFilterChanges(e){let t=(0,n.intNumberFromHexString)(e);return(this.timeouts.has(t)&&this.setFilterTimeout(t),this.logFilters.has(t))?this.getLogFilterChanges(t):this.blockFilters.has(t)?this.getBlockFilterChanges(t):this.pendingTransactionFilters.has(t)?this.getPendingTransactionFilterChanges(t):Promise.resolve(h())}async getFilterLogs(e){let t=(0,n.intNumberFromHexString)(e),r=this.logFilters.get(t);return r?this.sendAsyncPromise(Object.assign(Object.assign({},s),{method:"eth_getLogs",params:[l(r)]})):h()}makeFilterId(){return(0,i.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((t,r)=>{this.provider.sendAsync(e,(e,i)=>e?r(e):Array.isArray(i)||null==i?r(Error(`unexpected response received: ${JSON.stringify(i)}`)):void t(i))})}deleteFilter(e){console.info(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){let t=this.logFilters.get(e),r=this.cursors.get(e);if(!r||!t)return h();let o=await this.getCurrentBlockHeight(),a="latest"===t.toBlock?o:t.toBlock;if(r>o||r>Number(t.toBlock))return d();console.info(`Fetching logs from ${r} to ${a} for filter ${e}`);let c=await this.sendAsyncPromise(Object.assign(Object.assign({},s),{method:"eth_getLogs",params:[l(Object.assign(Object.assign({},t),{fromBlock:r,toBlock:a}))]}));if(Array.isArray(c.result)){let t=Math.max(...c.result.map(e=>(0,n.intNumberFromHexString)(e.blockNumber||"0x0")));if(t&&t>r){let n=(0,i.IntNumber)(t+1);console.info(`Moving cursor position for filter (${e}) from ${r} to ${n}`),this.cursors.set(e,n)}}return c}async getBlockFilterChanges(e){let t=this.cursors.get(e);if(!t)return h();let r=await this.getCurrentBlockHeight();if(t>r)return d();console.info(`Fetching blocks from ${t} to ${r} for filter (${e})`);let o=(await Promise.all((0,n.range)(t,r+1).map(e=>this.getBlockHashByNumber((0,i.IntNumber)(e))))).filter(e=>!!e),a=(0,i.IntNumber)(t+o.length);return console.info(`Moving cursor position for filter (${e}) from ${t} to ${a}`),this.cursors.set(e,a),Object.assign(Object.assign({},s),{result:o})}async getPendingTransactionFilterChanges(e){return Promise.resolve(d())}async setInitialCursorPosition(e,t){let r=await this.getCurrentBlockHeight(),i="number"==typeof t&&t>r?t:r;return this.cursors.set(e,i),i}setFilterTimeout(e){let t=this.timeouts.get(e);t&&window.clearTimeout(t);let r=window.setTimeout(()=>{console.info(`Filter (${e}) timed out`),this.deleteFilter(e)},3e5);this.timeouts.set(e,r)}async getCurrentBlockHeight(){let e=new Date;if(e.getTime()-this.lastFetchTimestamp.getTime()>this.REQUEST_THROTTLE_INTERVAL){this.lastFetchTimestamp=e;let t=await this._getCurrentBlockHeight();this.currentBlockHeight=t,this.resolvers.forEach(e=>e(t)),this.resolvers=[]}return this.currentBlockHeight?this.currentBlockHeight:new Promise(e=>this.resolvers.push(e))}async _getCurrentBlockHeight(){let{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},s),{method:"eth_blockNumber",params:[]}));return(0,n.intNumberFromHexString)((0,n.ensureHexString)(e))}async getBlockHashByNumber(e){let t=await this.sendAsyncPromise(Object.assign(Object.assign({},s),{method:"eth_getBlockByNumber",params:[(0,n.hexStringFromIntNumber)(e),!1]}));return t.result&&"string"==typeof t.result.hash?(0,n.ensureHexString)(t.result.hash):null}}function a(e){return{fromBlock:c(e.fromBlock),toBlock:c(e.toBlock),addresses:void 0===e.address?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}function l(e){let t={fromBlock:u(e.fromBlock),toBlock:u(e.toBlock),topics:e.topics};return null!==e.addresses&&(t.address=e.addresses),t}function c(e){if(void 0===e||"latest"===e||"pending"===e)return"latest";if("earliest"===e)return(0,i.IntNumber)(0);if((0,n.isHexString)(e))return(0,n.intNumberFromHexString)(e);throw Error(`Invalid block option: ${String(e)}`)}function u(e){return"latest"===e?e:(0,n.hexStringFromIntNumber)(e)}function h(){return Object.assign(Object.assign({},s),{error:{code:-32e3,message:"filter not found"}})}function d(){return Object.assign(Object.assign({},s),{result:[]})}t.FilterPolyfill=o,t.filterFromParam=a},93772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionManager=void 0;let i=r(2704),n=r(55117),s=()=>{};class o{constructor(e){let{events:t,middleware:r}=n({blockTracker:new i.PollingBlockTracker({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),provider:e});this.events=t,this.subscriptionMiddleware=r}async handleRequest(e){let t={};return await this.subscriptionMiddleware(e,t,s,s),t}destroy(){this.subscriptionMiddleware.destroy()}}t.SubscriptionManager=o},59561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayAbstract=t.APP_VERSION_KEY=t.LOCAL_STORAGE_ADDRESSES_KEY=t.WALLET_USER_NAME_KEY=void 0;let i=r(36769);t.WALLET_USER_NAME_KEY="walletUsername",t.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",t.APP_VERSION_KEY="AppVersion";class n{async makeEthereumJSONRPCRequest(e,t){if(!t)throw Error("Error: No jsonRpcUrl provided");return window.fetch(t,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(t=>{if(!t)throw i.standardErrors.rpc.parse({});let{error:r}=t;if(r)throw(0,i.serializeError)(r,e.method);return t})}}t.RelayAbstract=n},57098:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayEventManager=void 0;let i=r(85811);class n{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;let e=this._nextRequestId,t=(0,i.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}t.RelayEventManager=n},8546:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;let i=r(71114),n=r(85811),s="session:id",o="session:secret",a="session:linked";class l{constructor(e,t,r,s){this._storage=e,this._id=t||(0,n.randomBytesHex)(16),this._secret=r||(0,n.randomBytesHex)(32),this._key=new i.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!s}static load(e){let t=e.getItem(s),r=e.getItem(a),i=e.getItem(o);return t&&i?new l(e,t,i,"1"===r):null}static hash(e){return new i.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(s,this._id),this._storage.setItem(o,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(a,this._linked?"1":"0")}}t.Session=l},51644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileRelay=void 0;let i=r(85811),n=r(91505),s=r(73329);class o extends n.WalletLinkRelay{constructor(e){var t;super(e),this._enableMobileWalletLink=null!==(t=e.enableMobileWalletLink)&&void 0!==t&&t}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise(()=>{let e=(0,i.getLocation)();e.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(e.href)}`}),cancel:()=>{}}}publishWeb3RequestEvent(e,t){if(super.publishWeb3RequestEvent(e,t),!(this._enableMobileWalletLink&&this.ui instanceof s.MobileRelayUI))return;let r=!1;switch(t.method){case"requestEthereumAccounts":case"connectAndSignIn":r=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:r=!0,this.ui.openCoinbaseWalletDeeplink()}r&&window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0})}handleWeb3ResponseMessage(e){super.handleWeb3ResponseMessage(e)}connectAndSignIn(e){if(!this._enableMobileWalletLink)throw Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:e.nonce,iat:new Date().toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:e.statement,resources:e.resources}})}}t.MobileRelay=o},73329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileRelayUI=void 0;let i=r(1379);class n{constructor(e){this.attached=!1,this.darkMode=!1,this.redirectDialog=new i.RedirectDialog,this.darkMode=e.darkMode}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(e){}redirectToCoinbaseWallet(e){let t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",window.location.href),e&&t.searchParams.append("wl_url",e);let r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}t.MobileRelayUI=n},91505:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelay=void 0;let i=r(36769),n=r(58749),s=r(85811),o=r(99078),a=r(59561),l=r(8546),c=r(33641),u=r(66529),h=r(45876);class d extends a.RelayAbstract{constructor(e){var t;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=e=>{var t;this.isLinked=e;let r=this.storage.getItem(a.LOCAL_STORAGE_ADDRESSES_KEY);if(e&&(this.session.linked=e),this.isUnlinkedErrorState=!1,r){let i=r.split(" "),n="true"===this.storage.getItem("IsStandaloneSigning");if(""!==i[0]&&!e&&this.session.linked&&!n){this.isUnlinkedErrorState=!0;let e=this.getSessionIdHash();null===(t=this.diagnostic)||void 0===t||t.log(o.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:e})}}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{(this.chainCallbackParams.chainId!==e||this.chainCallbackParams.jsonRpcUrl!==t)&&(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(e,t))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),d.accountRequestCallbackIds.size>0&&(Array.from(d.accountRequestCallbackIds.values()).forEach(t=>{this.invokeCallback(Object.assign(Object.assign({},{type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:[e]}}),{id:t}))}),d.accountRequestCallbackIds.clear())},this.connectedUpdated=e=>{this.ui.setConnected(e)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;let{session:r,ui:i,connection:n}=this.subscribe();this._session=r,this.connection=n,this.relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=null===(t=e.reloadOnDisconnect)||void 0===t||t,this.ui=i}subscribe(){let e=l.Session.load(this.storage)||new l.Session(this.storage).save(),{linkAPIUrl:t,diagnostic:r}=this,i=new c.WalletLinkConnection({session:e,linkAPIUrl:t,diagnostic:r,listener:this}),{version:n,darkMode:s}=this.options,o=this.options.uiConstructor({linkAPIUrl:t,version:n,darkMode:s,session:e});return i.connect(),{session:e,ui:o,connection:i}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(e=>setTimeout(()=>e(null),1e3))]).then(()=>{var e,t;let r=this.ui.isStandalone();null===(e=this.diagnostic)||void 0===e||e.log(o.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();let i=l.Session.load(this.storage);if((null==i?void 0:i.id)===this._session.id?this.storage.clear():i&&(null===(t=this.diagnostic)||void 0===t||t.log(o.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:l.Session.hash(i.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);let{session:n,ui:s,connection:a}=this.subscribe();this._session=n,this.connection=a,this.ui=s,r&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.options.headlessMode||this.attachUI()}).catch(e=>{var t;null===(t=this.diagnostic)||void 0===t||t.log(o.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,t,r,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,s.hexStringFromBuffer)(e,!0),address:t,addPrefix:r,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,t,r){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,s.hexStringFromBuffer)(e,!0),signature:(0,s.hexStringFromBuffer)(t,!0),addPrefix:r}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,s.bigIntStringFromBN)(e.weiValue),data:(0,s.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,s.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,s.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,s.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,s.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,s.bigIntStringFromBN)(e.weiValue),data:(0,s.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,s.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,s.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,s.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,s.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,s.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getQRCodeUrl(){return(0,s.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,t){return this.sendRequest({method:"generic",params:{action:t,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null,r=(0,s.randomBytesHex)(8),i=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,i),null==t||t()};return{promise:new Promise((n,s)=>{this.ui.isStandalone()||(t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(r,e=>{if(null==t||t(),(0,u.isErrorResponse)(e))return s(Error(e.errorMessage));n(e)}),this.ui.isStandalone()?this.sendRequestStandalone(r,e):this.publishWeb3RequestEvent(r,e)}),cancel:i}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e,this.ui instanceof h.WalletLinkRelayUI&&this.ui.setChainId(e)}publishWeb3RequestEvent(e,t){var r;let i={type:"WEB3_REQUEST",id:e,request:t},n=l.Session.load(this.storage);null===(r=this.diagnostic)||void 0===r||r.log(o.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:n?l.Session.hash(n.id):"",isSessionMismatched:((null==n?void 0:n.id)!==this._session.id).toString()}),this.publishEvent("Web3Request",i,!0).then(e=>{var r;null===(r=this.diagnostic)||void 0===r||r.log(o.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:n?l.Session.hash(n.id):"",isSessionMismatched:((null==n?void 0:n.id)!==this._session.id).toString()})}).catch(e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i.id,response:{method:t.method,errorMessage:e.message}})})}publishWeb3RequestCanceledEvent(e){this.publishEvent("Web3RequestCanceled",{type:"WEB3_REQUEST_CANCELED",id:e},!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e){var t;let{response:r}=e;if(null===(t=this.diagnostic)||void 0===t||t.log(o.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash()}),"requestEthereumAccounts"===r.method){d.accountRequestCallbackIds.forEach(t=>this.invokeCallback(Object.assign(Object.assign({},e),{id:t}))),d.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,t,r,n){var s;let o=null!==(s=null==r?void 0:r.message)&&void 0!==s?s:(0,i.getMessageFromCode)(n);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:t,errorMessage:o,errorCode:n}})}invokeCallback(e){let t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){let e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=(0,s.randomBytesHex)(8),r=r=>{this.publishWeb3RequestCanceledEvent(t),this.handleErrorResponse(t,e.method,r)};return{promise:new Promise((n,s)=>{if(this.relayEventManager.callbacks.set(t,e=>{if(this.ui.hideRequestEthereumAccounts(),(0,u.isErrorResponse)(e))return s(Error(e.errorMessage));n(e)}),this.ui.inlineAccountsResponse())this.ui.requestEthereumAccounts({onCancel:r,onAccounts:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:e}})}});else{let e=i.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>r(e)})}d.accountRequestCallbackIds.add(t),this.ui.inlineAccountsResponse()||this.ui.isStandalone()||this.publishWeb3RequestEvent(t,e)}),cancel:r}}selectProvider(e){let t=(0,s.randomBytesHex)(8);return{cancel:e=>{this.publishWeb3RequestCanceledEvent(t),this.handleErrorResponse(t,"selectProvider",e)},promise:new Promise((r,i)=>{this.relayEventManager.callbacks.set(t,e=>{if((0,u.isErrorResponse)(e))return i(Error(e.errorMessage));r(e)}),this.ui.selectProvider&&this.ui.selectProvider({onApprove:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:"selectProvider",result:e}})},onCancel:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:"selectProvider",result:n.ProviderType.Unselected}})},providerOptions:e})})}}watchAsset(e,t,r,i,n,o){let a={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:i,image:n},chainId:o}},l=null,c=(0,s.randomBytesHex)(8),h=e=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,e),null==l||l()};return this.ui.inlineWatchAsset()||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload})),{cancel:h,promise:new Promise((s,h)=>{this.relayEventManager.callbacks.set(c,e=>{if(null==l||l(),(0,u.isErrorResponse)(e))return h(Error(e.errorMessage));s(e)}),this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"watchAsset",result:!0}})},onCancel:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"watchAsset",result:!1}})},type:e,address:t,symbol:r,decimals:i,image:n,chainId:o}),this.ui.inlineWatchAsset()||this.ui.isStandalone()||this.publishWeb3RequestEvent(c,a)})}}addEthereumChain(e,t,r,i,n,o){let a={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:i,chainName:n,iconUrls:r,nativeCurrency:o}},l=null,c=(0,s.randomBytesHex)(8),h=e=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,e),null==l||l()};return this.ui.inlineAddEthereumChain(e)||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload})),{promise:new Promise((t,r)=>{this.relayEventManager.callbacks.set(c,e=>{if(null==l||l(),(0,u.isErrorResponse)(e))return r(Error(e.errorMessage));t(e)}),this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},onApprove:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:c,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:e}}})},chainId:a.params.chainId,rpcUrls:a.params.rpcUrls,blockExplorerUrls:a.params.blockExplorerUrls,chainName:a.params.chainName,iconUrls:a.params.iconUrls,nativeCurrency:a.params.nativeCurrency}),this.ui.inlineAddEthereumChain(e)||this.ui.isStandalone()||this.publishWeb3RequestEvent(c,a)}),cancel:h}}switchEthereumChain(e,t){let r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},n=(0,s.randomBytesHex)(8);return{promise:new Promise((t,s)=>{this.relayEventManager.callbacks.set(n,e=>(0,u.isErrorResponse)(e)&&e.errorCode?s(i.standardErrors.provider.custom({code:e.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):(0,u.isErrorResponse)(e)?s(Error(e.errorMessage)):void t(e)),this.ui.switchEthereumChain({onCancel:t=>{var r;if(t){let s=null!==(r=(0,i.getErrorCode)(t))&&void 0!==r?r:i.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(n,"switchEthereumChain",t instanceof Error?t:i.standardErrors.provider.unsupportedChain(e),s)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},onApprove:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:e}}})},chainId:r.params.chainId,address:r.params.address}),this.ui.inlineSwitchEthereumChain()||this.ui.isStandalone()||this.publishWeb3RequestEvent(n,r)}),cancel:e=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,e)}}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return l.Session.hash(this._session.id)}sendRequestStandalone(e,t){let r=r=>{this.handleErrorResponse(e,t.method,r)},i=t=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:t})};switch(t.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:t,onSuccess:i,onCancel:r});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:t,onSuccess:i,onCancel:r});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:t,onSuccess:i,onCancel:r});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:t,onSuccess:i});break;default:r()}}}t.WalletLinkRelay=d,d.accountRequestCallbackIds=new Set},33641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkConnection=void 0;let i=r(58749),n=r(24020),s=r(99078),o=r(59561),a=r(8546),l=r(62838),c=r(22899);class u{constructor({session:e,linkAPIUrl:t,listener:r,diagnostic:u,WebSocketClass:h=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,i.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{e&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]).forEach((t,r)=>{let i=e[r];void 0!==i&&t(i)})},this.handleDestroyed=e=>{var t,r;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload(),null===(r=this.diagnostic)||void 0===r||r.log(s.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:a.Session.hash(this.session.id)}))},this.handleAccountUpdated=async e=>{var t,r;try{let r=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(r)}catch(e){null===(r=this.diagnostic)||void 0===r||r.log(s.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(e,t)=>{var r,i;try{let i=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.metadataUpdated(e,i)}catch(t){null===(i=this.diagnostic)||void 0===i||i.log(s.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:e})}},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated(o.WALLET_USER_NAME_KEY,e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated(o.APP_VERSION_KEY,e)},this.handleChainUpdated=async(e,t)=>{var r,i;try{let i=await this.cipher.decrypt(e),n=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.chainUpdated(i,n)}catch(e){null===(i=this.diagnostic)||void 0===i||i.log(s.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=e,this.cipher=new n.Cipher(e.secret),this.diagnostic=u,this.listener=r;let d=new c.WalletLinkWebSocket(`${t}/rpc`,h);d.setConnectionStateListener(async t=>{var r;null===(r=this.diagnostic)||void 0===r||r.log(s.EVENTS.CONNECTED_STATE_CHANGE,{state:t,sessionIdHash:a.Session.hash(e.id)});let i=!1;switch(t){case c.ConnectionState.DISCONNECTED:if(!this.destroyed){let e=async()=>{await new Promise(e=>setTimeout(e,5e3)),this.destroyed||d.connect().catch(()=>{e()})};e()}break;case c.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),i=!0}catch(e){}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case c.ConnectionState.CONNECTING:}this.connected!==i&&(this.connected=i)}),d.setIncomingDataListener(t=>{var r,i,n;switch(t.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let i="IsLinkedOK"===t.type?t.linked:void 0;null===(r=this.diagnostic)||void 0===r||r.log(s.EVENTS.LINKED,{sessionIdHash:a.Session.hash(e.id),linked:i,type:t.type,onlineGuests:t.onlineGuests}),this.linked=i||t.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":null===(i=this.diagnostic)||void 0===i||i.log(s.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:a.Session.hash(e.id),metadata_keys:t&&t.metadata?Object.keys(t.metadata):void 0}),this.handleSessionMetadataUpdated(t.metadata);break;case"Event":this.handleIncomingEvent(t)}void 0!==t.id&&(null===(n=this.requestResolutions.get(t.id))||void 0===n||n(t))}),this.ws=d,this.http=new l.WalletLinkHTTP(t,e.id,e.key)}connect(){var e;if(this.destroyed)throw Error("instance is destroyed");null===(e=this.diagnostic)||void 0===e||e.log(s.EVENTS.STARTED_CONNECTING,{sessionIdHash:a.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var e;this.destroyed=!0,this.ws.disconnect(),null===(e=this.diagnostic)||void 0===e||e.log(s.EVENTS.DISCONNECTED,{sessionIdHash:a.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var t,r;this._connected=e,e&&(null===(t=this.onceConnected)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.connectedUpdated(e)}setOnceConnected(e){return new Promise(t=>{this.connected?e().then(t):this.onceConnected=()=>{e().then(t),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}async handleIncomingEvent(e){var t,r;if("Event"===e.type&&"Web3Response"===e.event)try{let r=await this.cipher.decrypt(e.data),i=JSON.parse(r);if("WEB3_RESPONSE"!==i.type)return;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(i)}catch(e){null===(r=this.diagnostic)||void 0===r||r.log(s.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(e=>this.handleIncomingEvent(e))}async setSessionMetadata(e,t){let r={type:"SetSessionConfig",id:(0,i.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:t}};return this.setOnceConnected(async()=>{let e=await this.makeRequest(r);if("Fail"===e.type)throw Error(e.error||"failed to set session metadata")})}async publishEvent(e,t,r=!1){let n=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:(0,i.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:n,callWebhook:r};return this.setOnceLinked(async()=>{let e=await this.makeRequest(s);if("Fail"===e.type)throw Error(e.error||"failed to publish event");return e.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4){this.ws.disconnect();return}try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t=6e4){let r;let i=e.id;return this.sendData(e),Promise.race([new Promise((e,n)=>{r=window.setTimeout(()=>{n(Error(`request ${i} timed out`))},t)}),new Promise(e=>{this.requestResolutions.set(i,t=>{clearTimeout(r),e(t),this.requestResolutions.delete(i)})})])}async authenticate(){let e={type:"HostSession",id:(0,i.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},t=await this.makeRequest(e);if("Fail"===t.type)throw Error(t.error||"failed to authentcate")}sendIsLinked(){let e={type:"IsLinked",id:(0,i.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){let e={type:"GetSessionConfig",id:(0,i.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}}t.WalletLinkConnection=u},62838:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkHTTP=void 0;class r{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;let i=`${t}:${r}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(e=>console.error("Unabled to mark event as failed:",e))}async fetchUnseenEvents(){var e;let t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){let{events:r,error:i}=await t.json();if(i)throw Error(`Check unseen events failed: ${i}`);let n=null!==(e=null==r?void 0:r.filter(e=>"Web3Response"===e.event).map(e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data})))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(n),n}throw Error(`Check unseen events failed: ${t.status}`)}}t.WalletLinkHTTP=r},22899:function(e,t){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkWebSocket=t.ConnectionState=void 0,(i=r||(t.ConnectionState=r={}))[i.DISCONNECTED=0]="DISCONNECTED",i[i.CONNECTING=1]="CONNECTING",i[i.CONNECTED=2]="CONNECTED";class n{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw Error("webSocket object is not null");return new Promise((e,t)=>{var i;let n;try{this.webSocket=n=new this.WebSocketClass(this.url)}catch(e){t(e);return}null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.CONNECTING),n.onclose=e=>{var i;this.clearWebSocket(),t(Error(`websocket error ${e.code}: ${e.reason}`)),null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.DISCONNECTED)},n.onopen=t=>{var i;e(),null===(i=this.connectionStateListener)||void 0===i||i.call(this,r.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(e=>this.sendData(e)),this.pendingData=[])},n.onmessage=e=>{var t,r;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{let t=JSON.parse(e.data);null===(r=this.incomingDataListener)||void 0===r||r.call(this,t)}catch(e){}}})}disconnect(){var e;let{webSocket:t}=this;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,r.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){let{webSocket:t}=this;if(!t){this.pendingData.push(e),this.connect();return}t.send(e)}clearWebSocket(){let{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}t.WalletLinkWebSocket=n},66529:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponse=void 0,t.isErrorResponse=function(e){return void 0!==e.errorMessage}},45876:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelayUI=void 0;let i=r(10598),n=r(14381),s=r(21282);class o{constructor(e){this.standalone=null,this.attached=!1,this.snackbar=new s.Snackbar({darkMode:e.darkMode}),this.linkFlow=new n.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");let e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.linkFlow.attach(t),this.snackbar.attach(t),this.attached=!0,(0,i.injectCssReset)()}setConnected(e){this.linkFlow.setConnected(e)}setChainId(e){this.linkFlow.setChainId(e)}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return null!==(e=this.standalone)&&void 0!==e&&e}}t.WalletLinkRelayUI=o},89469:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}"},5507:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletSteps=t.ConnectContent=void 0;let n=i(r(18573)),s=r(88049),o=r(85811),a=r(67124),l=r(26456),c=r(15588),u=r(89906),h=r(98829),d=r(12838),p=i(r(89469)),f={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",steps:y},g=e=>"light"===e?"#FFFFFF":"#0A0B0D";function m({title:e,description:t,theme:r}){return(0,s.h)("div",{className:(0,n.default)("-cbwsdk-connect-item",r)},(0,s.h)("div",null,(0,s.h)(c.CoinbaseWalletRound,null)),(0,s.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,s.h)("h3",{className:"-cbwsdk-connect-item-title"},e),(0,s.h)("p",{className:"-cbwsdk-connect-item-description"},t)))}function y({theme:e}){return(0,s.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,s.h)("li",{className:(0,n.default)("-cbwsdk-wallet-steps-item",e)},(0,s.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,s.h)("li",{className:(0,n.default)("-cbwsdk-wallet-steps-item",e)},(0,s.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,s.h)("span",null,"Tap ",(0,s.h)("strong",null,"Scan")," "),(0,s.h)("span",{className:(0,n.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,s.h)(u.QRCodeIcon,{fill:g(e)})))))}t.ConnectContent=function(e){let{theme:t}=e,r=(0,o.createQrUrl)(e.sessionId,e.sessionSecret,e.linkAPIUrl,e.isParentConnection,e.version,e.chainId),i=f.steps;return(0,s.h)("div",{"data-testid":"connect-content",className:(0,n.default)("-cbwsdk-connect-content",t)},(0,s.h)("style",null,p.default),(0,s.h)("div",{className:"-cbwsdk-connect-content-header"},(0,s.h)("h2",{className:(0,n.default)("-cbwsdk-connect-content-heading",t)},"Scan to connect with our mobile app"),e.onCancel&&(0,s.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:e.onCancel},(0,s.h)(l.CloseIcon,{fill:"light"===t?"#0A0B0D":"#FFFFFF"}))),(0,s.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,s.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,s.h)(m,{title:f.title,description:f.description,theme:t})),(0,s.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,s.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,s.h)(h.QRCode,{content:r,width:200,height:200,fgColor:"#000",bgColor:"transparent"}),(0,s.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:a.LIB_VERSION}),(0,s.h)("input",{type:"hidden",value:r})),(0,s.h)(i,{theme:t}),!e.isConnected&&(0,s.h)("div",{"data-testid":"connecting-spinner",className:(0,n.default)("-cbwsdk-connect-content-qr-connecting",t)},(0,s.h)(d.Spinner,{size:36,color:"dark"===t?"#FFF":"#000"}),(0,s.h)("p",null,"Connecting...")))))},t.CoinbaseWalletSteps=y},68818:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}"},71600:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectDialog=void 0;let n=i(r(18573)),s=r(88049),o=r(87060),a=r(5507),l=r(23225),c=i(r(68818));t.ConnectDialog=e=>{let{isOpen:t,darkMode:r}=e,[i,u]=(0,o.useState)(!t),[h,d]=(0,o.useState)(!t);(0,o.useEffect)(()=>{let e=[window.setTimeout(()=>{d(!t)},10)];return t?u(!1):e.push(window.setTimeout(()=>{u(!0)},360)),()=>{e.forEach(window.clearTimeout)}},[t]);let p=r?"dark":"light";return(0,s.h)("div",{class:(0,n.default)("-cbwsdk-connect-dialog-container",i&&"-cbwsdk-connect-dialog-container-hidden")},(0,s.h)("style",null,c.default),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-connect-dialog-backdrop",p,h&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,s.h)("div",{class:"-cbwsdk-connect-dialog"},(0,s.h)("div",{class:(0,n.default)("-cbwsdk-connect-dialog-box",h&&"-cbwsdk-connect-dialog-box-hidden")},e.connectDisabled?null:(0,s.h)(a.ConnectContent,{theme:p,version:e.version,sessionId:e.sessionId,sessionSecret:e.sessionSecret,linkAPIUrl:e.linkAPIUrl,isConnected:e.isConnected,isParentConnection:e.isParentConnection,chainId:e.chainId,onCancel:e.onCancel}),(0,s.h)(l.TryExtensionContent,{theme:p}))))}},14381:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkFlow=void 0;let i=r(88049),n=r(71600);class s{constructor(e){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render()}setConnected(e){this.connected!==e&&(this.connected=e,this.render())}setChainId(e){this.chainId!==e&&(this.chainId=e,this.render())}detach(){var e;this.root&&((0,i.render)(null,this.root),null===(e=this.root.parentElement)||void 0===e||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,i.render)((0,i.h)(n.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}t.LinkFlow=s},98829:function(e,t,r){"use strict";var i=r(67133).Buffer,n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QRCode=void 0;let s=r(88049),o=r(87060),a=n(r(24864));t.QRCode=e=>{let[t,r]=(0,o.useState)("");return(0,o.useEffect)(()=>{var t,n;let s=new a.default({content:e.content,background:e.bgColor||"#ffffff",color:e.fgColor||"#000000",container:"svg",ecl:"M",width:null!==(t=e.width)&&void 0!==t?t:256,height:null!==(n=e.height)&&void 0!==n?n:256,padding:0,image:e.image}),o=i.from(s.svg(),"utf8").toString("base64");r(`data:image/svg+xml;base64,${o}`)},[e.bgColor,e.content,e.fgColor,e.height,e.image,e.width]),t?(0,s.h)("img",{src:t,alt:"QR Code"}):null}},24678:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"},1379:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectDialog=void 0;let n=i(r(18573)),s=r(88049),o=r(10598),a=r(62011),l=i(r(24678));class c{constructor(){this.root=null}attach(){let e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,o.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,s.render)(null,this.root),e&&(0,s.render)((0,s.h)(u,Object.assign({},e,{onDismiss:()=>{this.clear()}})),this.root))}}t.RedirectDialog=c;let u=({title:e,buttonText:t,darkMode:r,onButtonClick:i,onDismiss:o})=>(0,s.h)(a.SnackbarContainer,{darkMode:r},(0,s.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,s.h)("style",null,l.default),(0,s.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:o}),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-redirect-dialog-box",r?"dark":"light")},(0,s.h)("p",null,e),(0,s.h)("button",{onClick:i},t))))},67298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"},21282:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;let n=i(r(18573)),s=r(88049),o=r(87060),a=i(r(67298));class l{constructor(e){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=e.darkMode}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){let t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,s.render)((0,s.h)("div",null,(0,s.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,r])=>(0,s.h)(t.SnackbarInstance,Object.assign({},r,{key:e}))))),this.root)}}t.Snackbar=l,t.SnackbarContainer=e=>(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-container")},(0,s.h)("style",null,a.default),(0,s.h)("div",{class:"-cbwsdk-snackbar"},e.children)),t.SnackbarInstance=({autoExpand:e,message:t,menuItems:r})=>{let[i,a]=(0,o.useState)(!0),[l,c]=(0,o.useState)(null!=e&&e);return(0,o.useEffect)(()=>{let e=[window.setTimeout(()=>{a(!1)},1),window.setTimeout(()=>{c(!0)},1e4)];return()=>{e.forEach(window.clearTimeout)}}),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance",i&&"-cbwsdk-snackbar-instance-hidden",l&&"-cbwsdk-snackbar-instance-expanded")},(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{c(!l)}},(0,s.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),(0,s.h)("div",{class:"-gear-container"},!l&&(0,s.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,s.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((e,t)=>(0,s.h)("div",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,s.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,s.h)("span",{class:(0,n.default)("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info)))))}},62011:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(21282),t)},64323:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}"},12838:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0;let n=r(88049),s=i(r(64323));t.Spinner=e=>{var t;let r=null!==(t=e.size)&&void 0!==t?t:64,i=e.color||"#000";return(0,n.h)("div",{class:"-cbwsdk-spinner"},(0,n.h)("style",null,s.default),(0,n.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:r,height:r}},(0,n.h)("circle",{style:{cx:50,cy:50,r:45,stroke:i}})))}},9916:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}"},23225:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TryExtensionContent=void 0;let n=i(r(18573)),s=r(88049),o=r(87060),a=r(58788),l=r(67964),c=r(33694),u=i(r(9916));t.TryExtensionContent=function({theme:e}){let[t,r]=(0,o.useState)(!1),i=(0,o.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),h=(0,o.useCallback)(()=>{t?window.location.reload():(i(),r(!0))},[i,t]);return(0,s.h)("div",{class:(0,n.default)("-cbwsdk-try-extension",e)},(0,s.h)("style",null,u.default),(0,s.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,s.h)("h3",{class:(0,n.default)("-cbwsdk-try-extension-heading",e)},"Or try the Coinbase Wallet browser extension"),(0,s.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,s.h)("button",{class:(0,n.default)("-cbwsdk-try-extension-cta",e),onClick:h},t?"Refresh":"Install"),(0,s.h)("div",null,!t&&(0,s.h)(a.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:"light"===e?"#0052FF":"#588AF5"})))),(0,s.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,s.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,s.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,s.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,s.h)("span",{class:(0,n.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,s.h)(l.LaptopIcon,{fill:"light"===e?"#0A0B0D":"#FFFFFF"}))),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-try-extension-list-item-copy",e)},"Connect with dapps with just one click on your desktop browser")),(0,s.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,s.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,s.h)("span",{class:(0,n.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,s.h)(c.SafeIcon,{fill:"light"===e?"#0A0B0D":"#FFFFFF"}))),(0,s.h)("div",{class:(0,n.default)("-cbwsdk-try-extension-list-item-copy",e)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}},58788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowLeftIcon=void 0;let i=r(88049);t.ArrowLeftIcon=function(e){return(0,i.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}},26456:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseIcon=void 0;let i=r(88049);t.CloseIcon=function(e){return(0,i.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}},15588:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletRound=void 0;let i=r(88049);t.CoinbaseWalletRound=function(e){return(0,i.h)("svg",Object.assign({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("circle",{cx:"14",cy:"14",r:"14",fill:"#0052FF"}),(0,i.h)("path",{d:"M23.8521 14.0003C23.8521 19.455 19.455 23.8521 14.0003 23.8521C8.54559 23.8521 4.14844 19.455 4.14844 14.0003C4.14844 8.54559 8.54559 4.14844 14.0003 4.14844C19.455 4.14844 23.8521 8.54559 23.8521 14.0003Z",fill:"white"}),(0,i.h)("path",{d:"M11.1855 12.5042C11.1855 12.0477 11.1855 11.7942 11.2835 11.642C11.3814 11.4899 11.4793 11.3377 11.6261 11.287C11.8219 11.1855 12.0178 11.1855 12.5073 11.1855H15.4934C15.983 11.1855 16.1788 11.1855 16.3746 11.287C16.5215 11.3884 16.6683 11.4899 16.7173 11.642C16.8152 11.8449 16.8152 12.0477 16.8152 12.5042V15.4965C16.8152 15.953 16.8152 16.2066 16.7173 16.3587C16.6194 16.5109 16.5215 16.663 16.3746 16.7137C16.1788 16.8152 15.983 16.8152 15.4934 16.8152H12.5073C12.0178 16.8152 11.8219 16.8152 11.6261 16.7137C11.4793 16.6123 11.3324 16.5109 11.2835 16.3587C11.1855 16.1558 11.1855 15.953 11.1855 15.4965V12.5042Z",fill:"#0052FF"}))}},67964:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaptopIcon=void 0;let i=r(88049);t.LaptopIcon=function(e){return(0,i.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,i.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}},89906:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRCodeIcon=void 0;let i=r(88049);t.QRCodeIcon=function(e){return(0,i.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,i.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,i.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,i.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}},33694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafeIcon=void 0;let i=r(88049);t.SafeIcon=function(e){return(0,i.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,i.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}},82341:function(e,t,r){var i=r(67133).Buffer;let n=r(17783),s=r(56662);function o(e){if(e.startsWith("int["))return"int256"+e.slice(3);if("int"===e)return"int256";if(e.startsWith("uint["))return"uint256"+e.slice(4);if("uint"===e)return"uint256";if(e.startsWith("fixed["))return"fixed128x128"+e.slice(5);if("fixed"===e)return"fixed128x128";if(e.startsWith("ufixed["))return"ufixed128x128"+e.slice(6);else if("ufixed"===e)return"ufixed128x128";return e}function a(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function l(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function c(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function u(e){var t=typeof e;if("string"===t)return n.isHexString(e)?new s(n.stripHexPrefix(e),16):new s(e,10);if("number"===t)return new s(e);if(e.toArray)return e;throw Error("Argument is not a number")}function h(e,t){if("address"===e)return h("uint160",u(t));if("bool"===e)return h("uint8",t?1:0);if("string"===e)return h("bytes",new i(t,"utf8"));if((f=e).lastIndexOf("]")===f.length-1){if(void 0===t.length)throw Error("Not an array?");if("dynamic"!==(r=c(e))&&0!==r&&t.length>r)throw Error("Elements exceed array size: "+r);for(p in d=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)d.push(h(e,t[p]));if("dynamic"===r){var r,o,d,p,f,g=h("uint256",t.length);d.unshift(g)}return i.concat(d)}if("bytes"===e)return t=new i(t),d=i.concat([h("uint256",t.length),t]),t.length%32!=0&&(d=i.concat([d,n.zeros(32-t.length%32)])),d;if(e.startsWith("bytes")){if((r=a(e))<1||r>32)throw Error("Invalid bytes<N> width: "+r);return n.setLengthRight(t,32)}else if(e.startsWith("uint")){if((r=a(e))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);if((o=u(t)).bitLength()>r)throw Error("Supplied uint exceeds width: "+r+" vs "+o.bitLength());if(o<0)throw Error("Supplied uint is negative");return o.toArrayLike(i,"be",32)}else if(e.startsWith("int")){if((r=a(e))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);if((o=u(t)).bitLength()>r)throw Error("Supplied int exceeds width: "+r+" vs "+o.bitLength());return o.toTwos(256).toArrayLike(i,"be",32)}else if(e.startsWith("ufixed")){if(r=l(e),(o=u(t))<0)throw Error("Supplied ufixed is negative");return h("uint256",o.mul(new s(2).pow(new s(r[1]))))}else if(e.startsWith("fixed"))return r=l(e),h("int256",u(t).mul(new s(2).pow(new s(r[1]))));throw Error("Unsupported or invalid type: "+e)}function d(e,t){if(e.length!==t.length)throw Error("Number of types are not matching the values");for(var r,s,l=[],c=0;c<e.length;c++){var h=o(e[c]),d=t[c];if("bytes"===h)l.push(d);else if("string"===h)l.push(new i(d,"utf8"));else if("bool"===h)l.push(new i(d?"01":"00","hex"));else if("address"===h)l.push(n.setLength(d,20));else if(h.startsWith("bytes")){if((r=a(h))<1||r>32)throw Error("Invalid bytes<N> width: "+r);l.push(n.setLengthRight(d,r))}else if(h.startsWith("uint")){if((r=a(h))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);if((s=u(d)).bitLength()>r)throw Error("Supplied uint exceeds width: "+r+" vs "+s.bitLength());l.push(s.toArrayLike(i,"be",r/8))}else if(h.startsWith("int")){if((r=a(h))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);if((s=u(d)).bitLength()>r)throw Error("Supplied int exceeds width: "+r+" vs "+s.bitLength());l.push(s.toTwos(r).toArrayLike(i,"be",r/8))}else throw Error("Unsupported or invalid type: "+h)}return i.concat(l)}e.exports={rawEncode:function(e,t){var r=[],n=[],s=32*e.length;for(var a in e){var l=o(e[a]),u=h(l,t[a]);"string"===l||"bytes"===l||"dynamic"===c(l)?(r.push(h("uint256",s)),n.push(u),s+=u.length):r.push(u)}return i.concat(r.concat(n))},solidityPack:d,soliditySHA3:function(e,t){return n.keccak(d(e,t))}}},86642:function(e,t,r){var i=r(67133).Buffer;let n=r(17783),s=r(82341),o={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},a={encodeData(e,t,r,o=!0){let a=["bytes32"],l=[this.hashType(e,r)];if(o){let c=(e,t,a)=>{if(void 0!==r[t])return["bytes32",null==a?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(this.encodeData(t,a,r,o))];if(void 0===a)throw Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",n.keccak(a)];if("string"===t)return"string"==typeof a&&(a=i.from(a,"utf8")),["bytes32",n.keccak(a)];if(t.lastIndexOf("]")===t.length-1){let r=t.slice(0,t.lastIndexOf("[")),i=a.map(t=>c(e,r,t));return["bytes32",n.keccak(s.rawEncode(i.map(([e])=>e),i.map(([,e])=>e)))]}return[t,a]};for(let i of r[e]){let[e,r]=c(i.name,i.type,t[i.name]);a.push(e),l.push(r)}}else for(let s of r[e]){let e=t[s.name];if(void 0!==e){if("bytes"===s.type)a.push("bytes32"),e=n.keccak(e),l.push(e);else if("string"===s.type)a.push("bytes32"),"string"==typeof e&&(e=i.from(e,"utf8")),e=n.keccak(e),l.push(e);else if(void 0!==r[s.type])a.push("bytes32"),e=n.keccak(this.encodeData(s.type,e,r,o)),l.push(e);else if(s.type.lastIndexOf("]")===s.type.length-1)throw Error("Arrays currently unimplemented in encodeData");else a.push(s.type),l.push(e)}}return s.rawEncode(a,l)},encodeType(e,t){let r="",i=this.findTypeDependencies(e,t).filter(t=>t!==e);for(let n of i=[e].concat(i.sort())){if(!t[n])throw Error("No type definition specified: "+n);r+=n+"("+t[n].map(({name:e,type:t})=>t+" "+e).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;for(let i of(r.push(e),t[e]))for(let e of this.findTypeDependencies(i.type,t,r))r.includes(e)||r.push(e);return r},hashStruct(e,t,r,i=!0){return n.keccak(this.encodeData(e,t,r,i))},hashType(e,t){return n.keccak(this.encodeType(e,t))},sanitizeData(e){let t={};for(let r in o.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){let r=this.sanitizeData(e),s=[i.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&s.push(this.hashStruct(r.primaryType,r.message,r.types,t)),n.keccak(i.concat(s))}};e.exports={TYPED_MESSAGE_SCHEMA:o,TypedDataUtils:a,hashForSignTypedDataLegacy:function(e){return function(e){let t=Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;let r=e.map(function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value}),i=e.map(function(e){return e.type}),o=e.map(function(e){if(!e.name)throw t;return e.type+" "+e.name});return s.soliditySHA3(["bytes32","bytes32"],[s.soliditySHA3(Array(e.length).fill("string"),o),s.soliditySHA3(i,r)])}(e.data)},hashForSignTypedData_v3:function(e){return a.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return a.hash(e.data)}}},17783:function(e,t,r){var i=r(67133).Buffer;let n=r(26961),s=r(56662);function o(e){return i.allocUnsafe(e).fill(0)}function a(e,t,r){let i=o(t);return(e=l(e),r)?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)}function l(e){if(!i.isBuffer(e)){if(Array.isArray(e))e=i.from(e);else if("string"==typeof e){var t;e=c(e)?i.from((t=u(e)).length%2?"0"+t:t,"hex"):i.from(e)}else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=i.allocUnsafe(0);else if(s.isBN(e))e=e.toArrayLike(i);else if(e.toArray)e=i.from(e.toArray());else throw Error("invalid type")}return e}function c(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function u(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:o,setLength:a,setLengthRight:function(e,t){return a(e,t,!0)},isHexString:c,stripHexPrefix:u,toBuffer:l,bufferToHex:function(e){return"0x"+(e=l(e)).toString("hex")},keccak:function(e,t){return e=l(e),t||(t=256),n("keccak"+t).update(e).digest()}}},24864:function(e){function t(e){this.mode=i.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var n=[],s=this.data.charCodeAt(t);s>65536?(n[0]=240|(1835008&s)>>>18,n[1]=128|(258048&s)>>>12,n[2]=128|(4032&s)>>>6,n[3]=128|63&s):s>2048?(n[0]=224|(61440&s)>>>12,n[1]=128|(4032&s)>>>6,n[2]=128|63&s):s>128?(n[0]=192|(1984&s)>>>6,n[1]=128|63&s):n[0]=s,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}},r.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1)&&!(this.moduleCount<=e+r))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(0<=r&&r<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=i&&i<=4?this.modules[e+r][t+i]=!0:this.modules[e+r][t+i]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var i=o.getLostPoint(this);(0==r||e>i)&&(e=i,t=r)}return t},createMovieClip:function(e,t,r){var i=e.createEmptyMovieClip(t,r);this.make();for(var n=0;n<this.modules.length;n++)for(var s=1*n,o=0;o<this.modules[n].length;o++){var a=1*o;this.modules[n][o]&&(i.beginFill(0,100),i.moveTo(a,s),i.lineTo(a+1,s),i.lineTo(a+1,s+1),i.lineTo(a,s+1),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=o.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var i=e[t],n=e[r];if(null==this.modules[i][n])for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2==s||2==s||-2==a||2==a||0==s&&0==a?this.modules[i+s][n+a]=!0:this.modules[i+s][n+a]=!1}},setupTypeNumber:function(e){for(var t=o.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var i=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=i}for(var r=0;r<18;r++){var i=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=i}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,i=o.getBCHTypeInfo(r),n=0;n<15;n++){var s=!e&&(i>>n&1)==1;n<6?this.modules[n][8]=s:n<8?this.modules[n+1][8]=s:this.modules[this.moduleCount-15+n][8]=s}for(var n=0;n<15;n++){var s=!e&&(i>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=s:n<9?this.modules[8][15-n-1+1]=s:this.modules[8][15-n-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,i=this.moduleCount-1,n=7,s=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var l=0;l<2;l++)if(null==this.modules[i][a-l]){var c=!1;s<e.length&&(c=(e[s]>>>n&1)==1),o.getMask(t,i,a-l)&&(c=!c),this.modules[i][a-l]=c,-1==--n&&(s++,n=7)}if((i+=r)<0||this.moduleCount<=i){i-=r,r=-r;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(e,t,i){for(var n=u.getRSBlocks(e,t),s=new h,a=0;a<i.length;a++){var l=i[a];s.put(l.mode,4),s.put(l.getLength(),o.getLengthInBits(l.mode,e)),l.write(s)}for(var c=0,a=0;a<n.length;a++)c+=n[a].dataCount;if(s.getLengthInBits()>8*c)throw Error("code length overflow. ("+s.getLengthInBits()+">"+8*c+")");for(s.getLengthInBits()+4<=8*c&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*c)&&(s.put(r.PAD0,8),!(s.getLengthInBits()>=8*c));)s.put(r.PAD1,8);return r.createBytes(s,n)},r.createBytes=function(e,t){for(var r=0,i=0,n=0,s=Array(t.length),a=Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,h=t[l].totalCount-u;i=Math.max(i,u),n=Math.max(n,h),s[l]=Array(u);for(var d=0;d<s[l].length;d++)s[l][d]=255&e.buffer[d+r];r+=u;var p=o.getErrorCorrectPolynomial(h),f=new c(s[l],p.getLength()-1).mod(p);a[l]=Array(p.getLength()-1);for(var d=0;d<a[l].length;d++){var g=d+f.getLength()-a[l].length;a[l][d]=g>=0?f.get(g):0}}for(var m=0,d=0;d<t.length;d++)m+=t[d].totalCount;for(var y=Array(m),v=0,d=0;d<i;d++)for(var l=0;l<t.length;l++)d<s[l].length&&(y[v++]=s[l][d]);for(var d=0;d<n;d++)for(var l=0;l<t.length;l++)d<a[l].length&&(y[v++]=a[l][d]);return y};for(var i={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;o.getBCHDigit(t)-o.getBCHDigit(o.G15)>=0;)t^=o.G15<<o.getBCHDigit(t)-o.getBCHDigit(o.G15);return(e<<10|t)^o.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;o.getBCHDigit(t)-o.getBCHDigit(o.G18)>=0;)t^=o.G18<<o.getBCHDigit(t)-o.getBCHDigit(o.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return o.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case s.PATTERN000:return(t+r)%2==0;case s.PATTERN001:return t%2==0;case s.PATTERN010:return r%3==0;case s.PATTERN011:return(t+r)%3==0;case s.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case s.PATTERN101:return t*r%2+t*r%3==0;case s.PATTERN110:return(t*r%2+t*r%3)%2==0;case s.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new c([1],0),r=0;r<e;r++)t=t.multiply(new c([1,a.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:case i.MODE_KANJI:return 8;default:throw Error("mode:"+e)}else if(t<27)switch(e){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw Error("mode:"+e)}else if(t<41)switch(e){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw Error("mode:"+e)}else throw Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,i=0;i<t;i++)for(var n=0;n<t;n++){for(var s=0,o=e.isDark(i,n),a=-1;a<=1;a++)if(!(i+a<0)&&!(t<=i+a))for(var l=-1;l<=1;l++)!(n+l<0)&&!(t<=n+l)&&(0!=a||0!=l)&&o==e.isDark(i+a,n+l)&&s++;s>5&&(r+=3+s-5)}for(var i=0;i<t-1;i++)for(var n=0;n<t-1;n++){var c=0;e.isDark(i,n)&&c++,e.isDark(i+1,n)&&c++,e.isDark(i,n+1)&&c++,e.isDark(i+1,n+1)&&c++,(0==c||4==c)&&(r+=3)}for(var i=0;i<t;i++)for(var n=0;n<t-6;n++)e.isDark(i,n)&&!e.isDark(i,n+1)&&e.isDark(i,n+2)&&e.isDark(i,n+3)&&e.isDark(i,n+4)&&!e.isDark(i,n+5)&&e.isDark(i,n+6)&&(r+=40);for(var n=0;n<t;n++)for(var i=0;i<t-6;i++)e.isDark(i,n)&&!e.isDark(i+1,n)&&e.isDark(i+2,n)&&e.isDark(i+3,n)&&e.isDark(i+4,n)&&!e.isDark(i+5,n)&&e.isDark(i+6,n)&&(r+=40);for(var u=0,n=0;n<t;n++)for(var i=0;i<t;i++)e.isDark(i,n)&&u++;return r+Math.abs(100*u/t/t-50)/5*10}},a={glog:function(e){if(e<1)throw Error("glog("+e+")");return a.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return a.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},l=0;l<8;l++)a.EXP_TABLE[l]=1<<l;for(var l=8;l<256;l++)a.EXP_TABLE[l]=a.EXP_TABLE[l-4]^a.EXP_TABLE[l-5]^a.EXP_TABLE[l-6]^a.EXP_TABLE[l-8];for(var l=0;l<255;l++)a.LOG_TABLE[a.EXP_TABLE[l]]=l;function c(e,t){if(void 0==e.length)throw Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=Array(e.length-r+t);for(var i=0;i<e.length-r;i++)this.num[i]=e[i+r]}function u(e,t){this.totalCount=e,this.dataCount=t}function h(){this.buffer=[],this.length=0}c.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var i=0;i<e.getLength();i++)t[r+i]^=a.gexp(a.glog(this.get(r))+a.glog(e.get(i)));return new c(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=a.glog(this.get(0))-a.glog(e.get(0)),r=Array(this.getLength()),i=0;i<this.getLength();i++)r[i]=this.get(i);for(var i=0;i<e.getLength();i++)r[i]^=a.gexp(a.glog(e.get(i))+t);return new c(r,0).mod(e)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(e,t){var r=u.getRsBlockTable(e,t);if(void 0==r)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=r.length/3,n=[],s=0;s<i;s++)for(var o=r[3*s+0],a=r[3*s+1],l=r[3*s+2],c=0;c<o;c++)n.push(new u(a,l));return n},u.getRsBlockTable=function(e,t){switch(t){case n.L:return u.RS_BLOCK_TABLE[(e-1)*4+0];case n.M:return u.RS_BLOCK_TABLE[(e-1)*4+1];case n.Q:return u.RS_BLOCK_TABLE[(e-1)*4+2];case n.H:return u.RS_BLOCK_TABLE[(e-1)*4+3];default:return}},h.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var d=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function p(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},"string"==typeof e&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if("string"!=typeof this.options.content)throw Error("Expected 'content' as string!");if(0===this.options.content.length)throw Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw Error("Expected 'width' or 'height' value to be higher than zero!");var i=this.options.content,s=function(e,t){for(var r,i=(r=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+(r.length!=e?3:0),n=1,s=0,o=0,a=d.length;o<=a;o++){var l=d[o];if(!l)throw Error("Content too long: expected "+s+" but got "+i);switch(t){case"L":s=l[0];break;case"M":s=l[1];break;case"Q":s=l[2];break;case"H":s=l[3];break;default:throw Error("Unknwon error correction level: "+t)}if(i<=s)break;n++}if(n>d.length)throw Error("Content too long");return n}(i,this.options.ecl),o=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new r(s,o),this.qrcode.addData(i),this.qrcode.make()}p.prototype.svg=function(e){var t=this.options||{},r=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var i=void 0===t.pretty||!!t.pretty,n=i?"  ":"",s=i?"\r\n":"",o=t.width,a=t.height,l=r.length,c=o/(l+2*t.padding),u=a/(l+2*t.padding),h=void 0!==t.join&&!!t.join,d=void 0!==t.swap&&!!t.swap,p=void 0===t.xmlDeclaration||!!t.xmlDeclaration,f=void 0!==t.predefined&&!!t.predefined,g=f?n+'<defs><path id="qrmodule" d="M0 0 h'+u+" v"+c+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+s:"",m=n+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+s,y="",v="",b=0;b<l;b++)for(var w=0;w<l;w++)if(r[w][b]){var E=w*c+t.padding*c,_=b*u+t.padding*u;if(d){var C=E;E=_,_=C}if(h){var S=c+E,I=u+_;E=Number.isInteger(E)?Number(E):E.toFixed(2),_=Number.isInteger(_)?Number(_):_.toFixed(2),S=Number.isInteger(S)?Number(S):S.toFixed(2),v+="M"+E+","+_+" V"+(I=Number.isInteger(I)?Number(I):I.toFixed(2))+" H"+S+" V"+_+" H"+E+" Z "}else f?y+=n+'<use x="'+E.toString()+'" y="'+_.toString()+'" href="#qrmodule" />'+s:y+=n+'<rect x="'+E.toString()+'" y="'+_.toString()+'" width="'+c+'" height="'+u+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+s}h&&(y=n+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+v+'" />');let x="";if(void 0!==this.options.image&&this.options.image.svg){let e=o*this.options.image.width/100,t=a*this.options.image.height/100;x+=`<svg x="${o/2-e/2}" y="${a/2-t/2}" width="${e}" height="${t}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`+(this.options.image.svg+s)+"</svg>"}var A="";switch(e.container){case"svg":p&&(A+='<?xml version="1.0" standalone="yes"?>'+s),A+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s+(g+m+y)+x+"</svg>";break;case"svg-viewbox":p&&(A+='<?xml version="1.0" standalone="yes"?>'+s),A+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s+(g+m+y)+x+"</svg>";break;case"g":A+='<g width="'+o+'" height="'+a+'">'+s+(g+m+y)+x+"</g>";break;default:A+=(g+m+y+x).replace(/^\s+/,"")}return A},e.exports=p},67124:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIB_VERSION=void 0,t.LIB_VERSION="3.9.3"},18573:function(e,t,r){"use strict";function i(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i);else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(i&&(i+=" "),i+=t);return i}r.r(t),r.d(t,{clsx:function(){return i}}),t.default=i},9366:function(e,t,r){var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();(function(e){var t=void 0!==n&&n||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function d(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function p(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(i.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return h(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(i.blob)return this.blob().then(p);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,i,n,s=h(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),n=(i=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?i[1]:"utf-8",t.readAsText(e,n),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=a(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=l(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},i.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,r){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(r=r||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new u(r.headers)),this.method=(n=(i=r.method||this.method||"GET").toUpperCase(),m.indexOf(n)>-1?n:i),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var w=[301,302,303,307,308];b.redirect=function(e,t){if(-1===w.indexOf(t))throw RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(r,n){return new Promise(function(s,o){var c=new y(r,n);if(c.signal&&c.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function d(){h.abort()}if(h.onload=function(){var e,t,r={statusText:h.statusText,headers:(e=h.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();try{t.append(i,n)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(h.status<200||h.status>599)?r.status=200:r.status=h.status,r.url="responseURL"in h?h.responseURL:r.headers.get("X-Request-URL");var i="response"in h?h.response:h.responseText;setTimeout(function(){s(new b(i,r))},0)},h.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},h.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},h.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},h.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?h.withCredentials=!0:"omit"===c.credentials&&(h.withCredentials=!1),"responseType"in h&&(i.blob?h.responseType="blob":i.arrayBuffer&&(h.responseType="arraybuffer")),n&&"object"==typeof n.headers&&!(n.headers instanceof u||t.Headers&&n.headers instanceof t.Headers)){var p=[];Object.getOwnPropertyNames(n.headers).forEach(function(e){p.push(a(e)),h.setRequestHeader(e,l(n.headers[e]))}),c.headers.forEach(function(e,t){-1===p.indexOf(t)&&h.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){h.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",d),h.onreadystatechange=function(){4===h.readyState&&c.signal.removeEventListener("abort",d)}),h.send(void 0===c._bodyInit?null:c._bodyInit)})}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=u,t.Request=y,t.Response=b),e.Headers=u,e.Request=y,e.Response=b,e.fetch=E})({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=i.fetch?i:n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},74548:function(e){var t,r,i,n,s,o,a,l,c,u,h,d,p,f,g,m,y,v,b,w,E,_;e.exports=(t="millisecond",r="second",i="minute",n="hour",s="week",o="month",a="quarter",l="year",c="date",u="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p=function(e,t,r){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(r)+e},(g={})[f="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}},m="$isDayjsObject",y=function(e){return e instanceof E||!(!e||!e[m])},v=function e(t,r,i){var n;if(!t)return f;if("string"==typeof t){var s=t.toLowerCase();g[s]&&(n=s),r&&(g[s]=r,n=s);var o=t.split("-");if(!n&&o.length>1)return e(o[0])}else{var a=t.name;g[a]=t,n=a}return!i&&n&&(f=n),n||!i&&f},b=function(e,t){if(y(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new E(r)},(w={s:p,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+p(Math.floor(r/60),2,"0")+":"+p(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var i=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(i,o),s=r-n<0,a=t.clone().add(i+(s?-1:1),o);return+(-(i+(r-n)/(s?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return({M:o,y:l,w:s,d:"day",D:c,h:n,m:i,s:r,ms:t,Q:a})[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}}).l=v,w.i=y,w.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},_=(E=function(){function e(e){this.$L=v(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[m]=!0}var p=e.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(h);if(i){var n=i[2]-1||0,s=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return this.$d.toString()!==u},p.isSame=function(e,t){var r=b(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return b(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<b(e)},p.$g=function(e,t,r){return w.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,t){var a=this,u=!!w.u(t)||t,h=w.p(e),d=function(e,t){var r=w.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return u?r:r.endOf("day")},p=function(e,t){return w.w(a.toDate()[e].apply(a.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},f=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case l:return u?d(1,0):d(31,11);case o:return u?d(1,g):d(0,g+1);case s:var v=this.$locale().weekStart||0,b=(f<v?f+7:f)-v;return d(u?m-b:m+(6-b),g);case"day":case c:return p(y+"Hours",0);case n:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case r:return p(y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(e,s){var a,u=w.p(e),h="set"+(this.$u?"UTC":""),d=((a={}).day=h+"Date",a[c]=h+"Date",a[o]=h+"Month",a[l]=h+"FullYear",a[n]=h+"Hours",a[i]=h+"Minutes",a[r]=h+"Seconds",a[t]=h+"Milliseconds",a)[u],p="day"===u?this.$D+(s-this.$W):s;if(u===o||u===l){var f=this.clone().set(c,1);f.$d[d](p),f.init(),this.$d=f.set(c,Math.min(this.$D,f.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[w.p(e)]()},p.add=function(e,t){var a,c=this;e=Number(e);var u=w.p(t),h=function(t){var r=b(c);return w.w(r.date(r.date()+Math.round(t*e)),c)};if(u===o)return this.set(o,this.$M+e);if(u===l)return this.set(l,this.$y+e);if("day"===u)return h(1);if(u===s)return h(7);var d=((a={})[i]=6e4,a[n]=36e5,a[r]=1e3,a)[u]||1,p=this.$d.getTime()+e*d;return w.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var i=e||"YYYY-MM-DDTHH:mm:ssZ",n=w.z(this),s=this.$H,o=this.$m,a=this.$M,l=r.weekdays,c=r.months,h=r.meridiem,p=function(e,r,n,s){return e&&(e[r]||e(t,i))||n[r].slice(0,s)},f=function(e){return w.s(s%12||12,e,"0")},g=h||function(e,t,r){var i=e<12?"AM":"PM";return r?i.toLowerCase():i};return i.replace(d,function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return w.s(t.$y,4,"0");case"M":return a+1;case"MM":return w.s(a+1,2,"0");case"MMM":return p(r.monthsShort,a,c,3);case"MMMM":return p(c,a);case"D":return t.$D;case"DD":return w.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(r.weekdaysMin,t.$W,l,2);case"ddd":return p(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(s);case"HH":return w.s(s,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return g(s,o,!0);case"A":return g(s,o,!1);case"m":return String(o);case"mm":return w.s(o,2,"0");case"s":return String(t.$s);case"ss":return w.s(t.$s,2,"0");case"SSS":return w.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,t,c){var u,h=this,d=w.p(t),p=b(e),f=(p.utcOffset()-this.utcOffset())*6e4,g=this-p,m=function(){return w.m(h,p)};switch(d){case l:u=m()/12;break;case o:u=m();break;case a:u=m()/3;break;case s:u=(g-f)/6048e5;break;case"day":u=(g-f)/864e5;break;case n:u=g/36e5;break;case i:u=g/6e4;break;case r:u=g/1e3;break;default:u=g}return c?u:w.a(u)},p.daysInMonth=function(){return this.endOf(o).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),i=v(e,t,!0);return i&&(r.$L=i),r},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},e}()).prototype,b.prototype=_,[["$ms",t],["$s",r],["$m",i],["$H",n],["$W","day"],["$M",o],["$y",l],["$D",c]].forEach(function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),b.extend=function(e,t){return e.$i||(e(t,E,b),e.$i=!0),b},b.locale=v,b.isDayjs=y,b.unix=function(e){return b(1e3*e)},b.en=g[f],b.Ls=g,b.p={},b)},93330:function(e){e.exports={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}}},6537:function(e){e.exports=function(e,t,r){e=e||{};var i=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,n){return i.fromToBase(e,t,r,n)}r.en.relativeTime=n,i.fromToBase=function(t,i,s,o,a){for(var l,c,u,h=s.$locale().relativeTime||n,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=d.length,f=0;f<p;f+=1){var g=d[f];g.d&&(l=o?r(t).diff(s,g.d,!0):s.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(l));if(u=l>0,m<=g.r||!g.r){m<=1&&f>0&&(g=d[f-1]);var y=h[g.l];a&&(m=a(""+m)),c="string"==typeof y?y.replace("%d",m):y(m,i,g.l,u);break}}if(i)return c;var v=u?h.future:h.past;return"function"==typeof v?v(c):v.replace("%s",c)},i.to=function(e,t){return s(e,t,this,!0)},i.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?r.utc():r()};i.toNow=function(e){return this.to(o(this),e)},i.fromNow=function(e){return this.from(o(this),e)}}},20239:function(e){e.exports=function(e,t,r){r.updateLocale=function(e,t){var i=r.Ls[e];if(i)return(t?Object.keys(t):[]).forEach(function(e){i[e]=t[e]}),i}}},4461:function(e,t,r){let i;var n=r(62601);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(i=!1,()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(84239)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},84239:function(e,t,r){e.exports=function(e){function t(e){let r,n,s;let o=null;function a(...e){if(!a.enabled)return;let i=Number(new Date),n=i-(r||i);a.diff=n,a.prev=r,a.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";s++;let n=t.formatters[i];if("function"==typeof n){let t=e[s];r=n.call(a,t),e.splice(s,1),s--}return r}),t.formatArgs.call(a,e),(a.log||t.log).apply(a,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){let i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e,t){let r=0,i=0,n=-1,s=0;for(;r<e.length;)if(i<t.length&&(t[i]===e[r]||"*"===t[i]))"*"===t[i]?(n=i,s=r):r++,i++;else{if(-1===n)return!1;i=n+1,r=++s}for(;i<t.length&&"*"===t[i];)i++;return i===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){for(let r of(t.save(e),t.namespaces=e,t.names=[],t.skips=[],("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean)))"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(let r of t.skips)if(n(e,r))return!1;for(let r of t.names)if(n(e,r))return!0;return!1},t.humanize=r(60438),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},9122:function(e,t,r){"use strict";var i=r(50228),n=r(39819),s=r(35281),o=r(67526);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!o&&o(e,t);if(i)i(e,t,{configurable:null===c&&h?h.configurable:!c,enumerable:null===a&&h?h.enumerable:!a,value:r,writable:null===l&&h?h.writable:!l});else if(!u&&(a||l||c))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},69954:function(e,t,r){"use strict";r.d(t,{qY:function(){return p}});var i=r(62601),n=function(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},s=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=i.platform},a=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},l=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},c=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],d=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(e){return e?f(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new c:"undefined"!=typeof navigator?f(navigator.userAgent):void 0!==i&&i.version?new o(i.version.slice(1)):null}function f(e){var t=""!==e&&h.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new l;var o=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);o?o.length<3&&(o=n(n([],o,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-o.length),!0)):o=[];var c=o.join("."),p=function(e){for(var t=0,r=d.length;t<r;t++){var i=d[t],n=i[0];if(i[1].exec(e))return n}return null}(e),f=u.exec(e);return f&&f[1]?new a(r,c,p,f[1]):new s(r,c,p)}},78343:function(e){"use strict";var t={single_source_shortest_paths:function(e,r,i){var n,s,o,a,l,c,u,h={},d={};d[r]=0;var p=t.PriorityQueue.make();for(p.push(r,0);!p.empty();)for(o in s=(n=p.pop()).value,a=n.cost,l=e[s]||{})l.hasOwnProperty(o)&&(c=a+l[o],u=d[o],(void 0===d[o]||u>c)&&(d[o]=c,p.push(o,c),h[o]=s));if(void 0!==i&&void 0===d[i])throw Error(["Could not find a path from ",r," to ",i,"."].join(""));return h},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],i=t;i;)r.push(i),e[i],i=e[i];return r.reverse(),r},find_path:function(e,r,i){var n=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(e){var r,i=t.PriorityQueue,n={};for(r in e=e||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);return n.queue=[],n.sorter=e.sorter||i.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},4236:function(e,t,r){"use strict";var i,n=r(9166),s=r(67526);try{i=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var o=!!i&&s&&s(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=o&&"function"==typeof o.get?n([o.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},53216:function(e){"use strict";e.exports=function(e){for(var t=[],r=e.length,i=0;i<r;i++){var n=e.charCodeAt(i);if(n>=55296&&n<=56319&&r>i+1){var s=e.charCodeAt(i+1);s>=56320&&s<=57343&&(n=(n-55296)*1024+s-56320+65536,i+=1)}if(n<128){t.push(n);continue}if(n<2048){t.push(n>>6|192),t.push(63&n|128);continue}if(n<55296||n>=57344&&n<65536){t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128);continue}if(n>=65536&&n<=1114111){t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}},50228:function(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},31618:function(e){"use strict";e.exports=EvalError},31330:function(e){"use strict";e.exports=Error},87698:function(e){"use strict";e.exports=RangeError},5905:function(e){"use strict";e.exports=ReferenceError},39819:function(e){"use strict";e.exports=SyntaxError},35281:function(e){"use strict";e.exports=TypeError},33880:function(e){"use strict";e.exports=URIError},56976:function(e){"use strict";e.exports=Object},68590:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBlockTracker=void 0;let n=i(r(69930)),s=(e,t)=>e+t,o=["sync","latest"];class a extends n.default{constructor(e){super(),this._blockResetDuration=e.blockResetDuration||2e4,this._usePastBlocks=e.usePastBlocks||!1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(e=>this.once("latest",e))}removeAllListeners(e){return e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e){o.includes(e)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return o.map(e=>this.listenerCount(e)).reduce(s)}_shouldUseNewBlock(e){let t=this._currentBlock;if(!t)return!0;let r=l(e),i=l(t);return this._usePastBlocks&&r<i||r>i}_newPotentialLatest(e){this._shouldUseNewBlock(e)&&this._setCurrentBlock(e)}_setCurrentBlock(e){let t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}function l(e){return Number.parseInt(e,16)}t.BaseBlockTracker=a},42399:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PollingBlockTracker=void 0;let n=i(r(21192)),s=i(r(81044)),o=r(68590),a=r(58378),l=(0,a.createModuleLogger)(a.projectLogger,"polling-block-tracker"),c=(0,n.default)();class u extends o.BaseBlockTracker{constructor(e={}){var t;if(!e.provider)throw Error("PollingBlockTracker - no provider specified.");super(Object.assign(Object.assign({},e),{blockResetDuration:null!==(t=e.blockResetDuration)&&void 0!==t?t:e.pollingInterval})),this._provider=e.provider,this._pollingInterval=e.pollingInterval||2e4,this._retryTimeout=e.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=void 0===e.keepEventLoopActive||e.keepEventLoopActive,this._setSkipCacheFlag=e.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var e;this._isRunning;)try{await this._updateLatestBlock();let e=h(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await e}catch(i){let t=Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${null!==(e=i.stack)&&void 0!==e?e:i}`);try{this.emit("error",t)}catch(e){console.error(t)}let r=h(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}}async _updateLatestBlock(){let e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){let e={jsonrpc:"2.0",id:c(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0),l("Making request",e);let t=await (0,s.default)(t=>this._provider.sendAsync(e,t))();if(l("Got response",t),t.error)throw Error(`PollingBlockTracker - encountered error fetching block:
${t.error.message}`);return t.result}}function h(e,t){return new Promise(r=>{let i=setTimeout(r,e);i.unref&&t&&i.unref()})}t.PollingBlockTracker=u},57826:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscribeBlockTracker=void 0;let n=i(r(21192)),s=r(68590),o=(0,n.default)();class a extends s.BaseBlockTracker{constructor(e={}){if(!e.provider)throw Error("SubscribeBlockTracker - no provider specified.");super(e),this._provider=e.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(void 0===this._subscriptionId||null===this._subscriptionId)try{let e=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(e)}catch(e){this.emit("error",e)}}async _end(){if(null!==this._subscriptionId&&void 0!==this._subscriptionId)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(e){this.emit("error",e)}}_call(e,...t){return new Promise((r,i)=>{this._provider.sendAsync({id:o(),method:e,params:t,jsonrpc:"2.0"},(e,t)=>{e?i(e):r(t.result)})})}_handleSubData(e,t){var r;"eth_subscription"===t.method&&(null===(r=t.params)||void 0===r?void 0:r.subscription)===this._subscriptionId&&this._newPotentialLatest(t.params.result.number)}}t.SubscribeBlockTracker=a},2704:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(42399),t),n(r(57826),t)},58378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.projectLogger=void 0;let i=r(98502);Object.defineProperty(t,"createModuleLogger",{enumerable:!0,get:function(){return i.createModuleLogger}}),t.projectLogger=(0,i.createProjectLogger)("eth-block-tracker")},10944:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertExhaustive=t.assertStruct=t.assert=t.AssertionError=void 0;let i=r(88424);function n(e,t){var r,i;return"string"==typeof(null===(i=null===(r=null==e?void 0:e.prototype)||void 0===r?void 0:r.constructor)||void 0===i?void 0:i.name)?new e({message:t}):e({message:t})}class s extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}t.AssertionError=s,t.assert=function(e,t="Assertion failed.",r=s){if(!e){if(t instanceof Error)throw t;throw n(r,t)}},t.assertStruct=function(e,t,r="Assertion failed",o=s){try{(0,i.assert)(e,t)}catch(e){throw n(o,`${r}: ${function(e){let t="object"==typeof e&&null!==e&&"message"in e?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},t.assertExhaustive=function(e){throw Error("Invalid branch reached. Should be detected during compilation.")}},74755:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0;let i=r(88424),n=r(10944);t.base64=(e,t={})=>{var r,s;let o,a;let l=null!==(r=t.paddingRequired)&&void 0!==r&&r,c=null!==(s=t.characterSet)&&void 0!==s?s:"base64";return"base64"===c?o=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===c),o=String.raw`[-_A-Za-z0-9]`),a=l?RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,i.pattern)(e,a)}},26411:function(e,t,r){"use strict";var i=r(67133).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createDataView=t.concatBytes=t.valueToBytes=t.stringToBytes=t.numberToBytes=t.signedBigIntToBytes=t.bigIntToBytes=t.hexToBytes=t.bytesToString=t.bytesToNumber=t.bytesToSignedBigInt=t.bytesToBigInt=t.bytesToHex=t.assertIsBytes=t.isBytes=void 0;let n=r(10944),s=r(68096),o=function(){let e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function a(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(a(e),"Value must be a Uint8Array.")}function c(e){if(l(e),0===e.length)return"0x";let t=o(),r=Array(e.length);for(let i=0;i<e.length;i++)r[i]=t[e[i]];return(0,s.add0x)(r.join(""))}function u(e){return l(e),BigInt(c(e))}function h(e){var t;if((null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e))==="0x")return new Uint8Array;(0,s.assertIsHexString)(e);let r=(0,s.remove0x)(e).toLowerCase(),i=r.length%2==0?r:`0${r}`,n=new Uint8Array(i.length/2);for(let e=0;e<n.length;e++){let t=i.charCodeAt(2*e),r=i.charCodeAt(2*e+1),s=t-(t<58?48:87),o=r-(r<58?48:87);n[e]=16*s+o}return n}function d(e){return(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint."),h(e.toString(16))}function p(e){return(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead."),h(e.toString(16))}function f(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),new TextEncoder().encode(e)}function g(e){if("bigint"==typeof e)return d(e);if("number"==typeof e)return p(e);if("string"==typeof e)return e.startsWith("0x")?h(e):f(e);if(a(e))return e;throw TypeError(`Unsupported value type: "${typeof e}".`)}t.isBytes=a,t.assertIsBytes=l,t.bytesToHex=c,t.bytesToBigInt=u,t.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(let r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},t.bytesToNumber=function(e){l(e);let t=u(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},t.bytesToString=function(e){return l(e),new TextDecoder().decode(e)},t.hexToBytes=h,t.bigIntToBytes=d,t.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);let r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t+-1))}(e,t),"Byte length is too small to represent the given value.");let r=e,i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()},t.numberToBytes=p,t.stringToBytes=f,t.valueToBytes=g,t.concatBytes=function(e){let t=Array(e.length),r=0;for(let i=0;i<e.length;i++){let n=g(e[i]);t[i]=n,r+=n.length}let i=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)i.set(t[e],r),r+=t[e].length;return i},t.createDataView=function(e){if(void 0!==i&&e instanceof i){let t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}},66763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChecksumStruct=void 0;let i=r(88424),n=r(74755);t.ChecksumStruct=(0,i.size)((0,n.base64)((0,i.string)(),{paddingRequired:!0}),44,44)},51786:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHex=t.createBytes=t.createBigInt=t.createNumber=void 0;let i=r(88424),n=r(10944),s=r(26411),o=r(68096),a=(0,i.union)([(0,i.number)(),(0,i.bigint)(),(0,i.string)(),o.StrictHexStruct]),l=(0,i.coerce)((0,i.number)(),a,Number),c=(0,i.coerce)((0,i.bigint)(),a,BigInt);(0,i.union)([o.StrictHexStruct,(0,i.instance)(Uint8Array)]);let u=(0,i.coerce)((0,i.instance)(Uint8Array),(0,i.union)([o.StrictHexStruct]),s.hexToBytes),h=(0,i.coerce)(o.StrictHexStruct,(0,i.instance)(Uint8Array),s.bytesToHex);t.createNumber=function(e){try{let t=(0,i.create)(e,l);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof i.StructError)throw Error(`Expected a number-like value, got "${e}".`);throw t}},t.createBigInt=function(e){try{return(0,i.create)(e,c)}catch(e){if(e instanceof i.StructError)throw Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},t.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,i.create)(e,u)}catch(e){if(e instanceof i.StructError)throw Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},t.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,i.create)(e,h)}catch(e){if(e instanceof i.StructError)throw Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}},46411:function(e,t){"use strict";var r,i,n=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FrozenSet=t.FrozenMap=void 0;class o{constructor(e){r.set(this,void 0),n(this,r,new Map(e),"f"),Object.freeze(this)}get size(){return s(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return s(this,r,"f")[Symbol.iterator]()}entries(){return s(this,r,"f").entries()}forEach(e,t){return s(this,r,"f").forEach((r,i,n)=>e.call(t,r,i,this))}get(e){return s(this,r,"f").get(e)}has(e){return s(this,r,"f").has(e)}keys(){return s(this,r,"f").keys()}values(){return s(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ")} `:""}}`}}t.FrozenMap=o;class a{constructor(e){i.set(this,void 0),n(this,i,new Set(e),"f"),Object.freeze(this)}get size(){return s(this,i,"f").size}[(i=new WeakMap,Symbol.iterator)](){return s(this,i,"f")[Symbol.iterator]()}entries(){return s(this,i,"f").entries()}forEach(e,t){return s(this,i,"f").forEach((r,i,n)=>e.call(t,r,i,this))}has(e){return s(this,i,"f").has(e)}keys(){return s(this,i,"f").keys()}values(){return s(this,i,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}t.FrozenSet=a,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(a),Object.freeze(a.prototype)},27047:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68096:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.StrictHexStruct=t.HexStruct=void 0;let i=r(88424),n=r(10944);function s(e){return(0,i.is)(e,t.HexStruct)}function o(e){return(0,i.is)(e,t.StrictHexStruct)}t.HexStruct=(0,i.pattern)((0,i.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,i.pattern)((0,i.string)(),/^0x[0-9a-f]+$/iu),t.isHexString=s,t.isStrictHexString=o,t.assertIsHexString=function(e){(0,n.assert)(s(e),"Value must be a hexadecimal string.")},t.assertIsStrictHexString=function(e){(0,n.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},t.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},t.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}},98502:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(10944),t),n(r(74755),t),n(r(26411),t),n(r(66763),t),n(r(51786),t),n(r(46411),t),n(r(27047),t),n(r(68096),t),n(r(40023),t),n(r(50848),t),n(r(8741),t),n(r(88550),t),n(r(31824),t),n(r(52298),t),n(r(33649),t),n(r(9663),t),n(r(73544),t)},40023:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=void 0;let i=r(88424),n=r(10944);t.UnsafeJsonStruct=(0,i.union)([(0,i.literal)(null),(0,i.boolean)(),(0,i.define)("finite number",e=>(0,i.is)(e,(0,i.number)())&&Number.isFinite(e)),(0,i.string)(),(0,i.array)((0,i.lazy)(()=>t.UnsafeJsonStruct)),(0,i.record)((0,i.string)(),(0,i.lazy)(()=>t.UnsafeJsonStruct))]),t.JsonStruct=(0,i.define)("Json",(e,r)=>{function i(e,t){let i=[...t.validator(e,r)];return!(i.length>0)||i}try{let r=i(e,t.UnsafeJsonStruct);if(!0!==r)return r;return i(JSON.parse(JSON.stringify(e)),t.UnsafeJsonStruct)}catch(e){if(e instanceof RangeError)return"Circular reference detected";return!1}}),t.isValidJson=function(e){return(0,i.is)(e,t.JsonStruct)},t.getJsonSize=function(e){(0,n.assertStruct)(e,t.JsonStruct,"Invalid JSON value");let r=JSON.stringify(e);return new TextEncoder().encode(r).byteLength},t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,i.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,i.nullable)((0,i.union)([(0,i.number)(),(0,i.string)()])),t.JsonRpcErrorStruct=(0,i.object)({code:(0,i.integer)(),message:(0,i.string)(),data:(0,i.optional)(t.JsonStruct),stack:(0,i.optional)((0,i.string)())}),t.JsonRpcParamsStruct=(0,i.optional)((0,i.union)([(0,i.record)((0,i.string)(),t.JsonStruct),(0,i.array)(t.JsonStruct)])),t.JsonRpcRequestStruct=(0,i.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,i.string)(),params:t.JsonRpcParamsStruct}),t.JsonRpcNotificationStruct=(0,i.omit)(t.JsonRpcRequestStruct,["id"]),t.isJsonRpcNotification=function(e){return(0,i.is)(e,t.JsonRpcNotificationStruct)},t.assertIsJsonRpcNotification=function(e,r){(0,n.assertStruct)(e,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",r)},t.isJsonRpcRequest=function(e){return(0,i.is)(e,t.JsonRpcRequestStruct)},t.assertIsJsonRpcRequest=function(e,r){(0,n.assertStruct)(e,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",r)},t.PendingJsonRpcResponseStruct=(0,i.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,i.optional)((0,i.unknown)()),error:(0,i.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,i.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,i.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,i.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]),t.isPendingJsonRpcResponse=function(e){return(0,i.is)(e,t.PendingJsonRpcResponseStruct)},t.assertIsPendingJsonRpcResponse=function(e,r){(0,n.assertStruct)(e,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",r)},t.isJsonRpcResponse=function(e){return(0,i.is)(e,t.JsonRpcResponseStruct)},t.assertIsJsonRpcResponse=function(e,r){(0,n.assertStruct)(e,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",r)},t.isJsonRpcSuccess=function(e){return(0,i.is)(e,t.JsonRpcSuccessStruct)},t.assertIsJsonRpcSuccess=function(e,r){(0,n.assertStruct)(e,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",r)},t.isJsonRpcFailure=function(e){return(0,i.is)(e,t.JsonRpcFailureStruct)},t.assertIsJsonRpcFailure=function(e,r){(0,n.assertStruct)(e,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",r)},t.isJsonRpcError=function(e){return(0,i.is)(e,t.JsonRpcErrorStruct)},t.assertIsJsonRpcError=function(e,r){(0,n.assertStruct)(e,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",r)},t.getJsonRpcIdValidator=function(e){let{permitEmptyString:t,permitFractions:r,permitNull:i}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>!!("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||i&&null===e)}},50848:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8741:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.createProjectLogger=void 0;let n=(0,i(r(4461)).default)("metamask");t.createProjectLogger=function(e){return n.extend(e)},t.createModuleLogger=function(e,t){return e.extend(t)}},88550:function(e,t){"use strict";var r;function i(e){return 127>=e.charCodeAt(0)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0,t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.isNullOrUndefined=function(e){return null==e},t.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)},t.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),(r=t.JsonSize||(t.JsonSize={}))[r.Null=4]="Null",r[r.Comma=1]="Comma",r[r.Wrapper=1]="Wrapper",r[r.True=4]="True",r[r.False=5]="False",r[r.Quote=1]="Quote",r[r.Colon=1]="Colon",r[r.Date=24]="Date",t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,t.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},t.isASCII=i,t.calculateStringSize=function(e){var r;return e.split("").reduce((e,t)=>i(t)?e+1:e+2,0)+(null!==(r=e.match(t.ESCAPE_CHARACTERS_REGEXP))&&void 0!==r?r:[]).length},t.calculateNumberSize=function(e){return e.toString().length}},31824:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBigInt=t.hexToNumber=t.bigIntToHex=t.numberToHex=void 0;let i=r(10944),n=r(68096);t.numberToHex=e=>((0,i.assert)("number"==typeof e,"Value must be a number."),(0,i.assert)(e>=0,"Value must be a non-negative number."),(0,i.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16))),t.bigIntToHex=e=>((0,i.assert)("bigint"==typeof e,"Value must be a bigint."),(0,i.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16))),t.hexToNumber=e=>{(0,n.assertIsHexString)(e);let t=parseInt(e,16);return(0,i.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t},t.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))},52298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33649:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,(r=t.Duration||(t.Duration={}))[r.Millisecond=1]="Millisecond",r[r.Second=1e3]="Second",r[r.Minute=6e4]="Minute",r[r.Hour=36e5]="Hour",r[r.Day=864e5]="Day",r[r.Week=6048e5]="Week",r[r.Year=31536e6]="Year";let i=e=>Number.isInteger(e)&&e>=0,n=(e,t)=>{if(!i(e))throw Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};t.inMilliseconds=function(e,t){return n(e,"count"),e*t},t.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}},9663:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},73544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;let i=r(84076),n=r(88424),s=r(10944);t.VersionStruct=(0,n.refine)((0,n.string)(),"Version",e=>null!==(0,i.valid)(e)||`Expected SemVer version, got "${e}"`),t.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",e=>null!==(0,i.validRange)(e)||`Expected SemVer range, got "${e}"`),t.isValidSemVerVersion=function(e){return(0,n.is)(e,t.VersionStruct)},t.isValidSemVerRange=function(e){return(0,n.is)(e,t.VersionRangeStruct)},t.assertIsSemVerVersion=function(e){(0,s.assertStruct)(e,t.VersionStruct)},t.assertIsSemVerRange=function(e){(0,s.assertStruct)(e,t.VersionRangeStruct)},t.gtVersion=function(e,t){return(0,i.gt)(e,t)},t.gtRange=function(e,t){return(0,i.gtr)(e,t)},t.satisfiesVersionRange=function(e,t){return(0,i.satisfies)(e,t,{includePrerelease:!0})}},81044:function(e){"use strict";let t=(e,t)=>function(){let r=t.promiseModule,i=Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];return new r((r,n)=>{t.errorFirst?i.push(function(e,i){if(t.multiArgs){let t=Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),n(t)):r(t)}else e?n(e):r(i)}):i.push(function(e){if(t.multiArgs){let e=Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)}),e.apply(this,i)})};e.exports=(e,r)=>{let i;r=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},r);let n=e=>{let t=t=>"string"==typeof t?e===t:t.test(e);return r.include?r.include.some(t):!r.exclude.some(t)};for(let s in i="function"==typeof e?function(){return r.excludeMain?e.apply(this,arguments):t(e,r).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e)),e){let o=e[s];i[s]="function"==typeof o&&n(s)?t(o,r):o}return i}},44907:function(e,t,r){let i=r(12928);class n extends i{constructor(){super(),this.allResults=[]}async update(){throw Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}e.exports=n},12928:function(e,t,r){let i=r(69930).default;class n extends i{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){let e=this.updates;return this.updates=[],e}}e.exports=n},28500:function(e,t,r){let i=r(12928),n=r(53936),{incrementHexInt:s}=r(19691);class o extends i{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){let r=s(e),i=(await n({provider:this.provider,fromBlock:r,toBlock:t})).map(e=>e.hash);this.addResults(i)}}e.exports=o},53936:function(e){async function t({provider:e,fromBlock:t,toBlock:s}){t||(t=s);let o=r(t),a=Array(r(s)-o+1).fill().map((e,t)=>o+t).map(i);return(await Promise.all(a.map(t=>n(e,"eth_getBlockByNumber",[t,!1])))).filter(e=>null!==e)}function r(e){return null==e?e:Number.parseInt(e,16)}function i(e){return null==e?e:"0x"+e.toString(16)}async function n(e,t,r){for(let i=0;i<3;i++)try{return await function(e,t){return new Promise((r,i)=>{e.sendAsync(t,(e,t)=>{e?i(e):t.error?i(t.error):t.result?r(t.result):i(Error("Result was empty"))})})}(e,{id:1,jsonrpc:"2.0",method:t,params:r})}catch(e){console.error(`provider.sendAsync failed: ${e.stack||e.message||e}`)}return null}e.exports=t},19691:function(e){function t(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:r(e)-r(t))}function r(e){return null==e?e:Number.parseInt(e,16)}function i(e){if(null==e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function n(){return Math.floor(16*Math.random()).toString(16)}e.exports={minBlockRef:function(...e){return t(e)[0]},maxBlockRef:function(...e){let r=t(e);return r[r.length-1]},sortBlockRefs:t,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:r,incrementHexInt:function(e){return null==e?e:i(r(e)+1)},intToHex:i,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=n()+n();return t}}},51018:function(e,t,r){let i=r(72140).WU,{createAsyncMiddleware:n,createScaffoldMiddleware:s}=r(49116),o=r(26723),a=r(28500),l=r(78575),{intToHex:c,hexToInt:u}=r(19691);function h(e){return d(async(...t)=>c((await e(...t)).id))}function d(e){return n(async(t,r)=>{let i=await e.apply(null,t.params);r.result=i})}function p(e,t){let r=[];for(let t in e)r.push(e[t]);return r}e.exports=function({blockTracker:e,provider:t}){let r=0,n={},f=new i,g=function({mutex:e}){return t=>async(r,i,n,s)=>{(await e.acquire())(),t(r,i,n,s)}}({mutex:f}),m=s({eth_newFilter:g(h(v)),eth_newBlockFilter:g(h(b)),eth_newPendingTransactionFilter:g(h(w)),eth_uninstallFilter:g(d(C)),eth_getFilterChanges:g(d(E)),eth_getFilterLogs:g(d(_))}),y=async({oldBlock:e,newBlock:t})=>{if(0===n.length)return;let r=await f.acquire();try{await Promise.all(p(n).map(async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}r()};return m.newLogFilter=v,m.newBlockFilter=b,m.newPendingTransactionFilter=w,m.uninstallFilter=C,m.getFilterChanges=E,m.getFilterLogs=_,m.destroy=()=>{x()},m;async function v(e){let r=new o({provider:t,params:e});return await S(r),r}async function b(){let e=new a({provider:t});return await S(e),e}async function w(){let e=new l({provider:t});return await S(e),e}async function E(e){let t=u(e),r=n[t];if(!r)throw Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function _(e){let t=u(e),r=n[t];if(!r)throw Error(`No filter for index "${t}"`);let i=[];return"log"===r.type&&(i=r.getAllResults()),i}async function C(e){let t=u(e),r=!!n[t];return r&&await I(t),r}async function S(t){let i=p(n).length,s=await e.getLatestBlock();return await t.initialize({currentBlock:s}),n[++r]=t,t.id=r,t.idHex=c(r),A({prevFilterCount:i,newFilterCount:p(n).length}),r}async function I(e){let t=p(n).length;delete n[e],A({prevFilterCount:t,newFilterCount:p(n).length})}async function x(){let e=p(n).length;n={},A({prevFilterCount:e,newFilterCount:0})}function A({prevFilterCount:t,newFilterCount:r}){if(0===t&&r>0){e.on("sync",y);return}if(t>0&&0===r){e.removeListener("sync",y);return}}}},26723:function(e,t,r){let i=r(81972),n=r(743),s=r(44907),{bnToHex:o,hexToInt:a,incrementHexInt:l,minBlockRef:c,blockRefIsNumber:u}=r(19691);class h extends s{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new i(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(e=>e.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;let r=c(this.params.toBlock,e),i=Object.assign({},this.params,{toBlock:r}),n=await this._fetchLogs(i);this.addInitialResults(n)}async update({oldBlock:e,newBlock:t}){let r;r=e?l(e):t;let i=Object.assign({},this.params,{fromBlock:r,toBlock:t}),n=(await this._fetchLogs(i)).filter(e=>this.matchLog(e));this.addResults(n)}async _fetchLogs(e){return await n(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber)||u(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;let t=e.address&&e.address.toLowerCase();return(!this.params.address||!t||!!this.params.address.includes(t))&&this.params.topics.every((t,r)=>{let i=e.topics[r];if(!i)return!1;i=i.toLowerCase();let n=Array.isArray(t)?t:[t];return!!n.includes(null)||(n=n.map(e=>e.toLowerCase())).includes(i)})}}e.exports=h},743:function(e){"use strict";let t=(e,t,r,i)=>function(...n){return new t.promiseModule((s,o)=>{t.multiArgs?n.push((...e)=>{t.errorFirst?e[0]?o(e):(e.shift(),s(e)):s(e)}):t.errorFirst?n.push((e,t)=>{e?o(e):s(t)}):n.push(s),Reflect.apply(e,this===r?i:this,n)})},r=new WeakMap;e.exports=(e,i)=>{i={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...i};let n=typeof e;if(!(null!==e&&("object"===n||"function"===n)))throw TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":n}\``);let s=(e,t)=>{let n=r.get(e);if(n||(n={},r.set(e,n)),t in n)return n[t];let s=e=>"string"==typeof e||"symbol"==typeof t?t===e:e.test(t),o=Reflect.getOwnPropertyDescriptor(e,t),a=void 0===o||o.writable||o.configurable,l=(i.include?i.include.some(s):!i.exclude.some(s))&&a;return n[t]=l,l},o=new WeakMap,a=new Proxy(e,{apply(e,r,n){let s=o.get(e);if(s)return Reflect.apply(s,r,n);let l=i.excludeMain?e:t(e,i,a,e);return o.set(e,l),Reflect.apply(l,r,n)},get(e,r){let n=e[r];if(!s(e,r)||n===Function.prototype[r])return n;let l=o.get(n);if(l)return l;if("function"==typeof n){let r=t(n,i,a,e);return o.set(n,r),r}return n}});return a}},55117:function(e,t,r){let i=r(69930).default,{createAsyncMiddleware:n,createScaffoldMiddleware:s}=r(49116),o=r(51018),{unsafeRandomBytes:a,incrementHexInt:l}=r(19691),c=r(53936);function u(e){return null==e?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}e.exports=function({blockTracker:e,provider:t}){let r={},h=o({blockTracker:e,provider:t}),d=!1,p=new i,f=s({eth_subscribe:n(g),eth_unsubscribe:n(m)});return f.destroy=function(){for(let e in p.removeAllListeners(),r)r[e].destroy(),delete r[e];d=!0},{events:p,middleware:f};async function g(i,n){let s;if(d)throw Error("SubscriptionManager - attempting to use after destroying");let o=i.params[0],p=a(16);switch(o){case"newHeads":s=function({subId:r}){let i={type:o,destroy:async()=>{e.removeListener("sync",i.update)},update:async({oldBlock:e,newBlock:i})=>{let n=l(e);(await c({provider:t,fromBlock:n,toBlock:i})).map(u).filter(e=>null!==e).forEach(e=>{y(r,e)})}};return e.on("sync",i.update),i}({subId:p});break;case"logs":let f=i.params[1];s=function({subId:e,filter:t}){return t.on("update",t=>y(e,t)),{type:o,destroy:async()=>await h.uninstallFilter(t.idHex)}}({subId:p,filter:await h.newLogFilter(f)});break;default:throw Error(`SubscriptionManager - unsupported subscription type "${o}"`)}r[p]=s,n.result=p}async function m(e,t){if(d)throw Error("SubscriptionManager - attempting to use after destroying");let i=e.params[0],n=r[i];if(!n){t.result=!1;return}delete r[i],await n.destroy(),t.result=!0}function y(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}},78575:function(e,t,r){let i=r(12928),n=r(53936),{incrementHexInt:s}=r(19691);class o extends i{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){let t=s(e),r=await n({provider:this.provider,fromBlock:t,toBlock:e}),i=[];for(let e of r)i.push(...e.transactions);this.addResults(i)}}e.exports=o},81972:function(e,t,r){let i=r(49820),n=r(21192)();function s(e){this.currentProvider=e}function o(e){return function(){var t=[].slice.call(arguments),r=t.pop();this.sendAsync({method:e,params:t},r)}}function a(e,t){return function(){var r=[].slice.call(arguments),i=r.pop();r.length<e&&r.push("latest"),this.sendAsync({method:t,params:r},i)}}e.exports=s,s.prototype.getBalance=a(2,"eth_getBalance"),s.prototype.getCode=a(2,"eth_getCode"),s.prototype.getTransactionCount=a(2,"eth_getTransactionCount"),s.prototype.getStorageAt=a(3,"eth_getStorageAt"),s.prototype.call=a(2,"eth_call"),s.prototype.protocolVersion=o("eth_protocolVersion"),s.prototype.syncing=o("eth_syncing"),s.prototype.coinbase=o("eth_coinbase"),s.prototype.mining=o("eth_mining"),s.prototype.hashrate=o("eth_hashrate"),s.prototype.gasPrice=o("eth_gasPrice"),s.prototype.accounts=o("eth_accounts"),s.prototype.blockNumber=o("eth_blockNumber"),s.prototype.getBlockTransactionCountByHash=o("eth_getBlockTransactionCountByHash"),s.prototype.getBlockTransactionCountByNumber=o("eth_getBlockTransactionCountByNumber"),s.prototype.getUncleCountByBlockHash=o("eth_getUncleCountByBlockHash"),s.prototype.getUncleCountByBlockNumber=o("eth_getUncleCountByBlockNumber"),s.prototype.sign=o("eth_sign"),s.prototype.sendTransaction=o("eth_sendTransaction"),s.prototype.sendRawTransaction=o("eth_sendRawTransaction"),s.prototype.estimateGas=o("eth_estimateGas"),s.prototype.getBlockByHash=o("eth_getBlockByHash"),s.prototype.getBlockByNumber=o("eth_getBlockByNumber"),s.prototype.getTransactionByHash=o("eth_getTransactionByHash"),s.prototype.getTransactionByBlockHashAndIndex=o("eth_getTransactionByBlockHashAndIndex"),s.prototype.getTransactionByBlockNumberAndIndex=o("eth_getTransactionByBlockNumberAndIndex"),s.prototype.getTransactionReceipt=o("eth_getTransactionReceipt"),s.prototype.getUncleByBlockHashAndIndex=o("eth_getUncleByBlockHashAndIndex"),s.prototype.getUncleByBlockNumberAndIndex=o("eth_getUncleByBlockNumberAndIndex"),s.prototype.getCompilers=o("eth_getCompilers"),s.prototype.compileLLL=o("eth_compileLLL"),s.prototype.compileSolidity=o("eth_compileSolidity"),s.prototype.compileSerpent=o("eth_compileSerpent"),s.prototype.newFilter=o("eth_newFilter"),s.prototype.newBlockFilter=o("eth_newBlockFilter"),s.prototype.newPendingTransactionFilter=o("eth_newPendingTransactionFilter"),s.prototype.uninstallFilter=o("eth_uninstallFilter"),s.prototype.getFilterChanges=o("eth_getFilterChanges"),s.prototype.getFilterLogs=o("eth_getFilterLogs"),s.prototype.getLogs=o("eth_getLogs"),s.prototype.getWork=o("eth_getWork"),s.prototype.submitWork=o("eth_submitWork"),s.prototype.submitHashrate=o("eth_submitHashrate"),s.prototype.sendAsync=function(e,t){this.currentProvider.sendAsync(i({id:n(),jsonrpc:"2.0",params:[]},e),function(e,r){if(!e&&r.error&&(e=Error("EthQuery - RPC Error - "+r.error.message)),e)return t(e);t(null,r.result)})}},62096:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;let i=r(28534);class n extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return i.default(this.serialize(),o,2)}}t.EthereumRpcError=n;class s extends n{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function o(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=s},58519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},71984:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;let i=r(62096),n=r(81199),s=r(58519);function o(e,t){let[r,s]=l(t);return new i.EthereumRpcError(e,r||n.getMessageFromCode(e),s)}function a(e,t){let[r,s]=l(t);return new i.EthereumProviderError(e,r||n.getMessageFromCode(e),s)}function l(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>o(s.errorCodes.rpc.parse,e),invalidRequest:e=>o(s.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(s.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(s.errorCodes.rpc.methodNotFound,e),internal:e=>o(s.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(s.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(s.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(s.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(s.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(s.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(s.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(s.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(s.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(s.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(s.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(s.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new i.EthereumProviderError(t,r,n)}}}},46281:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;let i=r(62096);Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return i.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return i.EthereumProviderError}});let n=r(81199);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});let s=r(71984);Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return s.ethErrors}});let o=r(58519);Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})},81199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let i=r(58519),n=r(62096),s=i.errorCodes.rpc.internal,o={code:s,message:a(s)};function a(e,r="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){let r=e.toString();if(u(i.errorValues,r))return i.errorValues[r].message;if(e>=-32099&&e<=-32e3)return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function l(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(i.errorValues[t]||e>=-32099&&e<=-32e3)}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=a,t.isValidCode=l,t.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!1}={}){if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();let i={};if(e&&"object"==typeof e&&!Array.isArray(e)&&u(e,"code")&&l(e.code))i.code=e.code,e.message&&"string"==typeof e.message?(i.message=e.message,u(e,"data")&&(i.data=e.data)):(i.message=a(i.code),i.data={originalError:c(e)});else{i.code=t.code;let r=null==e?void 0:e.message;i.message=r&&"string"==typeof r?r:t.message,i.data={originalError:c(e)}}let s=null==e?void 0:e.stack;return r&&e&&s&&"string"==typeof s&&(i.stack=s),i}},29436:function(e,t,r){var i,n=r(62601);!function(s){var o=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l="object"==typeof n&&"function"==typeof n.nextTick,c="function"==typeof Symbol,u="object"==typeof Reflect,h="function"==typeof setImmediate?setImmediate:setTimeout,d=c?u&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function p(){this._events={},this._conf&&f.call(this,this._conf)}function f(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),s!==e.maxListeners&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),void 0!==n&&n.emitWarning){var i=Error(r);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,n.emitWarning(i)}else console.error(r),console.trace&&console.trace()}var m=function(e,t,r){var i=arguments.length;switch(i){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,r];default:for(var n=Array(i);i--;)n[i]=arguments[i];return n}};function y(e,t){for(var r={},i=e.length,n=t?t.length:0,o=0;o<i;o++)r[e[o]]=o<n?t[o]:s;return r}function v(e,t,r){if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(i=r.on,n=r.off),t.addEventListener?(i=t.addEventListener,n=t.removeEventListener):t.addListener?(i=t.addListener,n=t.removeListener):t.on&&(i=t.on,n=t.off),!i&&!n)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof n)throw TypeError("off method must be a function");this._on=i,this._off=n;var i,n,s=e._observers;s?s.push(this):e._observers=[this]}function b(e,t,r,i){var n,a,l,c=Object.assign({},t);if(!e)return c;if("object"!=typeof e)throw TypeError("options must be an object");var u=Object.keys(e),h=u.length;function d(e){throw Error('Invalid "'+n+'" option value'+(e?". Reason: "+e:""))}for(var p=0;p<h;p++){if(n=u[p],!i&&!o.call(t,n))throw Error('Unknown "'+n+'" option');s!==(a=e[n])&&(l=r[n],c[n]=l?l(a,d):a)}return c}function w(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function E(e){var t="value must be type of "+e.join("|"),r=e.length,i=e[0],n=e[1];return 1===r?function(e,r){if(typeof e===i)return e;r(t)}:2===r?function(e,r){var s=typeof e;if(s===i||s===n)return e;r(t)}:function(i,n){for(var s=typeof i,o=r;o-- >0;)if(s===e[o])return i;n(t)}}Object.assign(v.prototype,{subscribe:function(e,t,r){var i=this,n=this._target,s=this._emitter,o=this._listeners,a=function(){var i=m.apply(null,arguments),o={data:i,name:t,original:e};if(r){!1!==r.call(n,o)&&s.emit.apply(s,[o.name].concat(i));return}s.emit.apply(s,[t].concat(i))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,s._newListener&&s._removeListener&&!i._onNewListener?(this._onNewListener=function(r){r===t&&null===o[e]&&(o[e]=a,i._on.call(n,e,a))},s.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===t&&!s.hasListeners(r)&&o[e]&&(o[e]=null,i._off.call(n,e,a))},o[e]=null,s.on("removeListener",this._onRemoveListener)):(o[e]=a,i._on.call(n,e,a))},unsubscribe:function(e){var t,r,i,n=this,s=this._listeners,o=this._emitter,a=this._off,l=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function c(){n._onNewListener&&(o.off("newListener",n._onNewListener),o.off("removeListener",n._onRemoveListener),n._onNewListener=null,n._onRemoveListener=null);var e=I.call(o,n);o._observers.splice(e,1)}if(e){if(!(t=s[e]))return;a.call(l,e,t),delete s[e],--this._listenersCount||c()}else{for(i=(r=d(s)).length;i-- >0;)e=r[i],a.call(l,e,s[e]);this._listeners={},this._listenersCount=0,c()}}});var _=E(["function"]),C=E(["object","function"]);function S(e,t,r){var i,n,s,o=0,a=new e(function(l,c,u){function h(){n&&(n=null),o&&(clearTimeout(o),o=0)}i=!(r=b(r,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}})).overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var d=function(e){h(),l(e)},p=function(e){h(),c(e)};i?t(d,p,u):(n=[function(e){p(e||Error("canceled"))}],t(d,p,function(e){if(s)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");n.push(e)}),s=!0),r.timeout>0&&(o=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,a.cancel(e),c(e)},r.timeout))});return i||(a.cancel=function(e){if(n){for(var t=n.length,r=1;r<t;r++)n[r](e);n[0](e),n=null}}),a}function I(e){var t=this._observers;if(!t)return -1;for(var r=t.length,i=0;i<r;i++)if(t[i]._target===e)return i;return -1}function x(e,t,r,i,n){if(!r)return null;if(0===i){var s=typeof t;if("string"===s){var o,a,l=0,c=0,u=this.delimiter,h=u.length;if(-1!==(a=t.indexOf(u))){o=[,,,,,];do o[l++]=t.slice(c,a),c=a+h;while(-1!==(a=t.indexOf(u,c)));o[l++]=t.slice(c),t=o,n=l}else t=[t],n=1}else"object"===s?n=t.length:(t=[t],n=1)}var p,f,g,m,y,v,b,w=null,E=t[i],_=t[i+1];if(i===n)r._listeners&&("function"==typeof r._listeners?e&&e.push(r._listeners):e&&e.push.apply(e,r._listeners),w=[r]);else{if("*"===E){for(a=(v=d(r)).length;a-- >0;)"_listeners"!==(p=v[a])&&(b=x(e,t,r[p],i+1,n))&&(w?w.push.apply(w,b):w=b);return w}if("**"===E){for((y=i+1===n||i+2===n&&"*"===_)&&r._listeners&&(w=x(e,t,r,n,n)),a=(v=d(r)).length;a-- >0;)"_listeners"!==(p=v[a])&&("*"===p||"**"===p?(r[p]._listeners&&!y&&(b=x(e,t,r[p],n,n))&&(w?w.push.apply(w,b):w=b),b=x(e,t,r[p],i,n)):b=p===_?x(e,t,r[p],i+2,n):x(e,t,r[p],i,n),b&&(w?w.push.apply(w,b):w=b));return w}r[E]&&(w=x(e,t,r[E],i+1,n))}if((f=r["*"])&&x(e,t,f,i+1,n),g=r["**"]){if(i<n)for(g._listeners&&x(e,t,g,n,n),a=(v=d(g)).length;a-- >0;)"_listeners"!==(p=v[a])&&(p===_?x(e,t,g[p],i+2,n):p===E?x(e,t,g[p],i+1,n):((m={})[p]=g[p],x(e,t,{"**":m},i+1,n)));else g._listeners?x(e,t,g,n,n):g["*"]&&g["*"]._listeners&&x(e,t,g["*"],n,n)}return w}function A(e,t,r){var i,n,s=0,o=0,a=this.delimiter,l=a.length;if("string"==typeof e){if(-1!==(i=e.indexOf(a))){n=[,,,,,];do n[s++]=e.slice(o,i),o=i+l;while(-1!==(i=e.indexOf(a,o)));n[s++]=e.slice(o)}else n=[e],s=1}else n=e,s=e.length;if(s>1){for(i=0;i+1<s;i++)if("**"===n[i]&&"**"===n[i+1])return}var c,u=this.listenerTree;for(i=0;i<s;i++)if(u=u[c=n[i]]||(u[c]={}),i===s-1){u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),r?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,g.call(this,u._listeners.length,c))):u._listeners=t;break}return!0}function k(e,t,r,i){for(var n,s,o,a,l=d(e),c=l.length,u=e._listeners;c-- >0;)n=e[s=l[c]],o="_listeners"===s?r:r?r.concat(s):[s],a=i||"symbol"==typeof s,u&&t.push(a?o:o.join(this.delimiter)),"object"==typeof n&&k.call(this,n,t,o,a);return t}function O(e){for(var t,r,i,n=d(e),s=n.length;s-- >0;)(t=e[r=n[s]])&&(i=!0,"_listeners"===r||O(t)||delete e[r]);return i}function P(e,t,r){this.emitter=e,this.event=t,this.listener=r}function R(e,t,r){if(!0===r)o=!0;else if(!1===r)i=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var i=r.async,o=r.promisify,a=r.nextTick,c=r.objectify}if(i||a||o){var u=t,d=t._origin||t;if(a&&!l)throw Error("process.nextTick is not supported");s===o&&(o="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,r=this.event;return o?a?Promise.resolve():new Promise(function(e){h(e)}).then(function(){return t.event=r,u.apply(t,e)}):(a?n.nextTick:h)(function(){t.event=r,u.apply(t,e)})})._async=!0,t._origin=d}return[t,c?new P(this,e,t):this]}function N(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,e)}P.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},N.EventEmitter2=N,N.prototype.listenTo=function(e,t,r){if("object"!=typeof e)throw TypeError("target musts be an object");var i=this;return r=b(r,{on:s,off:s,reducers:s},{on:_,off:_,reducers:C}),function(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,s,o=r.reducers,a=I.call(i,e);n=-1===a?new v(i,e,r):i._observers[a];for(var l=d(t),c=l.length,u="function"==typeof o,h=0;h<c;h++)s=l[h],n.subscribe(s,t[s]||s,u?o:o&&o[s])}(a(t)?y(t):"string"==typeof t?y(t.split(/\s+/)):t),this},N.prototype.stopListeningTo=function(e,t){var r,i=this._observers;if(!i)return!1;var n=i.length,s=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;n-- >0;)r=i[n],e&&r._target!==e||(r.unsubscribe(t),s=!0);return s},N.prototype.delimiter=".",N.prototype.setMaxListeners=function(e){s!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},N.prototype.getMaxListeners=function(){return this._maxListeners},N.prototype.event="",N.prototype.once=function(e,t,r){return this._once(e,t,!1,r)},N.prototype.prependOnceListener=function(e,t,r){return this._once(e,t,!0,r)},N.prototype._once=function(e,t,r,i){return this._many(e,1,t,r,i)},N.prototype.many=function(e,t,r,i){return this._many(e,t,r,!1,i)},N.prototype.prependMany=function(e,t,r,i){return this._many(e,t,r,!0,i)},N.prototype._many=function(e,t,r,i,n){var s=this;if("function"!=typeof r)throw Error("many only accepts instances of Function");function o(){return 0==--t&&s.off(e,o),r.apply(this,arguments)}return o._origin=r,this._on(e,o,i,n)},N.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,r,i,n,s,o,a=arguments[0],l=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(l&&(o=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(t=a.length,c){for(r=0;r<t;r++)if("symbol"==typeof a[r]){n=!0;break}}n||(a=a.join(this.delimiter))}var u=arguments.length;if(this._all&&this._all.length)for(r=0,t=(s=this._all.slice()).length;r<t;r++)switch(this.event=a,u){case 1:s[r].call(this,a);break;case 2:s[r].call(this,a,arguments[1]);break;case 3:s[r].call(this,a,arguments[1],arguments[2]);break;default:s[r].apply(this,arguments)}if(l)s=[],x.call(this,s,o,this.listenerTree,0,t);else{if("function"==typeof(s=this._events[a])){switch(this.event=a,u){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(i=1,e=Array(u-1);i<u;i++)e[i-1]=arguments[i];s.apply(this,e)}return!0}s&&(s=s.slice())}if(s&&s.length){if(u>3)for(i=1,e=Array(u-1);i<u;i++)e[i-1]=arguments[i];for(r=0,t=s.length;r<t;r++)switch(this.event=a,u){case 1:s[r].call(this);break;case 2:s[r].call(this,arguments[1]);break;case 3:s[r].call(this,arguments[1],arguments[2]);break;default:s[r].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.")}return!!this._all},N.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var e,t,r,i,n,s,o,a=arguments[0],l=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(l&&(s=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(t=a.length,c){for(r=0;r<t;r++)if("symbol"==typeof a[r]){o=!0;break}}o||(a=a.join(this.delimiter))}var u=[],h=arguments.length;if(this._all)for(r=0,t=this._all.length;r<t;r++)switch(this.event=a,h){case 1:u.push(this._all[r].call(this,a));break;case 2:u.push(this._all[r].call(this,a,arguments[1]));break;case 3:u.push(this._all[r].call(this,a,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,arguments))}if(l?(n=[],x.call(this,n,s,this.listenerTree,0)):n=this._events[a],"function"==typeof n)switch(this.event=a,h){case 1:u.push(n.call(this));break;case 2:u.push(n.call(this,arguments[1]));break;case 3:u.push(n.call(this,arguments[1],arguments[2]));break;default:for(i=1,e=Array(h-1);i<h;i++)e[i-1]=arguments[i];u.push(n.apply(this,e))}else if(n&&n.length){if(n=n.slice(),h>3)for(i=1,e=Array(h-1);i<h;i++)e[i-1]=arguments[i];for(r=0,t=n.length;r<t;r++)switch(this.event=a,h){case 1:u.push(n[r].call(this));break;case 2:u.push(n[r].call(this,arguments[1]));break;case 3:u.push(n[r].call(this,arguments[1],arguments[2]));break;default:u.push(n[r].apply(this,e))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(u)},N.prototype.on=function(e,t,r){return this._on(e,t,!1,r)},N.prototype.prependListener=function(e,t,r){return this._on(e,t,!0,r)},N.prototype.onAny=function(e){return this._onAny(e,!1)},N.prototype.prependAny=function(e){return this._onAny(e,!0)},N.prototype.addListener=N.prototype.on,N.prototype._onAny=function(e,t){if("function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},N.prototype._on=function(e,t,r,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw Error("on only accepts instances of Function");this._events||p.call(this);var n,o=this;return(s!==i&&(t=(n=R.call(this,e,t,i))[0],o=n[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard)?A.call(this,e,t,r):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,g.call(this,this._events[e].length,e))):this._events[e]=t,o},N.prototype.off=function(e,t){if("function"!=typeof t)throw Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var n="string"==typeof e?e.split(this.delimiter):e.slice();if(!(i=x.call(this,null,n,this.listenerTree,0)))return this}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var o=i[s];if(a(r=o._listeners)){for(var l=-1,c=0,u=r.length;c<u;c++)if(r[c]===t||r[c].listener&&r[c].listener===t||r[c]._origin&&r[c]._origin===t){l=c;break}if(l<0)continue;return this.wildcard?o._listeners.splice(l,1):this._events[e].splice(l,1),0===r.length&&(this.wildcard?delete o._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete o._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&O(this.listenerTree),this},N.prototype.offAny=function(e){var t,r=0,i=0;if(e&&this._all&&this._all.length>0){for(r=0,i=(t=this._all).length;r<i;r++)if(e===t[r]){t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e);break}}else{if(t=this._all,this._removeListener)for(r=0,i=t.length;r<i;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},N.prototype.removeListener=N.prototype.off,N.prototype.removeAllListeners=function(e){if(s===e)return this._events&&p.call(this),this;if(this.wildcard){var t,r=x.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&O(this.listenerTree)}else this._events&&(this._events[e]=null);return this},N.prototype.listeners=function(e){var t,r,i,n,o,a=this._events;if(s===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(n=(t=d(a)).length,i=[];n-- >0;)"function"==typeof(r=a[t[n]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(o=this.listenerTree))return[];var l=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,l,c,o,0),l}return a&&(r=a[e])?"function"==typeof r?[r]:r:[]},N.prototype.eventNames=function(e){var t=this._events;return this.wildcard?k.call(this,this.listenerTree,[],null,e):t?d(t):[]},N.prototype.listenerCount=function(e){return this.listeners(e).length},N.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return x.call(this,t,r,this.listenerTree,0),t.length>0}var i=this._events,n=this._all;return!!(n&&n.length||i&&(s===e?d(i).length:i[e]))},N.prototype.listenersAny=function(){return this._all?this._all:[]},N.prototype.waitFor=function(e,t){var r=this,i=typeof t;return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),S((t=b(t,{timeout:0,filter:s,handleError:!1,Promise:Promise,overload:!1},{filter:_,Promise:w})).Promise,function(i,n,s){function o(){var s=t.filter;if(!s||s.apply(r,arguments)){if(r.off(e,o),t.handleError){var a=arguments[0];a?n(a):i(m.apply(null,arguments).slice(1))}else i(m.apply(null,arguments))}}s(function(){r.off(e,o)}),r._on(e,o,!1)},{timeout:t.timeout,overload:t.overload})};var T=N.prototype;Object.defineProperties(N,{defaultMaxListeners:{get:function(){return T._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");T._maxListeners=e},enumerable:!0},once:{value:function(e,t,r){return S((r=b(r,{Promise:Promise,timeout:0,overload:!1},{Promise:w})).Promise,function(r,i,n){if("function"==typeof e.addEventListener){s=function(){r(m.apply(null,arguments))},n(function(){e.removeEventListener(t,s)}),e.addEventListener(t,s,{once:!0});return}var s,o,a=function(){o&&e.removeListener("error",o),r(m.apply(null,arguments))};"error"!==t&&(o=function(r){e.removeListener(t,a),i(r)},e.once("error",o)),n(function(){o&&e.removeListener("error",o),e.removeListener(t,a)}),e.once(t,a)},{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(T,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),s!==(i=(function(){return N}).call(t,r,t,e))&&(e.exports=i)}()},512:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,i){function n(r){e.removeListener(t,s),i(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&"function"==typeof e.on&&g(e,"error",n,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,r,i){if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=l(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,s,o,c=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else for(var c=l.length,u=f(l,c),r=0;r<c;++r)i(u[r],this,t);return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},28534:function(e){e.exports=o,o.default=o,o.stable=c,o.stableStringify=c;var t="[...]",r="[Circular]",i=[],n=[];function s(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,o,l,c){void 0===c&&(c=s()),function e(i,n,s,o,l,c,u){if(c+=1,"object"==typeof i&&null!==i){for(h=0;h<o.length;h++)if(o[h]===i){a(r,i,n,l);return}if(void 0!==u.depthLimit&&c>u.depthLimit||void 0!==u.edgesLimit&&s+1>u.edgesLimit){a(t,i,n,l);return}if(o.push(i),Array.isArray(i))for(h=0;h<i.length;h++)e(i[h],h,h,o,i,c,u);else{var h,d=Object.keys(i);for(h=0;h<d.length;h++){var p=d[h];e(i[p],p,h,o,i,c,u)}}o.pop()}}(e,"",0,[],void 0,0,c);try{h=0===n.length?JSON.stringify(e,o,l):JSON.stringify(e,u(o),l)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var h,d=i.pop();4===d.length?Object.defineProperty(d[0],d[1],d[3]):d[0][d[1]]=d[2]}}return h}function a(e,t,r,s){var o=Object.getOwnPropertyDescriptor(s,r);void 0!==o.get?o.configurable?(Object.defineProperty(s,r,{value:e}),i.push([s,r,t,o])):n.push([t,r,e]):(s[r]=e,i.push([s,r,t]))}function l(e,t){return e<t?-1:e>t?1:0}function c(e,o,c,h){void 0===h&&(h=s());var d,p=function e(n,s,o,c,u,h,d){if(h+=1,"object"==typeof n&&null!==n){for(p=0;p<c.length;p++)if(c[p]===n){a(r,n,s,u);return}try{if("function"==typeof n.toJSON)return}catch(e){return}if(void 0!==d.depthLimit&&h>d.depthLimit||void 0!==d.edgesLimit&&o+1>d.edgesLimit){a(t,n,s,u);return}if(c.push(n),Array.isArray(n))for(p=0;p<n.length;p++)e(n[p],p,p,c,n,h,d);else{var p,f={},g=Object.keys(n).sort(l);for(p=0;p<g.length;p++){var m=g[p];e(n[m],m,p,c,n,h,d),f[m]=n[m]}if(void 0===u)return f;i.push([u,s,n]),u[s]=f}c.pop()}}(e,"",0,[],void 0,0,h)||e;try{d=0===n.length?JSON.stringify(p,o,c):JSON.stringify(p,u(o),c)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==i.length;){var f=i.pop();4===f.length?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return d}function u(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(n.length>0)for(var i=0;i<n.length;i++){var s=n[i];if(s[1]===t&&s[0]===r){r=s[2],n.splice(i,1);break}}return e.call(this,t,r)}}},11549:function(e,t,r){"use strict";var i=r(18339),n=Object.prototype.toString,s=Object.prototype.hasOwnProperty,o=function(e,t,r){for(var i=0,n=e.length;i<n;i++)s.call(e,i)&&(null==r?t(e[i],i,e):t.call(r,e[i],i,e))},a=function(e,t,r){for(var i=0,n=e.length;i<n;i++)null==r?t(e.charAt(i),i,e):t.call(r,e.charAt(i),i,e)},l=function(e,t,r){for(var i in e)s.call(e,i)&&(null==r?t(e[i],i,e):t.call(r,e[i],i,e))};e.exports=function(e,t,r){var s;if(!i(t))throw TypeError("iterator must be a function");(arguments.length>=3&&(s=r),"[object Array]"===n.call(e))?o(e,t,s):"string"==typeof e?a(e,t,s):l(e,t,s)}},50164:function(e){"use strict";var t=Object.prototype.toString,r=Math.max,i=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},n=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r},s=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};e.exports=function(e){var o,a=this;if("function"!=typeof a||"[object Function]"!==t.apply(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var l=n(arguments,1),c=r(0,a.length-l.length),u=[],h=0;h<c;h++)u[h]="$"+h;if(o=Function("binder","return function ("+s(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var t=a.apply(this,i(l,arguments));return Object(t)===t?t:this}return a.apply(e,i(l,arguments))}),a.prototype){var d=function(){};d.prototype=a.prototype,o.prototype=new d,d.prototype=null}return o}},24316:function(e,t,r){"use strict";var i=r(50164);e.exports=Function.prototype.bind||i},51597:function(e,t,r){"use strict";var i,n=r(56976),s=r(31330),o=r(31618),a=r(87698),l=r(5905),c=r(39819),u=r(35281),h=r(33880),d=r(60515),p=r(84924),f=r(5877),g=r(44440),m=r(35706),y=r(48925),v=r(22565),b=Function,w=function(e){try{return b('"use strict"; return ('+e+").constructor;")()}catch(e){}},E=r(67526),_=r(50228),C=function(){throw new u},S=E?function(){try{return arguments.callee,C}catch(e){try{return E(arguments,"callee").get}catch(e){return C}}}():C,I=r(79633)(),x=r(54224),A=r(2676),k=r(2987),O=r(30184),P=r(96751),R={},N="undefined"!=typeof Uint8Array&&x?x(Uint8Array):i,T={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":I&&x?x([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":R,"%AsyncGenerator%":R,"%AsyncGeneratorFunction%":R,"%AsyncIteratorPrototype%":R,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?i:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":R,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&x?x(x([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&I&&x?x(new Map()[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&I&&x?x(new Set()[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&x?x(""[Symbol.iterator]()):i,"%Symbol%":I?Symbol:i,"%SyntaxError%":c,"%ThrowTypeError%":S,"%TypedArray%":N,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":O,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":A,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":g,"%Math.pow%":m,"%Math.round%":y,"%Math.sign%":v,"%Reflect.getPrototypeOf%":k};if(x)try{null.error}catch(e){var M=x(x(e));T["%Error.prototype%"]=M}var L=function e(t){var r;if("%AsyncFunction%"===t)r=w("async function () {}");else if("%GeneratorFunction%"===t)r=w("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=w("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&x&&(r=x(n.prototype))}return T[t]=r,r},D={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=r(24316),j=r(73335),$=B.call(P,Array.prototype.concat),U=B.call(O,Array.prototype.splice),q=B.call(P,String.prototype.replace),H=B.call(P,String.prototype.slice),F=B.call(P,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,K=function(e){var t=H(e,0,1),r=H(e,-1);if("%"===t&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var i=[];return q(e,z,function(e,t,r,n){i[i.length]=r?q(n,W,"$1"):t||e}),i},V=function(e,t){var r,i=e;if(j(D,i)&&(i="%"+(r=D[i])[0]+"%"),j(T,i)){var n=T[i];if(n===R&&(n=L(i)),void 0===n&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===F(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=K(e),i=r.length>0?r[0]:"",n=V("%"+i+"%",t),s=n.name,o=n.value,a=!1,l=n.alias;l&&(i=l[0],U(r,$([0,1],l)));for(var h=1,d=!0;h<r.length;h+=1){var p=r[h],f=H(p,0,1),g=H(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===g||"'"===g||"`"===g)&&f!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),i+="."+p,j(T,s="%"+i+"%"))o=T[s];else if(null!=o){if(!(p in o)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(E&&h+1>=r.length){var m=E(o,p);o=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:o[p]}else d=j(o,p),o=o[p];d&&!a&&(T[s]=o)}}return o}},2676:function(e,t,r){"use strict";var i=r(56976);e.exports=i.getPrototypeOf||null},2987:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},54224:function(e,t,r){"use strict";var i=r(2987),n=r(2676),s=r(4236);e.exports=i?function(e){return i(e)}:n?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return n(e)}:s?function(e){return s(e)}:null},90405:function(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},67526:function(e,t,r){"use strict";var i=r(90405);if(i)try{i([],"length")}catch(e){i=null}e.exports=i},59972:function(e,t,r){"use strict";var i=r(50228),n=function(){return!!i};n.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},79633:function(e,t,r){"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(76500);e.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},76500:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var i in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},86273:function(e,t,r){"use strict";var i=r(76500);e.exports=function(){return i()&&!!Symbol.toStringTag}},73335:function(e,t,r){"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,s=r(24316);e.exports=s.call(i,n)},19087:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?n-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,l,c=8*s-n-1,u=(1<<c)-1,h=u>>1,d=23===n?5960464477539062e-23:0,p=i?0:s-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,n),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;e[r+p]=255&a,p+=f,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+p]=255&o,p+=f,o/=256,c-=8);e[r+p-f]|=128*g}},75335:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},18339:function(e){"use strict";var t,r,i=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},n(function(){throw 42},null,t)}catch(e){e!==r&&(n=null)}else n=null;var s=/^\s*class\b/,o=function(e){try{var t=i.call(e);return s.test(t)}catch(e){return!1}},a=function(e){try{if(o(e))return!1;return i.call(e),!0}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),h=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(h=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=n?function(e){if(h(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{n(e,null,t)}catch(e){if(e!==r)return!1}return!o(e)&&a(e)}:function(e){if(h(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(c)return a(e);if(o(e))return!1;var t=l.call(e);return!!("[object Function]"===t||"[object GeneratorFunction]"===t||/^\[object HTML/.test(t))&&a(e)}},59354:function(e,t,r){"use strict";var i=r(78266);e.exports=function(e){return!!i(e)}},82333:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},8566:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcEngine=void 0;let n=i(r(75077)),s=r(46281);class o extends n.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,i)=>{try{let[n,s,a]=await o._runAllMiddleware(e,t,this._middleware);if(s)return await o._runReturnHandlers(a),i(n);return r(async e=>{try{await o._runReturnHandlers(a)}catch(t){return e(t)}return e()})}catch(e){return i(e)}}}async _handleBatch(e,t){try{let r=await Promise.all(e.map(this._promiseHandle.bind(this)));if(t)return t(null,r);return r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise(t=>{this._handle(e,(e,r)=>{t(r)})})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){let r=new s.EthereumRpcError(s.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof e}`,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!=typeof e.method){let r=new s.EthereumRpcError(s.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof e.method}`,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}let r=Object.assign({},e),i={id:r.id,jsonrpc:r.jsonrpc},n=null;try{await this._processRequest(r,i)}catch(e){n=e}return n&&(delete i.result,i.error||(i.error=s.serializeError(n))),t(n,i)}async _processRequest(e,t){let[r,i,n]=await o._runAllMiddleware(e,t,this._middleware);if(o._checkForCompletion(e,t,i),await o._runReturnHandlers(n),r)throw r}static async _runAllMiddleware(e,t,r){let i=[],n=null,s=!1;for(let a of r)if([n,s]=await o._runMiddleware(e,t,a,i),s)break;return[n,s,i.reverse()]}static _runMiddleware(e,t,r,i){return new Promise(n=>{let o=e=>{let r=e||t.error;r&&(t.error=s.serializeError(r)),n([r,!0])};try{r(e,t,r=>{t.error?o(t.error):(r&&("function"!=typeof r&&o(new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:
${a(e)}`,{request:e})),i.push(r)),n([null,!1]))},o)}catch(e){o(e)}})}static async _runReturnHandlers(e){for(let t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${a(e)}`,{request:e});if(!r)throw new s.EthereumRpcError(s.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${a(e)}`,{request:e})}}function a(e){return JSON.stringify(e,null,2)}t.JsonRpcEngine=o},4029:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncMiddleware=void 0,t.createAsyncMiddleware=function(e){return async(t,r,i,n)=>{let s;let o=new Promise(e=>{s=e}),a=null,l=!1,c=async()=>{l=!0,i(e=>{a=e,s()}),await o};try{await e(t,r,c),l?(await o,a(null)):n(null)}catch(e){a?a(e):n(e)}}}},74386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScaffoldMiddleware=void 0,t.createScaffoldMiddleware=function(e){return(t,r,i,n)=>{let s=e[t.method];return void 0===s?i():"function"==typeof s?s(t,r,i,n):(r.result=s,n())}}},74719:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;let r=Math.floor(4294967295*Math.random());t.getUniqueId=function(){return r=(r+1)%4294967295}},94449:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdRemapMiddleware=void 0;let i=r(74719);t.createIdRemapMiddleware=function(){return(e,t,r,n)=>{let s=e.id,o=i.getUniqueId();e.id=o,t.id=o,r(r=>{e.id=s,t.id=s,r()})}}},49116:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(94449),t),n(r(4029),t),n(r(74386),t),n(r(74719),t),n(r(8566),t),n(r(13592),t)},13592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMiddleware=void 0;let i=r(8566);t.mergeMiddleware=function(e){let t=new i.JsonRpcEngine;return e.forEach(e=>t.push(e)),t.asMiddleware()}},75077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(512);function n(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout(()=>{throw e})}}class s extends i.EventEmitter{emit(e,...t){let r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let r=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw r.context=e,r}let s=i[e];if(void 0===s)return!1;if("function"==typeof s)n(s,this,t);else{let e=s.length,r=function(e){let t=e.length,r=Array(t);for(let i=0;i<t;i+=1)r[i]=e[i];return r}(s);for(let i=0;i<e;i+=1)n(r[i],this,t)}return!0}}t.default=s},21192:function(e){e.exports=function(e){var t=(e=e||{}).max||Number.MAX_SAFE_INTEGER,r=void 0!==e.start?e.start:Math.floor(Math.random()*t);return function(){return r%=t,r++}}},26961:function(e,t,r){e.exports=r(8478)(r(64586))},8478:function(e,t,r){let i=r(99001),n=r(68013);e.exports=function(e){let t=i(e),r=n(e);return function(e,i){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw Error("Invald algorithm: "+e)}}}},99001:function(e,t,r){var i=r(67133).Buffer;let{Transform:n}=r(21579);e.exports=e=>class t extends n{constructor(t,r,i,n,s){super(s),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._hashBitLength=n,this._options=s,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Digest already called");return i.isBuffer(e)||(e=i.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},68013:function(e,t,r){var i=r(67133).Buffer;let{Transform:n}=r(21579);e.exports=e=>class t extends n{constructor(t,r,i,n){super(n),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._options=n,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Squeeze already called");return i.isBuffer(e)||(e=i.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},89773:function(e,t){let r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){let i=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],d=e[9]^e[19]^e[29]^e[39]^e[49],p=h^(s<<1|o>>>31),f=d^(o<<1|s>>>31),g=e[0]^p,m=e[1]^f,y=e[10]^p,v=e[11]^f,b=e[20]^p,w=e[21]^f,E=e[30]^p,_=e[31]^f,C=e[40]^p,S=e[41]^f;p=i^(a<<1|l>>>31),f=n^(l<<1|a>>>31);let I=e[2]^p,x=e[3]^f,A=e[12]^p,k=e[13]^f,O=e[22]^p,P=e[23]^f,R=e[32]^p,N=e[33]^f,T=e[42]^p,M=e[43]^f;p=s^(c<<1|u>>>31),f=o^(u<<1|c>>>31);let L=e[4]^p,D=e[5]^f,B=e[14]^p,j=e[15]^f,$=e[24]^p,U=e[25]^f,q=e[34]^p,H=e[35]^f,F=e[44]^p,z=e[45]^f;p=a^(h<<1|d>>>31),f=l^(d<<1|h>>>31);let W=e[6]^p,K=e[7]^f,V=e[16]^p,G=e[17]^f,Z=e[26]^p,J=e[27]^f,Y=e[36]^p,X=e[37]^f,Q=e[46]^p,ee=e[47]^f;p=c^(i<<1|n>>>31),f=u^(n<<1|i>>>31);let et=e[8]^p,er=e[9]^f,ei=e[18]^p,en=e[19]^f,es=e[28]^p,eo=e[29]^f,ea=e[38]^p,el=e[39]^f,ec=e[48]^p,eu=e[49]^f,eh=v<<4|y>>>28,ed=y<<4|v>>>28,ep=b<<3|w>>>29,ef=w<<3|b>>>29,eg=_<<9|E>>>23,em=E<<9|_>>>23,ey=C<<18|S>>>14,ev=S<<18|C>>>14,eb=I<<1|x>>>31,ew=x<<1|I>>>31,eE=k<<12|A>>>20,e_=A<<12|k>>>20,eC=O<<10|P>>>22,eS=P<<10|O>>>22,eI=N<<13|R>>>19,ex=R<<13|N>>>19,eA=T<<2|M>>>30,ek=M<<2|T>>>30,eO=D<<30|L>>>2,eP=L<<30|D>>>2,eR=B<<6|j>>>26,eN=j<<6|B>>>26,eT=U<<11|$>>>21,eM=$<<11|U>>>21,eL=q<<15|H>>>17,eD=H<<15|q>>>17,eB=z<<29|F>>>3,ej=F<<29|z>>>3,e$=W<<28|K>>>4,eU=K<<28|W>>>4,eq=G<<23|V>>>9,eH=V<<23|G>>>9,eF=Z<<25|J>>>7,ez=J<<25|Z>>>7,eW=Y<<21|X>>>11,eK=X<<21|Y>>>11,eV=ee<<24|Q>>>8,eG=Q<<24|ee>>>8,eZ=et<<27|er>>>5,eJ=er<<27|et>>>5,eY=ei<<20|en>>>12,eX=en<<20|ei>>>12,eQ=eo<<7|es>>>25,e0=es<<7|eo>>>25,e1=ea<<8|el>>>24,e2=el<<8|ea>>>24,e3=ec<<14|eu>>>18,e5=eu<<14|ec>>>18;e[0]=g^~eE&eT,e[1]=m^~e_&eM,e[10]=e$^~eY&ep,e[11]=eU^~eX&ef,e[20]=eb^~eR&eF,e[21]=ew^~eN&ez,e[30]=eZ^~eh&eC,e[31]=eJ^~ed&eS,e[40]=eO^~eq&eQ,e[41]=eP^~eH&e0,e[2]=eE^~eT&eW,e[3]=e_^~eM&eK,e[12]=eY^~ep&eI,e[13]=eX^~ef&ex,e[22]=eR^~eF&e1,e[23]=eN^~ez&e2,e[32]=eh^~eC&eL,e[33]=ed^~eS&eD,e[42]=eq^~eQ&eg,e[43]=eH^~e0&em,e[4]=eT^~eW&e3,e[5]=eM^~eK&e5,e[14]=ep^~eI&eB,e[15]=ef^~ex&ej,e[24]=eF^~e1&ey,e[25]=ez^~e2&ev,e[34]=eC^~eL&eV,e[35]=eS^~eD&eG,e[44]=eQ^~eg&eA,e[45]=e0^~em&ek,e[6]=eW^~e3&g,e[7]=eK^~e5&m,e[16]=eI^~eB&e$,e[17]=ex^~ej&eU,e[26]=e1^~ey&eb,e[27]=e2^~ev&ew,e[36]=eL^~eV&eZ,e[37]=eD^~eG&eJ,e[46]=eg^~eA&eO,e[47]=em^~ek&eP,e[8]=e3^~g&eE,e[9]=e5^~m&e_,e[18]=eB^~e$&eY,e[19]=ej^~eU&eX,e[28]=ey^~eb&eR,e[29]=ev^~ew&eN,e[38]=eV^~eZ&eh,e[39]=eG^~eJ&ed,e[48]=eA^~eO&eq,e[49]=ek^~eP&eH,e[0]^=r[2*t],e[1]^=r[2*t+1]}}},64586:function(e,t,r){var i=r(67133).Buffer;let n=r(89773);function s(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}s.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},s.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0)},s.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,(128&e)!=0&&this.count===this.blockSize-1&&n.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,n.p1600(this.state),this.count=0,this.squeezing=!0},s.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=i.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0);return t},s.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=s},60515:function(e){"use strict";e.exports=Math.abs},84924:function(e){"use strict";e.exports=Math.floor},57055:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},5877:function(e){"use strict";e.exports=Math.max},44440:function(e){"use strict";e.exports=Math.min},35706:function(e){"use strict";e.exports=Math.pow},48925:function(e){"use strict";e.exports=Math.round},22565:function(e,t,r){"use strict";var i=r(57055);e.exports=function(e){return i(e)||0===e?e:e<0?-1:1}},60438:function(e){function t(e,t,r,i){return Math.round(e/r)+" "+i+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var i,n,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===s&&isFinite(e))return r.long?(i=Math.abs(e))>=864e5?t(e,i,864e5,"day"):i>=36e5?t(e,i,36e5,"hour"):i>=6e4?t(e,i,6e4,"minute"):i>=1e3?t(e,i,1e3,"second"):e+" ms":(n=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":n>=36e5?Math.round(e/36e5)+"h":n>=6e4?Math.round(e/6e4)+"m":n>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},90854:function(e){"use strict";e.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},88049:function(e,t,r){"use strict";r.r(t),r.d(t,{Component:function(){return I},Fragment:function(){return S},cloneElement:function(){return $},createContext:function(){return U},createElement:function(){return E},createRef:function(){return C},h:function(){return E},hydrate:function(){return j},isValidElement:function(){return o},options:function(){return n},render:function(){return B},toChildArray:function(){return function e(t,r){return r=r||[],null==t||"boolean"==typeof t||(v(t)?t.some(function(t){e(t,r)}):r.push(t)),r}}});var i,n,s,o,a,l,c,u,h,d,p,f,g={},m=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,v=Array.isArray;function b(e,t){for(var r in t)e[r]=t[r];return e}function w(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function E(e,t,r){var n,s,o,a={};for(o in t)"key"==o?n=t[o]:"ref"==o?s=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return _(e,a,n,s,null)}function _(e,t,r,i,o){var a={type:e,props:t,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++s:o,__i:-1,__u:0};return null==o&&null!=n.vnode&&n.vnode(a),a}function C(){return{current:null}}function S(e){return e.children}function I(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?x(e):null}function A(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!k.__r++||l!==n.debounceRendering)&&((l=n.debounceRendering)||c)(k)}function k(){var e,t,r,i,s,o,l,c;for(a.sort(u);e=a.shift();)e.__d&&(t=a.length,i=void 0,o=(s=(r=e).__v).__e,l=[],c=[],r.__P&&((i=b({},s)).__v=s.__v+1,n.vnode&&n.vnode(i),T(r.__P,i,s,r.__n,r.__P.namespaceURI,32&s.__u?[o]:null,l,null==o?x(s):o,!!(32&s.__u),c),i.__v=s.__v,i.__.__k[i.__i]=i,M(l,i,c),i.__e!=o&&function e(t){var r,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(i=t.__k[r])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)),a.length>t&&a.sort(u));k.__r=0}function O(e,t,r,i,s,o,a,l,c,u,h){var d,p,f,y,b,E=i&&i.__k||m,C=t.length;for(r.__d=c,function(e,t,r){var i,s,o,a,l,c=t.length,u=r.length,h=u,d=0;for(e.__k=[],i=0;i<c;i++)null!=(s=t[i])&&"boolean"!=typeof s&&"function"!=typeof s?(a=i+d,(s=e.__k[i]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?_(null,s,null,null,null):v(s)?_(S,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?_(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!==(l=s.__i=function(e,t,r,i){var n=e.key,s=e.type,o=r-1,a=r+1,l=t[r];if(null===l||l&&n==l.key&&s===l.type&&0==(131072&l.__u))return r;if(i>(null!=l&&0==(131072&l.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((l=t[o])&&0==(131072&l.__u)&&n==l.key&&s===l.type)return o;o--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&n==l.key&&s===l.type)return a;a++}}return -1}(s,r,a,h))&&(h--,(o=r[l])&&(o.__u|=131072)),null==o||null===o.__v?(-1==l&&d--,"function"!=typeof s.type&&(s.__u|=65536)):l!==a&&(l==a-1?d--:l==a+1?d++:(l>a?d--:d++,s.__u|=65536))):s=e.__k[i]=null;if(h)for(i=0;i<u;i++)null!=(o=r[i])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=x(o)),function e(t,r,i){var s,o;if(n.unmount&&n.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||L(s,null,r)),null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(e){n.__e(e,r)}s.base=s.__P=null}if(s=t.__k)for(o=0;o<s.length;o++)s[o]&&e(s[o],r,i||"function"!=typeof t.type);i||w(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(o,o))}(r,t,E),c=r.__d,d=0;d<C;d++)null!=(f=r.__k[d])&&(p=-1===f.__i?g:E[f.__i]||g,f.__i=d,T(e,f,p,s,o,a,l,c,u,h),y=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&L(p.ref,null,f),h.push(f.ref,f.__c||y,f)),null==b&&null!=y&&(b=y),65536&f.__u||p.__k===f.__k?c=function e(t,r,i){var n,s;if("function"==typeof t.type){for(n=t.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=t,r=e(n[s],r,i));return r}t.__e!=r&&(r&&t.type&&!i.contains(r)&&(r=x(t)),i.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType);return r}(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:y&&(c=y.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=c,r.__e=b}function P(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||y.test(t)?r:r+"px"}function R(e,t,r,i,n){var s;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)r&&t in r||P(e.style,t,"");if(r)for(t in r)i&&r[t]===i[t]||P(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase() in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?i?r.u=i.u:(r.u=h,e.addEventListener(t,s?p:d,s)):e.removeEventListener(t,s?p:d,s);else{if("http://www.w3.org/2000/svg"==n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function N(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=h++;else if(t.t<r.u)return;return r(n.event?n.event(t):t)}}}function T(e,t,r,s,o,a,l,c,u,h){var d,p,f,m,y,E,_,C,A,k,P,N,T,M,L,B,j=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(u=!!(32&r.__u),a=[c=t.__e=r.__e]),(d=n.__b)&&d(t);e:if("function"==typeof j)try{if(C=t.props,A="prototype"in j&&j.prototype.render,k=(d=j.contextType)&&s[d.__c],P=d?k?k.props.value:d.__:s,r.__c?_=(p=t.__c=r.__c).__=p.__E:(A?t.__c=p=new j(C,P):(t.__c=p=new I(C,P),p.constructor=j,p.render=D),k&&k.sub(p),p.props=C,p.state||(p.state={}),p.context=P,p.__n=s,f=p.__d=!0,p.__h=[],p._sb=[]),A&&null==p.__s&&(p.__s=p.state),A&&null!=j.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=b({},p.__s)),b(p.__s,j.getDerivedStateFromProps(C,p.__s))),m=p.props,y=p.state,p.__v=t,f)A&&null==j.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),A&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(A&&null==j.getDerivedStateFromProps&&C!==m&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(C,P),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(C,p.__s,P)||t.__v===r.__v)){for(t.__v!==r.__v&&(p.props=C,p.state=p.__s,p.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),N=0;N<p._sb.length;N++)p.__h.push(p._sb[N]);p._sb=[],p.__h.length&&l.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(C,p.__s,P),A&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(m,y,E)})}if(p.context=P,p.props=C,p.__P=e,p.__e=!1,T=n.__r,M=0,A){for(p.state=p.__s,p.__d=!1,T&&T(t),d=p.render(p.props,p.state,p.context),L=0;L<p._sb.length;L++)p.__h.push(p._sb[L]);p._sb=[]}else do p.__d=!1,T&&T(t),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++M<25);p.state=p.__s,null!=p.getChildContext&&(s=b(b({},s),p.getChildContext())),A&&!f&&null!=p.getSnapshotBeforeUpdate&&(E=p.getSnapshotBeforeUpdate(m,y)),O(e,v(B=null!=d&&d.type===S&&null==d.key?d.props.children:d)?B:[B],t,r,s,o,a,l,c,u,h),p.base=t.__e,t.__u&=-161,p.__h.length&&l.push(p),_&&(p.__E=p.__=null)}catch(e){if(t.__v=null,u||null!=a){for(t.__u|=u?160:32;c&&8===c.nodeType&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else t.__e=r.__e,t.__k=r.__k;n.__e(e,t,r)}else null==a&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,s,o,a,l,c,u){var h,d,p,f,m,y,b,E=r.props,_=t.props,C=t.type;if("svg"===C?o="http://www.w3.org/2000/svg":"math"===C?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=a){for(h=0;h<a.length;h++)if((m=a[h])&&"setAttribute"in m==!!C&&(C?m.localName===C:3===m.nodeType)){e=m,a[h]=null;break}}if(null==e){if(null===C)return document.createTextNode(_);e=document.createElementNS(o,C,_.is&&_),c&&(n.__m&&n.__m(t,a),c=!1),a=null}if(null===C)E===_||c&&e.data===_||(e.data=_);else{if(a=a&&i.call(e.childNodes),E=r.props||g,!c&&null!=a)for(E={},h=0;h<e.attributes.length;h++)E[(m=e.attributes[h]).name]=m.value;for(h in E)if(m=E[h],"children"==h);else if("dangerouslySetInnerHTML"==h)p=m;else if(!(h in _)){if("value"==h&&"defaultValue"in _||"checked"==h&&"defaultChecked"in _)continue;R(e,h,null,m,o)}for(h in _)m=_[h],"children"==h?f=m:"dangerouslySetInnerHTML"==h?d=m:"value"==h?y=m:"checked"==h?b=m:c&&"function"!=typeof m||E[h]===m||R(e,h,m,E[h],o);if(d)c||p&&(d.__html===p.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(p&&(e.innerHTML=""),O(e,v(f)?f:[f],t,r,s,"foreignObject"===C?"http://www.w3.org/1999/xhtml":o,a,l,a?a[0]:r.__k&&x(r,0),c,u),null!=a)for(h=a.length;h--;)w(a[h]);c||(h="value","progress"===C&&null==y?e.removeAttribute("value"):void 0===y||y===e[h]&&("progress"!==C||y)&&("option"!==C||y===E[h])||R(e,h,y,E[h],o),h="checked",void 0!==b&&b!==e[h]&&R(e,h,b,E[h],o))}return e}(r.__e,t,r,s,o,a,l,u,h);(d=n.diffed)&&d(t)}function M(e,t,r){t.__d=void 0;for(var i=0;i<r.length;i++)L(r[i],r[++i],r[++i]);n.__c&&n.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){n.__e(e,t.__v)}})}function L(e,t,r){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){n.__e(e,r)}}function D(e,t,r){return this.constructor(e,r)}function B(e,t,r){var s,o,a,l;n.__&&n.__(e,t),o=(s="function"==typeof r)?null:r&&r.__k||t.__k,a=[],l=[],T(t,e=(!s&&r||t).__k=E(S,null,[e]),o||g,g,t.namespaceURI,!s&&r?[r]:o?null:t.firstChild?i.call(t.childNodes):null,a,!s&&r?r:o?o.__e:t.firstChild,s,l),M(a,e,l)}function j(e,t){B(e,t,j)}function $(e,t,r){var n,s,o,a,l=b({},e.props);for(o in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==o?n=t[o]:"ref"==o?s=t[o]:l[o]=void 0===t[o]&&void 0!==a?a[o]:t[o];return arguments.length>2&&(l.children=arguments.length>3?i.call(arguments,2):r),_(e.type,l,n||e.key,s||e.ref,null)}function U(e,t){var r={__c:t="__cC"+f++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,i;return this.getChildContext||(r=[],(i={})[t]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(function(e){e.__e=!0,A(e)})},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r&&r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}i=m.slice,n={__e:function(e,t,r,i){for(var n,s,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((s=n.constructor)&&null!=s.getDerivedStateFromError&&(n.setState(s.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e,i||{}),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},s=0,o=function(e){return null!=e&&null==e.constructor},I.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=b({},this.state),"function"==typeof e&&(e=e(b({},r),this.props)),e&&b(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),A(this))},I.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),A(this))},I.prototype.render=S,a=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},k.__r=0,h=0,d=N(!1),p=N(!0),f=0},87060:function(e,t,r){"use strict";r.r(t),r.d(t,{useCallback:function(){return I},useContext:function(){return x},useDebugValue:function(){return A},useEffect:function(){return w},useErrorBoundary:function(){return k},useId:function(){return O},useImperativeHandle:function(){return C},useLayoutEffect:function(){return E},useMemo:function(){return S},useReducer:function(){return b},useRef:function(){return _},useState:function(){return v}});var i,n,s,o,a=r(88049),l=0,c=[],u=a.options,h=u.__b,d=u.__r,p=u.diffed,f=u.__c,g=u.unmount,m=u.__;function y(e,t){u.__h&&u.__h(n,e,l||t),l=0;var r=n.__H||(n.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function v(e){return l=1,b(L,e)}function b(e,t,r){var s=y(i++,2);if(s.t=e,!s.__c&&(s.__=[r?r(t):L(void 0,t),function(e){var t=s.__N?s.__N[0]:s.__[0],r=s.t(t,e);t!==r&&(s.__N=[r,s.__[1]],s.__c.setState({}))}],s.__c=n,!n.u)){var o=function(e,t,r){if(!s.__c.__H)return!0;var i=s.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!a||a.call(this,e,t,r);var n=!1;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(n=!0)}}),!(!n&&s.__c.props===e)&&(!a||a.call(this,e,t,r))};n.u=!0;var a=n.shouldComponentUpdate,l=n.componentWillUpdate;n.componentWillUpdate=function(e,t,r){if(this.__e){var i=a;a=void 0,o(e,t,r),a=i}l&&l.call(this,e,t,r)},n.shouldComponentUpdate=o}return s.__N||s.__}function w(e,t){var r=y(i++,3);!u.__s&&M(r.__H,t)&&(r.__=e,r.i=t,n.__H.__h.push(r))}function E(e,t){var r=y(i++,4);!u.__s&&M(r.__H,t)&&(r.__=e,r.i=t,n.__h.push(r))}function _(e){return l=5,S(function(){return{current:e}},[])}function C(e,t,r){l=6,E(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==r?r:r.concat(e))}function S(e,t){var r=y(i++,7);return M(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function I(e,t){return l=8,S(function(){return e},t)}function x(e){var t=n.context[e.__c],r=y(i++,9);return r.c=e,t?(null==r.__&&(r.__=!0,t.sub(n)),t.props.value):e.__}function A(e,t){u.useDebugValue&&u.useDebugValue(t?t(e):e)}function k(e){var t=y(i++,10),r=v();return t.__=e,n.componentDidCatch||(n.componentDidCatch=function(e,i){t.__&&t.__(e,i),r[1](e)}),[r[0],function(){r[1](void 0)}]}function O(){var e=y(i++,11);if(!e.__){for(var t=n.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function P(){for(var e;e=c.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(N),e.__H.__h.forEach(T),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){n=null,h&&h(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),m&&m(e,t)},u.__r=function(e){d&&d(e),i=0;var t=(n=e.__c).__H;t&&(s===n?(t.__h=[],n.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(N),t.__h.forEach(T),t.__h=[],i=0)),s=n},u.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==c.push(t)&&o===u.requestAnimationFrame||((o=u.requestAnimationFrame)||function(e){var t,r=function(){clearTimeout(i),R&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(r,100);R&&(t=requestAnimationFrame(r))})(P)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),s=n=null},u.__c=function(e,t){t.some(function(e){try{e.__h.forEach(N),e.__h=e.__h.filter(function(e){return!e.__||T(e)})}catch(r){t.some(function(e){e.__h&&(e.__h=[])}),t=[],u.__e(r,e.__v)}}),f&&f(e,t)},u.unmount=function(e){g&&g(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(e){try{N(e)}catch(e){t=e}}),r.__H=void 0,t&&u.__e(t,r.__v))};var R="function"==typeof requestAnimationFrame;function N(e){var t=n,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),n=t}function T(e){var t=n;e.__c=e.__(),n=t}function M(e,t){return!e||e.length!==t.length||t.some(function(t,r){return t!==e[r]})}function L(e,t){return"function"==typeof t?t(e):t}},75298:function(e,t,r){let i=r(47363),n=r(37621),s=r(46028),o=r(12330);function a(e,t,r,s,o){let a=[].slice.call(arguments,1),l=a.length,c="function"==typeof a[l-1];if(!c&&!i())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(o=r,r=t,t=s=void 0):3===l&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=s=void 0):2!==l||t.getContext||(s=r,r=t,t=void 0),new Promise(function(i,o){try{let o=n.create(r,s);i(e(o,t,s))}catch(e){o(e)}})}try{let i=n.create(r,s);o(null,e(i,t,s))}catch(e){o(e)}}t.create=n.create,t.toCanvas=a.bind(null,s.render),t.toDataURL=a.bind(null,s.renderToDataURL),t.toString=a.bind(null,function(e,t,r){return o.render(e,r)})},47363:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},8177:function(e,t,r){let i=r(13400).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=i(e),n=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-n;return s.push(6),s.reverse()},t.getPositions=function(e){let r=[],i=t.getRowColCoords(e),n=i.length;for(let e=0;e<n;e++)for(let t=0;t<n;t++)(0!==e||0!==t)&&(0!==e||t!==n-1)&&(e!==n-1||0!==t)&&r.push([i[e],i[t]]);return r}},77654:function(e,t,r){let i=r(37662),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=i.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*n.indexOf(this.data[t]);r+=n.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=s},41904:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},21091:function(e){function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,i){let n=e*this.size+t;this.data[n]=r,i&&(this.reservedBit[n]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},90690:function(e,t,r){let i=r(53216),n=r(37662);function s(e){this.mode=n.BYTE,"string"==typeof e&&(e=i(e)),this.data=new Uint8Array(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=s},37039:function(e,t,r){let i=r(9406),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case i.L:return n[(e-1)*4+0];case i.M:return n[(e-1)*4+1];case i.Q:return n[(e-1)*4+2];case i.H:return n[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return s[(e-1)*4+0];case i.M:return s[(e-1)*4+1];case i.Q:return s[(e-1)*4+2];case i.H:return s[(e-1)*4+3];default:return}}},9406:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},78241:function(e,t,r){let i=r(13400).getSymbolSize;t.getPositions=function(e){let t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},50237:function(e,t,r){let i=r(13400),n=i.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;i.getBCHDigit(s)-n>=0;)s^=1335<<i.getBCHDigit(s)-n;return(r<<10|s)^21522}},51309:function(e,t){let r=new Uint8Array(512),i=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw Error("log("+e+")");return i[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},69592:function(e,t,r){let i=r(37662),n=r(13400);function s(e){this.mode=i.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=n.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=s},68334:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,i=0,n=0,s=0,o=null,a=null;for(let l=0;l<t;l++){n=s=0,o=a=null;for(let c=0;c<t;c++){let t=e.get(l,c);t===o?n++:(n>=5&&(i+=r.N1+(n-5)),o=t,n=1),(t=e.get(c,l))===a?s++:(s>=5&&(i+=r.N1+(s-5)),a=t,s=1)}n>=5&&(i+=r.N1+(n-5)),s>=5&&(i+=r.N1+(s-5))}return i},t.getPenaltyN2=function(e){let t=e.size,i=0;for(let r=0;r<t-1;r++)for(let n=0;n<t-1;n++){let t=e.get(r,n)+e.get(r,n+1)+e.get(r+1,n)+e.get(r+1,n+1);(4===t||0===t)&&i++}return i*r.N2},t.getPenaltyN3=function(e){let t=e.size,i=0,n=0,s=0;for(let r=0;r<t;r++){n=s=0;for(let o=0;o<t;o++)n=n<<1&2047|e.get(r,o),o>=10&&(1488===n||93===n)&&i++,s=s<<1&2047|e.get(o,r),o>=10&&(1488===s||93===s)&&i++}return i*r.N3},t.getPenaltyN4=function(e){let t=0,i=e.data.length;for(let r=0;r<i;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/i/5)-10)*r.N4},t.applyMask=function(e,r){let i=r.size;for(let n=0;n<i;n++)for(let s=0;s<i;s++)r.isReserved(s,n)||r.xor(s,n,function(e,r,i){switch(e){case t.Patterns.PATTERN000:return(r+i)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(r+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return r*i%2+r*i%3==0;case t.Patterns.PATTERN110:return(r*i%2+r*i%3)%2==0;case t.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,n))},t.getBestMask=function(e,r){let i=Object.keys(t.Patterns).length,n=0,s=1/0;for(let o=0;o<i;o++){r(o),t.applyMask(o,e);let i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),i<s&&(s=i,n=o)}return n}},37662:function(e,t,r){let i=r(64956),n=r(66579);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!i.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},10894:function(e,t,r){let i=r(37662);function n(e){this.mode=i.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let i=this.data.length-t;i>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*i+1))},e.exports=n},25153:function(e,t,r){let i=r(51309);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)r[n+s]^=i.mul(e[n],t[s]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let n=0;n<t.length;n++)r[n]^=i.mul(t[n],e);let n=0;for(;n<r.length&&0===r[n];)n++;r=r.slice(n)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=t.mul(r,new Uint8Array([1,i.exp(n)]));return r}},37621:function(e,t,r){let i=r(13400),n=r(9406),s=r(41904),o=r(21091),a=r(8177),l=r(78241),c=r(68334),u=r(37039),h=r(9936),d=r(48670),p=r(50237),f=r(37662),g=r(25082);function m(e,t,r){let i,n;let s=e.size,o=p.getEncodedBits(t,r);for(i=0;i<15;i++)n=(o>>i&1)==1,i<6?e.set(i,8,n,!0):i<8?e.set(i+1,8,n,!0):e.set(s-15+i,8,n,!0),i<8?e.set(8,s-i-1,n,!0):i<9?e.set(8,15-i-1+1,n,!0):e.set(8,15-i-1,n,!0);e.set(s-8,8,1,!0)}t.create=function(e,t){let r,p;if(void 0===e||""===e)throw Error("No input text");let y=n.M;return void 0!==t&&(y=n.from(t.errorCorrectionLevel,n.M),r=d.from(t.version),p=c.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),function(e,t,r,n){let p;if(Array.isArray(e))p=g.fromArray(e);else if("string"==typeof e){let i=t;if(!i){let t=g.rawSplit(e);i=d.getBestVersionForData(t,r)}p=g.fromString(e,i||40)}else throw Error("Invalid data");let y=d.getBestVersionForData(p,r);if(!y)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;let v=function(e,t,r){let n=new s;r.forEach(function(t){n.put(t.mode.bit,4),n.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(n)});let o=(i.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t))*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let e=0;e<a;e++)n.put(e%2?17:236,8);return function(e,t,r){let n,s;let o=i.getSymbolTotalCodewords(t),a=o-u.getTotalCodewordsCount(t,r),l=u.getBlocksCount(t,r),c=o%l,d=l-c,p=Math.floor(o/l),f=Math.floor(a/l),g=f+1,m=p-f,y=new h(m),v=0,b=Array(l),w=Array(l),E=0,_=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<d?f:g;b[e]=_.slice(v,v+t),w[e]=y.encode(b[e]),v+=t,E=Math.max(E,t)}let C=new Uint8Array(o),S=0;for(n=0;n<E;n++)for(s=0;s<l;s++)n<b[s].length&&(C[S++]=b[s][n]);for(n=0;n<m;n++)for(s=0;s<l;s++)C[S++]=w[s][n];return C}(n,e,t)}(t,r,p),b=new o(i.getSymbolSize(t));return function(e,t){let r=e.size,i=l.getPositions(t);for(let t=0;t<i.length;t++){let n=i[t][0],s=i[t][1];for(let t=-1;t<=7;t++)if(!(n+t<=-1)&&!(r<=n+t))for(let i=-1;i<=7;i++)s+i<=-1||r<=s+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(n+t,s+i,!0,!0):e.set(n+t,s+i,!1,!0))}}(b,t),function(e){let t=e.size;for(let r=8;r<t-8;r++){let t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(b),function(e,t){let r=a.getPositions(t);for(let t=0;t<r.length;t++){let i=r[t][0],n=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(i+t,n+r,!0,!0):e.set(i+t,n+r,!1,!0)}}(b,t),m(b,r,0),t>=7&&function(e,t){let r,i,n;let s=e.size,o=d.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),i=t%3+s-8-3,n=(o>>t&1)==1,e.set(r,i,n,!0),e.set(i,r,n,!0)}(b,t),function(e,t){let r=e.size,i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!e.isReserved(n,a-r)){let i=!1;o<t.length&&(i=(t[o]>>>s&1)==1),e.set(n,a-r,i),-1==--s&&(o++,s=7)}if((n+=i)<0||r<=n){n-=i,i=-i;break}}}(b,v),isNaN(n)&&(n=c.getBestMask(b,m.bind(null,b,r))),c.applyMask(n,b),m(b,r,n),{modules:b,version:t,errorCorrectionLevel:r,maskPattern:n,segments:p}}(e,r,y,p)}},9936:function(e,t,r){let i=r(25153);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=i.mod(t,this.genPoly),n=this.degree-r.length;if(n>0){let e=new Uint8Array(this.degree);return e.set(r,n),e}return r},e.exports=n},66579:function(e,t){let r="[0-9]+",i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(i,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(n,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+i+"$"),o=RegExp("^"+r+"$"),a=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},25082:function(e,t,r){let i=r(37662),n=r(10894),s=r(77654),o=r(90690),a=r(69592),l=r(66579),c=r(13400),u=r(78343);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,r){let i;let n=[];for(;null!==(i=e.exec(r));)n.push({data:i[0],index:i.index,mode:t,length:i[0].length});return n}function p(e){let t,r;let n=d(l.NUMERIC,i.NUMERIC,e),s=d(l.ALPHANUMERIC,i.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=d(l.BYTE,i.BYTE,e),r=d(l.KANJI,i.KANJI,e)):(t=d(l.BYTE_KANJI,i.BYTE,e),r=[]),n.concat(s,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case i.NUMERIC:return n.getBitsLength(e);case i.ALPHANUMERIC:return s.getBitsLength(e);case i.KANJI:return a.getBitsLength(e);case i.BYTE:return o.getBitsLength(e)}}function g(e,t){let r;let l=i.getBestModeForData(e);if((r=i.from(t,l))!==i.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+i.toString(r)+".\n Suggested mode is: "+i.toString(l));switch(r!==i.KANJI||c.isKanjiModeEnabled()||(r=i.BYTE),r){case i.NUMERIC:return new n(e);case i.ALPHANUMERIC:return new s(e);case i.KANJI:return new a(e);case i.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,r){let n=function(e,t){let r={},n={start:{}},s=["start"];for(let o=0;o<e.length;o++){let a=e[o],l=[];for(let e=0;e<a.length;e++){let c=a[e],u=""+o+e;l.push(u),r[u]={node:c,lastCount:0},n[u]={};for(let e=0;e<s.length;e++){let o=s[e];r[o]&&r[o].node.mode===c.mode?(n[o][u]=f(r[o].lastCount+c.length,c.mode)-f(r[o].lastCount,c.mode),r[o].lastCount+=c.length):(r[o]&&(r[o].lastCount=c.length),n[o][u]=f(c.length,c.mode)+4+i.getCharCountIndicator(c.mode,t))}}s=l}for(let e=0;e<s.length;e++)n[s[e]].end=0;return{map:n,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];switch(n.mode){case i.NUMERIC:t.push([n,{data:n.data,mode:i.ALPHANUMERIC,length:n.length},{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.ALPHANUMERIC:t.push([n,{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.KANJI:t.push([n,{data:n.data,mode:i.BYTE,length:h(n.data)}]);break;case i.BYTE:t.push([{data:n.data,mode:i.BYTE,length:h(n.data)}])}}return t}(p(e,c.isKanjiModeEnabled())),r),s=u.find_path(n.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(n.table[s[e]].node);return t.fromArray(o.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(p(e,c.isKanjiModeEnabled()))}},13400:function(e,t){let r;let i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return i[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},64956:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},48670:function(e,t,r){let i=r(13400),n=r(37039),s=r(9406),o=r(37662),a=r(64956),l=i.getBCHDigit(7973);function c(e,t){return o.getCharCountIndicator(e,t)+4}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!a.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);let s=(i.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t))*8;if(r===o.MIXED)return s;let l=s-c(r,e);switch(r){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,r){let i;let n=s.from(r,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let i=1;i<=40;i++)if(function(e,t){let r=0;return e.forEach(function(e){let i=c(e.mode,t);r+=i+e.getBitsLength()}),r}(e,i)<=t.getCapacity(i,r,o.MIXED))return i}(e,n);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,r,i){for(let n=1;n<=40;n++)if(r<=t.getCapacity(n,i,e))return n}(i.mode,i.getLength(),n)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-l>=0;)t^=7973<<i.getBCHDigit(t)-l;return e<<12|t}},46028:function(e,t,r){let i=r(10544);t.render=function(e,t,r){var n;let s=r,o=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=i.getOptions(s);let a=i.getImageWidth(e.modules.size,s),l=o.getContext("2d"),c=l.createImageData(a,a);return i.qrToImageData(c.data,e,s),n=o,l.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px",l.putImageData(c,0,0),o},t.renderToDataURL=function(e,r,i){let n=i;void 0!==n||r&&r.getContext||(n=r,r=void 0),n||(n={});let s=t.render(e,r,n),o=n.type||"image/png",a=n.rendererOpts||{};return s.toDataURL(o,a.quality)}},12330:function(e,t,r){let i=r(10544);function n(e,t){let r=e.a/255,i=t+'="'+e.hex+'"';return r<1?i+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function s(e,t,r){let i=e+t;return void 0!==r&&(i+=" "+r),i}t.render=function(e,t,r){let o=i.getOptions(t),a=e.modules.size,l=e.modules.data,c=a+2*o.margin,u=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,r){let i="",n=0,o=!1,a=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),u=Math.floor(l/t);c||o||(o=!0),e[l]?(a++,l>0&&c>0&&e[l-1]||(i+=o?s("M",c+r,.5+u+r):s("m",n,0),n=0,o=!1),c+1<t&&e[l+1]||(i+=s("h",a),a=0)):n++}return i}(l,a,o.margin)+'"/>',d='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+c)+" "+c+'" shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof r&&r(null,d),d}},10544:function(e,t){function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,i=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:i,scale:i?4:n,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let i=t.getScale(e,r);return Math.floor((e+2*r.margin)*i)},t.qrToImageData=function(e,r,i){let n=r.modules.size,s=r.modules.data,o=t.getScale(n,i),a=Math.floor((n+2*i.margin)*o),l=i.margin*o,c=[i.color.light,i.color.dark];for(let t=0;t<a;t++)for(let r=0;r<a;r++){let u=(t*a+r)*4,h=i.color.light;t>=l&&r>=l&&t<a-l&&r<a-l&&(h=c[s[Math.floor((t-l)/o)*n+Math.floor((r-l)/o)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}},45503:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var n=i&&i.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var l=r.length;if(0===l)return e;for(var c="",u=0,h=-1,d=e&&e.length||0,p=0;p<d;){if(37===e.charCodeAt(p)&&p+1<d){switch(h=h>-1?h:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=l||null==r[u])break;h<p&&(c+=e.slice(h,p)),c+=Number(r[u]),h=p+2,p++;break;case 105:if(u>=l||null==r[u])break;h<p&&(c+=e.slice(h,p)),c+=Math.floor(Number(r[u])),h=p+2,p++;break;case 79:case 111:case 106:if(u>=l||void 0===r[u])break;h<p&&(c+=e.slice(h,p));var f=typeof r[u];if("string"===f){c+="'"+r[u]+"'",h=p+2,p++;break}if("function"===f){c+=r[u].name||"<anonymous>",h=p+2,p++;break}c+=n(r[u]),h=p+2,p++;break;case 115:if(u>=l)break;h<p&&(c+=e.slice(h,p)),c+=String(r[u]),h=p+2,p++;break;case 37:h<p&&(c+=e.slice(h,p)),c+="%",h=p+2,p++,u--}++u}++p}return -1===h?e:(h<d&&(c+=e.slice(h)),c)}},27455:function(e){"use strict";var t={};function r(e,r,i){i||(i=Error);var n=function(e){function t(t,i,n){return e.call(this,"string"==typeof r?r:r(t,i,n))||this}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t}(i);n.prototype.name=i.name,n.prototype.code=e,t[e]=n}function i(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var r=e.length;return(e=e.map(function(e){return String(e)}),r>2)?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){if("string"==typeof t&&(n="not ",t.substr(!s||s<0?0:+s,n.length)===n)?(c="must not be",t=t.replace(/^not /,"")):c="must be",o=" argument",(void 0===a||a>e.length)&&(a=e.length),e.substring(a-o.length,a)===o)u="The ".concat(e," ").concat(c," ").concat(i(t,"type"));else{var n,s,o,a,l,c,u,h=("number"!=typeof l&&(l=0),l+1>e.length||-1===e.indexOf(".",l))?"argument":"property";u='The "'.concat(e,'" ').concat(h," ").concat(c," ").concat(i(t,"type"))}return u+". Received type ".concat(typeof r)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},21105:function(e,t,r){"use strict";var i=r(62601),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var s=r(33623),o=r(98424);r(75335)(u,s);for(var a=n(o.prototype),l=0;l<a.length;l++){var c=a[l];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||i.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},77359:function(e,t,r){"use strict";e.exports=n;var i=r(568);function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(75335)(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},33623:function(e,t,r){"use strict";var i,n,s,o,a,l=r(62601);e.exports=I,I.ReadableState=S,r(512).EventEmitter;var c=function(e,t){return e.listeners(t).length},u=r(14163),h=r(67133).Buffer,d=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},p=r(94616);n=p&&p.debuglog?p.debuglog("stream"):function(){};var f=r(27195),g=r(22382),m=r(60072).getHighWaterMark,y=r(27455).q,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,E=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(75335)(I,u);var _=g.errorOrDestroy,C=["error","close","destroy","pause","resume"];function S(e,t,n){i=i||r(21105),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=r(67171).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function I(e){if(i=i||r(21105),!(this instanceof I))return new I(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function x(e,t,r,i,s){n("readableAddChunk",t);var o,a,l,c,u,p=e._readableState;if(null===t)p.reading=!1,function(e,t){if(n("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,p);else{if(s||(o=p,a=t,h.isBuffer(a)||a instanceof d||"string"==typeof a||void 0===a||o.objectMode||(l=new v("chunk",["string","Buffer","Uint8Array"],a)),u=l),u)_(e,u);else if(p.objectMode||t&&t.length>0){if("string"==typeof t||p.objectMode||Object.getPrototypeOf(t)===h.prototype||(c=t,t=h.from(c)),i)p.endEmitted?_(e,new E):A(e,p,t,!0);else if(p.ended)_(e,new b);else{if(p.destroyed)return!1;p.reading=!1,p.decoder&&!r?(t=p.decoder.write(t),p.objectMode||0!==t.length?A(e,p,t,!1):R(e,p)):A(e,p,t,!1)}}else i||(p.reading=!1,R(e,p))}return!p.ended&&(p.length<p.highWaterMark||0===p.length)}function A(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),R(e,t)}function k(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var r;t.highWaterMark=((r=e)>=1073741824?r=1073741824:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}function O(e){var t=e._readableState;n("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(n("emitReadable",t.flowing),t.emittedReadable=!0,l.nextTick(P,e))}function P(e){var t=e._readableState;n("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function R(e,t){t.readingMore||(t.readingMore=!0,l.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(n("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function T(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){n("readable nexttick read 0"),e.read(0)}function L(e,t){n("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(n("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function j(e){var t=e._readableState;n("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,l.nextTick($,t,e))}function $(e,t){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=g.destroy,I.prototype._undestroy=g.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=h.from(e,t),t=""),r=!0),x(this,e,t,!1,r)},I.prototype.unshift=function(e){return x(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(e){s||(s=r(67171).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},I.prototype.read=function(e){n("read",e),e=parseInt(e,10);var t,r=this._readableState,i=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return n("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?j(this):O(this),null;if(0===(e=k(e,r))&&r.ended)return 0===r.length&&j(this),null;var s=r.needReadable;return n("need readable",s),(0===r.length||r.length-e<r.highWaterMark)&&n("length less than watermark",s=!0),r.ended||r.reading?n("reading or ended",s=!1):s&&(n("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=k(i,r))),null===(t=e>0?B(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&j(this)),null!==t&&this.emit("data",t),t},I.prototype._read=function(e){_(this,new w("_read()"))},I.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,n("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===l.stdout||e===l.stderr?g:o;function o(){n("onend"),e.end()}i.endEmitted?l.nextTick(s):r.once("end",s),e.on("unpipe",function t(s,l){n("onunpipe"),s===r&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,n("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",a),e.removeListener("error",d),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",h),u=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&a())});var a=function(){var e=r._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&c(r,"data")&&(e.flowing=!0,D(r))};e.on("drain",a);var u=!1;function h(t){n("ondata");var s=e.write(t);n("dest.write",s),!1===s&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==U(i.pipes,e))&&!u&&(n("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function d(t){n("onerror",t),g(),e.removeListener("error",d),0===c(e,"error")&&_(e,t)}function p(){e.removeListener("finish",f),g()}function f(){n("onfinish"),e.removeListener("close",p),g()}function g(){n("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",f),e.emit("pipe",r),i.flowing||(n("pipe resume"),r.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=U(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},I.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,n("on readable",i.length,i.reading),i.length?O(this):i.reading||l.nextTick(M,this)),r},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var r=u.prototype.removeListener.call(this,e,t);return"readable"===e&&l.nextTick(T,this),r},I.prototype.removeAllListeners=function(e){var t=u.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&l.nextTick(T,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,l.nextTick(L,this,e))),e.paused=!1,this},I.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var s in e.on("end",function(){if(n("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){n("wrapped data"),r.decoder&&(s=r.decoder.write(s)),(!r.objectMode||null!=s)&&(r.objectMode||s&&s.length)&&(t.push(s)||(i=!0,e.pause()))}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var o=0;o<C.length;o++)e.on(C[o],this.emit.bind(this,C[o]));return this._read=function(t){n("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===o&&(o=r(80157)),o(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=B,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(e,t){return void 0===a&&(a=r(7507)),a(I,e,t)})},568:function(e,t,r){"use strict";e.exports=u;var i=r(27455).q,n=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,l=r(21105);function c(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,r){d(e,t,r)})}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}r(75335)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new n("_transform()"))},u.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},98424:function(e,t,r){"use strict";var i,n,s=r(62601);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){(function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(void 0),i=i.next}t.corkedRequestsFree.next=e})(t,e)}}e.exports=I,I.WritableState=S;var a={deprecate:r(79026)},l=r(14163),c=r(67133).Buffer,u=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},h=r(22382),d=r(60072).getHighWaterMark,p=r(27455).q,f=p.ERR_INVALID_ARG_TYPE,g=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,E=p.ERR_UNKNOWN_ENCODING,_=h.errorOrDestroy;function C(){}function S(e,t,n){i=i||r(21105),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new m;if(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)--r.pendingcb,i?(s.nextTick(n,t),s.nextTick(R,e,r),e._writableState.errorEmitted=!0,_(e,t)):(n(t),e._writableState.errorEmitted=!0,_(e,t),R(e,r));else{var o=O(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),i?s.nextTick(A,e,r,o,n):A(e,r,o,n)}})(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function I(e){var t=this instanceof(i=i||r(21105));if(!t&&!n.call(I,this))return new I(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function x(e,t,r,i,n,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function A(e,t,r,i){r||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,i(),R(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=Array(t.bufferedRequestCount),n=t.corkedRequestsFree;n.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,x(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,h=t.objectMode?1:l.length;if(x(e,t,!1,h,l,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final(function(r){t.pendingcb--,r&&_(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)})}function R(e,t){var r=O(t);if(r&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,s.nextTick(P,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}r(75335)(I,l),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===I&&e&&e._writableState instanceof S}})):n=function(e){return e instanceof this},I.prototype.pipe=function(){_(this,new y)},I.prototype.write=function(e,t,r){var i,n,o,a,l,h,d,p=this._writableState,g=!1,m=!p.objectMode&&(i=e,c.isBuffer(i)||i instanceof u);return m&&!c.isBuffer(e)&&(n=e,e=c.from(n)),("function"==typeof t&&(r=t,t=null),m?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof r&&(r=C),p.ending)?(o=r,_(this,a=new w),s.nextTick(o,a)):(m||(l=e,h=r,null===l?d=new b:"string"==typeof l||p.objectMode||(d=new f("chunk",["string","Buffer"],l)),!d||(_(this,d),s.nextTick(h,d),0)))&&(p.pendingcb++,g=function(e,t,r,i,n,s){if(!r){var o,a,l=(o=i,a=n,t.objectMode||!1===t.decodeStrings||"string"!=typeof o||(o=c.from(o,a)),o);i!==l&&(r=!0,n="buffer",i=l)}var u=t.objectMode?1:i.length;t.length+=u;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,u,i,n,s);return h}(this,p,m,e,t,r)),g},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,r){r(new g("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,r){var i,n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||(i=r,n.ending=!0,R(this,n),i&&(n.finished?s.nextTick(i):this.once("finish",i)),n.ended=!0,this.writable=!1),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=h.destroy,I.prototype._undestroy=h.undestroy,I.prototype._destroy=function(e,t){t(e)}},80157:function(e,t,r){"use strict";var i,n=r(62601);function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(32435),a=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),h=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[a];if(null!==t){var r=e[p].read();null!==r&&(e[h]=null,e[a]=null,e[l]=null,t(f(r,!1)))}}function m(e){n.nextTick(g,e)}var y=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((s(i={get stream(){return this[p]},next:function(){var e,t,r=this,i=this[c];if(null!==i)return Promise.reject(i);if(this[u])return Promise.resolve(f(void 0,!0));if(this[p].destroyed)return new Promise(function(e,t){n.nextTick(function(){r[c]?t(r[c]):e(f(void 0,!0))})});var s=this[h];if(s)t=new Promise((e=this,function(t,r){s.then(function(){if(e[u]){t(f(void 0,!0));return}e[d](t,r)},r)}));else{var o=this[p].read();if(null!==o)return Promise.resolve(f(o,!1));t=new Promise(this[d])}return this[h]=t,t}},Symbol.asyncIterator,function(){return this}),s(i,"return",function(){var e=this;return new Promise(function(t,r){e[p].destroy(null,function(e){if(e){r(e);return}t(f(void 0,!0))})})}),i),y);e.exports=function(e){var t,r=Object.create(v,(s(t={},p,{value:e,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:null,writable:!0}),s(t,u,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var i=r[p].read();i?(r[h]=null,r[a]=null,r[l]=null,e(f(i,!1))):(r[a]=e,r[l]=t)},writable:!0}),t));return r[h]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];null!==t&&(r[h]=null,r[a]=null,r[l]=null,t(e)),r[c]=e;return}var i=r[a];null!==i&&(r[h]=null,r[a]=null,r[l]=null,i(f(void 0,!0))),r[u]=!0}),e.on("readable",m.bind(null,r)),r}},27195:function(e,t,r){"use strict";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var i,n;i=t,n=r[t],(i=o(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var a=r(67133).Buffer,l=r(52361).inspect,c=l&&l.custom||"inspect";e.exports=function(){var e,t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,i=a.allocUnsafe(e>>>0),n=this.head,s=0;n;)t=n.data,r=s,a.prototype.copy.call(t,i,r),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,s=e>n.length?n.length:e;if(s===n.length?i+=n:i+=n.slice(0,e),0==(e-=s)){s===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(s));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,s=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,s),0==(e-=s)){s===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(s));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return l(this,n(n({},t),{},{depth:0,customInspect:!1}))}}],s(r.prototype,e),t&&s(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}()},22382:function(e,t,r){"use strict";var i=r(62601);function n(e,t){o(e,t),s(e)}function s(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,e)):i.nextTick(o,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?i.nextTick(s,r):(r._writableState.errorEmitted=!0,i.nextTick(n,r,e)):i.nextTick(n,r,e):t?(i.nextTick(s,r),t(e)):i.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},32435:function(e,t,r){"use strict";var i=r(27455).q.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),o=s||n,a=!1,s=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.apply(this,t)}};var o,a,l=r.readable||!1!==r.readable&&t.readable,c=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){c=!1,h=!0,l||s.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){l=!1,p=!0,c||s.call(t)},g=function(e){s.call(t,e)},m=function(){var e;return l&&!p?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):c&&!h?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},y=function(){t.req.on("finish",d)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",d),t.on("abort",m),t.req?y():t.on("request",y)):c&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",d),!1!==r.error&&t.on("error",g),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",y),t.req&&t.req.removeListener("finish",d),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",d),t.removeListener("end",f),t.removeListener("error",g),t.removeListener("close",m)}}},7507:function(e){e.exports=function(){throw Error("Readable.from is not available in the browser")}},87432:function(e,t,r){"use strict";var i,n=r(27455).q,s=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e,t,n=arguments.length,u=Array(n),h=0;h<n;h++)u[h]=arguments[h];var d=(e=u).length&&"function"==typeof e[e.length-1]?e.pop():a;if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new s("streams");var p=u.map(function(e,n){var s,a,c,h,f,g=n<u.length-1;return a=s=function(e){t||(t=e),e&&p.forEach(l),g||(p.forEach(l),d(t))},c=!1,s=function(){c||(c=!0,a.apply(void 0,arguments))},h=!1,e.on("close",function(){h=!0}),void 0===i&&(i=r(32435)),i(e,{readable:g,writable:n>0},function(e){if(e)return s(e);h=!0,s()}),f=!1,function(t){if(!h&&!f){if(f=!0,e.setHeader&&"function"==typeof e.abort)return e.abort();if("function"==typeof e.destroy)return e.destroy();s(t||new o("pipe"))}}});return u.reduce(c)}},60072:function(e,t,r){"use strict";var i=r(27455).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,n){var s=null!=t.highWaterMark?t.highWaterMark:n?t[r]:null;if(null!=s){if(!(isFinite(s)&&Math.floor(s)===s)||s<0)throw new i(n?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},14163:function(e,t,r){e.exports=r(512).EventEmitter},21579:function(e,t,r){(t=e.exports=r(33623)).Stream=t,t.Readable=t,t.Writable=r(98424),t.Duplex=r(21105),t.Transform=r(568),t.PassThrough=r(77359),t.finished=r(32435),t.pipeline=r(87432)},92336:function(e,t,r){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=r(67133),n=i.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},48394:function(e,t,r){"use strict";let i=Symbol("SemVer ANY");class n{static get ANY(){return i}constructor(e,t){if(t=s(t),e instanceof n){if(!!t.loose===e.loose)return e;e=e.value}c("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){let t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(e.value,t).test(this.value):""===e.operator?""===e.value||new h(this.value,t).test(e.semver):!((t=s(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}e.exports=n;let s=r(52887),{safeRe:o,t:a}=r(87425),l=r(25212),c=r(21628),u=r(24642),h=r(64070)},64070:function(e,t,r){"use strict";let i=/\s+/g;class n{constructor(e,t){if(t=o(t),e instanceof n){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;return new n(e.raw,t)}if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(i," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&g)|(this.options.loose&&m))+":"+e,r=s.get(t);if(r)return r;let i=this.options.loose,n=i?u[h.HYPHENRANGELOOSE]:u[h.HYPHENRANGE];l("hyphen replace",e=e.replace(n,P(this.options.includePrerelease))),l("comparator trim",e=e.replace(u[h.COMPARATORTRIM],d)),l("tilde trim",e=e.replace(u[h.TILDETRIM],p)),l("caret trim",e=e.replace(u[h.CARETTRIM],f));let o=e.split(" ").map(e=>w(e,this.options)).join(" ").split(/\s+/).map(e=>O(e,this.options));i&&(o=o.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(u[h.COMPARATORLOOSE])))),l("range list",o);let c=new Map;for(let e of o.map(e=>new a(e,this.options))){if(y(e))return[e];c.set(e.value,e)}c.size>1&&c.has("")&&c.delete("");let v=[...c.values()];return s.set(t,v),v}intersects(e,t){if(!(e instanceof n))throw TypeError("a Range is required");return this.set.some(r=>b(r,t)&&e.set.some(e=>b(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=n;let s=new(r(919)),o=r(52887),a=r(48394),l=r(21628),c=r(24642),{safeRe:u,t:h,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:f}=r(87425),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:m}=r(90323),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,b=(e,t)=>{let r=!0,i=e.slice(),n=i.pop();for(;r&&i.length;)r=i.every(e=>n.intersects(e,t)),n=i.pop();return r},w=(e,t)=>(l("comp",e=e.replace(u[h.BUILD],""),t),l("caret",e=S(e,t)),l("tildes",e=_(e,t)),l("xrange",e=x(e,t)),l("stars",e=k(e,t)),e),E=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map(e=>C(e,t)).join(" "),C=(e,t)=>{let r=t.loose?u[h.TILDELOOSE]:u[h.TILDE];return e.replace(r,(t,r,i,n,s)=>{let o;return l("tilde",e,t,r,i,n,s),E(r)?o="":E(i)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:E(n)?o=`>=${r}.${i}.0 <${r}.${+i+1}.0-0`:s?(l("replaceTilde pr",s),o=`>=${r}.${i}.${n}-${s} <${r}.${+i+1}.0-0`):o=`>=${r}.${i}.${n} <${r}.${+i+1}.0-0`,l("tilde return",o),o})},S=(e,t)=>e.trim().split(/\s+/).map(e=>I(e,t)).join(" "),I=(e,t)=>{l("caret",e,t);let r=t.loose?u[h.CARETLOOSE]:u[h.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(t,r,n,s,o)=>{let a;return l("caret",e,t,r,n,s,o),E(r)?a="":E(n)?a=`>=${r}.0.0${i} <${+r+1}.0.0-0`:E(s)?a="0"===r?`>=${r}.${n}.0${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.0${i} <${+r+1}.0.0-0`:o?(l("replaceCaret pr",o),a="0"===r?"0"===n?`>=${r}.${n}.${s}-${o} <${r}.${n}.${+s+1}-0`:`>=${r}.${n}.${s}-${o} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${s}-${o} <${+r+1}.0.0-0`):(l("no pr"),a="0"===r?"0"===n?`>=${r}.${n}.${s}${i} <${r}.${n}.${+s+1}-0`:`>=${r}.${n}.${s}${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${s} <${+r+1}.0.0-0`),l("caret return",a),a})},x=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>A(e,t)).join(" ")),A=(e,t)=>{e=e.trim();let r=t.loose?u[h.XRANGELOOSE]:u[h.XRANGE];return e.replace(r,(r,i,n,s,o,a)=>{l("xRange",e,r,i,n,s,o,a);let c=E(n),u=c||E(s),h=u||E(o);return"="===i&&h&&(i=""),a=t.includePrerelease?"-0":"",c?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(u&&(s=0),o=0,">"===i?(i=">=",u?(n=+n+1,s=0):s=+s+1,o=0):"<="===i&&(i="<",u?n=+n+1:s=+s+1),"<"===i&&(a="-0"),r=`${i+n}.${s}.${o}${a}`):u?r=`>=${n}.0.0${a} <${+n+1}.0.0-0`:h&&(r=`>=${n}.${s}.0${a} <${n}.${+s+1}.0-0`),l("xRange return",r),r})},k=(e,t)=>(l("replaceStars",e,t),e.trim().replace(u[h.STAR],"")),O=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?h.GTE0PRE:h.GTE0],"")),P=e=>(t,r,i,n,s,o,a,l,c,u,h,d)=>(r=E(i)?"":E(n)?`>=${i}.0.0${e?"-0":""}`:E(s)?`>=${i}.${n}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`,l=E(c)?"":E(u)?`<${+c+1}.0.0-0`:E(h)?`<${c}.${+u+1}.0-0`:d?`<=${c}.${u}.${h}-${d}`:e?`<${c}.${u}.${+h+1}-0`:`<=${l}`,`${r} ${l}`.trim()),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){let i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},24642:function(e,t,r){"use strict";let i=r(21628),{MAX_LENGTH:n,MAX_SAFE_INTEGER:s}=r(90323),{safeRe:o,t:a}=r(87425),l=r(52887),{compareIdentifiers:c}=r(82569);class u{constructor(e,t){if(t=l(t),e instanceof u){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw TypeError(`version is longer than ${n} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<s)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return(e instanceof u||(e=new u(e,this.options)),this.major<e.major)?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(i("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return -1;if(r===n)continue;else return c(r,n)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(i("build compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return -1;if(r===n)continue;else return c(r,n)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?o[a.PRERELEASELOOSE]:o[a.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===r&&(i=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},13304:function(e,t,r){"use strict";let i=r(28881);e.exports=(e,t)=>{let r=i(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},25212:function(e,t,r){"use strict";let i=r(60748),n=r(77901),s=r(99649),o=r(35135),a=r(95422),l=r(70998);e.exports=(e,t,r,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return i(e,r,c);case"!=":return n(e,r,c);case">":return s(e,r,c);case">=":return o(e,r,c);case"<":return a(e,r,c);case"<=":return l(e,r,c);default:throw TypeError(`Invalid operator: ${t}`)}}},65945:function(e,t,r){"use strict";let i=r(24642),n=r(28881),{safeRe:s,t:o}=r(87425);e.exports=(e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let i;let n=t.includePrerelease?s[o.COERCERTLFULL]:s[o.COERCERTL];for(;(i=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?s[o.COERCEFULL]:s[o.COERCE]);if(null===r)return null;let a=r[2],l=r[3]||"0",c=r[4]||"0",u=t.includePrerelease&&r[5]?`-${r[5]}`:"",h=t.includePrerelease&&r[6]?`+${r[6]}`:"";return n(`${a}.${l}.${c}${u}${h}`,t)}},44081:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t,r)=>{let n=new i(e,r),s=new i(t,r);return n.compare(s)||n.compareBuild(s)}},96388:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t)=>i(e,t,!0)},34066:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t,r)=>new i(e,r).compare(new i(t,r))},6461:function(e,t,r){"use strict";let i=r(28881);e.exports=(e,t)=>{let r=i(e,null,!0),n=i(t,null,!0),s=r.compare(n);if(0===s)return null;let o=s>0,a=o?r:n,l=o?n:r,c=!!a.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"}},60748:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>0===i(e,t,r)},99649:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>i(e,t,r)>0},35135:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>i(e,t,r)>=0},72811:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t,r,n,s)=>{"string"==typeof r&&(s=n,n=r,r=void 0);try{return new i(e instanceof i?e.version:e,r).inc(t,n,s).version}catch(e){return null}}},95422:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>0>i(e,t,r)},70998:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>0>=i(e,t,r)},82048:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t)=>new i(e,t).major},80145:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t)=>new i(e,t).minor},77901:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>0!==i(e,t,r)},28881:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t,r=!1)=>{if(e instanceof i)return e;try{return new i(e,t)}catch(e){if(!r)return null;throw e}}},83382:function(e,t,r){"use strict";let i=r(24642);e.exports=(e,t)=>new i(e,t).patch},94797:function(e,t,r){"use strict";let i=r(28881);e.exports=(e,t)=>{let r=i(e,t);return r&&r.prerelease.length?r.prerelease:null}},68271:function(e,t,r){"use strict";let i=r(34066);e.exports=(e,t,r)=>i(t,e,r)},34879:function(e,t,r){"use strict";let i=r(44081);e.exports=(e,t)=>e.sort((e,r)=>i(r,e,t))},93796:function(e,t,r){"use strict";let i=r(64070);e.exports=(e,t,r)=>{try{t=new i(t,r)}catch(e){return!1}return t.test(e)}},73433:function(e,t,r){"use strict";let i=r(44081);e.exports=(e,t)=>e.sort((e,r)=>i(e,r,t))},54984:function(e,t,r){"use strict";let i=r(28881);e.exports=(e,t)=>{let r=i(e,t);return r?r.version:null}},84076:function(e,t,r){"use strict";let i=r(87425),n=r(90323),s=r(24642),o=r(82569),a=r(28881),l=r(54984),c=r(13304),u=r(72811),h=r(6461),d=r(82048),p=r(80145),f=r(83382),g=r(94797),m=r(34066),y=r(68271),v=r(96388),b=r(44081),w=r(73433),E=r(34879),_=r(99649),C=r(95422),S=r(60748),I=r(77901),x=r(35135),A=r(70998),k=r(25212),O=r(65945),P=r(48394),R=r(64070),N=r(93796),T=r(77285),M=r(37987),L=r(61451),D=r(27465),B=r(38686),j=r(70754),$=r(70077),U=r(9823),q=r(7701),H=r(30442),F=r(72640);e.exports={parse:a,valid:l,clean:c,inc:u,diff:h,major:d,minor:p,patch:f,prerelease:g,compare:m,rcompare:y,compareLoose:v,compareBuild:b,sort:w,rsort:E,gt:_,lt:C,eq:S,neq:I,gte:x,lte:A,cmp:k,coerce:O,Comparator:P,Range:R,satisfies:N,toComparators:T,maxSatisfying:M,minSatisfying:L,minVersion:D,validRange:B,outside:j,gtr:$,ltr:U,intersects:q,simplifyRange:H,subset:F,SemVer:s,re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:n.SEMVER_SPEC_VERSION,RELEASE_TYPES:n.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},90323:function(e){"use strict";let t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},21628:function(e,t,r){"use strict";var i=r(62601);let n="object"==typeof i&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=n},82569:function(e){"use strict";let t=/^[0-9]+$/,r=(e,r)=>{if("number"==typeof e&&"number"==typeof r)return e===r?0:e<r?-1:1;let i=t.test(e),n=t.test(r);return i&&n&&(e=+e,r=+r),e===r?0:i&&!n?-1:n&&!i?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},919:function(e){"use strict";class t{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}e.exports=t},52887:function(e){"use strict";let t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},87425:function(e,t,r){"use strict";let{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=r(90323),o=r(21628),a=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],h=t.t={},d=0,p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",s],[p,n]],g=e=>{for(let[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},m=(e,t,r)=>{let i=g(t),n=d++;o(e,n,t),h[e]=n,c[n]=t,u[n]=i,a[n]=new RegExp(t,r?"g":void 0),l[n]=new RegExp(i,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})\\.(${c[h.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})\\.(${c[h.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${c[h.NONNUMERICIDENTIFIER]}|${c[h.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${c[h.NONNUMERICIDENTIFIER]}|${c[h.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${c[h.PRERELEASEIDENTIFIER]}(?:\\.${c[h.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${c[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[h.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${c[h.BUILDIDENTIFIER]}(?:\\.${c[h.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${c[h.MAINVERSION]}${c[h.PRERELEASE]}?${c[h.BUILD]}?`),m("FULL",`^${c[h.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${c[h.MAINVERSIONLOOSE]}${c[h.PRERELEASELOOSE]}?${c[h.BUILD]}?`),m("LOOSE",`^${c[h.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${c[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${c[h.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:\\.(${c[h.XRANGEIDENTIFIER]})(?:${c[h.PRERELEASE]})?${c[h.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[h.XRANGEIDENTIFIERLOOSE]})(?:${c[h.PRERELEASELOOSE]})?${c[h.BUILD]}?)?)?`),m("XRANGE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${c[h.GTLT]}\\s*${c[h.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?`),m("COERCE",`${c[h.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",c[h.COERCEPLAIN]+`(?:${c[h.PRERELEASE]})?`+`(?:${c[h.BUILD]})?`+"(?:$|[^\\d])"),m("COERCERTL",c[h.COERCE],!0),m("COERCERTLFULL",c[h.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${c[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${c[h.LONETILDE]}${c[h.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${c[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${c[h.LONECARET]}${c[h.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${c[h.LONECARET]}${c[h.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${c[h.GTLT]}\\s*(${c[h.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${c[h.GTLT]}\\s*(${c[h.LOOSEPLAIN]}|${c[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${c[h.XRANGEPLAIN]})\\s+-\\s+(${c[h.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${c[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[h.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},70077:function(e,t,r){"use strict";let i=r(70754);e.exports=(e,t,r)=>i(e,t,">",r)},7701:function(e,t,r){"use strict";let i=r(64070);e.exports=(e,t,r)=>(e=new i(e,r),t=new i(t,r),e.intersects(t,r))},9823:function(e,t,r){"use strict";let i=r(70754);e.exports=(e,t,r)=>i(e,t,"<",r)},37987:function(e,t,r){"use strict";let i=r(24642),n=r(64070);e.exports=(e,t,r)=>{let s=null,o=null,a=null;try{a=new n(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!s||-1===o.compare(e))&&(o=new i(s=e,r))}),s}},61451:function(e,t,r){"use strict";let i=r(24642),n=r(64070);e.exports=(e,t,r)=>{let s=null,o=null,a=null;try{a=new n(t,r)}catch(e){return null}return e.forEach(e=>{a.test(e)&&(!s||1===o.compare(e))&&(o=new i(s=e,r))}),s}},27465:function(e,t,r){"use strict";let i=r(24642),n=r(64070),s=r(99649);e.exports=(e,t)=>{e=new n(e,t);let r=new i("0.0.0");if(e.test(r)||(r=new i("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let n=e.set[t],o=null;n.forEach(e=>{let t=new i(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!o||s(t,o))&&(o=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),o&&(!r||s(r,o))&&(r=o)}return r&&e.test(r)?r:null}},70754:function(e,t,r){"use strict";let i=r(24642),n=r(48394),{ANY:s}=n,o=r(64070),a=r(93796),l=r(99649),c=r(95422),u=r(70998),h=r(35135);e.exports=(e,t,r,d)=>{let p,f,g,m,y;switch(e=new i(e,d),t=new o(t,d),r){case">":p=l,f=u,g=c,m=">",y=">=";break;case"<":p=c,f=h,g=l,m="<",y="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,d))return!1;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null,a=null;if(i.forEach(e=>{e.semver===s&&(e=new n(">=0.0.0")),o=o||e,a=a||e,p(e.semver,o.semver,d)?o=e:g(e.semver,a.semver,d)&&(a=e)}),o.operator===m||o.operator===y||(!a.operator||a.operator===m)&&f(e,a.semver)||a.operator===y&&g(e,a.semver))return!1}return!0}},30442:function(e,t,r){"use strict";let i=r(93796),n=r(34066);e.exports=(e,t,r)=>{let s=[],o=null,a=null,l=e.sort((e,t)=>n(e,t,r));for(let e of l)i(e,t,r)?(a=e,o||(o=e)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);let c=[];for(let[e,t]of s)e===t?c.push(e):t||e!==l[0]?t?e===l[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");let u=c.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return u.length<h.length?u:t}},72640:function(e,t,r){"use strict";let i=r(64070),n=r(48394),{ANY:s}=n,o=r(93796),a=r(34066),l=[new n(">=0.0.0-0")],c=[new n(">=0.0.0")],u=(e,t,r)=>{let i,n,u,p,f,g,m;if(e===t)return!0;if(1===e.length&&e[0].semver===s){if(1===t.length&&t[0].semver===s)return!0;e=r.includePrerelease?l:c}if(1===t.length&&t[0].semver===s){if(r.includePrerelease)return!0;t=c}let y=new Set;for(let t of e)">"===t.operator||">="===t.operator?i=h(i,t,r):"<"===t.operator||"<="===t.operator?n=d(n,t,r):y.add(t.semver);if(y.size>1||i&&n&&((u=a(i.semver,n.semver,r))>0||0===u&&(">="!==i.operator||"<="!==n.operator)))return null;for(let e of y){if(i&&!o(e,String(i),r)||n&&!o(e,String(n),r))return null;for(let i of t)if(!o(e,String(i),r))return!1;return!0}let v=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver,b=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver;for(let e of(v&&1===v.prerelease.length&&"<"===n.operator&&0===v.prerelease[0]&&(v=!1),t)){if(m=m||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,i){if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if((p=h(i,e,r))===e&&p!==i)return!1}else if(">="===i.operator&&!o(i.semver,String(e),r))return!1}if(n){if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if((f=d(n,e,r))===e&&f!==n)return!1}else if("<="===n.operator&&!o(n.semver,String(e),r))return!1}if(!e.operator&&(n||i)&&0!==u)return!1}return(!i||!g||!!n||0===u)&&(!n||!m||!!i||0===u)&&!b&&!v},h=(e,t,r)=>{if(!e)return t;let i=a(e.semver,t.semver,r);return i>0?e:i<0?t:">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;let i=a(e.semver,t.semver,r);return i<0?e:i>0?t:"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new i(e,r),t=new i(t,r);let n=!1;t:for(let i of e.set){for(let e of t.set){let t=u(i,e,r);if(n=n||null!==t,t)continue t}if(n)return!1}return!0}},77285:function(e,t,r){"use strict";let i=r(64070);e.exports=(e,t)=>new i(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},38686:function(e,t,r){"use strict";let i=r(64070);e.exports=(e,t)=>{try{return new i(e,t).range||"*"}catch(e){return null}}},91475:function(e,t,r){"use strict";var i=r(51597),n=r(9122),s=r(59972)(),o=r(67526),a=r(35281),l=i("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,c=!0;if("length"in e&&o){var u=o(e,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(c=!1)}return(i||c||!r)&&(s?n(e,"length",t,!0,!0):n(e,"length",t)),e}},95904:function(e,t,r){"use strict";var i=r(92336).Buffer,n=r(70891);function s(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}s.prototype.update=function(e,t){e=n(e,t||"utf8");for(var r=this._block,i=this._blockSize,s=e.length,o=this._len,a=0;a<s;){for(var l=o%i,c=Math.min(s-a,i-l),u=0;u<c;u++)r[l+u]=e[a+u];o+=c,a+=c,o%i==0&&this._update(r)}return this._len+=s,this},s.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0;this._block.writeUInt32BE((r-i)/4294967296,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var n=this._hash();return e?n.toString(e):n},s.prototype._update=function(){throw Error("_update must be implemented by subclass")},e.exports=s},71114:function(e,t,r){"use strict";e.exports=function(t){var r=t.toLowerCase(),i=e.exports[r];if(!i)throw Error(r+" is not supported (we accept pull requests)");return new i},e.exports.sha=r(83358),e.exports.sha1=r(43652),e.exports.sha224=r(43212),e.exports.sha256=r(78194),e.exports.sha384=r(33681),e.exports.sha512=r(34270)},83358:function(e,t,r){"use strict";var i=r(75335),n=r(95904),s=r(92336).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function l(){this.init(),this._w=a,n.call(this,64,56)}i(l,n),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=t[l-3]^t[l-8]^t[l-14]^t[l-16];for(var c=0;c<80;++c){var u,h,d,p,f,g=~~(c/20),m=((u=r)<<5|u>>>27)+(h=i,d=n,p=s,0===g?h&d|~h&p:2===g?h&d|h&p|d&p:h^d^p)+a+t[c]+o[g]|0;a=s,s=n,n=(f=i)<<30|f>>>2,i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},l.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},43652:function(e,t,r){"use strict";var i=r(75335),n=r(95904),s=r(92336).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=Array(80);function l(){this.init(),this._w=a,n.call(this,64,56)}i(l,n),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=(u=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|u>>>31;for(var c=0;c<80;++c){var u,h,d,p,f,g,m=~~(c/20),y=((h=r)<<5|h>>>27)+(d=i,p=n,f=s,0===m?d&p|~d&f:2===m?d&p|d&f|p&f:d^p^f)+a+t[c]+o[m]|0;a=s,s=n,n=(g=i)<<30|g>>>2,i=r,r=y}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},l.prototype._hash=function(){var e=s.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},43212:function(e,t,r){"use strict";var i=r(75335),n=r(78194),s=r(95904),o=r(92336).Buffer,a=Array(64);function l(){this.init(),this._w=a,s.call(this,64,56)}i(l,n),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=l},78194:function(e,t,r){"use strict";var i=r(75335),n=r(95904),s=r(92336).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=Array(64);function l(){this.init(),this._w=a,n.call(this,64,56)}i(l,n),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,i=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,l=0|this._f,c=0|this._g,u=0|this._h,h=0;h<16;++h)t[h]=e.readInt32BE(4*h);for(;h<64;++h)t[h]=(((p=t[h-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)+t[h-7]+(((f=t[h-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3)+t[h-16]|0;for(var d=0;d<64;++d){var p,f,g,m,y,v,b,w,E,_=u+(((g=a)>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(m=a,y=l,(v=c)^m&(y^v))+o[d]+t[d]|0,C=(((b=r)>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+((w=r)&(E=i)|n&(w|E))|0;u=c,c=l,l=a,a=s+_|0,s=n,n=i,i=r,r=_+C|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=l+this._f|0,this._g=c+this._g|0,this._h=u+this._h|0},l.prototype._hash=function(){var e=s.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=l},33681:function(e,t,r){"use strict";var i=r(75335),n=r(34270),s=r(95904),o=r(92336).Buffer,a=Array(160);function l(){this.init(),this._w=a,s.call(this,128,112)}i(l,n),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=l},34270:function(e,t,r){"use strict";var i=r(75335),n=r(95904),s=r(92336).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=Array(160);function l(){this.init(),this._w=a,n.call(this,128,112)}function c(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function u(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return e>>>0<t>>>0?1:0}i(l,n),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._ah,i=0|this._bh,n=0|this._ch,s=0|this._dh,a=0|this._eh,l=0|this._fh,d=0|this._gh,p=0|this._hh,f=0|this._al,g=0|this._bl,m=0|this._cl,y=0|this._dl,v=0|this._el,b=0|this._fl,w=0|this._gl,E=0|this._hl,_=0;_<32;_+=2)t[_]=e.readInt32BE(4*_),t[_+1]=e.readInt32BE(4*_+4);for(;_<160;_+=2){var C,S,I,x,A,k,O,P,R=t[_-30],N=t[_-30+1],T=((C=R)>>>1|(S=N)<<31)^(C>>>8|S<<24)^C>>>7,M=((I=N)>>>1|(x=R)<<31)^(I>>>8|x<<24)^(I>>>7|x<<25);R=t[_-4],N=t[_-4+1];var L=((A=R)>>>19|(k=N)<<13)^(k>>>29|A<<3)^A>>>6,D=((O=N)>>>19|(P=R)<<13)^(P>>>29|O<<3)^(O>>>6|P<<26),B=t[_-14],j=t[_-14+1],$=t[_-32],U=t[_-32+1],q=M+j|0,H=T+B+h(q,M)|0;H=(H=H+L+h(q=q+D|0,D)|0)+$+h(q=q+U|0,U)|0,t[_]=H,t[_+1]=q}for(var F=0;F<160;F+=2){H=t[F],q=t[F+1];var z,W,K,V,G,Z,J,Y,X,Q,ee=(z=r)&(W=i)|n&(z|W),et=(K=f)&(V=g)|m&(K|V),er=c(r,f),ei=c(f,r),en=u(a,v),es=u(v,a),eo=o[F],ea=o[F+1],el=(G=a,Z=l,(J=d)^G&(Z^J)),ec=(Y=v,X=b,(Q=w)^Y&(X^Q)),eu=E+es|0,eh=p+en+h(eu,E)|0;eh=(eh=(eh=eh+el+h(eu=eu+ec|0,ec)|0)+eo+h(eu=eu+ea|0,ea)|0)+H+h(eu=eu+q|0,q)|0;var ed=ei+et|0,ep=er+ee+h(ed,ei)|0;p=d,E=w,d=l,w=b,l=a,b=v,a=s+eh+h(v=y+eu|0,y)|0,s=n,y=m,n=i,m=g,i=r,g=f,r=eh+ep+h(f=eu+ed|0,eu)|0}this._al=this._al+f|0,this._bl=this._bl+g|0,this._cl=this._cl+m|0,this._dl=this._dl+y|0,this._el=this._el+v|0,this._fl=this._fl+b|0,this._gl=this._gl+w|0,this._hl=this._hl+E|0,this._ah=this._ah+r+h(this._al,f)|0,this._bh=this._bh+i+h(this._bl,g)|0,this._ch=this._ch+n+h(this._cl,m)|0,this._dh=this._dh+s+h(this._dl,y)|0,this._eh=this._eh+a+h(this._el,v)|0,this._fh=this._fh+l+h(this._fl,b)|0,this._gh=this._gh+d+h(this._gl,w)|0,this._hh=this._hh+p+h(this._hl,E)|0},l.prototype._hash=function(){var e=s.allocUnsafe(64);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=l},67171:function(e,t,r){"use strict";var i=r(92336).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:this.write=d,this.end=p;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=o(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=o(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=o(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},70891:function(e,t,r){"use strict";var i=r(92336).Buffer,n=r(82333),s=r(78911),o=ArrayBuffer.isView||function(e){try{return s(e),!0}catch(e){return!1}},a="undefined"!=typeof Uint8Array,l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c=l&&(i.prototype instanceof Uint8Array||i.TYPED_ARRAY_SUPPORT);e.exports=function(e,t){if(i.isBuffer(e))return!e.constructor||"isBuffer"in e?e:i.from(e);if("string"==typeof e)return i.from(e,t);if(l&&o(e)){if(0===e.byteLength)return i.alloc(0);if(c){var r=i.from(e.buffer,e.byteOffset,e.byteLength);if(r.byteLength===e.byteLength)return r}var s=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),u=i.from(s);if(u.length===e.byteLength)return u}if(a&&e instanceof Uint8Array)return i.from(e);var h=n(e);if(h)for(var d=0;d<e.length;d+=1){var p=e[d];if("number"!=typeof p||p<0||p>255||~~p!==p)throw RangeError("Array items must be numbers in the range 0-255.")}if(h||i.isBuffer(e)&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))return i.from(e);throw TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}},78911:function(e,t,r){"use strict";var i=r(35281),n=r(18971)("TypedArray.prototype.buffer",!0),s=r(59354);e.exports=n||function(e){if(!s(e))throw new i("Not a Typed Array");return e.buffer}},79026:function(e,t,r){e.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}};function i(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},78266:function(e,t,r){"use strict";var i=r(11549),n=r(32432),s=r(65775),o=r(18971),a=r(67526),l=r(54224),c=o("Object.prototype.toString"),u=r(86273)(),h="undefined"==typeof globalThis?r.g:globalThis,d=n(),p=o("String.prototype.slice"),f=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return -1},g={__proto__:null};u&&a&&l?i(d,function(e){var t=new h[e];if(Symbol.toStringTag in t&&l){var r=l(t),i=a(r,Symbol.toStringTag);!i&&r&&(i=a(l(r),Symbol.toStringTag)),g["$"+e]=s(i.get)}}):i(d,function(e){var t=new h[e],r=t.slice||t.set;r&&(g["$"+e]=s(r))});var m=function(e){var t=!1;return i(g,function(r,i){if(!t)try{"$"+r(e)===i&&(t=p(i,1))}catch(e){}}),t},y=function(e){var t=!1;return i(g,function(r,i){if(!t)try{r(e),t=p(i,1)}catch(e){}}),t};e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u){var t=p(c(e),8,-1);return f(d,t)>-1?t:"Object"===t&&y(e)}return a?m(e):null}},49820:function(e){e.exports=function(){for(var e={},r=0;r<arguments.length;r++){var i=arguments[r];for(var n in i)t.call(i,n)&&(e[n]=i[n])}return e};var t=Object.prototype.hasOwnProperty},34150:function(e,t,r){var i=r(67133).Buffer;let n=r(25890);function s(e){if(e.startsWith("int["))return"int256"+e.slice(3);if("int"===e)return"int256";if(e.startsWith("uint["))return"uint256"+e.slice(4);if("uint"===e)return"uint256";if(e.startsWith("fixed["))return"fixed128x128"+e.slice(5);if("fixed"===e)return"fixed128x128";if(e.startsWith("ufixed["))return"ufixed128x128"+e.slice(6);else if("ufixed"===e)return"ufixed128x128";return e}function o(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function a(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function l(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":Number.parseInt(t[2],10):null}function c(e){var t=typeof e;if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw Error("Argument is not a number")}function u(e,t){if("address"===e)return u("uint160",c(t));if("bool"===e)return u("uint8",t?1:0);if("string"===e)return u("bytes",new i(t,"utf8"));if((p=e).lastIndexOf("]")===p.length-1){if(void 0===t.length)throw Error("Not an array?");if("dynamic"!==(r=l(e))&&0!==r&&t.length>r)throw Error("Elements exceed array size: "+r);for(d in h=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)h.push(u(e,t[d]));if("dynamic"===r){var r,s,h,d,p,f=u("uint256",t.length);h.unshift(f)}return i.concat(h)}if("bytes"===e)return t=new i(t),h=i.concat([u("uint256",t.length),t]),t.length%32!=0&&(h=i.concat([h,n.zeros(32-t.length%32)])),h;if(e.startsWith("bytes")){if((r=o(e))<1||r>32)throw Error("Invalid bytes<N> width: "+r);return n.setLengthRight(t,32)}else if(e.startsWith("uint")){if((r=o(e))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);s=c(t);let i=n.bitLengthFromBigInt(s);if(i>r)throw Error("Supplied uint exceeds width: "+r+" vs "+i);if(s<0)throw Error("Supplied uint is negative");return n.bufferBEFromBigInt(s,32)}else if(e.startsWith("int")){if((r=o(e))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);s=c(t);let i=n.bitLengthFromBigInt(s);if(i>r)throw Error("Supplied int exceeds width: "+r+" vs "+i);let a=n.twosFromBigInt(s,256);return n.bufferBEFromBigInt(a,32)}else if(e.startsWith("ufixed")){if(r=a(e),(s=c(t))<0)throw Error("Supplied ufixed is negative");return u("uint256",s*BigInt(2)**BigInt(r[1]))}else if(e.startsWith("fixed"))return r=a(e),u("int256",c(t)*BigInt(2)**BigInt(r[1]));throw Error("Unsupported or invalid type: "+e)}function h(e,t){if(e.length!==t.length)throw Error("Number of types are not matching the values");for(var r,a,l=[],u=0;u<e.length;u++){var h=s(e[u]),d=t[u];if("bytes"===h)l.push(d);else if("string"===h)l.push(new i(d,"utf8"));else if("bool"===h)l.push(new i(d?"01":"00","hex"));else if("address"===h)l.push(n.setLength(d,20));else if(h.startsWith("bytes")){if((r=o(h))<1||r>32)throw Error("Invalid bytes<N> width: "+r);l.push(n.setLengthRight(d,r))}else if(h.startsWith("uint")){if((r=o(h))%8||r<8||r>256)throw Error("Invalid uint<N> width: "+r);a=c(d);let e=n.bitLengthFromBigInt(a);if(e>r)throw Error("Supplied uint exceeds width: "+r+" vs "+e);l.push(n.bufferBEFromBigInt(a,r/8))}else if(h.startsWith("int")){if((r=o(h))%8||r<8||r>256)throw Error("Invalid int<N> width: "+r);a=c(d);let e=n.bitLengthFromBigInt(a);if(e>r)throw Error("Supplied int exceeds width: "+r+" vs "+e);let t=n.twosFromBigInt(a,r);l.push(n.bufferBEFromBigInt(t,r/8))}else throw Error("Unsupported or invalid type: "+h)}return i.concat(l)}e.exports={rawEncode:function(e,t){var r=[],n=[],o=32*e.length;for(var a in e){var c=s(e[a]),h=u(c,t[a]);"string"===c||"bytes"===c||"dynamic"===l(c)?(r.push(u("uint256",o)),n.push(h),o+=h.length):r.push(h)}return i.concat(r.concat(n))},solidityPack:h,soliditySHA3:function(e,t){return n.keccak(h(e,t))}}},49805:function(e,t,r){var i=r(67133).Buffer;let n=r(25890),s=r(34150),o={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},a={encodeData(e,t,r,o=!0){let a=["bytes32"],l=[this.hashType(e,r)];if(o){let c=(e,t,a)=>{if(void 0!==r[t])return["bytes32",null==a?"0x0000000000000000000000000000000000000000000000000000000000000000":n.keccak(this.encodeData(t,a,r,o))];if(void 0===a)throw Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",n.keccak(a)];if("string"===t)return"string"==typeof a&&(a=i.from(a,"utf8")),["bytes32",n.keccak(a)];if(t.lastIndexOf("]")===t.length-1){let r=t.slice(0,t.lastIndexOf("[")),i=a.map(t=>c(e,r,t));return["bytes32",n.keccak(s.rawEncode(i.map(([e])=>e),i.map(([,e])=>e)))]}return[t,a]};for(let i of r[e]){let[e,r]=c(i.name,i.type,t[i.name]);a.push(e),l.push(r)}}else for(let s of r[e]){let e=t[s.name];if(void 0!==e){if("bytes"===s.type)a.push("bytes32"),e=n.keccak(e),l.push(e);else if("string"===s.type)a.push("bytes32"),"string"==typeof e&&(e=i.from(e,"utf8")),e=n.keccak(e),l.push(e);else if(void 0!==r[s.type])a.push("bytes32"),e=n.keccak(this.encodeData(s.type,e,r,o)),l.push(e);else if(s.type.lastIndexOf("]")===s.type.length-1)throw Error("Arrays currently unimplemented in encodeData");else a.push(s.type),l.push(e)}}return s.rawEncode(a,l)},encodeType(e,t){let r="",i=this.findTypeDependencies(e,t).filter(t=>t!==e);for(let n of i=[e].concat(i.sort())){if(!t[n])throw Error("No type definition specified: "+n);r+=n+"("+t[n].map(({name:e,type:t})=>t+" "+e).join(",")+")"}return r},findTypeDependencies(e,t,r=[]){if(e=e.match(/^\w*/)[0],r.includes(e)||void 0===t[e])return r;for(let i of(r.push(e),t[e]))for(let e of this.findTypeDependencies(i.type,t,r))r.includes(e)||r.push(e);return r},hashStruct(e,t,r,i=!0){return n.keccak(this.encodeData(e,t,r,i))},hashType(e,t){return n.keccak(this.encodeType(e,t))},sanitizeData(e){let t={};for(let r in o.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){let r=this.sanitizeData(e),s=[i.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",r.domain,r.types,t)),"EIP712Domain"!==r.primaryType&&s.push(this.hashStruct(r.primaryType,r.message,r.types,t)),n.keccak(i.concat(s))}};e.exports={TYPED_MESSAGE_SCHEMA:o,TypedDataUtils:a,hashForSignTypedDataLegacy:function(e){return function(e){let t=Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;let r=e.map(function(e){return"bytes"===e.type?n.toBuffer(e.value):e.value}),i=e.map(function(e){return e.type}),o=e.map(function(e){if(!e.name)throw t;return e.type+" "+e.name});return s.soliditySHA3(["bytes32","bytes32"],[s.soliditySHA3(Array(e.length).fill("string"),o),s.soliditySHA3(i,r)])}(e.data)},hashForSignTypedData_v3:function(e){return a.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return a.hash(e.data)}}},25890:function(e,t,r){var i=r(67133).Buffer;let{keccak_256:n}=r(33503);function s(e){return i.allocUnsafe(e).fill(0)}function o(e,t){let r=e.toString(16);r.length%2!=0&&(r="0"+r);let n=r.match(/.{1,2}/g).map(e=>parseInt(e,16));for(;n.length<t;)n.unshift(0);return i.from(n)}function a(e,t,r){let i=s(t);return(e=l(e),r)?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)}function l(e){if(!i.isBuffer(e)){if(Array.isArray(e))e=i.from(e);else if("string"==typeof e)e=u(e)?i.from(c(h(e)),"hex"):i.from(e);else if("number"==typeof e)e=new i(c((function(e){let t=e.toString(16);return`0x${t}`})(e).slice(2)),"hex");else if(null==e)e=i.allocUnsafe(0);else if("bigint"==typeof e)e=o(e);else if(e.toArray)e=i.from(e.toArray());else throw Error("invalid type")}return e}function c(e){return e.length%2?"0"+e:e}function u(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function h(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:s,setLength:a,setLengthRight:function(e,t){return a(e,t,!0)},isHexString:u,stripHexPrefix:h,toBuffer:l,bufferToHex:function(e){return"0x"+(e=l(e)).toString("hex")},keccak:function(e,t){if(e=l(e),t||(t=256),256!==t)throw Error("unsupported");return i.from(n(new Uint8Array(e)))},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:o,twosFromBigInt:function(e,t){return(e<0n?(~e&(1n<<BigInt(t))-1n)+1n:e)&(1n<<BigInt(t))-1n}}},32432:function(e,t,r){"use strict";var i=r(90854),n="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<i.length;t++)"function"==typeof n[i[t]]&&(e[e.length]=i[t]);return e}},64874:function(e,t,r){"use strict";var i=r(62601),n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(l,{createFinalURL:()=>C,createPathBasedClient:()=>m,createQuerySerializer:()=>w,default:()=>d,defaultBodySerializer:()=>_,defaultPathSerializer:()=>E,mergeHeaders:()=>S,randomID:()=>h,removeTrailingSlash:()=>I,serializeArrayParam:()=>b,serializeObjectParam:()=>v,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>g}),e.exports=((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of o(t))a.call(e,r)||void 0===r||n(e,r,{get:()=>t[r],enumerable:!(i=s(t,r))||i.enumerable});return e})(n({},"__esModule",{value:!0}),l);var c=/\{[^{}]+\}/g,u=()=>"object"==typeof i&&Number.parseInt(i?.versions?.node?.substring(0,2))>=18&&i.versions.undici;function h(){return Math.random().toString(36).slice(2,11)}function d(e){let{baseUrl:t="",Request:r=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:n,bodySerializer:s,headers:o,requestInitExt:a,...l}={...e};a=u()?a:void 0,t=I(t);let c=[];async function d(e,u){let d,p,f;let{baseUrl:g,fetch:m=i,Request:y=r,headers:v,params:b={},parseAs:E="json",querySerializer:x,bodySerializer:A=s??_,body:k,...O}=u||{},P=t;g&&(P=I(g)??t);let R="function"==typeof n?n:w(n);x&&(R="function"==typeof x?x:w({..."object"==typeof n?n:{},...x}));let N=void 0===k?void 0:A(k,S(o,v,b.header)),T=S(void 0===N||N instanceof FormData?{}:{"Content-Type":"application/json"},o,v,b.header),M={redirect:"follow",...l,...O,body:N,headers:T},L=new r(C(e,{baseUrl:P,params:b,querySerializer:R}),M);for(let e in O)e in L||(L[e]=O[e]);if(c.length){for(let t of(d=h(),p=Object.freeze({baseUrl:P,fetch:m,parseAs:E,querySerializer:R,bodySerializer:A}),c))if(t&&"object"==typeof t&&"function"==typeof t.onRequest){let i=await t.onRequest({request:L,schemaPath:e,params:b,options:p,id:d});if(i){if(i instanceof r)L=i;else if(i instanceof Response){f=i;break}else throw Error("onRequest: must return new Request() or Response() when modifying the request")}}}if(!f){try{f=await m(L,a)}catch(r){let t=r;if(c.length)for(let r=c.length-1;r>=0;r--){let i=c[r];if(i&&"object"==typeof i&&"function"==typeof i.onError){let r=await i.onError({request:L,error:t,schemaPath:e,params:b,options:p,id:d});if(r){if(r instanceof Response){t=void 0,f=r;break}if(r instanceof Error){t=r;continue}throw Error("onError: must return new Response() or instance of Error")}}}if(t)throw t}if(c.length)for(let t=c.length-1;t>=0;t--){let r=c[t];if(r&&"object"==typeof r&&"function"==typeof r.onResponse){let t=await r.onResponse({request:L,response:f,schemaPath:e,params:b,options:p,id:d});if(t){if(!(t instanceof Response))throw Error("onResponse: must return new Response() when modifying the response");f=t}}}}if(204===f.status||"HEAD"===L.method||"0"===f.headers.get("Content-Length"))return f.ok?{data:void 0,response:f}:{error:void 0,response:f};if(f.ok)return"stream"===E?{data:f.body,response:f}:{data:await f[E](),response:f};let D=await f.text();try{D=JSON.parse(D)}catch{}return{error:D,response:f}}return{request:(e,t,r)=>d(t,{...r,method:e.toUpperCase()}),GET:(e,t)=>d(e,{...t,method:"GET"}),PUT:(e,t)=>d(e,{...t,method:"PUT"}),POST:(e,t)=>d(e,{...t,method:"POST"}),DELETE:(e,t)=>d(e,{...t,method:"DELETE"}),OPTIONS:(e,t)=>d(e,{...t,method:"OPTIONS"}),HEAD:(e,t)=>d(e,{...t,method:"HEAD"}),PATCH:(e,t)=>d(e,{...t,method:"PATCH"}),TRACE:(e,t)=>d(e,{...t,method:"TRACE"}),use(...e){for(let t of e)if(t){if("object"!=typeof t||!("onRequest"in t||"onResponse"in t||"onError"in t))throw Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");c.push(t)}},eject(...e){for(let t of e){let e=c.indexOf(t);-1!==e&&c.splice(e,1)}}}}var p=class{constructor(e,t){this.client=e,this.url=t}GET=e=>this.client.GET(this.url,e);PUT=e=>this.client.PUT(this.url,e);POST=e=>this.client.POST(this.url,e);DELETE=e=>this.client.DELETE(this.url,e);OPTIONS=e=>this.client.OPTIONS(this.url,e);HEAD=e=>this.client.HEAD(this.url,e);PATCH=e=>this.client.PATCH(this.url,e);TRACE=e=>this.client.TRACE(this.url,e)},f=class{constructor(){this.client=null}get(e,t){let r=new p(e,t);return this.client[t]=r,r}};function g(e){let t=new f,r=new Proxy(e,t);function i(){}i.prototype=r;let n=new i;return t.client=n,n}function m(e){return g(d(e))}function y(e,t,r){if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${r?.allowReserved===!0?t:encodeURIComponent(t)}`}function v(e,t,r){if(!t||"object"!=typeof t)return"";let i=[],n={simple:",",label:".",matrix:";"}[r.style]||"&";if("deepObject"!==r.style&&!1===r.explode){for(let e in t)i.push(e,!0===r.allowReserved?t[e]:encodeURIComponent(t[e]));let n=i.join(",");switch(r.style){case"form":return`${e}=${n}`;case"label":return`.${n}`;case"matrix":return`;${e}=${n}`;default:return n}}for(let n in t){let s="deepObject"===r.style?`${e}[${n}]`:n;i.push(y(s,t[n],r))}let s=i.join(n);return"label"===r.style||"matrix"===r.style?`${n}${s}`:s}function b(e,t,r){if(!Array.isArray(t))return"";if(!1===r.explode){let i={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[r.style]||",",n=(!0===r.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(i);switch(r.style){case"simple":return n;case"label":return`.${n}`;case"matrix":return`;${e}=${n}`;default:return`${e}=${n}`}}let i={simple:",",label:".",matrix:";"}[r.style]||"&",n=[];for(let i of t)"simple"===r.style||"label"===r.style?n.push(!0===r.allowReserved?i:encodeURIComponent(i)):n.push(y(e,i,r));return"label"===r.style||"matrix"===r.style?`${i}${n.join(i)}`:n.join(i)}function w(e){return function(t){let r=[];if(t&&"object"==typeof t)for(let i in t){let n=t[i];if(null!=n){if(Array.isArray(n)){if(0===n.length)continue;r.push(b(i,n,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if("object"==typeof n){r.push(v(i,n,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(y(i,n,e))}}return r.join("&")}}function E(e,t){let r=e;for(let i of e.match(c)??[]){let e=i.substring(1,i.length-1),n=!1,s="simple";if(e.endsWith("*")&&(n=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(s="label",e=e.substring(1)):e.startsWith(";")&&(s="matrix",e=e.substring(1)),!t||void 0===t[e]||null===t[e])continue;let o=t[e];if(Array.isArray(o)){r=r.replace(i,b(e,o,{style:s,explode:n}));continue}if("object"==typeof o){r=r.replace(i,v(e,o,{style:s,explode:n}));continue}if("matrix"===s){r=r.replace(i,`;${y(e,o)}`);continue}r=r.replace(i,"label"===s?`.${encodeURIComponent(o)}`:encodeURIComponent(o))}return r}function _(e,t){return e instanceof FormData?e:t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])?new URLSearchParams(e).toString():JSON.stringify(e)}function C(e,t){let r=`${t.baseUrl}${e}`;t.params?.path&&(r=E(r,t.params.path));let i=t.querySerializer(t.params.query??{});return i.startsWith("?")&&(i=i.substring(1)),i&&(r+=`?${i}`),r}function S(...e){let t=new Headers;for(let r of e)if(r&&"object"==typeof r)for(let[e,i]of r instanceof Headers?r.entries():Object.entries(r))if(null===i)t.delete(e);else if(Array.isArray(i))for(let r of i)t.append(e,r);else void 0!==i&&t.set(e,i);return t}function I(e){return e.endsWith("/")?e.substring(0,e.length-1):e}},90440:function(e,t,r){"use strict";let i=r(45503);e.exports=s;let n=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let u=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let h=e.serializers||{},g=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(h),m=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1),"function"==typeof u&&(u.error=u.fatal=u.warn=u.info=u.debug=u.trace=u),!1===e.enabled&&(e.level="silent");let y=e.level||"info",v=Object.create(u);v.log||(v.log=d),Object.defineProperty(v,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(v,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(b,v,"error","log"),o(b,v,"fatal","error"),o(b,v,"warn","error"),o(b,v,"info","log"),o(b,v,"debug","log"),o(b,v,"trace","log")}});let b={transmit:i,serialize:g,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?p:f};return v.levels=s.levels,v.level=y,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=d,v.serializers=h,v._serialize=g,v._stdErrSerialize=m,v.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},g&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(g&&n){var s=Object.assign({},h,n),o=!0===e.browser.serialize?Object.keys(s):g;delete t.serializers,a([t],o,s,this._stdErrSerialize)}function u(e){this._childLevel=(0|e._childLevel)+1,this.error=l(e,t,"error"),this.fatal=l(e,t,"fatal"),this.warn=l(e,t,"warn"),this.info=l(e,t,"info"),this.debug=l(e,t,"debug"),this.trace=l(e,t,"trace"),s&&(this.serializers=s,this._serialize=o),i&&(this._logEvent=c([].concat(e._logEvent.bindings,t)))}return u.prototype=this,new u(this)},i&&(v._logEvent=c()),v}function o(e,t,r,o){let l=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?d:l[r]?l[r]:n[r]||n[o]||d,function(e,t,r){if(e.transmit||t[r]!==d){var o;t[r]=(o=t[r],function(){let l=e.timestamp(),u=Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<u.length;d++)u[d]=arguments[d];if(e.serialize&&!e.asObject&&a(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(h,function(e,t,r,n){e._serialize&&a(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),l=o[0],c={};n&&(c.time=n),c.level=s.levels.values[t];let u=(0|e._childLevel)+1;if(u<1&&(u=1),null!==l&&"object"==typeof l){for(;u--&&"object"==typeof o[0];)Object.assign(c,o.shift());l=o.length?i(o.shift(),o):void 0}else"string"==typeof l&&(l=i(o.shift(),o));return void 0!==l&&(c.msg=l),c}(this,r,u,l)):o.apply(h,u),e.transmit){let i=e.transmit.level||t.level,n=s.levels.values[i],o=s.levels.values[r];if(o<n)return;(function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,l=t.val,u=e._logEvent.bindings;a(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===u.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,l),e._logEvent=c(u)})(this,{ts:l,methodLevel:r,methodValue:o,transmitLevel:i,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}})}}(e,t,r)}function a(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=s.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function l(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function c(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function u(){return{}}function h(e){return e}function d(){}function p(){return!1}function f(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers={mapHttpRequest:u,mapHttpResponse:u,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:u,res:u,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},s.stdTimeFunctions=Object.assign({},{nullTime:p,epochTime:f,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},64843:function(e,t,r){"use strict";let i;r.d(t,{createCoinbaseWalletSDK:function(){return nM}});var n,s,o,a,l,c,u,h,d,p,f=r(29580),g=r(76384),m=r(21693);function y(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var i;let n=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(i=r.getItem(e))?i:null;return s instanceof Promise?s.then(n):n(s)},setItem:(e,i)=>r.setItem(e,JSON.stringify(i,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let v=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>v(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>v(t)(e)}}},b=e=>{let t;let r=new Set,i=(e,i)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:i,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(i,n,s);return s},w=e=>e?b(e):b,E="4.3.6",_="@coinbase/wallet-sdk",C=()=>({chains:[]}),S=()=>({keys:{}}),I=()=>({account:{}}),x=()=>({subAccount:void 0}),A=()=>({subAccountConfig:{}}),k=()=>({spendPermissions:[]}),O=()=>({config:{version:E}}),P=w((n=(...e)=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},C(...e)),S(...e)),I(...e)),x(...e)),k(...e)),O(...e)),A(...e)),s={name:"cbwsdk.store",storage:y(()=>localStorage),partialize:e=>({chains:e.chains,keys:e.keys,account:e.account,subAccount:e.subAccount,spendPermissions:e.spendPermissions,config:e.config})},(e,t,r)=>{let i,o={storage:y(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...s},a=!1,l=new Set,c=new Set,u=o.storage;if(!u)return n((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...t)},t,r);let h=()=>{let e=o.partialize({...t()});return u.setItem(o.name,{state:e,version:o.version})},d=r.setState;r.setState=(e,t)=>{d(e,t),h()};let p=n((...t)=>{e(...t),h()},t,r);r.getInitialState=()=>p;let f=()=>{var r,n;if(!u)return;a=!1,l.forEach(e=>{var r;return e(null!=(r=t())?r:p)});let s=(null==(n=o.onRehydrateStorage)?void 0:n.call(o,null!=(r=t())?r:p))||void 0;return v(u.getItem.bind(u))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(r=>{var n;let[s,a]=r;if(e(i=o.merge(a,null!=(n=t())?n:p),!0),s)return h()}).then(()=>{null==s||s(i,void 0),i=t(),a=!0,c.forEach(e=>e(i))}).catch(e=>{null==s||s(void 0,e)})};return r.persist={setOptions:e=>{o={...o,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>a,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},o.skipHydration||f(),i||p})),R={get:()=>P.getState().config,set:e=>{P.setState(t=>({config:Object.assign(Object.assign({},t.config),e)}))}},N=Object.assign(Object.assign({},P),{subAccounts:{get:()=>P.getState().subAccount,set:e=>{P.setState(t=>({subAccount:t.subAccount?Object.assign(Object.assign({},t.subAccount),e):Object.assign({address:e.address},e)}))},clear:()=>{P.setState({subAccount:void 0})}},subAccountsConfig:{get:()=>P.getState().subAccountConfig,set:e=>{P.setState(t=>({subAccountConfig:Object.assign(Object.assign({},t.subAccountConfig),e)}))},clear:()=>{P.setState({subAccountConfig:{}})}},spendPermissions:{get:()=>P.getState().spendPermissions,set:e=>{P.setState({spendPermissions:e})},clear:()=>{P.setState({spendPermissions:[]})}},account:{get:()=>P.getState().account,set:e=>{P.setState(t=>({account:Object.assign(Object.assign({},t.account),e)}))},clear:()=>{P.setState({account:{}})}},chains:{get:()=>P.getState().chains,set:e=>{P.setState({chains:e})},clear:()=>{P.setState({chains:[]})}},keys:{get:e=>P.getState().keys[e],set:(e,t)=>{P.setState(r=>({keys:Object.assign(Object.assign({},r.keys),{[e]:t})}))},clear:()=>{P.setState({keys:{}})}},config:R}),T=()=>new Promise((e,t)=>{if(window.ClientAnalytics)return e();try{let t=document.createElement("script");t.textContent='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},562:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p="mark.",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f="4g",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn("Perfume.js:",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return"number"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?u():(s=u,"requestIdleCallback"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?"good":t<=L[e][1]?"needsImprovement":"poor":null},R=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;"FCP"===n&&(b.value=i),["FCP","LCP"].includes(n)&&!T[0]&&(T[0]=S("longtask",I)),"FID"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:"TBT",rating:U("TBT",w.value),value:w.value,navigationType:o}),R("dataConsumption",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},z=function(e){if("loading"===document.readyState)return"loading";var t=F();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},$=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:K(r)+(r.className&&r.className.length?"."+r.className.replace(/\\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||V()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J("FCP"),o=X("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J("FCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:"first-input",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},me=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J("TTFB"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J("TTFB",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J("CLS"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X("layout-shift",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J("CLS",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X("first-input",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J("FID"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X("largest-contentful-paint",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J("LCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||D||(D=X("event",be,{type:"event",buffered:!0,durationThreshold:0}));var r,i=J("INP"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),"first-input"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X("event",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J("INP"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S("resource",je),a.isElementTiming&&S("element",Oe)},Ie=function(e){var t="usageDetails"in e?e.usageDetails:{};R("storageEstimate",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(N("userJourneyStep",d,m,{stepName:e},void 0),u.measure("step.".concat(e,"_vitals_").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:"stepVital",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){"PerformanceObserver"in o&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",_);var t=function(){if(!m())return{};var e=u.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R("navigationTiming",t),t.redirectTime&&q({attribution:{},name:"RT",rating:U("RT",t.redirectTime),value:t.redirectTime}),R("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark("mark_".concat(e,"_end")),delete g[e];var r=function(e){u.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=u.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks("mark_".concat(e,"_start")),u.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),q({attribution:{},name:"NTBT",rating:U("NTBT",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{"use strict";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",p="name",m="type",f="vendor",v="version",g="architecture",b="console",h="mobile",w="tablet",y="smarttv",T="wearable",k="embedded",_="Amazon",S="Apple",E="ASUS",x="BlackBerry",O="Browser",j="Chrome",N="Firefox",I="Google",P="Huawei",M="LG",B="Microsoft",C="Motorola",D="Opera",A="Samsung",L="Sharp",U="Sony",R="Xiaomi",q="Zebra",F="Facebook",z="Chromium OS",K="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\s\\s*/,""),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return"?"===n?a:n}else if(Q(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[p,v],[/opios[\\/ ]+([\\w\\.]+)/i],[v,[p,D+" Mini"]],[/\\bopr\\/([\\w\\.]+)/i],[v,[p,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[p,v],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[v,[p,"UC"+O]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[v,[p,"WeChat(Win) Desktop"]],[/micromessenger\\/([\\w\\.]+)/i],[v,[p,"WeChat"]],[/konqueror\\/([\\w\\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[v,[p,"Yandex"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],v],[/\\bfocus\\/([\\w\\.]+)/i],[v,[p,N+" Focus"]],[/\\bopt\\/([\\w\\.]+)/i],[v,[p,D+" Touch"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\\/([\\w\\.]+)/i],[v,[p,"Dolphin"]],[/coast\\/([\\w\\.]+)/i],[v,[p,D+" Coast"]],[/miuibrowser\\/([\\w\\.]+)/i],[v,[p,"MIUI "+O]],[/fxios\\/([-\\w\\.]+)/i],[v,[p,N]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 "+O],v],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[p,/_/g," "],v],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[p,v],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[p],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[p,v],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[v,[p,j+" Headless"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[p,j+" WebView"],v],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[p,v],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[p,[v,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[p,v],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[p,"Netscape"],v],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[v,[p,N+" Reality"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\/([\\w\\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\)]/i],[[g,"ia32"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[g,"arm64"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[g,/ower/,"",W]],[/(sun4\\w)[;\\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[g,W]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[f,A],[m,h]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[d,[f,S],[m,h]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[f,P],[m,h]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,h]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,w]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[f,"OPPO"],[m,h]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[m,h]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[f,"Realme"],[m,h]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[f,C],[m,h]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[f,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[m,h]],[/(pixel c)\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,"Xperia Tablet"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[f,"OnePlus"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,_],[m,h]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,f,[m,w]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[f,x],[m,h]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[f,[d,/_/g," "],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[f,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[f,"Meizu"],[m,h]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[f,"Fairphone"],[m,h]],[/(u304aa)/i],[d,[f,"AT&T"],[m,h]],[/\\bsie-(\\w*)/i],[d,[f,"Siemens"],[m,h]],[/\\b(rct\\w+) b/i],[d,[f,"RCA"],[m,w]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[f,"Dell"],[m,w]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[f,"Verizon"],[m,w]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[f,"Barnes & Noble"],[m,w]],[/\\b(tm\\d{3}\\w+) b/i],[d,[f,"NuVision"],[m,w]],[/\\b(k88) b/i],[d,[f,"ZTE"],[m,w]],[/\\b(nx\\d{3}j) b/i],[d,[f,"ZTE"],[m,h]],[/\\b(gen\\d{3}) b.+49h/i],[d,[f,"Swiss"],[m,h]],[/\\b(zur\\d{3}) b/i],[d,[f,"Swiss"],[m,w]],[/\\b((zeki)?tb.*\\b) b/i],[d,[f,"Zeki"],[m,w]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[f,"Dragon Touch"],d,[m,w]],[/\\b(ns-?\\w{0,9}) b/i],[d,[f,"Insignia"],[m,w]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[f,"NextBook"],[m,w]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[m,h]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[f,"LvTel"],d,[m,h]],[/\\b(ph-1) /i],[d,[f,"Essential"],[m,h]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[f,"Envizen"],[m,w]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[f,"MachSpeed"],[m,w]],[/\\btu_(1491) b/i],[d,[f,"Rotor"],[m,w]],[/(shield[\\w ]+) b/i],[d,[f,"Nvidia"],[m,w]],[/(sprint) (\\w+)/i],[f,d,[m,h]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g," "],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,"SmartTV"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+" TV"],[m,y]],[/crkey/i],[[d,j+"cast"],[f,I],[m,y]],[/droid.+aft(\\w)( bui|\\))/i],[d,[f,_],[m,y]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[f,L],[m,y]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[f,U],[m,y]],[/(mitv-\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[f,[m,k]],[/(aeobc)\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[v,[p,"EdgeHTML"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[v,[p,"Blink"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[p,v],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[p,"Windows"],[v,J,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,"."]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[p,v],[/\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[v,[p,"Symbian"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[v,[p,N+" OS"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[v,[p,"watchOS"]],[/crkey\\/([\\d\\.]+)/i],[v,[p,j+"cast"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[p,v],[/(sunos) ?([\\w\\.\\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\d\\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION="1.0.35",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),p=function(e){return e.commerce_merchant="commerce_merchant",e.device="device",e.edp_fingerprint_id="edp_fingerprint_id",e.nft_user="nft_user",e.user="user",e.wallet_user="wallet_user",e.uuid="user_uuid",e}({}),m=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e}({}),f=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),v=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),g=function(e){return e.web="Web",e.ios="iOS",e.android="Android",e}({}),b=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),h=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),w=function(e){return e.pv="pv",e}({}),y=function(e){return e.xs="xs",e.s="s",e.m="m",e.l="l",e.xl="xl",e.xxl="xxl",e}({});const T="https://analytics-service-dev.cbhq.net",k=3e5,_=5e3,S="analytics-db",E="experiment-exposure-db",x="Analytics SDK:",O=Object.values(e),j="pageview",N="session_duration",I={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}},P="1",M="web";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\/\\/)/;function D(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const A=B({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn("You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return"android"===A.platform}function F(){return"ios"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia("(max-width: 560px)").matches:return v.mobile_web;case window.matchMedia("(max-width: 1024px, min-width: 561px)").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?("requestIdleCallback"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark("ua_parser_start");const t=new(Q())(null!=(e=W.userAgent)?e:"").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark("ua_parser_end"),performance.measure("ua_parser","ua_parser_start","ua_parser_end"))},re={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:""}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||""},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||""},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||""},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=["action","component_type","component_name","context","logging_id"],ke=["num_non_hardware_accounts","ujs"],_e="ujs_",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error("IdentityFlow property names must have snake case format"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>`${_e}${e}`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error("SDK platform not initialized")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error("IndexedDB:Get:InternalError")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error("IndexedDB:Set:InternalError"))}},st=()=>{"server"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct="rgb(5,177,105)",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`%c ${x}`,a=`color:${ct};font-size:11px;`,o=`Importance: ${r}`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`color:${ct};font-size:11px;`,a=`%c ${x}`,o=`Importance: ${r}`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:"Started new session:",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:"@cbhq/client-analytics",version:"10.6.0"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?"true":"false",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt="application/x-www-form-urlencoded; charset=UTF-8",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?"application/json":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader("Content-Type",kt),H.jwt&&e.setRequestHeader("authorization",`Bearer ${H.jwt}`),e.send(c)}if(!z()||r||!("sendBeacon"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{"Content-Type":o});H.jwt&&(e.Authorization=`Bearer ${H.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:c}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||"";return Et()("2"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error("userId not set in Logged-in"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(", "),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:"unknown"),{listEventType:r});n=a,A.onError(new Nt("Found DOM element reference"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:"2",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:"Batch Events",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return"number"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error("missing logData")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Metrics",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){"unknown"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t="hidden",n=!1)=>{cn||(addEventListener("pagehide",un),addEventListener("beforeunload",(()=>{})),cn=!0),addEventListener("visibilitychange",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:`Event: exposeExperiment ${e.testName} not sent`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:`Event: exposeExperiment ${e.testName} sent`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||""),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("keyval-store",1,{upgrade(e){e.createObjectStore("keyval")}});rt({idbKeyval:{get:async t=>(await e).get("keyval",t),set:async(t,n)=>(await e).put("keyval",n,t),delete:async t=>(await e).delete("keyval",t),keys:async()=>(await e).getAllKeys("keyval")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:"Initialized Analytics:",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:"Initialized Analytics IndexedDB:",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),"hidden"),ln((()=>{pn()}),"visible")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener("resize",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||"unsupported",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||"",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if("navigationTiming"===r)t&&"number"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if("TTFB"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:`perf_web_vitals_ttfb_${a}`,metricType:d.count,tags:b,value:1});else if("networkInformation"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if("storageEstimate"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:"perf_storage_estimate_caches",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:"perf_storage_estimate_indexed_db",metricType:d.histogram,tags:b,value:t.indexedDB});else if("CLS"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_cls_${a}`,metricType:d.count,tags:b,value:1});else if("FID"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||"");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_fidVitals_${a}`,metricType:d.count,tags:b,value:1})}else"userJourneyStep"===r?($t("perf_user_journey_step",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||""},g)),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}_vitals_${a}`,metricType:d.count,tags:b,value:1}),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:`perf_web_vitals_${Xt(r)}_${a}`,metricType:d.count,tags:b,value:1}),"LCP"===r&&Ht({metricName:`perf_web_vitals_${Xt(r)}`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:"Identify:",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on("routeChangeComplete",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Traces",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t,"x-datadog-sampling-priority":"1","x-datadog-trace-id":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&"performance"in window&&"mark"in performance&&"getEntriesByName"in performance}function Kn(e,t){return`perf_${e}${null!=t&&t.label?`_${t.label}`:""}`}function $n(e,t,n){return`${Kn(e,n)}__${t}`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),"end"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,"start",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]||(Wn(e,"start",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,"start",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]&&(Wn(e,"end",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&""!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{"X-CB-Device-ID":H.deviceId||"unknown","X-CB-Is-Logged-In":H.userId?"true":"false","X-CB-Pagekey":re.pageKey||"unknown","X-CB-UJS":(e=Se.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":A.platform||"unknown","X-CB-Project-Name":A.projectName||"unknown","X-CB-Session-UUID":oe.sessionUUID||"unknown","X-CB-Version-Name":A.version?String(A.version):"unknown"};var e}})(),r})()}));',t.type="text/javascript",document.head.appendChild(t),M(),document.head.removeChild(t),e()}catch(e){console.error("Failed to execute inlined telemetry script"),t()}}),M=()=>{var e,t,r;if("undefined"!=typeof window){let i=null!==(r=null!==(e=N.config.get().deviceId)&&void 0!==e?e:null===(t=window.crypto)||void 0===t?void 0:t.randomUUID())&&void 0!==r?r:"";if(window.ClientAnalytics){let{init:e,identify:t,PlatformName:r}=window.ClientAnalytics;e({isProd:!0,amplitudeApiKey:"c66737ad47ec354ced777935b0af822e",platform:r.web,projectName:"base_account_sdk",showDebugLogging:!1,version:"1.0.0",apiEndpoint:"https://cca-lite.coinbase.com"}),t({deviceId:i}),N.config.set({deviceId:i})}}},L="0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a",D="0xf85210B21cC50302F477BA56686d2019dC9b67Ad",B=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],j=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}],$={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},U={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},q="Unspecified error message.";function H(e,t=q){if(e&&Number.isInteger(e)){let t=e.toString();if(z(U,t))return U[t].message;if(e>=-32099&&e<=-32e3)return"Unspecified server error."}return t}function F(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}let K={rpc:{parse:e=>V($.rpc.parse,e),invalidRequest:e=>V($.rpc.invalidRequest,e),invalidParams:e=>V($.rpc.invalidParams,e),methodNotFound:e=>V($.rpc.methodNotFound,e),internal:e=>V($.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return V(t,e)},invalidInput:e=>V($.rpc.invalidInput,e),resourceNotFound:e=>V($.rpc.resourceNotFound,e),resourceUnavailable:e=>V($.rpc.resourceUnavailable,e),transactionRejected:e=>V($.rpc.transactionRejected,e),methodNotSupported:e=>V($.rpc.methodNotSupported,e),limitExceeded:e=>V($.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>G($.provider.userRejectedRequest,e),unauthorized:e=>G($.provider.unauthorized,e),unsupportedMethod:e=>G($.provider.unsupportedMethod,e),disconnected:e=>G($.provider.disconnected,e),chainDisconnected:e=>G($.provider.chainDisconnected,e),unsupportedChain:e=>G($.provider.unsupportedChain,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw Error('"message" must be a nonempty string');return new Y(t,r,i)}}};function V(e,t){let[r,i]=Z(t);return new J(e,r||H(e),i)}function G(e,t){let[r,i]=Z(t);return new Y(e,r||H(e),i)}function Z(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,r]}}return[]}class J extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}}class Y extends J{constructor(e,t,r){if(!(Number.isInteger(e)&&e>=1e3&&e<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function X(e){return"object"==typeof e&&null!==e&&"code"in e&&"data"in e&&-32090===e.code&&"object"==typeof e.data&&null!==e.data&&"type"in e.data&&"INSUFFICIENT_FUNDS"===e.data.type}function Q(e){return"object"==typeof e&&null!==e&&"details"in e}function ee(e,t,r){if(null==e)throw null!=t?t:K.rpc.invalidParams({message:null!=r?r:"value must be present",data:e})}function et(e,t){if(!Array.isArray(e))throw K.rpc.invalidParams({message:null!=t?t:"value must be an array",data:e})}let er=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,{checkCrossOriginOpenerPolicy:ei,getCrossOriginOpenerPolicy:en}={getCrossOriginOpenerPolicy:()=>void 0===i?"undefined":i,checkCrossOriginOpenerPolicy:async()=>{if("undefined"==typeof window){i="non-browser-env";return}try{let e=`${window.location.origin}${window.location.pathname}`,t=await fetch(e,{method:"HEAD"});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let r=t.headers.get("Cross-Origin-Opener-Policy");i=null!=r?r:"null","same-origin"===i&&console.error(er)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),i="error"}}};function es(e){if("function"!=typeof e)throw Error("toAccount is not a function")}async function eo(e,t){let r=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),i=await window.fetch(t,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":E,"X-Cbw-Sdk-Platform":_}}),{result:n,error:s}=await i.json();if(s)throw s;return n}let ea="https://rpc.wallet.coinbase.com",el="https://www.walletlink.org";function ec(e,t,r){var i,n,s,o;window.ClientAnalytics&&(null===(i=window.ClientAnalytics)||void 0===i||i.logEvent(e,Object.assign(Object.assign({},t),{sdkVersion:E,appName:null!==(s=null===(n=N.config.get().metadata)||void 0===n?void 0:n.appName)&&void 0!==s?s:"",appOrigin:window.location.origin,appPreferredSigner:null===(o=N.config.get().preference)||void 0===o?void 0:o.options}),r))}(o=u||(u={})).unknown="unknown",o.banner="banner",o.button="button",o.card="card",o.chart="chart",o.content_script="content_script",o.dropdown="dropdown",o.link="link",o.page="page",o.modal="modal",o.table="table",o.search_bar="search_bar",o.service_worker="service_worker",o.text="text",o.text_input="text_input",o.tray="tray",o.checkbox="checkbox",o.icon="icon",(a=h||(h={})).unknown="unknown",a.blur="blur",a.click="click",a.change="change",a.dismiss="dismiss",a.focus="focus",a.hover="hover",a.select="select",a.measurement="measurement",a.move="move",a.process="process",a.render="render",a.scroll="scroll",a.view="view",a.search="search",a.keyPress="keyPress",a.error="error",(l=d||(d={})).low="low",l.high="high";let eu=()=>{ec("communicator.popup_setup.started",{action:h.unknown,componentType:u.unknown},d.high)},eh=()=>{ec("communicator.popup_setup.completed",{action:h.unknown,componentType:u.unknown},d.high)},ed=()=>{ec("communicator.popup_unload.received",{action:h.unknown,componentType:u.unknown},d.high)},ep=({snackbarContext:e})=>{ec(`snackbar.${e}.shown`,{action:h.render,componentType:u.modal,snackbarContext:e},d.high)},ef=({snackbarContext:e,snackbarAction:t})=>{ec(`snackbar.${e}.action_clicked`,{action:h.click,componentType:u.button,snackbarContext:e,snackbarAction:t},d.high)};function eg(){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(e)}function em(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i);else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(i&&(i+=" "),i+=t);return i}var ey=r(88049),ev=r(87060);function eb(){var e,t;return null!==(t=null===(e=null==window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}class ew{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=eb()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){let t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,ey.render)((0,ey.h)("div",null,(0,ey.h)(eE,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,t])=>(0,ey.h)(e_,Object.assign({},t,{key:e}))))),this.root)}}let eE=e=>(0,ey.h)("div",{class:em("-cbwsdk-snackbar-container")},(0,ey.h)("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),(0,ey.h)("div",{class:"-cbwsdk-snackbar"},e.children)),e_=({autoExpand:e,message:t,menuItems:r})=>{let[i,n]=(0,ev.useState)(!0),[s,o]=(0,ev.useState)(null!=e&&e);return(0,ev.useEffect)(()=>{let e=[window.setTimeout(()=>{n(!1)},1),window.setTimeout(()=>{o(!0)},1e4)];return()=>{e.forEach(window.clearTimeout)}}),(0,ey.h)("div",{class:em("-cbwsdk-snackbar-instance",i&&"-cbwsdk-snackbar-instance-hidden",s&&"-cbwsdk-snackbar-instance-expanded")},(0,ey.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{o(!s)}},(0,ey.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,ey.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),(0,ey.h)("div",{class:"-gear-container"},!s&&(0,ey.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,ey.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,ey.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&(0,ey.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((e,t)=>(0,ey.h)("div",{class:em("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,ey.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,ey.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,ey.h)("span",{class:em("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info)))))},eC="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class eS{constructor(){this.attached=!1,this.snackbar=new ew}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");let e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,eg()}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:eC,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}let eI={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:eC,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},ex=null;function eA(){if(!ex){let e=document.createElement("div");e.className="-cbwsdk-css-reset",document.body.appendChild(e),(ex=new ew).attach(e)}return ex}class ek{constructor({url:e="https://keys.coinbase.com/connect",metadata:t,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async e=>{(await this.waitForPopupLoaded()).postMessage(e,this.url.origin)},this.postRequestAndWaitForResponse=async e=>{let t=this.onMessage(({requestId:t})=>t===e.id);return this.postMessage(e),await t},this.onMessage=async e=>new Promise((t,r)=>{let i=r=>{if(r.origin!==this.url.origin)return;let n=r.data;e(n)&&(t(n),window.removeEventListener("message",i),this.listeners.delete(i))};window.addEventListener("message",i),this.listeners.set(i,{reject:r})}),this.disconnect=()=>{var e;(e=this.popup)&&!e.closed&&e.close(),this.popup=null,this.listeners.forEach(({reject:e},t)=>{e(K.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",t)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(eu(),this.popup=await function(e){let t=(window.innerWidth-420)/2+window.screenX,r=(window.innerHeight-700)/2+window.screenY;function i(){let i=`wallet_${crypto.randomUUID()}`,n=window.open(e,i,`width=420, height=700, left=${t}, top=${r}`);return(null==n||n.focus(),n)?n:null}(function(e){for(let[t,r]of Object.entries({sdkName:_,sdkVersion:E,origin:window.location.origin,coop:en()}))e.searchParams.has(t)||e.searchParams.append(t,r.toString())})(e);let n=i();if(!n){let e=eA();return new Promise((t,r)=>{ep({snackbarContext:"popup_blocked"}),e.presentItem({autoExpand:!0,message:"Popup was blocked. Try again.",menuItems:[Object.assign(Object.assign({},eI),{onClick:()=>{ef({snackbarContext:"popup_blocked",snackbarAction:"confirm"}),(n=i())?t(n):r(K.rpc.internal("Popup window was blocked")),e.clear()}})]})})}return Promise.resolve(n)}(this.url),this.onMessage(({event:e})=>"PopupUnload"===e).then(()=>{this.disconnect(),ed()}).catch(()=>{}),this.onMessage(({event:e})=>"PopupLoaded"===e).then(e=>{this.postMessage({requestId:e.id,data:{version:E,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw K.rpc.internal();return eh(),this.popup})),this.url=new URL(e),this.metadata=t,this.preference=r}}function eO(e){return void 0!==e.errorMessage}var eP=r(11953);class eR extends eP.v{}class eN{constructor(e,t){this.scope=e,this.module=t}storeObject(e,t){this.setItem(e,JSON.stringify(t))}loadObject(e){let t=this.getItem(e);return t?JSON.parse(t):void 0}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){let e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){let i=localStorage.key(r);"string"==typeof i&&i.startsWith(e)&&t.push(i)}t.forEach(e=>localStorage.removeItem(e))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new eN("CBWSDK").clear(),new eN("walletlink").clear()}}let eT=({signerType:e})=>{ec("provider.signer.loaded_from_storage",{action:h.measurement,componentType:u.unknown,signerType:e},d.low)},eM=({method:e,correlationId:t})=>{ec("provider.request.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t},d.high)},eL=({method:e,correlationId:t,signerType:r,errorMessage:i})=>{ec("provider.request.error",{action:h.error,componentType:u.unknown,method:e,signerType:r,correlationId:t,errorMessage:i},d.high)},eD=({method:e,signerType:t,correlationId:r})=>{ec("provider.request.responded",{action:h.unknown,componentType:u.unknown,method:e,signerType:t,correlationId:r},d.high)},eB=()=>{ec("provider.enable_function.called",{action:h.measurement,componentType:u.unknown},d.high)},ej=()=>{ec("signer.selection.requested",{action:h.unknown,componentType:u.unknown},d.high)},e$=e=>{ec("signer.selection.responded",{action:h.unknown,componentType:u.unknown,signerType:e},d.high)},eU=e=>e,eq=e=>e;function eH(e){return Math.floor(e)}var eF=r(67133).Buffer;let ez=/^[0-9]*$/,eW=/^[a-f0-9]*$/;function eK(e){return eV(crypto.getRandomValues(new Uint8Array(e)))}function eV(e){return[...e].map(e=>e.toString(16).padStart(2,"0")).join("")}function eG(e){return new Uint8Array(e.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function eZ(e,t=!1){let r=e.toString("hex");return eU(t?`0x${r}`:r)}function eJ(e){return eZ(e6(e),!0)}function eY(e){return eq(e.toString(10))}function eX(e){return eU(`0x${BigInt(e).toString(16)}`)}function eQ(e){return e.startsWith("0x")||e.startsWith("0X")}function e0(e){return eQ(e)?e.slice(2):e}function e1(e){return eQ(e)?`0x${e.slice(2)}`:`0x${e}`}function e2(e){if("string"!=typeof e)return!1;let t=e0(e).toLowerCase();return eW.test(t)}function e3(e,t=!1){if("string"==typeof e){let r=e0(e).toLowerCase();if(eW.test(r))return eU(t?`0x${r}`:r)}throw K.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function e5(e,t=!1){let r=e3(e,!1);return r.length%2==1&&(r=eU(`0${r}`)),t?eU(`0x${r}`):r}function e4(e){if("string"==typeof e){let t=e0(e).toLowerCase();if(e2(t)&&40===t.length)return e1(t)}throw K.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}function e6(e){if(eF.isBuffer(e))return e;if("string"==typeof e){if(e2(e)){let t=e5(e,!1);return eF.from(t,"hex")}return eF.from(e,"utf8")}throw K.rpc.invalidParams(`Not binary data: ${String(e)}`)}function e8(e){if("number"==typeof e&&Number.isInteger(e))return eH(e);if("string"==typeof e){if(ez.test(e))return eH(Number(e));if(e2(e))return eH(Number(BigInt(e5(e,!0))))}throw K.rpc.invalidParams(`Not an integer: ${String(e)}`)}function e9(e){if(null!==e&&("bigint"==typeof e||function(e){if(null==e||"function"!=typeof e.constructor)return!1;let{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"==typeof e)return BigInt(e8(e));if("string"==typeof e){if(ez.test(e))return BigInt(e);if(e2(e))return BigInt(e5(e,!0))}throw K.rpc.invalidParams(`Not an integer: ${String(e)}`)}let e7=w(()=>({correlationIds:new Map})),te={get:e=>e7.getState().correlationIds.get(e),set:(e,t)=>{e7.setState(r=>{let i=new Map(r.correlationIds);return i.set(e,t),{correlationIds:i}})},delete:e=>{e7.setState(t=>{let r=new Map(t.correlationIds);return r.delete(e),{correlationIds:r}})},clear:()=>{e7.setState({correlationIds:new Map})}};var tt=r(30838),tr=r(27955);let ti=({method:e,correlationId:t})=>{var r;ec("scw_signer.handshake.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tn=({method:e,correlationId:t,errorMessage:r})=>{var i;ec("scw_signer.handshake.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r,enableAutoSubAccounts:null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.enableAutoSubAccounts},d.high)},ts=({method:e,correlationId:t})=>{var r;ec("scw_signer.handshake.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},to=({method:e,correlationId:t})=>{var r;ec("scw_signer.request.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},ta=({method:e,correlationId:t,errorMessage:r})=>{var i;ec("scw_signer.request.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r,enableAutoSubAccounts:null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.enableAutoSubAccounts},d.high)},tl=({method:e,correlationId:t})=>{var r;ec("scw_signer.request.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tc=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.request.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tu=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.request.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},th=({method:e,correlationId:t,errorMessage:r})=>{var i;ec("scw_sub_account.request.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r,enableAutoSubAccounts:null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.enableAutoSubAccounts},d.high)},td=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.add_owner.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tp=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.add_owner.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tf=({method:e,correlationId:t,errorMessage:r})=>{var i;ec("scw_sub_account.add_owner.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r,enableAutoSubAccounts:null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.enableAutoSubAccounts},d.high)},tg=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.insufficient_balance.error_handling.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},tm=({method:e,correlationId:t})=>{var r;ec("scw_sub_account.insufficient_balance.error_handling.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t,enableAutoSubAccounts:null===(r=N.subAccountsConfig.get())||void 0===r?void 0:r.enableAutoSubAccounts},d.high)},ty=({method:e,correlationId:t,errorMessage:r})=>{var i;ec("scw_sub_account.insufficient_balance.error_handling.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r,enableAutoSubAccounts:null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.enableAutoSubAccounts},d.high)},tv=e=>"message"in e&&"string"==typeof e.message?e.message:"";var tb=r(71186),tw=r(49192),tE=r(35148),t_=r(54002);let tC=w(()=>({}));function tS(e){e.forEach(e=>{var t,r,i,n,s,o,a,l;if(!e.rpcUrl)return;let c=(0,tb.a)({id:e.id,rpcUrls:{default:{http:[e.rpcUrl]}},name:null!==(r=null===(t=e.nativeCurrency)||void 0===t?void 0:t.name)&&void 0!==r?r:"",nativeCurrency:{name:null!==(n=null===(i=e.nativeCurrency)||void 0===i?void 0:i.name)&&void 0!==n?n:"",symbol:null!==(o=null===(s=e.nativeCurrency)||void 0===s?void 0:s.symbol)&&void 0!==o?o:"",decimals:null!==(l=null===(a=e.nativeCurrency)||void 0===a?void 0:a.decimal)&&void 0!==l?l:18}}),u=(0,tw.v)({chain:c,transport:(0,tE.d)(e.rpcUrl)}),h=(0,t_.E)({client:u,transport:(0,tE.d)(e.rpcUrl)});tC.setState({[e.id]:{client:u,bundlerClient:h}})})}function tI(e){var t;return null===(t=tC.getState()[e])||void 0===t?void 0:t.client}var tx=r(87364),tA=r(45008);function tk(e){if("object"!=typeof e||null===e)throw K.rpc.internal("sub account info is not an object");if(!("address"in e))throw K.rpc.internal("sub account is invalid");if("address"in e&&"string"==typeof e.address&&!(0,tx.U)(e.address))throw K.rpc.internal("sub account address is invalid");if("factory"in e&&"string"==typeof e.factory&&!(0,tx.U)(e.factory))throw K.rpc.internal("sub account factory address is invalid");if("factoryData"in e&&"string"==typeof e.factoryData&&!(0,tA.v)(e.factoryData))throw K.rpc.internal("sub account factory data is invalid")}async function tO(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function tP(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function tR(e,t){let r=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,new TextEncoder().encode(t));return{iv:r,cipherText:i}}async function tN(e,{iv:t,cipherText:r}){let i=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r);return new TextDecoder().decode(i)}function tT(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function tM(e,t){let r=tT(e),i=await crypto.subtle.exportKey(r,t);return eV(new Uint8Array(i))}async function tL(e,t){let r=tT(e),i=eG(t).buffer;return await crypto.subtle.importKey(r,new Uint8Array(i),{name:"ECDH",namedCurve:"P-256"},!0,"private"===e?["deriveKey"]:[])}async function tD(e,t){return tR(t,JSON.stringify(e,(e,t)=>t instanceof Error?Object.assign(Object.assign({},t.code?{code:t.code}:{}),{message:t.message}):t))}async function tB(e,t){return JSON.parse(await tN(t,e))}var tj=r(83078),t$=r(75440),tU=r(52948);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let tq=(0,tU.gN)(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),tH=tq.create(BigInt("-3")),tF=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),tz=(0,t$._)({a:tH,b:tF,Fp:tq,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},tj.JQ),tW=(0,tU.gN)(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),tK=tW.create(BigInt("-3")),tV=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");(0,t$._)({a:tK,b:tV,Fp:tW,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},tj.iC);let tG=(0,tU.gN)(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),tZ=tG.create(BigInt("-3")),tJ=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");(0,t$._)({a:tZ,b:tJ,Fp:tG,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},tj.o);class tY extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof tY){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),i=t.cause instanceof tY&&t.cause.docsPath||t.docsPath,n=`https://oxlib.sh${i??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${n}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=r,this.docs=n,this.docsPath=i,this.shortMessage=e}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&t.cause?e(t.cause,r):r?null:t}(this,e)}}function tX(e,t,r){return JSON.stringify(e,(e,r)=>"function"==typeof t?t(e,r):"bigint"==typeof r?r.toString()+"#__bigint":r,r)}function tQ(e,t){if(re(e)>t)throw new rn({givenSize:re(e),maxSize:t})}function t0(e,t={}){let{dir:r,size:i=32}=t;if(0===i)return e;let n=e.replace("0x","");if(n.length>2*i)throw new ro({size:Math.ceil(n.length/2),targetSize:i,type:"Hex"});return`0x${n["right"===r?"padEnd":"padStart"](2*i,"0")}`}let t1=new TextEncoder,t2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function t3(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function t5(e){return e instanceof Uint8Array?t4(e):Array.isArray(e)?t4(new Uint8Array(e)):e}function t4(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=t2[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(tQ(i,t.size),t9(i,t.size)):i}function t6(e,t={}){let r;let{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new rt({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16),l=`0x${a}`;return n?t0(l,{dir:"left",size:n}):l}function t8(e,t={}){return t4(t1.encode(e),t)}function t9(e,t){return t0(e,{dir:"right",size:t})}function t7(e,t,r,i={}){let{strict:n}=i;!function(e,t){if("number"==typeof t&&t>0&&t>re(e)-1)throw new rs({offset:t,position:"start",size:re(e)})}(e,t);let s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return n&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&re(e)!==r-t)throw new rs({offset:r,position:"end",size:re(e)})}(s,t,r),s}function re(e){return Math.ceil((e.length-2)/2)}class rt extends tY{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number \`${n}\` is not in safe${i?` ${8*i}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class rr extends tY{constructor(e){super(`Value \`${"object"==typeof e?tX(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class ri extends tY{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class rn extends tY{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class rs extends tY{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class ro extends tY{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}let ra={zero:48,nine:57,A:65,F:70,a:97,f:102};function rl(e){return e>=ra.zero&&e<=ra.nine?e-ra.zero:e>=ra.A&&e<=ra.F?e-(ra.A-10):e>=ra.a&&e<=ra.f?e-(ra.a-10):void 0}function rc(e){return e instanceof Uint8Array?e:"string"==typeof e?rh(e):ru(e)}function ru(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function rh(e,t={}){let{size:r}=t,i=e;r&&(tQ(e,r),i=t9(e,r));let n=i.slice(2);n.length%2&&(n=`0${n}`);let s=n.length/2,o=new Uint8Array(s);for(let e=0,t=0;e<s;e++){let r=rl(n.charCodeAt(t++)),i=rl(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new tY(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);o[e]=16*r+i}return o}function rd(e){return e.length}function rp(e,t,r,i={}){let{strict:n}=i;!function(e,t){if("number"==typeof t&&t>0&&t>rd(e)-1)throw new ry({offset:t,position:"start",size:rd(e)})}(e,t);let s=e.slice(t,r);return n&&function(e,t,r){if("number"==typeof t&&"number"==typeof r&&rd(e)!==r-t)throw new ry({offset:r,position:"end",size:rd(e)})}(s,t,r),s}function rf(e,t={}){let{size:r}=t;return void 0!==r&&function(e,t){if(rd(e)>t)throw new rm({givenSize:rd(e),maxSize:t})}(e,r),function(e,t={}){let{signed:r}=t;t.size&&tQ(e,t.size);let i=BigInt(e);if(!r)return i;let n=(1n<<8n*BigInt((e.length-2)/2))-1n;return i<=n>>1n?i:i-n-1n}(t4(e,t),t)}class rg extends tY{constructor(e){super(`Value \`${"object"==typeof e?tX(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class rm extends tY{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ry extends tY{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function rv(e,t={}){let{compressed:r}=t,{prefix:i,x:n,y:s}=e;if(!1===r||"bigint"==typeof n&&"bigint"==typeof s){if(4!==i)throw new r_({prefix:i,cause:new rS});return}if(!0===r||"bigint"==typeof n&&void 0===s){if(3!==i&&2!==i)throw new r_({prefix:i,cause:new rC});return}throw new rE({publicKey:e})}function rb(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new rI({publicKey:e});return 130===e.length?{prefix:4,x:BigInt(t7(e,0,32)),y:BigInt(t7(e,32,64))}:132===e.length?{prefix:Number(t7(e,0,1)),x:BigInt(t7(e,1,33)),y:BigInt(t7(e,33,65))}:{prefix:Number(t7(e,0,1)),x:BigInt(t7(e,1,33))}}function rw(e,t={}){rv(e);let{prefix:r,x:i,y:n}=e,{includePrefix:s=!0}=t;return t3(s?t6(r,{size:1}):"0x",t6(i,{size:32}),"bigint"==typeof n?t6(n,{size:32}):"0x")}class rE extends tY{constructor({publicKey:e}){super(`Value \`${tX(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class r_ extends tY{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class rC extends tY{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class rS extends tY{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class rI extends tY{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${re(t5(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}async function rx(e={}){let{extractable:t=!1}=e,r=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),i=await globalThis.crypto.subtle.exportKey("raw",r.publicKey),n=function(e){let t=(()=>{if(function(e,t={}){let{strict:r=!1}=t;try{return!function(e,t={}){let{strict:r=!1}=t;if(!e||"string"!=typeof e)throw new rr(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e)||!e.startsWith("0x"))throw new ri(e)}(e,{strict:r}),!0}catch{return!1}}(e))return rb(e);if(function(e){try{return!function(e){if(!(e instanceof Uint8Array)&&(!e||"object"!=typeof e||!("BYTES_PER_ELEMENT"in e)||1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name))throw new rg(e)}(e),!0}catch{return!1}}(e))return rb(t4(e));let{prefix:t,x:r,y:i}=e;return"bigint"==typeof r&&"bigint"==typeof i?{prefix:t??4,x:r,y:i}:{prefix:t,x:r}})();return rv(t),t}(new Uint8Array(i));return{privateKey:r.privateKey,publicKey:n}}async function rA(e){let{payload:t,privateKey:r}=e,i=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},r,rc(t)),n=ru(new Uint8Array(i)),s=rf(rp(n,0,32)),o=rf(rp(n,32,64));return o>tz.CURVE.n/2n&&(o=tz.CURVE.n-o),{r:s,s:o}}let rk=new TextDecoder,rO=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));function rP(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function rR(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function rN(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function rT(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rM(e,t){return e<<32-t|e>>>t}function rL(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),rP(e),e}({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))});class rD{}class rB extends rD{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=rT(this.buffer)}update(e){rR(this),rP(e=rL(e));let{view:t,buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=rT(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rR(this),function(e,t){rP(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,rN(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=rT(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let rj=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),r$=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rU=new Uint32Array(64);class rq extends rB{constructor(e=32){super(64,e,8,!1),this.A=0|rj[0],this.B=0|rj[1],this.C=0|rj[2],this.D=0|rj[3],this.E=0|rj[4],this.F=0|rj[5],this.G=0|rj[6],this.H=0|rj[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)rU[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rU[e-15],r=rU[e-2],i=rM(t,7)^rM(t,18)^t>>>3,n=rM(r,17)^rM(r,19)^r>>>10;rU[e]=n+rU[e-7]+i+rU[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,h,d,p;let t=c+(rM(o,6)^rM(o,11)^rM(o,25))+((u=o)&a^~u&l)+r$[e]+rU[e]|0,f=(rM(r,2)^rM(r,13)^rM(r,22))+((h=r)&(d=i)^h&(p=n)^d&p)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+f|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){rN(rU)}destroy(){this.set(0,0,0,0,0,0,0,0),rN(this.buffer)}}let rH=function(e){let t=t=>e().update(rL(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new rq);function rF(e,t={}){let{as:r="string"==typeof e?"Hex":"Bytes"}=t,i=rH(rc(e));return"Bytes"===r?i:t4(i)}Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);let rz=2n**256n-1n;function rW(e){if(130!==e.length&&132!==e.length)throw new rK({signature:e});let t=BigInt(t7(e,0,32)),r=BigInt(t7(e,32,64)),i=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return function(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return e%2==0?1:0;throw new rY({value:e})}(t)}catch{throw new rJ({value:t})}})();return void 0===i?{r:t,s:r}:{r:t,s:r,yParity:i}}class rK extends tY{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${re(t5(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class rV extends tY{constructor({signature:e}){super(`Signature \`${tX(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class rG extends tY{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class rZ extends tY{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class rJ extends tY{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class rY extends tY{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}var rX=r(1498),rQ=r(71513),r0=r(5484);let r1="activeId",r2=function(e,t){let r="undefined"!=typeof indexedDB?(0,r0.MT)(e,t):void 0;return{getItem:async e=>await (0,r0.U2)(e,r)||null,removeItem:async e=>(0,r0.IV)(e,r),setItem:async(e,t)=>(0,r0.t8)(e,t,r)}}("cbwsdk","keys");async function r3(){let e=await rx({extractable:!1}),t=t7(rw(e.publicKey),1);return await r2.setItem(t,e),await r2.setItem(r1,t),e}async function r5(){let e=await r2.getItem(r1);return e&&await r2.getItem(e)||null}async function r4(){let e=await r5();if(!e){let e=await r3(),t=t7(rw(e.publicKey),1);return await r2.setItem(t,e),await r2.setItem(r1,t),e}return e}async function r6(){let e=await r4(),t=t7(rw(e.publicKey),1),r=async t=>{let{payload:r,metadata:i}=function(e){let{challenge:t,crossOrigin:r,extraClientData:i,flag:n,origin:s,rpId:o,signCount:a,userVerification:l="required"}=e,c=function(e={}){let{flag:t=5,rpId:r=window.location.hostname,signCount:i=0}=e;return t3(rF(t8(r)),t6(t,{size:1}),t6(i,{size:4}))}({flag:n,rpId:o,signCount:a}),u=function(e){let{challenge:t,crossOrigin:r=!1,extraClientData:i,origin:n=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:function(e,t={}){return function(e,t={}){let{pad:r=!0,url:i=!1}=t,n=new Uint8Array(4*Math.ceil(e.length/3));for(let t=0,r=0;r<e.length;t+=4,r+=3){let i=(e[r]<<16)+(e[r+1]<<8)+(0|e[r+2]);n[t]=rO[i>>18],n[t+1]=rO[i>>12&63],n[t+2]=rO[i>>6&63],n[t+3]=rO[63&i]}let s=e.length%3,o=4*Math.floor(e.length/3)+(s&&s+1),a=rk.decode(new Uint8Array(n.buffer,0,o));return r&&1===s&&(a+="=="),r&&2===s&&(a+="="),i&&(a=a.replaceAll("+","-").replaceAll("/","_")),a}(rh(e),t)}(t,{url:!0,pad:!1}),origin:n,crossOrigin:r,...i})}({challenge:t,crossOrigin:r,extraClientData:i,origin:s}),h=rF(t8(u)),d=u.indexOf('"challenge"'),p=u.indexOf('"type"'),f=t3(c,h);return{metadata:{authenticatorData:c,clientDataJSON:u,challengeIndex:d,typeIndex:p,userVerificationRequired:"required"===l},payload:f}}({challenge:t,origin:"https://keys.coinbase.com",userVerification:"preferred"});return{signature:function(e){!function(e,t={}){let{recovered:r}=t;if(void 0===e.r||void 0===e.s||r&&void 0===e.yParity)throw new rV({signature:e});if(e.r<0n||e.r>rz)throw new rG({value:e.r});if(e.s<0n||e.s>rz)throw new rZ({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new rJ({value:e.yParity})}(e);let t=e.r,r=e.s;return t3(t6(t,{size:32}),t6(r,{size:32}),"number"==typeof e.yParity?t6(function(e){if(0===e)return 27;if(1===e)return 28;throw new rJ({value:e})}(e.yParity),{size:1}):"0x")}(await rA({payload:r,privateKey:e.privateKey})),raw:{},webauthn:i}};return{id:t,publicKey:t,sign:async({hash:e})=>r(e),signMessage:async({message:e})=>r((0,rX.r)(e)),signTypedData:async e=>r((0,rQ.Jv)(e)),type:"webAuthn"}}async function r8(){return{account:await r6()}}let r9={storageKey:"ownPrivateKey",keyType:"private"},r7={storageKey:"ownPublicKey",keyType:"public"},ie={storageKey:"peerPublicKey",keyType:"public"};class it{constructor(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(ie,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,N.keys.clear()}async generateKeyPair(){let e=await tO();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(r9,e.privateKey),await this.storeKey(r7,e.publicKey)}async loadKeysIfNeeded(){null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(r9)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(r7)),(null===this.ownPrivateKey||null===this.ownPublicKey)&&await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(ie)),null===this.sharedSecret&&null!==this.ownPrivateKey&&null!==this.peerPublicKey&&(this.sharedSecret=await tP(this.ownPrivateKey,this.peerPublicKey))}async loadKey(e){let t=N.keys.get(e.storageKey);return t?tL(e.keyType,t):null}async storeKey(e,t){let r=await tM(e.keyType,t);N.keys.set(e.storageKey,r)}}var ir=r(72619),ii=r(27064);function is(e,t){if("object"==typeof e&&null!==e)return t.split(/[.[\]]+/).filter(Boolean).reduce((e,t)=>{if("object"==typeof e&&null!==e)return e[t]},e)}var io=r(99288);function ia(e){var t;if(!Array.isArray(e.params))return null;switch(e.method){case"personal_sign":return e.params[1];case"eth_signTypedData_v4":return e.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return null===(t=e.params[0])||void 0===t?void 0:t.from;default:return null}}function il(e){var t;if(!e||!Array.isArray(e)||!(null===(t=e[0])||void 0===t?void 0:t.chainId)||"string"!=typeof e[0].chainId&&"number"!=typeof e[0].chainId)throw K.rpc.invalidParams()}function ic(e,t){let r=Object.assign({},e);if(t&&e.method.startsWith("wallet_")){let e=is(r,"params.0.capabilities");if(void 0===e&&(e={}),"object"!=typeof e)throw K.rpc.invalidParams();e=Object.assign(Object.assign({},t),e),r.params&&Array.isArray(r.params)&&(r.params[0]=Object.assign(Object.assign({},r.params[0]),{capabilities:e}))}return r}async function iu(){var e;let t=null!==(e=N.subAccountsConfig.get())&&void 0!==e?e:{},r={};if(t.enableAutoSubAccounts){let{account:e}=t.toOwnerAccount?await t.toOwnerAccount():await r8();if(!e)throw K.provider.unauthorized("No owner account found");r.addSubAccount={account:{type:"create",keys:[{type:e.address?"address":"webauthn-p256",publicKey:e.address||e.publicKey}]}}}N.subAccountsConfig.set({capabilities:r})}async function ih({client:e,id:t}){var r;let i=await (0,io.l)(e,{id:t});if("success"===i.status)return null===(r=i.receipts)||void 0===r?void 0:r[0].transactionHash;throw K.rpc.internal("failed to send transaction")}function id({calls:e,from:t,chainId:r,capabilities:i}){let n=R.get().paymasterUrls,s={method:"wallet_sendCalls",params:[{version:"1.0",calls:e,chainId:(0,m.eC)(r),from:t,atomicRequired:!0,capabilities:i}]};return(null==n?void 0:n[r])&&(s=ic(s,{paymasterService:{url:null==n?void 0:n[r]}})),s}async function ip(){let e=eA();return await new Promise(t=>{ep({snackbarContext:"sub_account_insufficient_balance"}),e.presentItem({autoExpand:!0,message:"Insufficient spend permission. Choose how to proceed:",menuItems:[{isRed:!1,info:"Create new Spend Permission",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ef({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"create_permission"}),e.clear(),t("update_permission")}},{isRed:!1,info:"Continue in Popup",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ef({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"continue_in_popup"}),e.clear(),t("continue_popup")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ef({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"cancel"}),e.clear(),t("cancel")}}]})})}function ig(e,t){let r=e.filter(e=>e!==t);return[t,...r]}function im(e,t){return[...e.filter(e=>e!==t),t]}async function iy(){let e=N.spendPermissions.get(),t=N.subAccounts.get(),r=N.account.get().accounts;return r?{accounts:null==r?void 0:r.map(r=>({address:r,capabilities:{subAccounts:t?[t]:void 0,spendPermissions:e.length>0?{permissions:e}:void 0}}))}:null}var iv=r(56728),ib=r(94973);function iw(e){return btoa(String.fromCharCode(...new Uint8Array(e))).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}var iE=r(21273),i_=r(39230),iC=r(90929),iS=r(39868),iI=r(97828),ix=r(5120),iA=r(40271),ik=r(72382),iO=r(96721),iP=r(26587),iR=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};async function iN(e){let{owner:t,ownerIndex:r,address:i,client:n,factoryData:s}=e,o={abi:iA.Jr,address:ik.qe,version:"0.6"},a={abi:j,address:L};return(0,iO.A)({client:n,entryPoint:o,extend:{abi:B,factory:a},async decodeCalls(e){let t=(0,iE.p)({abi:B,data:e});if("execute"===t.functionName)return[{to:t.args[0],value:t.args[1],data:t.args[2]}];if("executeBatch"===t.functionName)return t.args[0].map(e=>({to:e.target,value:e.value,data:e.data}));throw new i_.G(`unable to decode calls for "${t.functionName}"`)},async encodeCalls(e){var t,r;return 1===e.length?(0,g.R)({abi:B,functionName:"execute",args:[e[0].to,null!==(t=e[0].value)&&void 0!==t?t:BigInt(0),null!==(r=e[0].data)&&void 0!==r?r:"0x"]}):(0,g.R)({abi:B,functionName:"executeBatch",args:[e.map(e=>{var t,r;return{data:null!==(t=e.data)&&void 0!==t?t:"0x",target:e.to,value:null!==(r=e.value)&&void 0!==r?r:BigInt(0)}})]})},getAddress:async()=>i,getFactoryArgs:async()=>({factory:a.address,factoryData:s}),getStubSignature:async()=>"webAuthn"===t.type?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":iL({ownerIndex:r,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"}),async sign(e){let i=iM({address:await this.getAddress(),chainId:n.chain.id,hash:e.hash});return iL({ownerIndex:r,signature:await iT({hash:i,owner:t})})},async signMessage(e){let{message:i}=e,s=iM({address:await this.getAddress(),chainId:n.chain.id,hash:(0,rX.r)(i)});return iL({ownerIndex:r,signature:await iT({hash:s,owner:t})})},async signTypedData(e){let{domain:i,types:s,primaryType:o,message:a}=e,l=iM({address:await this.getAddress(),chainId:n.chain.id,hash:(0,rQ.Jv)({domain:i,message:a,primaryType:o,types:s})});return iL({ownerIndex:r,signature:await iT({hash:l,owner:t})})},async signUserOperation(e){let{chainId:i=n.chain.id}=e,s=iR(e,["chainId"]),a=await this.getAddress(),l=(0,iP.x)({chainId:i,entryPointAddress:o.address,entryPointVersion:o.version,userOperation:Object.assign(Object.assign({},s),{sender:a})});return iL({ownerIndex:r,signature:await iT({hash:l,owner:t})})},userOperation:{async estimateGas(e){var r;if("webAuthn"===t.type)return{verificationGasLimit:BigInt(Math.max(Number(null!==(r=e.verificationGasLimit)&&void 0!==r?r:BigInt(0)),8e5))}}}})}async function iT({hash:e,owner:t}){if("webAuthn"===t.type){let{signature:r,webauthn:i}=await t.sign({hash:e});return function({webauthn:e,signature:t}){let{r,s:i}=rW(t);return(0,iC.E)([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:e.authenticatorData,clientDataJSON:(0,m.$G)(e.clientDataJSON),challengeIndex:BigInt(e.challengeIndex),typeIndex:BigInt(e.typeIndex),r,s:i}])}({signature:r,webauthn:i})}if(t.sign)return t.sign({hash:e});throw new i_.G("`owner` does not support raw sign.")}function iM({address:e,chainId:t,hash:r}){return(0,rQ.Jv)({domain:{chainId:t,name:"Coinbase Smart Wallet",verifyingContract:e,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:r}})}function iL(e){let{ownerIndex:t=0}=e,r=(()=>{if(65!==(0,iS.d)(e.signature))return e.signature;let t=(0,iI.c)(e.signature);return(0,ix._)(["bytes32","bytes32","uint8"],[t.r,t.s,0===t.yParity?27:28])})();return(0,iC.E)([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:t,signatureData:r}])}async function iD({address:e,client:t,factory:r,factoryData:i,owner:n,ownerIndex:s,parentAddress:o,attribution:a}){var l;let c={address:e,factory:r,factoryData:i},u=null===(l=t.chain)||void 0===l?void 0:l.id;if(!u)throw K.rpc.internal("chainId not found");let h=await iN({owner:n,ownerIndex:null!=s?s:1,address:e,client:t,factoryData:i}),d=async e=>{var r,i,s,l,p;try{switch(e.method){case"wallet_addSubAccount":return c;case"eth_accounts":return[c.address];case"eth_coinbase":return c.address;case"net_version":return u.toString();case"eth_chainId":return(0,m.eC)(u);case"eth_sendTransaction":{et(e.params);let n=e.params[0];ee(n.to,K.rpc.invalidParams("to is required"));let o={to:n.to,data:e3(null!==(r=n.data)&&void 0!==r?r:"0x",!0),value:e3(null!==(i=n.value)&&void 0!==i?i:"0x",!0),from:null!==(s=n.from)&&void 0!==s?s:c.address},a=id({calls:[o],chainId:u,from:o.from}),l=await d(a);return ih({client:t,id:l})}case"wallet_sendCalls":{let t;et(e.params);let r=is(e.params[0],"chainId");if(!r)throw K.rpc.invalidParams("chainId is required");if(!(0,tA.v)(r))throw K.rpc.invalidParams("chainId must be a hex encoded integer");if(!e.params[0])throw K.rpc.invalidParams("params are required");if(!("calls"in e.params[0]))throw K.rpc.invalidParams("calls are required");let i={method:"wallet_prepareCalls",params:[{version:"1.0",calls:e.params[0].calls,chainId:r,from:c.address,capabilities:"capabilities"in e.params[0]?e.params[0].capabilities:{}}]};o&&(i=ic(i,{funding:[{type:"spendPermission",data:{autoApply:!0,sources:[o],preference:"PREFER_DIRECT_BALANCE"}}]}));let s=await d(i),a=await (null===(l=n.sign)||void 0===l?void 0:l.call(n,{hash:(0,tt.rR)(s.signatureRequest.hash)}));if(!a)throw K.rpc.internal("signature not found");return t=(0,tA.v)(a)?{type:"secp256k1",data:{address:n.address,signature:a}}:{type:"webauthn",data:{signature:JSON.stringify(function({webauthn:e,signature:t,id:r}){let i=rW(t);return{id:r,rawId:iw((0,iv.qX)(r)),response:{authenticatorData:iw((0,iv.nr)(e.authenticatorData)),clientDataJSON:iw((0,iv.qX)(e.clientDataJSON)),signature:iw(function(e,t){let r=(0,iv.nr)((0,ib.f)((0,m.eC)(e))),i=(0,iv.nr)((0,ib.f)((0,m.eC)(t))),n=r.length,s=i.length,o=n+s+4,a=new Uint8Array(o+2);return a[0]=48,a[1]=o,a[2]=2,a[3]=n,a.set(r,4),a[n+4]=2,a[n+5]=s,a.set(i,n+6),a}(i.r,i.s))},type:JSON.parse(e.clientDataJSON).type}}(Object.assign({id:null!==(p=n.id)&&void 0!==p?p:"1"},a))),publicKey:n.publicKey}},(await d({method:"wallet_sendPreparedCalls",params:[{version:"1.0",type:s.type,data:s.userOp,chainId:s.chainId,signature:t}]}))[0]}case"wallet_sendPreparedCalls":{et(e.params);let r=is(e.params[0],"chainId");if(!r)throw K.rpc.invalidParams("chainId is required");if(!(0,tA.v)(r))throw K.rpc.invalidParams("chainId must be a hex encoded integer");return await t.request({method:"wallet_sendPreparedCalls",params:e.params})}case"wallet_prepareCalls":{et(e.params);let r=is(e.params[0],"chainId");if(!r)throw K.rpc.invalidParams("chainId is required");if(!(0,tA.v)(r))throw K.rpc.invalidParams("chainId must be a hex encoded integer");if(!e.params[0])throw K.rpc.invalidParams("params are required");if(!is(e.params[0],"calls"))throw K.rpc.invalidParams("calls are required");let i=e.params[0];return!a||!i.capabilities||"attribution"in i.capabilities||(i.capabilities.attribution=a),await t.request({method:"wallet_prepareCalls",params:[Object.assign(Object.assign({},e.params[0]),{chainId:r})]})}case"personal_sign":{if(et(e.params),!(0,tA.v)(e.params[0]))throw K.rpc.invalidParams("message must be a hex encoded string");let t=(0,tt.rR)(e.params[0]);return h.signMessage({message:t})}case"eth_signTypedData_v4":{et(e.params);let t="string"==typeof e.params[1]?JSON.parse(e.params[1]):e.params[1];return h.signTypedData(t)}default:throw K.rpc.methodNotSupported()}}catch(e){if(Q(e)){let t=function(e){try{let t=JSON.parse(e.details);return new J(t.code,t.message,t.data)}catch(e){return null}}(e);if(t)throw t}throw e}};return{request:d}}var iB=r(39803),ij=r(99725),i$=r(92895),iU=r(65459);async function iq({address:e,client:t,publicKey:r,factory:i,factoryData:n}){if(!await (0,i$.C)(t,{address:e})&&i&&n){if((0,iB.K)(i)!==(0,iB.K)(L))throw K.rpc.internal("unknown factory address");let e=(0,iE.p)({abi:j,data:n});if("createAccount"!==e.functionName)throw K.rpc.internal("unknown factory function");let[t]=e.args;return t.findIndex(e=>e.toLowerCase()===iH(r).toLowerCase())}let s=await (0,iU.L)(t,{address:e,abi:B,functionName:"ownerCount"});for(let i=Number(s)-1;i>=0;i--){let n=await (0,iU.L)(t,{address:e,abi:B,functionName:"ownerAtIndex",args:[BigInt(i)]}),s=iH(r);if(n.toLowerCase()===s.toLowerCase())return i}return -1}function iH(e){return(0,tx.U)(e)?(0,ij.vk)(e):e}async function iF(){let e=eA();return new Promise(t=>{ep({snackbarContext:"sub_account_add_owner"}),e.presentItem({autoExpand:!0,message:"App requires a signer update",menuItems:[{isRed:!1,info:"Confirm",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ef({snackbarContext:"sub_account_add_owner",snackbarAction:"confirm"}),e.clear(),t("authenticate")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ef({snackbarContext:"sub_account_add_owner",snackbarAction:"cancel"}),e.clear(),t("cancel")}}]})})}async function iz({ownerAccount:e,globalAccountRequest:t}){var r,i;let n=N.account.get(),s=N.subAccounts.get(),o=null===(r=n.accounts)||void 0===r?void 0:r.find(e=>e.toLowerCase()!==(null==s?void 0:s.address.toLowerCase()));ee(o,K.provider.unauthorized("no global account")),ee(null===(i=n.chain)||void 0===i?void 0:i.id,K.provider.unauthorized("no chain id")),ee(null==s?void 0:s.address,K.provider.unauthorized("no sub account"));let a=[];if("local"===e.type&&e.address&&a.push({to:s.address,data:(0,g.R)({abi:B,functionName:"addOwnerAddress",args:[e.address]}),value:(0,m.NC)(0)}),e.publicKey){let[t,r]=(0,f.r)([{type:"bytes32"},{type:"bytes32"}],e.publicKey);a.push({to:s.address,data:(0,g.R)({abi:B,functionName:"addOwnerPublicKey",args:[t,r]}),value:(0,m.NC)(0)})}let l={method:"wallet_sendCalls",params:[{version:"1",calls:a,chainId:(0,m.eC)(84532),from:o}]};if("cancel"===await iF())throw K.provider.unauthorized("user cancelled");let c=await t(l),u=tI(n.chain.id);if(ee(u,K.rpc.internal(`client not found for chainId ${n.chain.id}`)),"success"!==(await (0,io.l)(u,{id:c})).status)throw K.rpc.internal("add owner call failed");let h=await iq({address:s.address,publicKey:"local"===e.type&&e.address?e.address:e.publicKey,client:u});if(-1===h)throw K.rpc.internal("failed to find owner index");return h}var iW=r(42980);async function iK({errorData:e,globalAccountAddress:t,subAccountAddress:r,client:i,request:n,subAccountRequest:s,globalAccountRequest:o}){var a,l,c;let u,h;let d=null===(a=i.chain)||void 0===a?void 0:a.id;ee(d,K.rpc.internal("invalid chainId"));let p=function({errorData:e,sourceAddress:t}){var r;let i=[];for(let[n,{amount:s,sources:o}]of Object.entries(null!==(r=null==e?void 0:e.required)&&void 0!==r?r:{})){if(0===o.filter(e=>(0,tt.y_)(e.balance)>=(0,tt.y_)(s)&&e.address.toLowerCase()===(null==t?void 0:t.toLowerCase())).length)throw Error("Source address has insufficient balance for a token");i.push({token:n,requiredAmount:(0,tt.y_)(s)})}return i}({errorData:e,sourceAddress:t}),f=await ip();if("cancel"===f)throw Error("User cancelled funding");if("update_permission"===f){if(1===p.length){let e=p[0],i=function({spendPermission:e,chainId:t}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:t,verifyingContract:D},types:{SpendPermission:[{name:"account",type:"address"},{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermission",message:{account:e.account,spender:e.spender,token:e.token,allowance:e.allowance,period:e.period,start:e.start,end:e.end,salt:e.salt,extraData:e.extraData}}}({spendPermission:{token:e.token,allowance:(0,m.eC)(e.requiredAmount*BigInt(3)),period:86400,account:t,spender:r,start:0,end:0xffffffffffff,salt:(0,m.eC)(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),extraData:"0x"},chainId:d});u={method:"eth_signTypedData_v4",params:[t,i]}}else{let e=function({spendPermissionBatch:e,chainId:t}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:t,verifyingContract:D},types:{SpendPermissionBatch:[{name:"account",type:"address"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"permissions",type:"PermissionDetails[]"}],PermissionDetails:[{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermissionBatch",message:{account:e.account,period:e.period,start:e.start,end:e.end,permissions:e.permissions.map(e=>({spender:e.spender,token:e.token,allowance:e.allowance,salt:e.salt,extraData:e.extraData}))}}}({spendPermissionBatch:{account:t,period:86400,start:0,end:0xffffffffffff,permissions:p.map(e=>({token:e.token,allowance:(0,m.eC)(e.requiredAmount*BigInt(3)),period:86400,account:t,spender:r,salt:"0x0",extraData:"0x"}))},chainId:d});u={method:"eth_signTypedData_v4",params:[t,e]}}try{await o(u)}catch(e){throw console.error(e),Error("User denied spend permission request")}return s(n)}let y=p.map(e=>"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===e.token.toLowerCase()?{to:r,value:(0,m.eC)(e.requiredAmount),data:"0x"}:{to:e.token,value:"0x0",data:(0,g.R)({abi:iW.Wo,functionName:"transfer",args:[r,e.requiredAmount]})});if("wallet_sendCalls"===n.method&&"object"==typeof(l=n.params)&&null!==l&&"calls"in l)h=n.params[0];else if("eth_sendTransaction"===n.method&&Array.isArray(c=n.params)&&1===c.length&&"object"==typeof c[0]&&null!==c[0]&&"to"in c[0])h=id({calls:[n.params[0]],chainId:d,from:n.params[0].from}).params[0];else throw Error("Could not get original call");let v=[...y,{data:(0,g.R)({abi:B,functionName:"executeBatch",args:[h.calls.map(e=>{var t,r;return{target:e.to,value:(0,tt.y_)(null!==(t=e.value)&&void 0!==t?t:"0x0"),data:null!==(r=e.data)&&void 0!==r?r:"0x"}})]}),to:r,value:"0x0"}],b=await o({method:"wallet_sendCalls",params:[Object.assign(Object.assign({},h),{calls:v,from:t})]});return"eth_sendTransaction"===n.method?ih({client:i,id:b}):b}class iV{constructor(e){var t,r,i,n;this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new it;let{account:s,chains:o}=N.getState();this.accounts=null!==(t=s.accounts)&&void 0!==t?t:[],this.chain=null!==(r=s.chain)&&void 0!==r?r:{id:null!==(n=null===(i=e.metadata.appChainIds)||void 0===i?void 0:i[0])&&void 0!==n?n:1},o&&tS(o)}async handshake(e){var t,r,i;let n=te.get(e);ti({method:e.method,correlationId:n});try{await (null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t));let s=await this.createRequestMessage({handshake:{method:e.method,params:null!==(i=e.params)&&void 0!==i?i:[]}},n),o=await this.communicator.postRequestAndWaitForResponse(s);if("failure"in o.content)throw o.content.failure;let a=await tL("public",o.sender);await this.keyManager.setPeerPublicKey(a);let l=await this.decryptResponseMessage(o);this.handleResponse(e,l),ts({method:e.method,correlationId:n})}catch(t){throw tn({method:e.method,correlationId:n,errorMessage:tv(t)}),t}}async request(e){let t=te.get(e);to({method:e.method,correlationId:t});try{let r=await this._request(e);return tl({method:e.method,correlationId:t}),r}catch(r){throw ta({method:e.method,correlationId:t,errorMessage:tv(r)}),r}}async _request(e){var t,r,i,n,s,o,a,l,c,u,h,d,p,f;if(0===this.accounts.length)switch(e.method){case"eth_requestAccounts":return await (null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t)),await iu(),await this.request({method:"wallet_connect",params:[{version:"1",capabilities:Object.assign({},null!==(n=null===(i=N.subAccountsConfig.get())||void 0===i?void 0:i.capabilities)&&void 0!==n?n:{})}]}),this.accounts;case"wallet_switchEthereumChain":il(e.params),this.chain.id=Number(e.params[0].chainId);return;case"wallet_connect":{await (null===(o=(s=this.communicator).waitForPopupLoaded)||void 0===o?void 0:o.call(s)),await iu();let t={};(function(e,t){var r;if(!Array.isArray(null==e?void 0:e.params))return!1;let i=null===(r=e.params[0])||void 0===r?void 0:r.capabilities;return!!i&&"object"==typeof i&&t in i})(e,"addSubAccount")&&(t=null!==(l=null===(a=N.subAccountsConfig.get())||void 0===a?void 0:a.capabilities)&&void 0!==l?l:{});let r=ic(e,t);return this.sendRequestToPopup(r)}case"wallet_sendCalls":case"wallet_sign":return this.sendRequestToPopup(e);default:throw K.provider.unauthorized()}if(this.shouldRequestUseSubAccountSigner(e)){let t=te.get(e);tc({method:e.method,correlationId:t});try{let r=await this.sendRequestToSubAccountSigner(e);return tu({method:e.method,correlationId:t}),r}catch(r){throw th({method:e.method,correlationId:t,errorMessage:tv(r)}),r}}switch(e.method){case"eth_requestAccounts":case"eth_accounts":{let e=N.subAccounts.get(),t=N.subAccountsConfig.get();return(null==e?void 0:e.address)&&(this.accounts=(null==t?void 0:t.enableAutoSubAccounts)?ig(this.accounts,e.address):im(this.accounts,e.address)),null===(c=this.callback)||void 0===c||c.call(this,"connect",{chainId:(0,m.eC)(this.chain.id)}),this.accounts}case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return(0,m.eC)(this.chain.id);case"wallet_getCapabilities":return this.handleGetCapabilitiesRequest(e);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);case"wallet_connect":{let t=await iy();if(t)return t;await (null===(h=(u=this.communicator).waitForPopupLoaded)||void 0===h?void 0:h.call(u)),await iu();let r=N.subAccountsConfig.get(),i=ic(e,null!==(d=null==r?void 0:r.capabilities)&&void 0!==d?d:{});return null===(p=this.callback)||void 0===p||p.call(this,"connect",{chainId:(0,m.eC)(this.chain.id)}),this.sendRequestToPopup(i)}case"wallet_getSubAccounts":{let t=N.subAccounts.get();if(null==t?void 0:t.address)return{subAccounts:[t]};if(!this.chain.rpcUrl)throw K.rpc.internal("No RPC URL set for chain");let r=await eo(e,this.chain.rpcUrl);if(et(r.subAccounts,"subAccounts"),r.subAccounts.length>0){tk(r.subAccounts[0]);let e=r.subAccounts[0];N.subAccounts.set({address:e.address,factory:e.factory,factoryData:e.factoryData})}return r}case"wallet_addSubAccount":return this.addSubAccount(e);case"coinbase_fetchPermissions":{!function(e){if("coinbase_fetchPermissions"!==e.method||void 0!==e.params){if("coinbase_fetchPermissions"===e.method&&Array.isArray(e.params)&&1===e.params.length&&"object"==typeof e.params[0]){if("string"!=typeof e.params[0].account||!e.params[0].chainId.startsWith("0x"))throw K.rpc.invalidParams("FetchPermissions - Invalid params: params[0].account must be a hex string");if("string"!=typeof e.params[0].chainId||!e.params[0].chainId.startsWith("0x"))throw K.rpc.invalidParams("FetchPermissions - Invalid params: params[0].chainId must be a hex string");if("string"!=typeof e.params[0].spender||!e.params[0].spender.startsWith("0x"))throw K.rpc.invalidParams("FetchPermissions - Invalid params: params[0].spender must be a hex string");return}throw K.rpc.invalidParams()}}(e);let t=function(e){var t,r,i;if(void 0!==e.params)return e;let n=null===(t=N.getState().account.accounts)||void 0===t?void 0:t[0],s=null===(r=N.getState().account.chain)||void 0===r?void 0:r.id,o=null===(i=N.getState().subAccount)||void 0===i?void 0:i.address;if(!n||!o||!s)throw K.rpc.invalidParams("FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first");return{method:"coinbase_fetchPermissions",params:[{account:n,chainId:(0,m.eC)(s),spender:o}]}}(e),r=await eo(t,ea),i=(0,tt.ly)(null===(f=t.params)||void 0===f?void 0:f[0].chainId);return N.spendPermissions.set(r.permissions.map(e=>Object.assign(Object.assign({},e),{chainId:i}))),r}default:if(!this.chain.rpcUrl)throw K.rpc.internal("No RPC URL set for chain");return eo(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var t,r;await (null===(r=(t=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(t));let i=await this.sendEncryptedRequest(e),n=await this.decryptResponseMessage(i);return this.handleResponse(e,n)}async handleResponse(e,t){var r,i,n,s,o;let a=t.result;if("error"in a)throw a.error;switch(e.method){case"eth_requestAccounts":{let e=a.value;this.accounts=e,N.account.set({accounts:e,chain:this.chain}),null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",e);break}case"wallet_connect":{let e=a.value,t=e.accounts.map(e=>e.address);this.accounts=t,N.account.set({accounts:t});let r=e.accounts.at(0),o=null==r?void 0:r.capabilities;if(null==o?void 0:o.subAccounts){let e=null==o?void 0:o.subAccounts;et(e,"subAccounts"),tk(e[0]),N.subAccounts.set({address:e[0].address,factory:e[0].factory,factoryData:e[0].factoryData})}let l=[this.accounts[0]],c=N.subAccounts.get(),u=N.subAccountsConfig.get();(null==c?void 0:c.address)&&(this.accounts=(null==u?void 0:u.enableAutoSubAccounts)?ig(this.accounts,c.address):im(this.accounts,c.address));let h=null===(n=null===(i=null==e?void 0:e.accounts)||void 0===i?void 0:i[0].capabilities)||void 0===n?void 0:n.spendPermissions;h&&"permissions"in h&&N.spendPermissions.set(null==h?void 0:h.permissions),null===(s=this.callback)||void 0===s||s.call(this,"accountsChanged",l);break}case"wallet_addSubAccount":{tk(a.value);let e=a.value;N.subAccounts.set(e);let t=N.subAccountsConfig.get();this.accounts=(null==t?void 0:t.enableAutoSubAccounts)?ig(this.accounts,e.address):im(this.accounts,e.address),null===(o=this.callback)||void 0===o||o.call(this,"accountsChanged",this.accounts)}}return a.value}async cleanup(){var e,t;let r=N.config.get().metadata;await this.keyManager.clear(),N.account.clear(),N.subAccounts.clear(),N.spendPermissions.clear(),N.chains.clear(),this.accounts=[],this.chain={id:null!==(t=null===(e=null==r?void 0:r.appChainIds)||void 0===e?void 0:e[0])&&void 0!==t?t:1}}async handleSwitchChainRequest(e){il(e.params);let t=e8(e.params[0].chainId);if(this.updateChain(t))return null;let r=await this.sendRequestToPopup(e);return null===r&&this.updateChain(t),r}async handleGetCapabilitiesRequest(e){!function(e){if(!e||!Array.isArray(e)||1!==e.length&&2!==e.length||"string"!=typeof e[0]||!(0,tx.U)(e[0]))throw K.rpc.invalidParams();if(2===e.length){if(!Array.isArray(e[1]))throw K.rpc.invalidParams();for(let t of e[1])if("string"!=typeof t||!t.startsWith("0x"))throw K.rpc.invalidParams()}}(e.params);let t=e.params[0],r=e.params[1];if(!this.accounts.some(e=>(0,tr.E)(e,t)))throw K.provider.unauthorized("no active account found when getting capabilities");let i=N.getState().account.capabilities;if(!i)return{};if(!r||0===r.length)return i;let n=new Set(r.map(e=>(0,tt.ly)(e)));return Object.fromEntries(Object.entries(i).filter(([e])=>{try{let t=(0,tt.ly)(e);return n.has(t)}catch(e){return!1}}))}async sendEncryptedRequest(e){let t=await this.keyManager.getSharedSecret();if(!t)throw K.provider.unauthorized("No shared secret found when encrypting request");let r=await tD({action:e,chainId:this.chain.id},t),i=te.get(e),n=await this.createRequestMessage({encrypted:r},i);return this.communicator.postRequestAndWaitForResponse(n)}async createRequestMessage(e,t){let r=await tM("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),correlationId:t,sender:r,content:e,timestamp:new Date}}async decryptResponseMessage(e){var t,r,i;let n=e.content;if("failure"in n)throw n.failure;let s=await this.keyManager.getSharedSecret();if(!s)throw K.provider.unauthorized("Invalid session: no shared secret found when decrypting response");let o=await tB(n.encrypted,s),a=null===(t=o.data)||void 0===t?void 0:t.chains;if(a){let e=null===(r=o.data)||void 0===r?void 0:r.nativeCurrencies,t=Object.entries(a).map(([t,r])=>{let i=null==e?void 0:e[Number(t)];return Object.assign({id:Number(t),rpcUrl:r},i?{nativeCurrency:i}:{})});N.chains.set(t),this.updateChain(this.chain.id,t),tS(t)}let l=null===(i=o.data)||void 0===i?void 0:i.capabilities;return l&&N.account.set({capabilities:l}),o}updateChain(e,t){var r;let i=N.getState(),n=null!=t?t:i.chains,s=null==n?void 0:n.find(t=>t.id===e);return!!s&&(s!==this.chain&&(this.chain=s,N.account.set({chain:s}),null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",eX(s.id))),!0)}async addSubAccount(e){var t,r,i,n;let s=N.getState().subAccount,o=N.subAccountsConfig.get();if(null==s?void 0:s.address)return this.accounts=(null==o?void 0:o.enableAutoSubAccounts)?ig(this.accounts,s.address):im(this.accounts,s.address),null===(t=this.callback)||void 0===t||t.call(this,"accountsChanged",this.accounts),s;if(await (null===(i=(r=this.communicator).waitForPopupLoaded)||void 0===i?void 0:i.call(r)),Array.isArray(e.params)&&e.params.length>0&&e.params[0].account&&"create"===e.params[0].account.type){let t;if(e.params[0].account.keys&&e.params[0].account.keys.length>0)t=e.params[0].account.keys;else{let e=null!==(n=N.subAccountsConfig.get())&&void 0!==n?n:{},{account:r}=e.toOwnerAccount?await e.toOwnerAccount():await r8();if(!r)throw K.provider.unauthorized("could not get subaccount owner account when adding sub account");t=[{type:r.address?"address":"webauthn-p256",publicKey:r.address||r.publicKey}]}e.params[0].account.keys=t}let a=await this.sendRequestToPopup(e);return tk(a),a}shouldRequestUseSubAccountSigner(e){let t=ia(e),r=N.subAccounts.get();return!!t&&t.toLowerCase()===(null==r?void 0:r.address.toLowerCase())}async sendRequestToSubAccountSigner(e){var t;let r=N.subAccounts.get(),i=N.subAccountsConfig.get(),n=N.config.get();ee(null==r?void 0:r.address,K.provider.unauthorized("no active sub account when sending request to sub account signer"));let s=(null==i?void 0:i.toOwnerAccount)?await i.toOwnerAccount():await r8();ee(null==s?void 0:s.account,K.provider.unauthorized("no active sub account owner when sending request to sub account signer")),void 0===ia(e)&&(e=function(e,t){if(!Array.isArray(e.params))throw K.rpc.invalidParams();let r=[...e.params];switch(e.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":r[0].from=t;break;case"eth_signTypedData_v4":r[0]=t;break;case"personal_sign":r[1]=t}return Object.assign(Object.assign({},e),{params:r})}(e,r.address));let o=tI(this.chain.id);ee(o,K.rpc.internal(`client not found for chainId ${this.chain.id} when sending request to sub account signer`));let a=this.accounts.find(e=>e.toLowerCase()!==r.address.toLowerCase());ee(a,K.provider.unauthorized("no global account found when sending request to sub account signer"));let l=function({attribution:e,dappOrigin:t}){if(e){if("auto"in e&&e.auto&&t)return(0,ir.tP)((0,ii.w)((0,m.NC)(t)),0,16);if("dataSuffix"in e)return e.dataSuffix}}({attribution:null===(t=n.preference)||void 0===t?void 0:t.attribution,dappOrigin:window.location.origin}),c="local"===s.account.type?s.account.address:s.account.publicKey,u=await iq({address:r.address,factory:r.factory,factoryData:r.factoryData,publicKey:c,client:o});if(-1===u){let t=te.get(e);td({method:e.method,correlationId:t});try{u=await iz({ownerAccount:s.account,globalAccountRequest:this.sendRequestToPopup.bind(this)}),tp({method:e.method,correlationId:t})}catch(r){return tf({method:e.method,correlationId:t,errorMessage:tv(r)}),K.provider.unauthorized("failed to add sub account owner when sending request to sub account signer")}}let{request:h}=await iD({address:r.address,owner:s.account,client:o,factory:r.factory,factoryData:r.factoryData,parentAddress:a,attribution:l?{suffix:l}:void 0,ownerIndex:u});try{return await h(e)}catch(n){let t;if(Q(n))t=JSON.parse(n.details);else if(X(n))t=n;else throw n;if(!(X(t)&&t.data)||!t.data)throw n;let i=te.get(e);tg({method:e.method,correlationId:i});try{let n=await iK({errorData:t.data,globalAccountAddress:a,subAccountAddress:r.address,client:o,request:e,subAccountRequest:h,globalAccountRequest:this.request.bind(this)});return tm({method:e.method,correlationId:i}),n}catch(t){throw console.error(t),ty({method:e.method,correlationId:i,errorMessage:tv(t)}),n}}}}let iG=({method:e,correlationId:t})=>{ec("walletlink_signer.handshake.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t},d.high)},iZ=({method:e,correlationId:t,errorMessage:r})=>{ec("walletlink_signer.handshake.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r},d.high)},iJ=({method:e,correlationId:t})=>{ec("walletlink_signer.handshake.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t},d.high)},iY=({method:e,correlationId:t})=>{ec("walletlink_signer.request.started",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t},d.high)},iX=({method:e,correlationId:t,errorMessage:r})=>{ec("walletlink_signer.request.error",{action:h.error,componentType:u.unknown,method:e,correlationId:t,errorMessage:r},d.high)},iQ=({method:e,correlationId:t})=>{ec("walletlink_signer.request.completed",{action:h.unknown,componentType:u.unknown,method:e,correlationId:t},d.high)},i0=()=>{ec("walletlink_signer.walletlink_connection.connection_failed",{action:h.measurement,componentType:u.unknown},d.high)},i1=()=>{ec("walletlink_signer.walletlink_connection.fetch_unseen_events_failed",{action:h.measurement,componentType:u.unknown},d.high)};var i2=r(49805);let i3="Addresses";class i5{constructor(e){this.secret=e}async encrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");let r=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",eG(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),n=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,n.encode(e)),o=s.slice(s.byteLength-16),a=s.slice(0,s.byteLength-16),l=new Uint8Array(o),c=new Uint8Array(a);return eV(new Uint8Array([...r,...l,...c]))}async decrypt(e){let t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise((r,i)=>{(async()=>{let n=await crypto.subtle.importKey("raw",eG(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=eG(e),o=s.slice(0,12),a=s.slice(12,28),l=s.slice(28),c=new Uint8Array([...l,...a]),u={name:"AES-GCM",iv:new Uint8Array(o)};try{let e=await window.crypto.subtle.decrypt(u,n,c),t=new TextDecoder;r(t.decode(e))}catch(e){i(e)}})()})}}class i4{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;let i=`${t}:${r}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(e=>console.error("Unable to mark events as seen:",e))}async fetchUnseenEvents(){var e;let t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){let{events:r,error:i}=await t.json();if(i)throw Error(`Check unseen events failed: ${i}`);let n=null!==(e=null==r?void 0:r.filter(e=>"Web3Response"===e.event).map(e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data})))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(n),n}throw Error(`Check unseen events failed: ${t.status}`)}}(c=p||(p={}))[c.DISCONNECTED=0]="DISCONNECTED",c[c.CONNECTING=1]="CONNECTING",c[c.CONNECTED=2]="CONNECTED";class i6{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.isDisconnecting=!1,this.url=e.replace(/^http/,"ws"),this.instanceId=i6.instanceCounter++,i6.activeInstances.add(this.instanceId)}async connect(){if(this.webSocket)throw Error("webSocket object is not null");if(this.isDisconnecting)throw Error("WebSocket is disconnecting, cannot reconnect on same instance");return new Promise((e,t)=>{var r;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(e){t(e);return}null===(r=this.connectionStateListener)||void 0===r||r.call(this,p.CONNECTING),i.onclose=e=>{var r;this.clearWebSocket(),i.readyState!==WebSocket.OPEN&&t(Error(`websocket error ${e.code}: ${e.reason}`)),null===(r=this.connectionStateListener)||void 0===r||r.call(this,p.DISCONNECTED)},i.onopen=t=>{var r;e(),null===(r=this.connectionStateListener)||void 0===r||r.call(this,p.CONNECTED),i6.pendingData.length>0&&([...i6.pendingData].forEach(e=>this.sendData(e)),i6.pendingData=[])},i.onmessage=e=>{var t,r;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{let t=JSON.parse(e.data);null===(r=this.incomingDataListener)||void 0===r||r.call(this,t)}catch(e){}}})}disconnect(){var e;let{webSocket:t}=this;if(t){this.isDisconnecting=!0,this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,p.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){let{webSocket:t}=this;if(!t){i6.pendingData.push(e),this.isDisconnecting||this.connect();return}if(t.readyState!==WebSocket.OPEN){i6.pendingData.push(e);return}t.send(e)}clearWebSocket(){let{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}cleanup(){i6.activeInstances.delete(this.instanceId)}}i6.instanceCounter=0,i6.activeInstances=new Set,i6.pendingData=[];class i8{constructor({session:e,linkAPIUrl:t,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=eH(1),this.reconnectAttempts=0,this.isReconnecting=!1,this._connected=!1,this._linked=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{e&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]).forEach((t,r)=>{let i=e[r];void 0!==i&&t(i)})},this.handleDestroyed=e=>{var t;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=async e=>{var t;try{let r=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(r)}catch(e){}},this.handleMetadataUpdated=async(e,t)=>{var r;try{let i=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.metadataUpdated(e,i)}catch(e){}},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated("walletUsername",e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated("AppVersion",e)},this.handleChainUpdated=async(e,t)=>{var r;try{let i=await this.cipher.decrypt(e),n=await this.cipher.decrypt(t);null===(r=this.listener)||void 0===r||r.chainUpdated(i,n)}catch(e){}},this.session=e,this.cipher=new i5(e.secret),this.listener=r,this.linkAPIUrl=t,this.WebSocketClass=WebSocket;let i=this.createWebSocket();this.ws=i,this.http=new i4(t,e.id,e.key),this.setupVisibilityChangeHandler()}createWebSocket(){let e=new i6(`${this.linkAPIUrl}/rpc`,this.WebSocketClass);return this.activeWsInstance=e,e.setConnectionStateListener(async t=>{if(e!==this.activeWsInstance)return;let r=!1;switch(t){case p.DISCONNECTED:this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.lastHeartbeatResponse=0,r=!1,this.destroyed||(async()=>{if(this.isReconnecting)return;this.isReconnecting=!0;let t=0===this.reconnectAttempts?0:3e3;await new Promise(e=>setTimeout(e,t)),this.destroyed||e!==this.activeWsInstance?this.isReconnecting=!1:(this.reconnectAttempts++,"cleanup"in this.ws&&"function"==typeof this.ws.cleanup&&this.ws.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{i0()}).finally(()=>{this.isReconnecting=!1}))})();break;case p.CONNECTED:this.reconnectAttempts=0;try{r=await this.handleConnected(),this.fetchUnseenEventsAPI().catch(()=>{})}catch(e){break}this.connected=r,this.updateLastHeartbeat(),this.heartbeatIntervalId&&clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setInterval(()=>{this.heartbeat()},1e4),setTimeout(()=>{this.heartbeat()},100);case p.CONNECTING:}t!==p.CONNECTED&&(this.connected=r)}),e.setIncomingDataListener(e=>{var t;switch(e.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let t="IsLinkedOK"===e.type?e.linked:void 0;this.linked=t||e.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(e.metadata);break;case"Event":this.handleIncomingEvent(e)}void 0!==e.id&&(null===(t=this.requestResolutions.get(e.id))||void 0===t||t(e))}),e}setupVisibilityChangeHandler(){this.visibilityChangeHandler=()=>{document.hidden||this.destroyed||(this.connected?this.heartbeat():this.reconnectWithFreshWebSocket())},this.focusHandler=()=>{this.destroyed||this.connected||this.reconnectWithFreshWebSocket()},document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.focusHandler),window.addEventListener("pageshow",e=>{e.persisted&&this.focusHandler&&this.focusHandler()})}reconnectWithFreshWebSocket(){if(this.destroyed)return;let e=this.ws;this.activeWsInstance=void 0,e.disconnect(),"cleanup"in e&&"function"==typeof e.cleanup&&e.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{i0()})}connect(){if(this.destroyed)throw Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:eH(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.activeWsInstance=void 0,this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.focusHandler&&window.removeEventListener("focus",this.focusHandler),this.ws.disconnect(),"cleanup"in this.ws&&"function"==typeof this.ws.cleanup&&this.ws.cleanup(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(r=this.listener)||void 0===r||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}async handleIncomingEvent(e){var t;if("Event"===e.type&&"Web3Response"===e.event)try{let r=await this.cipher.decrypt(e.data),i=JSON.parse(r);if("WEB3_RESPONSE"!==i.type)return;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(i.id,i.response)}catch(e){}}async checkUnseenEvents(){await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){try{(await this.http.fetchUnseenEvents()).forEach(e=>{this.handleIncomingEvent(e)})}catch(e){i1()}}async publishEvent(e,t,r=!1){let i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),n={type:"PublishEvent",id:eH(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:r};return this.setOnceLinked(async()=>{let e=await this.makeRequest(n);if("Fail"===e.type)throw Error(e.error||"failed to publish event");return e.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4){this.ws.disconnect();return}if(this.connected)try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t={timeout:6e4}){let r;let i=e.id;return this.sendData(e),Promise.race([new Promise((e,n)=>{r=window.setTimeout(()=>{n(Error(`request ${i} timed out`))},t.timeout)}),new Promise(e=>{this.requestResolutions.set(i,t=>{clearTimeout(r),e(t),this.requestResolutions.delete(i)})})])}async handleConnected(){return"Fail"!==(await this.makeRequest({type:"HostSession",id:eH(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type&&(this.sendData({type:"IsLinked",id:eH(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:eH(this.nextReqId++),sessionId:this.session.id}),!0)}}class i9{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;let e=this._nextRequestId,t=e1(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}function i7(e,...t){if(!(e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function ne(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let nt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),nr=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];let ni=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nn(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),i7(e),e}class ns{clone(){return this._cloneInto()}}let no=(e,t,r)=>e&t^~e&r,na=(e,t,r)=>e&t^e&r^t&r;class nl extends ns{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nt(this.buffer)}update(e){ne(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=nn(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=nt(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ne(this),function(e,t){i7(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=nt(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let nc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nh=new Uint32Array(64);class nd extends nl{constructor(){super(64,32,8,!1),this.A=0|nu[0],this.B=0|nu[1],this.C=0|nu[2],this.D=0|nu[3],this.E=0|nu[4],this.F=0|nu[5],this.G=0|nu[6],this.H=0|nu[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)nh[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=nh[e-15],r=nh[e-2],i=nr(t,7)^nr(t,18)^t>>>3,n=nr(r,17)^nr(r,19)^r>>>10;nh[e]=n+nh[e-7]+i+nh[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(nr(o,6)^nr(o,11)^nr(o,25))+no(o,a,l)+nc[e]+nh[e]|0,u=(nr(r,2)^nr(r,13)^nr(r,22))+na(r,i,n)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){nh.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let np=function(e){let t=t=>e().update(nn(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new nd),nf="session:id",ng="session:secret",nm="session:linked";class ny{constructor(e,t,r,i=!1){this.storage=e,this.id=t,this.secret=r,this.key=function(e){i7(e);let t="";for(let r=0;r<e.length;r++)t+=ni[e[r]];return t}(np(`${t}, ${r} WalletLink`)),this._linked=!!i}static create(e){return new ny(e,eK(16),eK(32)).save()}static load(e){let t=e.getItem(nf),r=e.getItem(nm),i=e.getItem(ng);return t&&i?new ny(e,t,i,"1"===r):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(nf,this.id),this.storage.setItem(ng,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(nm,this._linked?"1":"0")}}class nv{constructor(){this.root=null,this.darkMode=eb()}attach(){let e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),eg()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,ey.render)(null,this.root),e&&(0,ey.render)((0,ey.h)(nb,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}let nb=({title:e,buttonText:t,darkMode:r,onButtonClick:i,onDismiss:n})=>(0,ey.h)(eE,{darkMode:r},(0,ey.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,ey.h)("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),(0,ey.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:n}),(0,ey.h)("div",{class:em("-cbwsdk-redirect-dialog-box",r?"dark":"light")},(0,ey.h)("p",null,e),(0,ey.h)("button",{onClick:i},t))));class nw{constructor(){this.attached=!1,this.redirectDialog=new nv}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){let t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",function(){try{if(function(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top)return window.top.location;return window.location}catch(e){return window.location}}().href),e&&t.searchParams.append("wl_url",e);let r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectToCoinbaseWallet(e),setTimeout(()=>{this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}})},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class nE{constructor(e){var t;this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(t=null==window?void 0:window.navigator)||void 0===t?void 0:t.userAgent),this.linkedUpdated=e=>{this.isLinked=e;let t=this.storage.getItem(i3);if(e&&(this._session.linked=e),this.isUnlinkedErrorState=!1,t){let r=t.split(" "),i="true"===this.storage.getItem("IsStandaloneSigning");""===r[0]||e||!this._session.linked||i||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{(this.chainCallbackParams.chainId!==e||this.chainCallbackParams.jsonRpcUrl!==t)&&(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(t,Number.parseInt(e,10)))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),nE.accountRequestCallbackIds.size>0&&(Array.from(nE.accountRequestCallbackIds.values()).forEach(t=>{this.invokeCallback(t,{method:"requestEthereumAccounts",result:[e]})}),nE.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;let{session:r,ui:i,connection:n}=this.subscribe();this._session=r,this.connection=n,this.relayEventManager=new i9,this.ui=i,this.ui.attach()}subscribe(){let e=ny.load(this.storage)||ny.create(this.storage),{linkAPIUrl:t}=this,r=new i8({session:e,linkAPIUrl:t,listener:this}),i=this.isMobileWeb?new nw:new eS;return r.connect(),{session:e,ui:i,connection:r}}resetAndReload(){this.connection.destroy().then(()=>{let e=ny.load(this.storage);(null==e?void 0:e.id)===this._session.id&&eN.clearAll(),document.location.reload()}).catch(e=>{})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:eY(e.weiValue),data:eZ(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?eY(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?eY(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?eY(e.gasPriceInWei):null,gasLimit:e.gasLimit?eY(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:eY(e.weiValue),data:eZ(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?eY(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?eY(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?eY(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?eY(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:eZ(e,!0),chainId:t}})}getWalletLinkSession(){return this._session}sendRequest(e){let t=null,r=eK(8),i=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,i),null==t||t()};return new Promise((n,s)=>{t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,e=>{if(null==t||t(),eO(e))return s(Error(e.errorMessage));n(e)}),this.publishWeb3RequestEvent(r,e)})}publishWeb3RequestEvent(e,t){let r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then(e=>{}).catch(e=>{this.handleWeb3ResponseMessage(r.id,{method:t.method,errorMessage:e.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof nw)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(e){this.publishEvent("Web3RequestCanceled",{type:"WEB3_REQUEST_CANCELED",id:e},!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e,t){if("requestEthereumAccounts"===t.method){nE.accountRequestCallbackIds.forEach(e=>this.invokeCallback(e,t)),nE.accountRequestCallbackIds.clear();return}this.invokeCallback(e,t)}handleErrorResponse(e,t,r){var i;let n=null!==(i=null==r?void 0:r.message)&&void 0!==i?i:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:t,errorMessage:n})}invokeCallback(e,t){let r=this.relayEventManager.callbacks.get(e);r&&(r(t),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){let{appName:e,appLogoUrl:t}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:t}},i=eK(8);return new Promise((e,t)=>{this.relayEventManager.callbacks.set(i,r=>{if(eO(r))return t(Error(r.errorMessage));e(r)}),nE.accountRequestCallbackIds.add(i),this.publishWeb3RequestEvent(i,r)})}watchAsset(e,t,r,i,n,s){let o={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:i,image:n},chainId:s}},a=null,l=eK(8);return a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,e),null==a||a()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(l,r=>{if(null==a||a(),eO(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(l,o)})}addEthereumChain(e,t,r,i,n,s){let o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:i,chainName:n,iconUrls:r,nativeCurrency:s}},a=null,l=eK(8);return a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,e),null==a||a()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(l,r=>{if(null==a||a(),eO(r))return t(Error(r.errorMessage));e(r)}),this.publishWeb3RequestEvent(l,o)})}switchEthereumChain(e,t){let r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},i=null,n=eK(8);return i=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:e=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,r.method,e),null==i||i()},onResetConnection:this.resetAndReload}),new Promise((e,t)=>{this.relayEventManager.callbacks.set(n,r=>(null==i||i(),eO(r)&&r.errorCode)?t(K.provider.custom({code:r.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):eO(r)?t(Error(r.errorMessage)):void e(r)),this.publishWeb3RequestEvent(n,r)})}}nE.accountRequestCallbackIds=new Set;var n_=r(67133).Buffer;let nC="DefaultChainId",nS="DefaultJsonRpcUrl";class nI{constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new eN("walletlink",el),this.callback=e.callback||null;let t=this._storage.getItem(i3);if(t){let e=t.split(" ");""!==e[0]&&(this._addresses=e.map(e=>e4(e)))}this.initializeRelay()}getSession(){let{id:e,secret:t}=this.initializeRelay().getWalletLinkSession();return{id:e,secret:t}}async handshake(e){let t="eth_requestAccounts",r=te.get(e);iG({method:t,correlationId:r});try{await this._eth_requestAccounts(),iJ({method:t,correlationId:r})}catch(e){throw iZ({method:t,correlationId:r,errorMessage:tv(e)}),e}}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(nS))&&void 0!==e?e:void 0}set jsonRpcUrl(e){this._storage.setItem(nS,e)}updateProviderInfo(e,t){var r;this.jsonRpcUrl=e;let i=this.getChainId();this._storage.setItem(nC,t.toString(10)),e8(t)!==i&&(null===(r=this.callback)||void 0===r||r.call(this,"chainChanged",eX(t)))}async watchAsset(e){let t=Array.isArray(e)?e[0]:e;if(!t.type)throw K.rpc.invalidParams("Type is required");if((null==t?void 0:t.type)!=="ERC20")throw K.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw K.rpc.invalidParams("Options are required");if(!(null==t?void 0:t.options.address))throw K.rpc.invalidParams("Address is required");let r=this.getChainId(),{address:i,symbol:n,image:s,decimals:o}=t.options,a=this.initializeRelay(),l=await a.watchAsset(t.type,i,n,o,s,null==r?void 0:r.toString());return!eO(l)&&!!l.result}async addEthereumChain(e){var t,r;let i=e[0];if((null===(t=i.rpcUrls)||void 0===t?void 0:t.length)===0)throw K.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!i.chainName||""===i.chainName.trim())throw K.rpc.invalidParams("chainName is a required field");if(!i.nativeCurrency)throw K.rpc.invalidParams("nativeCurrency is a required field");let n=Number.parseInt(i.chainId,16);if(n===this.getChainId())return!1;let s=this.initializeRelay(),{rpcUrls:o=[],blockExplorerUrls:a=[],chainName:l,iconUrls:c=[],nativeCurrency:u}=i,h=await s.addEthereumChain(n.toString(),o,c,a,l,u);if(eO(h))return!1;if((null===(r=h.result)||void 0===r?void 0:r.isApproved)===!0)return this.updateProviderInfo(o[0],n),null;throw K.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(e){let t=Number.parseInt(e[0].chainId,16),r=this.initializeRelay(),i=await r.switchEthereumChain(t.toString(10),this.selectedAddress||void 0);if(eO(i))throw i;let n=i.result;return n.isApproved&&n.rpcUrl.length>0&&this.updateProviderInfo(n.rpcUrl,t),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,t){var r;if(!Array.isArray(e))throw Error("addresses is not an array");let i=e.map(e=>e4(e));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",i),this._storage.setItem(i3,i.join(" ")))}async request(e){let t=te.get(e);iY({method:e.method,correlationId:t});try{let r=await this._request(e);return iQ({method:e.method,correlationId:t}),r}catch(r){throw iX({method:e.method,correlationId:t,errorMessage:tv(r)}),r}}async _request(e){let t=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return eX(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(t);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(t);case"eth_sendTransaction":return this._eth_sendTransaction(t);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(t);case"wallet_switchEthereumChain":return this.switchEthereumChain(t);case"wallet_watchAsset":return this.watchAsset(t);default:if(!this.jsonRpcUrl)throw K.rpc.internal("No RPC URL set for chain");return eo(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){let t=e4(e);if(!this._addresses.map(e=>e4(e)).includes(t))throw Error("Unknown Ethereum address")}_prepareTransactionParams(e){let t=e.from?e4(e.from):this.selectedAddress;if(!t)throw Error("Ethereum address is unavailable");this._ensureKnownAddress(t);let r=e.to?e4(e.to):null,i=null!=e.value?e9(e.value):BigInt(0),n=e.data?e6(e.data):n_.alloc(0),s=null!=e.nonce?e8(e.nonce):null,o=null!=e.gasPrice?e9(e.gasPrice):null,a=null!=e.maxFeePerGas?e9(e.maxFeePerGas):null;return{fromAddress:t,toAddress:r,weiValue:i,data:n,nonce:s,gasPriceInWei:o,maxFeePerGas:a,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?e9(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?e9(e.gas):null,chainId:e.chainId?e8(e.chainId):this.getChainId()}}async ecRecover(e){let{method:t,params:r}=e;if(!Array.isArray(r))throw K.rpc.invalidParams();let i=this.initializeRelay(),n=await i.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:eJ(r[0]),signature:eJ(r[1]),addPrefix:"personal_ecRecover"===t}});if(eO(n))throw n;return n.result}getChainId(){var e;return Number.parseInt(null!==(e=this._storage.getItem(nC))&&void 0!==e?e:"1",10)}async _eth_requestAccounts(){var e,t;if(this._addresses.length>0)return null===(e=this.callback)||void 0===e||e.call(this,"connect",{chainId:eX(this.getChainId())}),this._addresses;let r=this.initializeRelay(),i=await r.requestEthereumAccounts();if(eO(i))throw i;if(!i.result)throw Error("accounts received is empty");return this._setAddresses(i.result),null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:eX(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw K.rpc.invalidParams();let t=e[1],r=e[0];this._ensureKnownAddress(t);let i=this.initializeRelay(),n=await i.sendRequest({method:"signEthereumMessage",params:{address:e4(t),message:eJ(r),addPrefix:!0,typedDataJson:null}});if(eO(n))throw n;return n.result}async _eth_signTransaction(e){let t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),i=await r.signEthereumTransaction(t);if(eO(i))throw i;return i.result}async _eth_sendRawTransaction(e){let t=e6(e[0]),r=this.initializeRelay(),i=await r.submitEthereumTransaction(t,this.getChainId());if(eO(i))throw i;return i.result}async _eth_sendTransaction(e){let t=this._prepareTransactionParams(e[0]||{}),r=this.initializeRelay(),i=await r.signAndSubmitEthereumTransaction(t);if(eO(i))throw i;return i.result}async signTypedData(e){let{method:t,params:r}=e;if(!Array.isArray(r))throw K.rpc.invalidParams();let i=r["eth_signTypedData_v1"===t?1:0],n=r["eth_signTypedData_v1"===t?0:1];this._ensureKnownAddress(i);let s=this.initializeRelay(),o=await s.sendRequest({method:"signEthereumMessage",params:{address:e4(i),message:eZ(({eth_signTypedData_v1:i2.hashForSignTypedDataLegacy,eth_signTypedData_v3:i2.hashForSignTypedData_v3,eth_signTypedData_v4:i2.hashForSignTypedData_v4,eth_signTypedData:i2.hashForSignTypedData_v4})[t]({data:function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw K.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}(n)}),!0),typedDataJson:JSON.stringify(n,null,2),addPrefix:!1}});if(eO(o))throw o;return o.result}initializeRelay(){return this._relay||(this._relay=new nE({linkAPIUrl:el,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}let nx="SignerType",nA=new eN("CBWSDK","SignerConfigurator");function nk(e){if(e)return e instanceof iV?"scw":"walletlink"}async function nO(e){let{communicator:t,metadata:r,handshakeRequest:i,callback:n}=e;nP(t,r,n,i).catch(()=>{});let s={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},e.preference),{handshakeRequest:i})},{data:o}=await t.postRequestAndWaitForResponse(s);return o}async function nP(e,t,r,i){await e.onMessage(({event:e})=>"WalletLinkSessionRequest"===e);let n=new nI({metadata:t,callback:r});e.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}}),await n.handshake(i),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}var nR=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};class nN extends eR{constructor(e){var{metadata:t}=e,r=e.preference,{keysUrl:i}=r,n=nR(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=t,this.preference=n,this.communicator=new ek({url:i,metadata:t,preference:n});let s=nA.getItem(nx);s&&(this.signer=this.initSigner(s),eT({signerType:s}))}async request(e){let t=crypto.randomUUID();te.set(e,t),eM({method:e.method,correlationId:t});try{let r=await this._request(e);return eD({method:e.method,signerType:nk(this.signer),correlationId:t}),r}catch(r){throw eL({method:e.method,correlationId:t,signerType:nk(this.signer),errorMessage:r instanceof Error?r.message:""}),r}finally{te.delete(e)}}async _request(e){try{if(!function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw K.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw K.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw K.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw K.provider.unsupportedMethod()}}(e),!this.signer)switch(e.method){case"eth_requestAccounts":{let t;let r=N.subAccountsConfig.get();t=(null==r?void 0:r.enableAutoSubAccounts)?"scw":await this.requestSignerSelection(e);let i=this.initSigner(t);"scw"===t&&(null==r?void 0:r.enableAutoSubAccounts)?(await i.handshake({method:"handshake"}),await i.request(e)):await i.handshake(e),this.signer=i,nA.setItem(nx,t);break}case"wallet_connect":{let t=this.initSigner("scw");await t.handshake({method:"handshake"});let r=await t.request(e);return this.signer=t,r}case"wallet_sendCalls":case"wallet_sign":{let t=this.initSigner("scw");await t.handshake({method:"handshake"});let r=await t.request(e);return await t.cleanup(),r}case"wallet_getCallsStatus":return await eo(e,ea);case"net_version":return 1;case"eth_chainId":return eX(1);default:throw K.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(e)}catch(t){let{code:e}=t;return e===$.provider.unauthorized&&this.disconnect(),Promise.reject(function(e){let t=function(e,{shouldIncludeStack:t=!1}={}){var r,i;let n={};return e&&"object"==typeof e&&!Array.isArray(e)&&z(e,"code")&&Number.isInteger(r=e.code)&&(U[r.toString()]||(i=r)>=-32099&&i<=-32e3)?(n.code=e.code,e.message&&"string"==typeof e.message?(n.message=e.message,z(e,"data")&&(n.data=e.data)):(n.message=H(n.code),n.data={originalError:F(e)})):(n.code=$.rpc.internal,n.message=W(e,"message")?e.message:q,n.data={originalError:F(e)}),t&&(n.stack=W(e,"stack")?e.stack:void 0),n}(function(e){var t;if("string"==typeof e)return{message:e,code:$.rpc.internal};if(eO(e)){let r=e.errorMessage,i=null!==(t=e.errorCode)&&void 0!==t?t:r.match(/(denied|rejected)/i)?$.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:r,code:i,data:{method:e.method}})}return e}(e),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return r.searchParams.set("version",E),r.searchParams.set("code",t.code.toString()),r.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:r.href})}(t))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),eB(),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await (null===(e=this.signer)||void 0===e?void 0:e.cleanup()),this.signer=null,eN.clearAll(),te.clear(),this.emit("disconnect",K.provider.disconnected("User initiated disconnection"))}async requestSignerSelection(e){ej();let t=await nO({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)});return e$(t),t}initSigner(e){return function(e){let{signerType:t,metadata:r,communicator:i,callback:n}=e;switch(t){case"scw":return new iV({metadata:r,callback:n,communicator:i});case"walletlink":return new nI({metadata:r,callback:n})}}({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}let nT={options:"all"};function nM(e){var t,r,i,n;let s={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(nT,null!==(t=e.preference)&&void 0!==t?t:{}),paymasterUrls:e.paymasterUrls};(null===(r=e.subAccounts)||void 0===r?void 0:r.toOwnerAccount)&&es(e.subAccounts.toOwnerAccount),N.subAccountsConfig.set({toOwnerAccount:null===(i=e.subAccounts)||void 0===i?void 0:i.toOwnerAccount,enableAutoSubAccounts:null===(n=e.subAccounts)||void 0===n?void 0:n.enableAutoSubAccounts}),N.config.set(s),N.persist.rehydrate(),ei(),!1!==s.preference.telemetry&&T(),function(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw Error(`Invalid options: ${e.options}`);if(e.attribution&&void 0!==e.attribution.auto&&void 0!==e.attribution.dataSuffix)throw Error("Attribution cannot contain both auto and dataSuffix properties");if(e.telemetry&&"boolean"!=typeof e.telemetry)throw Error("Telemetry must be a boolean")}}(s.preference);let o=null,a={getProvider:()=>(o||(o=function(e){var t;let r={metadata:e.metadata,preference:e.preference};return null!==(t=function({metadata:e,preference:t}){var r,i;let{appName:n,appLogoUrl:s,appChainIds:o}=e;if("smartWalletOnly"!==t.options){let e=globalThis.coinbaseWalletExtension;if(e)return null===(r=e.setAppInfo)||void 0===r||r.call(e,n,s,o,t),e}let a=function(){var e,t;try{let r=globalThis;return null!==(e=r.ethereum)&&void 0!==e?e:null===(t=r.top)||void 0===t?void 0:t.ethereum}catch(e){return}}();if(null==a?void 0:a.isCoinbaseBrowser)return null===(i=a.setAppInfo)||void 0===i||i.call(a,n,s,o,t),a}(r))&&void 0!==t?t:new nN(r)}(s)),o.sdk=a,o),subAccount:{async create(e){var t,r;return ee(null===(t=N.getState().subAccount)||void 0===t?void 0:t.address,Error("subaccount already exists")),await (null===(r=a.getProvider())||void 0===r?void 0:r.request({method:"wallet_addSubAccount",params:[{version:"1",account:e}]}))},async get(){var e,t;let r=N.subAccounts.get();if(null==r?void 0:r.address)return r;let i=null===(t=(await (null===(e=a.getProvider())||void 0===e?void 0:e.request({method:"wallet_connect",params:[{version:"1",capabilities:{}}]}))).accounts[0].capabilities)||void 0===t?void 0:t.subAccounts;return Array.isArray(i)?i[0]:null},async addOwner({address:e,publicKey:t,chainId:r}){var i,n;let s=N.subAccounts.get(),o=N.account.get();ee(o,Error("account does not exist")),ee(null==s?void 0:s.address,Error("subaccount does not exist"));let l=[];if(t){let[e,r]=(0,f.r)([{type:"bytes32"},{type:"bytes32"}],t);l.push({to:s.address,data:(0,g.R)({abi:B,functionName:"addOwnerPublicKey",args:[e,r]}),value:(0,m.NC)(0)})}return e&&l.push({to:s.address,data:(0,g.R)({abi:B,functionName:"addOwnerAddress",args:[e]}),value:(0,m.NC)(0)}),await (null===(i=a.getProvider())||void 0===i?void 0:i.request({method:"wallet_sendCalls",params:[{calls:l,chainId:(0,m.NC)(r),from:null===(n=o.accounts)||void 0===n?void 0:n[0],version:"1"}]}))},setToOwnerAccount(e){es(e),N.subAccountsConfig.set({toOwnerAccount:e})}}};return a}},90813:function(e,t,r){"use strict";r.d(t,{fl:function(){return x},iv:function(){return c},Ts:function(){return C},Qu:function(){return S},$m:function(){return l}});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i=globalThis,n=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(n&&void 0===e){let r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}let l=e=>new a("string"==typeof e?e:e+"",void 0,s),c=(e,...t)=>new a(1===e.length?e[0]:t.reduce((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1],e[0]),e,s),u=(e,t)=>{if(n)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let r of t){let t=document.createElement("style"),n=i.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}},h=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(let r of e.cssRules)t+=r.cssText;return l(t)})(e):e,{is:d,defineProperty:p,getOwnPropertyDescriptor:f,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,v=globalThis,b=v.trustedTypes,w=b?b.emptyScript:"",E=v.reactiveElementPolyfillSupport,_=(e,t)=>e,C={toAttribute(e,t){switch(t){case Boolean:e=e?w:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},S=(e,t)=>!d(e,t),I={attribute:!0,type:String,converter:C,reflect:!1,useDefault:!1,hasChanged:S};Symbol.metadata??=Symbol("metadata"),v.litPropertyMetadata??=new WeakMap;class x extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=I){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let r=Symbol(),i=this.getPropertyDescriptor(e,r,t);void 0!==i&&p(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){let{get:i,set:n}=f(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:i,set(t){let s=i?.call(this);n?.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??I}static _$Ei(){if(this.hasOwnProperty(_("elementProperties")))return;let e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_("properties"))){let e=this.properties;for(let t of[...g(e),...m(e)])this.createProperty(t,e[t])}let e=this[Symbol.metadata];if(null!==e){let t=litPropertyMetadata.get(e);if(void 0!==t)for(let[e,r]of t)this.elementProperties.set(e,r)}for(let[e,t]of(this._$Eh=new Map,this.elementProperties)){let r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e))for(let r of new Set(e.flat(1/0).reverse()))t.unshift(h(r));else void 0!==e&&t.push(h(e));return t}static _$Eu(e,t){let r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map;for(let t of this.constructor.elementProperties.keys())this.hasOwnProperty(t)&&(e.set(t,this[t]),delete this[t]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return u(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){let r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(void 0!==i&&!0===r.reflect){let n=(void 0!==r.converter?.toAttribute?r.converter:C).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,t){let r=this.constructor,i=r._$Eh.get(e);if(void 0!==i&&this._$Em!==i){let e=r.getPropertyOptions(i),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:C;this._$Em=i;let s=n.fromAttribute(t,e.type);this[i]=s??this._$Ej?.get(i)??s,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){let i=this.constructor,n=this[e];if(!(((r??=i.getPropertyOptions(e)).hasChanged??S)(n,t)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:i,wrapped:n},s){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==n||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===i&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,r]of e){let{wrapped:e}=r,i=this[t];!0!==e||this._$AL.has(t)||void 0===i||this.C(t,void 0,r,i)}}let e=!1,t=this._$AL;try{(e=this.shouldUpdate(t))?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[_("elementProperties")]=new Map,x[_("finalized")]=new Map,E?.({ReactiveElement:x}),(v.reactiveElementVersions??=[]).push("2.1.1")},29350:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var i=r(62601);let n={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(void 0!==i&&void 0!==i.env?i.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"}},31698:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var i=r(29350);let n={caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter(e=>e.chainNamespace===t)||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,t){if(!t)return;let r=e.find(e=>e.caipNetworkId===t);if(r)return r.name;let[n]=t.split(":");return i.b.CHAIN_NAME_MAP?.[n]||void 0}}},99861:function(e,t,r){"use strict";r.d(t,{$U:function(){return o},Vk:function(){return n},mr:function(){return s},uJ:function(){return i}});let i={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function n(e){if(!e)throw Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}let s={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},76429:function(e,t,r){"use strict";function i(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}r.d(t,{t:function(){return i}})},97576:function(e,t,r){"use strict";r.d(t,{N:function(){return h}});var i=r(53722),n=r(15623),s=r(19876),o=r(33091),a=r(24373),l=r(25620),c=r(31283);let u=(0,i.sj)({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),h=(0,o.P)({state:u,replaceState(e){e&&Object.assign(u,(0,i.iH)(e))},subscribe:e=>l.R.subscribeChainProp("accountState",t=>{if(t)return e(t)}),subscribeKey(e,t,r){let i;return l.R.subscribeChainProp("accountState",r=>{if(r){let n=r[e];i!==n&&(i=n,t(n))}},r)},setStatus(e,t){l.R.setAccountProp("status",e,t)},getCaipAddress:e=>l.R.getAccountProp("caipAddress",e),setCaipAddress(e,t){let r=e?s.j.getPlainAddress(e):void 0;t===l.R.state.activeChain&&(l.R.state.activeCaipAddress=e),l.R.setAccountProp("caipAddress",e,t),l.R.setAccountProp("address",r,t)},setBalance(e,t,r){l.R.setAccountProp("balance",e,r),l.R.setAccountProp("balanceSymbol",t,r)},setProfileName(e,t){l.R.setAccountProp("profileName",e,t)},setProfileImage(e,t){l.R.setAccountProp("profileImage",e,t)},setUser(e,t){l.R.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){l.R.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){l.R.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){l.R.setAccountProp("currentTab",e,l.R.state.activeChain)},setTokenBalance(e,t){e&&l.R.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){l.R.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts(e,t){l.R.setAccountProp("allAccounts",e,t)},addAddressLabel(e,t,r){let i=l.R.getAccountProp("addressLabels",r)||new Map;i.set(e,t),l.R.setAccountProp("addressLabels",i,r)},removeAddressLabel(e,t){let r=l.R.getAccountProp("addressLabels",t)||new Map;r.delete(e),l.R.setAccountProp("addressLabels",r,t)},setConnectedWalletInfo(e,t){l.R.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){l.R.setAccountProp("preferredAccountTypes",{...u.preferredAccountTypes,[t]:e},t)},setPreferredAccountTypes(e){u.preferredAccountTypes=e},setSocialProvider(e,t){e&&l.R.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){l.R.setAccountProp("socialWindow",e?(0,i.iH)(e):void 0,t)},setFarcasterUrl(e,t){l.R.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){u.balanceLoading=!0;let t=l.R.state.activeCaipNetwork?.caipNetworkId,r=l.R.state.activeCaipNetwork?.chainNamespace,i=l.R.state.activeCaipAddress,o=i?s.j.getPlainAddress(i):void 0;if(u.lastRetry&&!s.j.isAllowedRetry(u.lastRetry,30*n.bq.ONE_SEC_MS))return u.balanceLoading=!1,[];try{if(o&&t&&r){let e=(await a.L.getBalance(o,t)).balances.filter(e=>"0"!==e.quantity.decimals);return h.setTokenBalance(e,r),u.lastRetry=void 0,u.balanceLoading=!1,e}}catch(t){u.lastRetry=Date.now(),e?.(t),c.SnackController.showError("Token Balance Unavailable")}finally{u.balanceLoading=!1}return[]},resetAccount(e){l.R.resetAccount(e)}})},8272:function(e,t,r){"use strict";r.d(t,{AlertController:function(){return l}});var i=r(53722),n=r(10913),s=r(33091),o=r(5969);let a=(0,i.sj)({message:"",variant:"info",open:!1}),l=(0,s.P)({state:a,subscribeKey:(e,t)=>(0,n.VW)(a,e,t),open(e,t){let{debug:r}=o.OptionsController.state,{shortMessage:i,longMessage:n}=e;r&&(a.message=i,a.variant=t,a.open=!0),n&&console.error("function"==typeof n?n():n)},close(){a.open=!1,a.message="",a.variant="info"}})},96424:function(e,t,r){"use strict";r.d(t,{ApiController:function(){return v}});var i=r(53722),n=r(10913),s=r(8112),o=r(19876),a=r(29381),l=r(5519),c=r(92943),u=r(32754),h=r(25620),d=r(95646),p=r(87163),f=r(5969);let g=o.j.getApiUrl(),m=new a.V({baseUrl:g,clientId:null}),y=(0,i.sj)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),v={state:y,subscribeKey:(e,t)=>(0,n.VW)(y,e,t),_getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:r}=f.OptionsController.state;return{projectId:e,st:t||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>f.OptionsController.state.isUniversalProvider?e.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):e,async _fetchWalletImage(e){let t=`${m.baseUrl}/getWalletImage/${e}`,r=await m.getBlob({path:t,params:v._getSdkProperties()});u.W.setWalletImage(e,URL.createObjectURL(r))},async _fetchNetworkImage(e){let t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:v._getSdkProperties()});u.W.setNetworkImage(e,URL.createObjectURL(r))},async _fetchConnectorImage(e){let t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:v._getSdkProperties()});u.W.setConnectorImage(e,URL.createObjectURL(r))},async _fetchCurrencyImage(e){let t=`${m.baseUrl}/public/getCurrencyImage/${e}`,r=await m.getBlob({path:t,params:v._getSdkProperties()});u.W.setCurrencyImage(e,URL.createObjectURL(r))},async _fetchTokenImage(e){let t=`${m.baseUrl}/public/getTokenImage/${e}`,r=await m.getBlob({path:t,params:v._getSdkProperties()});u.W.setTokenImage(e,URL.createObjectURL(r))},_filterWalletsByPlatform:e=>o.j.isMobile()?e?.filter(e=>!!e.mobile_link||e.id===l.m.COINBASE.id||"solana"===h.R.state.activeChain&&(e.id===l.m.SOLFLARE.id||e.id===l.m.PHANTOM.id)):e,fetchProjectConfig:async()=>(await m.get({path:"/appkit/v1/config",params:v._getSdkProperties()})).features,async fetchAllowedOrigins(){try{let{allowedOrigins:e}=await m.get({path:"/projects/v1/origins",params:v._getSdkProperties()});return e}catch(e){return[]}},async fetchNetworkImages(){let e=h.R.getAllRequestedCaipNetworks(),t=e?.map(({assets:e})=>e?.imageId).filter(Boolean).filter(e=>!s.f.getNetworkImageById(e));t&&await Promise.allSettled(t.map(e=>v._fetchNetworkImage(e)))},async fetchConnectorImages(){let{connectors:e}=d.ConnectorController.state,t=e.map(({imageId:e})=>e).filter(Boolean);await Promise.allSettled(t.map(e=>v._fetchConnectorImage(e)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(e=>v._fetchCurrencyImage(e)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(e=>v._fetchTokenImage(e)))},async fetchWallets(e){let t=e.exclude??[];v._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(l.m).map(e=>e.id));let r=await m.get({path:"/getWallets",params:{...v._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}});return{data:v._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){let{featuredWalletIds:e}=f.OptionsController.state;if(e?.length){let t={...v._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:r}=await v.fetchWallets(t),i=[...r].sort((t,r)=>e.indexOf(t.id)-e.indexOf(r.id)),n=i.map(e=>e.image_id).filter(Boolean);await Promise.allSettled(n.map(e=>v._fetchWalletImage(e))),y.featured=i,y.allFeatured=i}},async fetchRecommendedWallets(){try{y.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=f.OptionsController.state,i=[...t??[],...r??[]].filter(Boolean),n=h.R.getRequestedCaipNetworkIds().join(","),{data:s,count:o}=await v.fetchWallets({page:1,entries:4,include:e,exclude:i,chains:n}),a=c.M.getRecentWallets(),l=s.map(e=>e.image_id).filter(Boolean),u=a.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(e=>v._fetchWalletImage(e))),y.recommended=s,y.allRecommended=s,y.count=o??0}catch{}finally{y.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){let{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:i}=f.OptionsController.state,n=h.R.getRequestedCaipNetworkIds().join(","),s=[...y.recommended.map(({id:e})=>e),...r??[],...i??[]].filter(Boolean),{data:a,count:l}=await v.fetchWallets({page:e,entries:40,include:t,exclude:s,chains:n}),c=a.slice(0,20).map(e=>e.image_id).filter(Boolean);await Promise.allSettled(c.map(e=>v._fetchWalletImage(e))),y.wallets=o.j.uniqueBy([...y.wallets,...v._filterOutExtensions(a)],"id").filter(e=>e.chains?.some(e=>n.includes(e))),y.count=l>y.count?l:y.count,y.page=e},async initializeExcludedWallets({ids:e}){let t={page:1,entries:e.length,include:e},{data:r}=await v.fetchWallets(t);r&&r.forEach(e=>{y.excludedWallets.push({rdns:e.rdns,name:e.name})})},async searchWallet({search:e,badge:t}){let{includeWalletIds:r,excludeWalletIds:i}=f.OptionsController.state,n=h.R.getRequestedCaipNetworkIds().join(",");y.search=[];let s={page:1,entries:100,search:e?.trim(),badge_type:t,include:r,exclude:i,chains:n},{data:a}=await v.fetchWallets(s);p.X.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});let l=a.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...l.map(e=>v._fetchWalletImage(e)),o.j.wait(300)]),y.search=v._filterOutExtensions(a)},initPromise:(e,t)=>y.promises[e]||(y.promises[e]=t()),prefetch:({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:i=!0}={})=>Promise.allSettled([e&&v.initPromise("connectorImages",v.fetchConnectorImages),t&&v.initPromise("featuredWallets",v.fetchFeaturedWallets),r&&v.initPromise("recommendedWallets",v.fetchRecommendedWallets),i&&v.initPromise("networkImages",v.fetchNetworkImages)].filter(Boolean)),prefetchAnalyticsConfig(){f.OptionsController.state.features?.analytics&&v.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await m.get({path:"/getAnalyticsConfig",params:v._getSdkProperties()});f.OptionsController.setFeatures({analytics:e})}catch(e){f.OptionsController.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length){y.featured=y.allFeatured,y.recommended=y.allRecommended;return}let t=h.R.getRequestedCaipNetworkIds().join(",");y.featured=y.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),y.recommended=y.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),y.filteredWallets=y.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))},clearFilterByNamespaces(){y.filteredWallets=[]},setFilterByNamespace(e){if(!e){y.featured=y.allFeatured,y.recommended=y.allRecommended;return}let t=h.R.getRequestedCaipNetworkIds().join(",");y.featured=y.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),y.recommended=y.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),y.filteredWallets=y.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))}}},32754:function(e,t,r){"use strict";r.d(t,{W:function(){return a}});var i=r(53722),n=r(10913),s=r(33091);let o=(0,i.sj)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),a=(0,s.P)({state:o,subscribeNetworkImages:e=>(0,i.Ld)(o.networkImages,()=>e(o.networkImages)),subscribeKey:(e,t)=>(0,n.VW)(o,e,t),subscribe:e=>(0,i.Ld)(o,()=>e(o)),setWalletImage(e,t){o.walletImages[e]=t},setNetworkImage(e,t){o.networkImages[e]=t},setChainImage(e,t){o.chainImages[e]=t},setConnectorImage(e,t){o.connectorImages={...o.connectorImages,[e]:t}},setTokenImage(e,t){o.tokenImages[e]=t},setCurrencyImage(e,t){o.currencyImages[e]=t}})},24373:function(e,t,r){"use strict";r.d(t,{L:function(){return g}});var i=r(53722),n=r(15623),s=r(19876),o=r(29381),a=r(92943),l=r(97576),c=r(25620),u=r(5969),h=r(31283);let d={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},p=s.j.getBlockchainApiUrl(),f=(0,i.sj)({clientId:null,api:new o.V({baseUrl:p,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:f,async get(e){let{st:t,sv:r}=g.getSdkProperties(),i=u.OptionsController.state.projectId,n={...e.params||{},st:t,sv:r,projectId:i};return f.api.get({...e,params:n})},getSdkProperties(){let{sdkType:e,sdkVersion:t}=u.OptionsController.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{f.supportedChains.http.length||await g.getSupportedNetworks()}catch(e){return!1}return f.supportedChains.http.includes(e)},async getSupportedNetworks(){try{let e=await g.get({path:"v1/supported-chains"});return f.supportedChains=e,e}catch{return f.supportedChains}},async fetchIdentity({address:e,caipNetworkId:t}){if(!await g.isNetworkSupported(t))return{avatar:"",name:""};let r=a.M.getIdentityFromCacheForAddress(e);if(r)return r;let i=await g.get({path:`/v1/identity/${e}`,params:{sender:c.R.state.activeCaipAddress?s.j.getPlainAddress(c.R.state.activeCaipAddress):void 0}});return a.M.updateIdentityCache({address:e,identity:i,timestamp:Date.now()}),i},fetchTransactions:async({account:e,cursor:t,onramp:r,signal:i,cache:n,chainId:s})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/account/${e}/history`,params:{cursor:t,onramp:r,chainId:s},signal:i,cache:n}):{data:[],next:void 0},fetchSwapQuote:async({amount:e,userAddress:t,from:r,to:i,gasPrice:n})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:r,to:i,gasPrice:n}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},fetchTokenPrice:async({addresses:e})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:u.OptionsController.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){let{st:t,sv:r}=g.getSdkProperties();if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:i,disableEstimate:s}){if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return f.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:n.bq.CONVERT_SLIPPAGE_TOLERANCE},projectId:u.OptionsController.state.projectId,from:t,to:r,userAddress:i,disableEstimate:s}})},async generateApproveCalldata({from:e,to:t,userAddress:r}){let{st:i,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:e,to:t,st:i,sv:n}})},async getBalance(e,t,r){let{st:i,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))return h.SnackController.showError("Token Balance Unavailable"),{balances:[]};let s=`${t}:${e}`,o=a.M.getBalanceCacheForCaipAddress(s);if(o)return o;let l=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:r,st:i,sv:n}});return a.M.updateBalanceCache({caipAddress:s,balance:l,timestamp:Date.now()}),l},lookupEnsName:async e=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},reverseLookupEnsName:async({address:e})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/reverse/${e}`,params:{sender:l.N.state.address,apiVersion:"2"}}):[],getEnsNameSuggestions:async e=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:r,signature:i})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:r,signature:i},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:r,purchaseAmount:i,paymentAmount:n})=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?(await f.api.post({path:"/v1/generators/onrampurl",params:{projectId:u.OptionsController.state.projectId},body:{destinationWallets:e,defaultNetwork:r,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:i,presetFiatAmount:n}})).url:"",async getOnrampOptions(){if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await g.get({path:"/v1/onramp/options"})}catch(e){return d}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:r,network:i}){try{if(!await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId))return null;return await f.api.post({path:"/v1/onramp/quote",params:{projectId:u.OptionsController.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:r,network:i}})}catch(e){return{coinbaseFee:{amount:r,currency:t.id},networkFee:{amount:r,currency:t.id},paymentSubtotal:{amount:r,currency:t.id},paymentTotal:{amount:r,currency:t.id},purchaseAmount:{amount:r,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,r)=>await g.isNetworkSupported(c.R.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:u.OptionsController.state.projectId},body:{pci:t,signature:r}}):{success:!1},setClientId(e){f.clientId=e,f.api=new o.V({baseUrl:p,clientId:e})}}},25620:function(e,t,r){"use strict";r.d(t,{R:function(){return C}});var i=r(53722),n=r(10913),s=r(31698),o=r(29350),a=r(15623),l=r(19876),c=r(92943),u=r(33091),h=r(97576),d=r(25172),p=r(95646),f=r(87163),g=r(44415),m=r(5969),y=r(81665),v=r(75466),b=r(4860);let w={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},E={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},_=(0,i.sj)({chains:(0,n.Yr)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),C=(0,u.P)({state:_,subscribe:e=>(0,i.Ld)(_,()=>{e(_)}),subscribeKey:(e,t)=>(0,n.VW)(_,e,t),subscribeChainProp(e,t,r){let n;return(0,i.Ld)(_.chains,()=>{let i=r||_.activeChain;if(i){let r=_.chains.get(i)?.[e];n!==r&&(n=r,t(r))}})},initialize(e,t,r){let{chainId:n,namespace:s}=c.M.getActiveNetworkProps(),o=t?.find(e=>e.id.toString()===n?.toString()),a=e.find(e=>e?.namespace===s)||e?.[0],l=e.map(e=>e.namespace).filter(e=>void 0!==e),u=new Set(m.OptionsController.state.enableEmbedded?[...l]:[...t?.map(e=>e.chainNamespace)??[]]);e?.length!==0&&a||(_.noAdapters=!0),!_.noAdapters&&(_.activeChain=a?.namespace,_.activeCaipNetwork=o,C.setChainNetworkData(a?.namespace,{caipNetwork:o}),_.activeChain&&y.I.set({activeChain:a?.namespace})),u.forEach(e=>{let n=t?.filter(t=>t.chainNamespace===e);C.state.chains.set(e,{namespace:e,networkState:(0,i.sj)({...E,caipNetwork:n?.[0]}),accountState:(0,i.sj)(w),caipNetworks:n??[],...r}),C.setRequestedCaipNetworks(n??[],e)})},removeAdapter(e){if(_.activeChain===e){let t=Array.from(_.chains.entries()).find(([t])=>t!==e);if(t){let e=t[1]?.caipNetworks?.[0];e&&C.setActiveCaipNetwork(e)}}_.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:r},i){_.chains.set(e.namespace,{namespace:e.namespace,networkState:{...E,caipNetwork:i[0]},accountState:w,caipNetworks:i,connectionControllerClient:r,networkControllerClient:t}),C.setRequestedCaipNetworks(i?.filter(t=>t.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let t=_.chains.get(e.chainNamespace);if(t){let r=[...t.caipNetworks||[]];t.caipNetworks?.find(t=>t.id===e.id)||r.push(e),_.chains.set(e.chainNamespace,{...t,caipNetworks:r}),C.setRequestedCaipNetworks(r,e.chainNamespace),p.ConnectorController.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){let r=_.chains.get(e);if(r){let i=_.activeCaipNetwork?.id===t,n=[...r.caipNetworks?.filter(e=>e.id!==t)||[]];i&&r?.caipNetworks?.[0]&&C.setActiveCaipNetwork(r.caipNetworks[0]),_.chains.set(e,{...r,caipNetworks:n}),C.setRequestedCaipNetworks(n||[],e),0===n.length&&p.ConnectorController.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){let r=_.chains.get(e);r&&(r.networkState={...r.networkState||E,...t},_.chains.set(e,r))},setChainAccountData(e,t,r=!0){if(!e)throw Error("Chain is required to update chain account data");let i=_.chains.get(e);if(i){let r={...i.accountState||w,...t};_.chains.set(e,{...i,accountState:r}),(1===_.chains.size||_.activeChain===e)&&(t.caipAddress&&(_.activeCaipAddress=t.caipAddress),h.N.replaceState(r))}},setChainNetworkData(e,t){if(!e)return;let r=_.chains.get(e);if(r){let i={...r.networkState||E,...t};_.chains.set(e,{...r,networkState:i})}},setAccountProp(e,t,r,i=!0){C.setChainAccountData(r,{[e]:t},i),"status"===e&&"disconnected"===t&&r&&p.ConnectorController.removeConnectorId(r)},setActiveNamespace(e){_.activeChain=e;let t=e?_.chains.get(e):void 0,r=t?.networkState?.caipNetwork;r?.id&&e&&(_.activeCaipAddress=t?.accountState?.caipAddress,_.activeCaipNetwork=r,C.setChainNetworkData(e,{caipNetwork:r}),c.M.setActiveCaipNetworkId(r?.caipNetworkId),y.I.set({activeChain:e,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;_.activeChain!==e.chainNamespace&&C.setIsSwitchingNamespace(!0);let t=_.chains.get(e.chainNamespace);_.activeChain=e.chainNamespace,_.activeCaipNetwork=e,C.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),t?.accountState?.address?_.activeCaipAddress=`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:_.activeCaipAddress=void 0,C.setAccountProp("caipAddress",_.activeCaipAddress,e.chainNamespace),t&&h.N.replaceState(t.accountState),b.S.resetSend(),y.I.set({activeChain:_.activeChain,selectedNetworkId:_.activeCaipNetwork?.caipNetworkId}),c.M.setActiveCaipNetworkId(e.caipNetworkId),C.checkIfSupportedNetwork(e.chainNamespace)||!m.OptionsController.state.enableNetworkSwitch||m.OptionsController.state.allowUnsupportedChain||d.ConnectionController.state.wcBasic||C.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let t=_.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let t=e!==C.state.activeChain,r=C.getNetworkData(e)?.caipNetwork,i=C.getCaipNetworkByNamespace(e,r?.id);t&&i&&await C.switchActiveNetwork(i)},async switchActiveNetwork(e){let t=C.state.chains.get(C.state.activeChain),r=!t?.caipNetworks?.some(e=>e.id===_.activeCaipNetwork?.id),i=C.getNetworkControllerClient(e.chainNamespace);if(i){try{await i.switchCaipNetwork(e),r&&g.I.close()}catch(e){v.RouterController.goBack()}f.X.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})}},getNetworkControllerClient(e){let t=e||_.activeChain,r=_.chains.get(t);if(!r)throw Error("Chain adapter not found");if(!r.networkControllerClient)throw Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(e){let t=e||_.activeChain;if(!t)throw Error("Chain is required to get connection controller client");let r=_.chains.get(t);if(!r?.connectionControllerClient)throw Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(e,t){let r=_.activeChain;if(t&&(r=t),!r)return;let i=_.chains.get(r)?.accountState;if(i)return i[e]},getNetworkProp(e,t){let r=_.chains.get(t)?.networkState;if(r)return r[e]},getRequestedCaipNetworks(e){let t=_.chains.get(e),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:i=[]}=t?.networkState||{};return l.j.sortRequestedNetworks(r,i)},getAllRequestedCaipNetworks(){let e=[];return _.chains.forEach(t=>{let r=C.getRequestedCaipNetworks(t.namespace);e.push(...r)}),e},setRequestedCaipNetworks(e,t){C.setAdapterNetworkState(t,{requestedCaipNetworks:e});let r=C.getAllRequestedCaipNetworks().map(e=>e.chainNamespace),i=Array.from(new Set(r));p.ConnectorController.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){let e=[];return _.chains.forEach(t=>{let r=C.getApprovedCaipNetworkIds(t.namespace);e.push(...r)}),e},getActiveCaipNetwork:()=>_.activeCaipNetwork,getActiveCaipAddress:()=>_.activeCaipAddress,getApprovedCaipNetworkIds(e){let t=_.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){let t=C.getNetworkControllerClient(),r=await t?.getApprovedCaipNetworksData();C.setAdapterNetworkState(e,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){let r=t||_.activeCaipNetwork,i=C.getRequestedCaipNetworks(e);return!i.length||i?.some(e=>e.id===r?.id)},checkIfSupportedChainId(e){if(!_.activeChain)return!0;let t=C.getRequestedCaipNetworks(_.activeChain);return t?.some(t=>t.id===e)},setSmartAccountEnabledNetworks(e,t){C.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){let e=s.p.caipNetworkIdToNumber(_.activeCaipNetwork?.caipNetworkId),t=_.activeChain;if(!t||!e)return!1;let r=C.getNetworkProp("smartAccountEnabledNetworks",t);return!!r?.includes(Number(e))},getActiveNetworkTokenAddress(){let e=_.activeCaipNetwork?.chainNamespace||"eip155",t=_.activeCaipNetwork?.id||1,r=a.bq.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${r}`},showUnsupportedChainUI(){g.I.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=_.activeCaipNetwork;return!!(e?.chainNamespace&&a.bq.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){C.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(e){if(!e)throw Error("Chain is required to set account prop");_.activeCaipAddress=void 0,C.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),p.ConnectorController.removeConnectorId(e)},setIsSwitchingNamespace(e){_.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[];if(_.chains.forEach(t=>{o.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>e===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return t?_.chains.get(t)?.caipNetworks?.[0]:void 0}},getAccountData:e=>e?C.state.chains.get(e)?.accountState:h.N.state,getNetworkData(e){let t=e||_.activeChain;if(t)return C.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;let r=C.state.chains.get(e);return r?.caipNetworks?.find(e=>e.id===t)||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=p.ConnectorController.state.filterByNamespace;return(e?[_.chains.get(e)]:Array.from(_.chains.values())).flatMap(e=>e?.caipNetworks||[]).map(e=>e.caipNetworkId)},getCaipNetworks:e=>e?C.getRequestedCaipNetworks(e):C.getAllRequestedCaipNetworks()})},25172:function(e,t,r){"use strict";let i;r.d(t,{ConnectionController:function(){return _}});var n=r(53722),s=r(10913),o=r(19876),a=r(92943),l=r(33091),c=r(97576),u=r(25620),h=r(95646),d=r(87163),p=r(44415),f=r(75466),g=r(70498),m=r(24373),y=r(5969),v=r(31283);let b=(0,n.sj)({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),w=(0,l.P)({state:b,subscribe:e=>(0,n.Ld)(b,()=>e(b)),setLastNetworkInView(e){b.lastNetworkInView=e},async fetchTransactions(e,t){if(!e)throw Error("Transactions can't be fetched without an accountAddress");b.loading=!0;try{let r=await m.L.fetchTransactions({account:e,cursor:b.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:u.R.state.activeCaipNetwork?.caipNetworkId}),i=w.filterSpamTransactions(r.data),n=w.filterByConnectedChain(i),s=[...b.transactions,...n];b.loading=!1,"coinbase"===t?b.coinbaseTransactions=w.groupTransactionsByYearAndMonth(b.coinbaseTransactions,r.data):(b.transactions=s,b.transactionsByYear=w.groupTransactionsByYearAndMonth(b.transactionsByYear,n)),b.empty=0===s.length,b.next=r.next?r.next:void 0}catch(r){let t=u.R.state.activeChain;d.X.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:y.OptionsController.state.projectId,cursor:b.next,isSmartAccount:c.N.state.preferredAccountTypes?.[t]===g.y_.ACCOUNT_TYPES.SMART_ACCOUNT}}),v.SnackController.showError("Failed to fetch transactions"),b.loading=!1,b.empty=!0,b.next=void 0}},groupTransactionsByYearAndMonth:(e={},t=[])=>(t.forEach(t=>{let r=new Date(t.metadata.minedAt).getFullYear(),i=new Date(t.metadata.minedAt).getMonth(),n=e[r]??{},s=(n[i]??[]).filter(e=>e.id!==t.id);e[r]={...n,[i]:[...s,t].sort((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime())}}),e),filterSpamTransactions:e=>e.filter(e=>!e.transfers.every(e=>e.nft_info?.flags.is_spam===!0)),filterByConnectedChain(e){let t=u.R.state.activeCaipNetwork?.caipNetworkId;return e.filter(e=>e.metadata.chain===t)},clearCursor(){b.next=void 0},resetTransactions(){b.transactions=[],b.transactionsByYear={},b.lastNetworkInView=void 0,b.loading=!1,b.empty=!1,b.next=void 0}},"API_ERROR"),E=(0,n.sj)({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"}),_=(0,l.P)({state:E,subscribeKey:(e,t)=>(0,s.VW)(E,e,t),_getClient:()=>E._client,setClient(e){E._client=(0,n.iH)(e)},async connectWalletConnect(){if(o.j.isTelegram()||o.j.isSafari()&&o.j.isIos()){if(i){await i,i=void 0;return}if(!o.j.isPairingExpired(E?.wcPairingExpiry)){let e=E.wcUri;E.wcUri=e;return}i=_._getClient()?.connectWalletConnect?.().catch(()=>void 0),_.state.status="connecting",await i,i=void 0,E.wcPairingExpiry=void 0,_.state.status="connected"}else await _._getClient()?.connectWalletConnect?.()},async connectExternal(e,t,r=!0){await _._getClient()?.connectExternal?.(e),r&&u.R.setActiveNamespace(t)},async reconnectExternal(e){await _._getClient()?.reconnectExternal?.(e);let t=e.chain||u.R.state.activeChain;t&&h.ConnectorController.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){p.I.setLoading(!0,u.R.state.activeChain);let r=h.ConnectorController.getAuthConnector();r&&(c.N.setPreferredAccountType(e,t),await r.provider.setPreferredAccount(e),a.M.setPreferredAccountTypes(c.N.state.preferredAccountTypes??{[t]:e}),await _.reconnectExternal(r),p.I.setLoading(!1,u.R.state.activeChain),d.X.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:u.R.state.activeCaipNetwork?.caipNetworkId||""}}))},signMessage:async e=>_._getClient()?.signMessage(e),parseUnits:(e,t)=>_._getClient()?.parseUnits(e,t),formatUnits:(e,t)=>_._getClient()?.formatUnits(e,t),sendTransaction:async e=>_._getClient()?.sendTransaction(e),getCapabilities:async e=>_._getClient()?.getCapabilities(e),grantPermissions:async e=>_._getClient()?.grantPermissions(e),walletGetAssets:async e=>_._getClient()?.walletGetAssets(e)??{},estimateGas:async e=>_._getClient()?.estimateGas(e),writeContract:async e=>_._getClient()?.writeContract(e),getEnsAddress:async e=>_._getClient()?.getEnsAddress(e),getEnsAvatar:async e=>_._getClient()?.getEnsAvatar(e),checkInstalled:e=>_._getClient()?.checkInstalled?.(e)||!1,resetWcConnection(){E.wcUri=void 0,E.wcPairingExpiry=void 0,E.wcLinking=void 0,E.recentWallet=void 0,E.status="disconnected",w.resetTransactions(),a.M.deleteWalletConnectDeepLink()},resetUri(){E.wcUri=void 0,E.wcPairingExpiry=void 0,i=void 0},finalizeWcConnection(){let{wcLinking:e,recentWallet:t}=_.state;e&&a.M.setWalletConnectDeepLink(e),t&&a.M.setAppKitRecent(t),d.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:f.RouterController.state.data?.wallet?.name||"Unknown"}})},setWcBasic(e){E.wcBasic=e},setUri(e){E.wcUri=e,E.wcPairingExpiry=o.j.getPairingExpiry()},setWcLinking(e){E.wcLinking=e},setWcError(e){E.wcError=e,E.buffering=!1},setRecentWallet(e){E.recentWallet=e},setBuffering(e){E.buffering=e},setStatus(e){E.status=e},async disconnect(e){try{await _._getClient()?.disconnect(e)}catch(e){throw new l.g("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},setConnections(e,t){E.connections.set(t,e)},switchAccount({connection:e,address:t,namespace:r}){if(h.ConnectorController.state.activeConnectorIds[r]===e.connectorId){let e=u.R.state.activeCaipNetwork;if(e){let i=`${r}:${e.id}:${t}`;c.N.setCaipAddress(i,r)}else console.warn(`No current network found for namespace "${r}"`)}else{let t=h.ConnectorController.getConnector(e.connectorId);t?_.connectExternal(t,r):console.warn(`No connector found for namespace "${r}"`)}}})},95646:function(e,t,r){"use strict";r.d(t,{ConnectorController:function(){return y}});var i=r(53722),n=r(10913),s=r(29350),o=r(76429),a=r(5519),l=r(92943),c=r(33091),u=r(96424),h=r(25620),d=r(5969),p=r(75466),f=r(96501);let g={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},m=(0,i.sj)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...g},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),y=(0,c.P)({state:m,subscribe:e=>(0,i.Ld)(m,()=>{e(m)}),subscribeKey:(e,t)=>(0,n.VW)(m,e,t),initialize(e){e.forEach(e=>{let t=l.M.getConnectedConnectorId(e);t&&y.setConnectorId(t,e)})},setActiveConnector(e){e&&(m.activeConnector=(0,i.iH)(e))},setConnectors(e){e.filter(e=>!m.allConnectors.some(t=>t.id===e.id&&y.getConnectorName(t.name)===y.getConnectorName(e.name)&&t.chain===e.chain)).forEach(e=>{"MULTI_CHAIN"!==e.type&&m.allConnectors.push((0,i.iH)(e))});let t=y.getEnabledNamespaces(),r=y.getEnabledConnectors(t);m.connectors=y.mergeMultiChainConnectors(r)},filterByNamespaces(e){Object.keys(m.filterByNamespaceMap).forEach(e=>{m.filterByNamespaceMap[e]=!1}),e.forEach(e=>{m.filterByNamespaceMap[e]=!0}),y.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){m.filterByNamespaceMap[e]=t,y.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=y.getEnabledNamespaces(),t=y.getEnabledConnectors(e),r=y.areAllNamespacesEnabled();m.connectors=y.mergeMultiChainConnectors(t),r?u.ApiController.clearFilterByNamespaces():u.ApiController.filterByNamespaces(e)},getEnabledNamespaces:()=>Object.entries(m.filterByNamespaceMap).filter(([e,t])=>t).map(([e])=>e),getEnabledConnectors:e=>m.allConnectors.filter(t=>e.includes(t.chain)),areAllNamespacesEnabled:()=>Object.values(m.filterByNamespaceMap).every(e=>e),mergeMultiChainConnectors(e){let t=y.generateConnectorMapByName(e),r=[];return t.forEach(e=>{let t=e[0],i=t?.id===s.b.CONNECTOR_ID.AUTH;e.length>1&&t?r.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&r.push(t)}),r},generateConnectorMapByName(e){let t=new Map;return e.forEach(e=>{let{name:r}=e,i=y.getConnectorName(r);if(!i)return;let n=t.get(i)||[];n.find(t=>t.chain===e.chain)||n.push(e),t.set(i,n)}),t},getConnectorName:e=>e&&({"Trust Wallet":"Trust"})[e]||e,getUniqueConnectorsByName(e){let t=[];return e.forEach(e=>{t.find(t=>t.chain===e.chain)||t.push(e)}),t},addConnector(e){if(e.id===s.b.CONNECTOR_ID.AUTH){let t=(0,i.CO)(d.OptionsController.state),r=f.ThemeController.getSnapshot().themeMode,n=f.ThemeController.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:n,w3mThemeVariables:o.t(n,r)}),y.setConnectors([e])}else y.setConnectors([e])},getAuthConnector(e){let t=e||h.R.state.activeChain,r=m.connectors.find(e=>e.id===s.b.CONNECTOR_ID.AUTH);return r?r?.connectors?.length?r.connectors.find(e=>e.chain===t):r:void 0},getAnnouncedConnectorRdns:()=>m.connectors.filter(e=>"ANNOUNCED"===e.type).map(e=>e.info?.rdns),getConnectorById:e=>m.allConnectors.find(t=>t.id===e),getConnector:(e,t)=>m.allConnectors.filter(e=>e.chain===h.R.state.activeChain).find(r=>r.explorerId===e||r.info?.rdns===t),syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;let t=(0,i.CO)(d.OptionsController.state),r=f.ThemeController.getSnapshot().themeMode,n=f.ThemeController.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:n,w3mThemeVariables:(0,o.t)(n,r)})},getConnectorsByNamespace(e){let t=m.allConnectors.filter(t=>t.chain===e);return y.mergeMultiChainConnectors(t)},selectWalletConnector(e){let t=y.getConnector(e.id,e.rdns),r=h.R.state.activeChain;a.R.handleMobileDeeplinkRedirect(t?.explorerId||e.id,r),t?p.RouterController.push("ConnectingExternal",{connector:t}):p.RouterController.push("ConnectingWalletConnect",{wallet:e})},getConnectors:e=>e?y.getConnectorsByNamespace(e):y.mergeMultiChainConnectors(m.allConnectors),setFilterByNamespace(e){m.filterByNamespace=e,m.connectors=y.getConnectors(e),u.ApiController.setFilterByNamespace(e)},setConnectorId(e,t){e&&(m.activeConnectorIds={...m.activeConnectorIds,[t]:e},l.M.setConnectedConnectorId(t,e))},removeConnectorId(e){m.activeConnectorIds={...m.activeConnectorIds,[e]:void 0},l.M.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return m.activeConnectorIds[e]},isConnected:e=>e?!!m.activeConnectorIds[e]:Object.values(m.activeConnectorIds).some(e=>!!e),resetConnectorIds(){m.activeConnectorIds={...g}}})},87163:function(e,t,r){"use strict";r.d(t,{X:function(){return g}});var i=r(53722),n=r(29350),s=r(99861),o=r(19876),a=r(29381),l=r(97576),c=r(8272),u=r(5969);let h=o.j.getAnalyticsUrl(),d=new a.V({baseUrl:h,clientId:null}),p=["MODAL_CREATED"],f=(0,i.sj)({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),g={state:f,subscribe:e=>(0,i.Ld)(f,()=>e(f)),getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:r}=u.OptionsController.state;return{projectId:e,st:t,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{let t=l.N.state.address;if(p.includes(e.data.event)||"undefined"==typeof window)return;await d.post({path:"/e",params:g.getSdkProperties(),body:{eventId:o.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),f.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===n.b.HTTP_STATUS_CODES.FORBIDDEN&&!f.reportedErrors.FORBIDDEN&&(c.AlertController.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${(0,s.$U)()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),f.reportedErrors.FORBIDDEN=!0)}},sendEvent(e){f.timestamp=Date.now(),f.data=e,u.OptionsController.state.features?.analytics&&g._sendAnalyticsEvent(f)}}},44415:function(e,t,r){"use strict";r.d(t,{I:function(){return b}});var i=r(53722),n=r(10913),s=r(19876),o=r(29350),a=r(97576),l=r(25620),c=r(95646),u=r(75466);let h={onSwitchNetwork({network:e,ignoreSwitchConfirmation:t=!1}){let r=l.R.state.activeCaipNetwork,i=u.RouterController.state.data;if(e.id===r?.id)return;let n=a.N.getCaipAddress(l.R.state.activeChain),s=e.chainNamespace!==l.R.state.activeChain,h=a.N.getCaipAddress(e.chainNamespace),d=c.ConnectorController.getConnectorId(l.R.state.activeChain)===o.b.CONNECTOR_ID.AUTH,p=o.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(t=>t===e.chainNamespace);t||d&&p?u.RouterController.push("SwitchNetwork",{...i,network:e}):n&&s&&!h?u.RouterController.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):u.RouterController.push("SwitchNetwork",{...i,network:e})}};var d=r(33091),p=r(96424),f=r(25172),g=r(87163),m=r(5969),y=r(81665);let v=(0,i.sj)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),b=(0,d.P)({state:v,subscribe:e=>(0,i.Ld)(v,()=>e(v)),subscribeKey:(e,t)=>(0,n.VW)(v,e,t),async open(e){let t="connected"===a.N.state.status,r=e?.namespace,i=l.R.state.activeChain,n=r&&r!==i,o=l.R.getAccountData(e?.namespace)?.caipAddress;if(f.ConnectionController.state.wcBasic?p.ApiController.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await p.ApiController.prefetch({fetchConnectorImages:!t,fetchFeaturedWallets:!t,fetchRecommendedWallets:!t}),c.ConnectorController.setFilterByNamespace(e?.namespace),b.setLoading(!0,r),r&&n){let e=l.R.getNetworkData(r)?.caipNetwork||l.R.getRequestedCaipNetworks(r)[0];e&&h.onSwitchNetwork({network:e,ignoreSwitchConfirmation:!0})}else{let t=l.R.state.noAdapters;m.OptionsController.state.manualWCControl||t&&!o?s.j.isMobile()?u.RouterController.reset("AllWallets"):u.RouterController.reset("ConnectingWalletConnectBasic"):e?.view?u.RouterController.reset(e.view,e.data):o?u.RouterController.reset("Account"):u.RouterController.reset("Connect")}v.open=!0,y.I.set({open:!0}),g.X.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!o}})},close(){let e=m.OptionsController.state.enableEmbedded,t=!!l.R.state.activeCaipAddress;v.open&&g.X.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),v.open=!1,u.RouterController.reset("Connect"),b.clearLoading(),e?t?u.RouterController.replace("Account"):u.RouterController.push("Connect"):y.I.set({open:!1}),f.ConnectionController.resetUri()},setLoading(e,t){t&&v.loadingNamespaceMap.set(t,e),v.loading=e,y.I.set({loading:e})},clearLoading(){v.loadingNamespaceMap.clear(),v.loading=!1},shake(){v.shake||(v.shake=!0,setTimeout(()=>{v.shake=!1},500))}})},5969:function(e,t,r){"use strict";r.d(t,{OptionsController:function(){return c}});var i=r(53722),n=r(10913),s=r(15623),o=r(19876);let a={getFeatureValue(e,t){let r=t?.[e];return void 0===r?s.bq.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.j.isTelegram()){if(o.j.isIos())return e.filter(e=>"google"!==e);if(o.j.isMac())return e.filter(e=>"x"!==e);if(o.j.isAndroid())return e.filter(e=>!["facebook","x"].includes(e))}return e}},l=(0,i.sj)({features:s.bq.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:s.bq.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),c={state:l,subscribeKey:(e,t)=>(0,n.VW)(l,e,t),setOptions(e){Object.assign(l,e)},setRemoteFeatures(e){if(!e)return;let t={...l.remoteFeatures,...e};l.remoteFeatures=t,l.remoteFeatures?.socials&&(l.remoteFeatures.socials=a.filterSocialsByPlatform(l.remoteFeatures.socials))},setFeatures(e){if(!e)return;l.features||(l.features=s.bq.DEFAULT_FEATURES);let t={...l.features,...e};l.features=t},setProjectId(e){l.projectId=e},setCustomRpcUrls(e){l.customRpcUrls=e},setAllWallets(e){l.allWallets=e},setIncludeWalletIds(e){l.includeWalletIds=e},setExcludeWalletIds(e){l.excludeWalletIds=e},setFeaturedWalletIds(e){l.featuredWalletIds=e},setTokens(e){l.tokens=e},setTermsConditionsUrl(e){l.termsConditionsUrl=e},setPrivacyPolicyUrl(e){l.privacyPolicyUrl=e},setCustomWallets(e){l.customWallets=e},setIsSiweEnabled(e){l.isSiweEnabled=e},setIsUniversalProvider(e){l.isUniversalProvider=e},setSdkVersion(e){l.sdkVersion=e},setMetadata(e){l.metadata=e},setDisableAppend(e){l.disableAppend=e},setEIP6963Enabled(e){l.enableEIP6963=e},setDebug(e){l.debug=e},setEnableWalletConnect(e){l.enableWalletConnect=e},setEnableWalletGuide(e){l.enableWalletGuide=e},setEnableAuthLogger(e){l.enableAuthLogger=e},setEnableWallets(e){l.enableWallets=e},setPreferUniversalLinks(e){l.experimental_preferUniversalLinks=e},setHasMultipleAddresses(e){l.hasMultipleAddresses=e},setSIWX(e){l.siwx=e},setConnectMethodsOrder(e){l.features={...l.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){l.features={...l.features,walletFeaturesOrder:e}},setSocialsOrder(e){l.remoteFeatures={...l.remoteFeatures,socials:e}},setCollapseWallets(e){l.features={...l.features,collapseWallets:e}},setEnableEmbedded(e){l.enableEmbedded=e},setAllowUnsupportedChain(e){l.allowUnsupportedChain=e},setManualWCControl(e){l.manualWCControl=e},setEnableNetworkSwitch(e){l.enableNetworkSwitch=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([e,t])=>{t&&(l.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(e){l.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>l.universalProviderConfigOverride,getSnapshot:()=>(0,i.CO)(l)}},81665:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var i=r(53722),n=r(10913);let s=(0,i.sj)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),o={state:s,subscribe:e=>(0,i.Ld)(s,()=>e(s)),subscribeOpen:e=>(0,n.VW)(s,"open",e),set(e){Object.assign(s,{...s,...e})}}},75466:function(e,t,r){"use strict";r.d(t,{RouterController:function(){return d}});var i=r(53722),n=r(10913),s=r(33091),o=r(97576),a=r(25620),l=r(95646),c=r(44415),u=r(5969);let h=(0,i.sj)({view:"Connect",history:["Connect"],transactionStack:[]}),d=(0,s.P)({state:h,subscribeKey:(e,t)=>(0,n.VW)(h,e,t),pushTransactionStack(e){h.transactionStack.push(e)},popTransactionStack(e){let t=h.transactionStack.pop();if(!t)return;let{onSuccess:r,onError:i,onCancel:n}=t;switch(e){case"success":r?.();break;case"error":i?.(),d.goBack();break;case"cancel":n?.(),d.goBack()}},push(e,t){e!==h.view&&(h.view=e,h.history.push(e),h.data=t)},reset(e,t){h.view=e,h.history=[e],h.data=t},replace(e,t){h.history.at(-1)!==e&&(h.view=e,h.history[h.history.length-1]=e,h.data=t)},goBack(){let e=a.R.state.activeCaipAddress,t="ConnectingFarcaster"===d.state.view,r=!e&&t;if(h.history.length>1){h.history.pop();let[t]=h.history.slice(-1);t&&(e&&"Connect"===t?h.view="Account":h.view=t)}else c.I.close();h.data?.wallet&&(h.data.wallet=void 0),setTimeout(()=>{if(r){o.N.setFarcasterUrl(void 0,a.R.state.activeChain);let e=l.ConnectorController.getAuthConnector();e?.provider?.reload();let t=(0,i.CO)(u.OptionsController.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(e){if(h.history.length>1){h.history=h.history.slice(0,e+1);let[t]=h.history.slice(-1);t&&(h.view=t)}},goBackOrCloseModal(){d.state.history.length>1?d.goBack():c.I.close()}})},4860:function(e,t,r){"use strict";r.d(t,{S:function(){return B}});var i=r(53722),n=r(10913),s="[big.js] ",o=s+"Invalid ",a=o+"decimal places",l=o+"rounding mode",c=s+"Division by zero",u={},h=void 0,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function p(e,t,r,i){var n=e.c;if(r===h&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(l);if(t<1)i=3===r&&(i||!!n[0])||0===t&&(1===r&&n[0]>=5||2===r&&(n[0]>5||5===n[0]&&(i||n[1]!==h))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===r&&n[t]>=5||2===r&&(n[t]>5||5===n[t]&&(i||n[t+1]!==h||1&n[t-1]))||3===r&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function f(e,t,r){var i=e.e,n=e.c.join(""),s=n.length;if(t)n=n.charAt(0)+(s>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>s)for(i-=s;i--;)n+="0";else i<s&&(n=n.slice(0,i)+"."+n.slice(i))}else s>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&r?"-"+n:n}u.abs=function(){var e=new this.constructor(this);return e.s=1,e},u.cmp=function(e){var t,r=this.c,i=(e=new this.constructor(e)).c,n=this.s,s=e.s,o=this.e,a=e.e;if(!r[0]||!i[0])return r[0]?n:i[0]?-s:0;if(n!=s)return n;if(t=n<0,o!=a)return o>a^t?1:-1;for(n=-1,s=(o=r.length)<(a=i.length)?o:a;++n<s;)if(r[n]!=i[n])return r[n]>i[n]^t?1:-1;return o==a?0:o>a^t?1:-1},u.div=function(e){var t=this.constructor,r=this.c,i=(e=new t(e)).c,n=this.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>1e6)throw Error(a);if(!i[0])throw Error(c);if(!r[0])return e.s=n,e.c=[e.e=0],e;var o,l,u,d,f,g=i.slice(),m=o=i.length,y=r.length,v=r.slice(0,o),b=v.length,w=e,E=w.c=[],_=0,C=s+(w.e=this.e-e.e)+1;for(w.s=n,n=C<0?0:C,g.unshift(0);b++<o;)v.push(0);do{for(u=0;u<10;u++){if(o!=(b=v.length))d=o>b?1:-1;else for(f=-1,d=0;++f<o;)if(i[f]!=v[f]){d=i[f]>v[f]?1:-1;break}if(d<0){for(l=b==o?i:g;b;){if(v[--b]<l[b]){for(f=b;f&&!v[--f];)v[f]=9;--v[f],v[b]+=10}v[b]-=l[b]}for(;!v[0];)v.shift()}else break}E[_++]=d?u:++u,v[0]&&d?v[b]=r[m]||0:v=[r[m]]}while((m++<y||v[0]!==h)&&n--);return!E[0]&&1!=_&&(E.shift(),w.e--,C--),_>C&&p(w,C,t.RM,v[0]!==h),w},u.eq=function(e){return 0===this.cmp(e)},u.gt=function(e){return this.cmp(e)>0},u.gte=function(e){return this.cmp(e)>-1},u.lt=function(e){return 0>this.cmp(e)},u.lte=function(e){return 1>this.cmp(e)},u.minus=u.sub=function(e){var t,r,i,n,s=this.constructor,o=this.s,a=(e=new s(e)).s;if(o!=a)return e.s=-a,this.plus(e);var l=this.c.slice(),c=this.e,u=e.c,h=e.e;if(!l[0]||!u[0])return u[0]?e.s=-a:l[0]?e=new s(this):e.s=1,e;if(o=c-h){for((n=o<0)?(o=-o,i=l):(h=c,i=u),i.reverse(),a=o;a--;)i.push(0);i.reverse()}else for(r=((n=l.length<u.length)?l:u).length,o=a=0;a<r;a++)if(l[a]!=u[a]){n=l[a]<u[a];break}if(n&&(i=l,l=u,u=i,e.s=-e.s),(a=(r=u.length)-(t=l.length))>0)for(;a--;)l[t++]=0;for(a=t;r>o;){if(l[--r]<u[r]){for(t=r;t&&!l[--t];)l[t]=9;--l[t],l[r]+=10}l[r]-=u[r]}for(;0===l[--a];)l.pop();for(;0===l[0];)l.shift(),--h;return l[0]||(e.s=1,l=[h=0]),e.c=l,e.e=h,e},u.mod=function(e){var t,r=this,i=r.constructor,n=r.s,s=(e=new i(e)).s;if(!e.c[0])throw Error(c);return(r.s=e.s=1,t=1==e.cmp(r),r.s=n,e.s=s,t)?new i(r):(n=i.DP,s=i.RM,i.DP=i.RM=0,r=r.div(e),i.DP=n,i.RM=s,this.minus(r.times(e)))},u.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},u.plus=u.add=function(e){var t,r,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var s=this.e,o=this.c,a=e.e,l=e.c;if(!o[0]||!l[0])return l[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=s-a){for(t>0?(a=s,i=l):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-l.length<0&&(i=l,l=o,o=i),t=l.length,r=0;t;o[t]%=10)r=(o[--t]=o[t]+l[t]+r)/10|0;for(r&&(o.unshift(r),++a),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=a,e},u.pow=function(e){var t=this,r=new t.constructor("1"),i=r,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(o+"exponent");for(n&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return n?r.div(i):i},u.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(o+"precision");return p(new this.constructor(this),e,t)},u.round=function(e,t){if(e===h)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(a);return p(new this.constructor(this),e+this.e+1,t)},u.sqrt=function(){var e,t,r,i=this.constructor,n=this.s,o=this.e,a=new i("0.5");if(!this.c[0])return new i(this);if(n<0)throw Error(s+"No square root");0===(n=Math.sqrt(+f(this,!0,!0)))||n===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new i(((n=Math.sqrt(t))==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):e=new i(n+""),o=e.e+(i.DP+=4);do r=e,e=a.times(r.plus(this.div(r)));while(r.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return p(e,(i.DP-=4)+e.e+1,i.RM)},u.times=u.mul=function(e){var t,r=this.constructor,i=this.c,n=(e=new r(e)).c,s=i.length,o=n.length,a=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=a+l,s<o&&(t=i,i=n,n=t,l=s,s=o,o=l),t=Array(l=s+o);l--;)t[l]=0;for(a=o;a--;){for(o=0,l=s+a;l>a;)o=t[l]+n[a]*i[l-a-1]+o,t[l--]=o%10,o=o/10|0;t[l]=o}for(o?++e.e:t.shift(),a=t.length;!t[--a];)t.pop();return e.c=t,e},u.toExponential=function(e,t){var r=this,i=r.c[0];if(e!==h){if(e!==~~e||e<0||e>1e6)throw Error(a);for(r=p(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return f(r,!0,!!i)},u.toFixed=function(e,t){var r=this,i=r.c[0];if(e!==h){if(e!==~~e||e<0||e>1e6)throw Error(a);for(r=p(new r.constructor(r),e+r.e+1,t),e=e+r.e+1;r.c.length<e;)r.c.push(0)}return f(r,!1,!!i)},u[Symbol.for("nodejs.util.inspect.custom")]=u.toJSON=u.toString=function(){var e=this.constructor;return f(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},u.toNumber=function(){var e=+f(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(s+"Imprecise conversion");return e},u.toPrecision=function(e,t){var r=this,i=r.constructor,n=r.c[0];if(e!==h){if(e!==~~e||e<1||e>1e6)throw Error(o+"precision");for(r=p(new i(r),e,t);r.c.length<e;)r.c.push(0)}return f(r,e<=r.e||r.e<=i.NE||r.e>=i.PE,!!n)},u.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(s+"valueOf disallowed");return f(this,this.e<=e.NE||this.e>=e.PE,!0)};var g=function e(){function t(r){if(!(this instanceof t))return r===h?e():new t(r);if(r instanceof t)this.s=r.s,this.e=r.e,this.c=r.c.slice();else{if("string"!=typeof r){if(!0===t.strict&&"bigint"!=typeof r)throw TypeError(o+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,i,n;if(!d.test(t))throw Error(o+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),n=t.length,i=0;i<n&&"0"==t.charAt(i);)++i;if(i==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=r-i-1,e.c=[],r=0;i<=n;)e.c[r++]=+t.charAt(i++)}}(this,r)}this.constructor=t}return t.prototype=u,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();let m={bigNumber:e=>new g(e||0),multiply(e,t){if(void 0===e||void 0===t)return new g(0);let r=new g(e),i=new g(t);return r.times(i)},formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}),parseLocalStringToNumber:e=>void 0===e?0:parseFloat(e.replace(/,/gu,""))},y=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],v=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],b=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var w=r(29350);let E={getERC20Abi:e=>w.b.USDT_CONTRACT_ADDRESSES.includes(e)?b:y,getSwapAbi:()=>v};var _=r(70498),C=r(15623),S=r(19876),I=r(97576),x=r(24373),A=r(25620),k=r(25172),O=r(16775);let P={createBalance(e,t){let r={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,O.b)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){let t=e.split(":");if(t.length<2||!t[1])return"0x0";let r=parseInt(t[1],10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every(e=>Array.isArray(e)&&e.every(e=>this.isValidAsset(e)))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl},R={async getMyTokensWithBalance(e){let t=I.N.state.address,r=A.R.state.activeCaipNetwork;if(!t||!r)return[];if("eip155"===r.chainNamespace){let e=await this.getEIP155Balances(t,r);if(e)return this.filterLowQualityTokens(e)}let i=await x.L.getBalance(t,r.caipNetworkId,e);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(e,t){try{let r=P.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),i=await k.ConnectionController.getCapabilities(e);if(!i?.[r]?.assetDiscovery?.supported)return null;let n=await k.ConnectionController.walletGetAssets({account:e,chainFilter:[r]});if(!P.isWalletGetAssetsResponse(n))return null;return(n[r]||[]).map(e=>P.createBalance(e,t.caipNetworkId))}catch(e){return null}},filterLowQualityTokens:e=>e.filter(e=>"0"!==e.quantity.decimals),mapBalancesToSwapTokens:e=>e?.map(e=>({...e,address:e?.address?e.address:A.R.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]};var N=r(33091),T=r(87163),M=r(75466),L=r(31283);let D=(0,i.sj)({tokenBalances:[],loading:!1}),B=(0,N.P)({state:D,subscribe:e=>(0,i.Ld)(D,()=>e(D)),subscribeKey:(e,t)=>(0,n.VW)(D,e,t),setToken(e){e&&(D.token=(0,i.iH)(e))},setTokenAmount(e){D.sendTokenAmount=e},setReceiverAddress(e){D.receiverAddress=e},setReceiverProfileImageUrl(e){D.receiverProfileImageUrl=e},setReceiverProfileName(e){D.receiverProfileName=e},setNetworkBalanceInUsd(e){D.networkBalanceInUSD=e},setLoading(e){D.loading=e},async sendToken(){try{switch(B.setLoading(!0),A.R.state.activeCaipNetwork?.chainNamespace){case"eip155":await B.sendEvmToken();return;case"solana":await B.sendSolanaToken();return;default:throw Error("Unsupported chain")}}finally{B.setLoading(!1)}},async sendEvmToken(){let e=A.R.state.activeChain,t=I.N.state.preferredAccountTypes?.[e];if(!B.state.sendTokenAmount||!B.state.receiverAddress)throw Error("An amount and receiver address are required");if(!B.state.token)throw Error("A token is required");B.state.token?.address?(T.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===_.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:B.state.token.address,amount:B.state.sendTokenAmount,network:A.R.state.activeCaipNetwork?.caipNetworkId||""}}),await B.sendERC20Token({receiverAddress:B.state.receiverAddress,tokenAddress:B.state.token.address,sendTokenAmount:B.state.sendTokenAmount,decimals:B.state.token.quantity.decimals})):(T.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===_.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:B.state.token.symbol||"",amount:B.state.sendTokenAmount,network:A.R.state.activeCaipNetwork?.caipNetworkId||""}}),await B.sendNativeToken({receiverAddress:B.state.receiverAddress,sendTokenAmount:B.state.sendTokenAmount,decimals:B.state.token.quantity.decimals}))},async fetchTokenBalance(e){D.loading=!0;let t=A.R.state.activeCaipNetwork?.caipNetworkId,r=A.R.state.activeCaipNetwork?.chainNamespace,i=A.R.state.activeCaipAddress,n=i?S.j.getPlainAddress(i):void 0;if(D.lastRetry&&!S.j.isAllowedRetry(D.lastRetry,30*C.bq.ONE_SEC_MS))return D.loading=!1,[];try{if(n&&t&&r){let e=await R.getMyTokensWithBalance();return D.tokenBalances=e,D.lastRetry=void 0,e}}catch(t){D.lastRetry=Date.now(),e?.(t),L.SnackController.showError("Token Balance Unavailable")}finally{D.loading=!1}return[]},fetchNetworkBalance(){if(0===D.tokenBalances.length)return;let e=R.mapBalancesToSwapTokens(D.tokenBalances);if(!e)return;let t=e.find(e=>e.address===A.R.getActiveNetworkTokenAddress());t&&(D.networkBalanceInUSD=t?m.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){M.RouterController.pushTransactionStack({});let t=e.receiverAddress,r=I.N.state.address,i=k.ConnectionController.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));await k.ConnectionController.sendTransaction({chainNamespace:"eip155",to:t,address:r,data:"0x",value:i??BigInt(0)}),T.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:I.N.state.preferredAccountTypes?.eip155===_.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:B.state.token?.symbol||"",amount:e.sendTokenAmount,network:A.R.state.activeCaipNetwork?.caipNetworkId||""}}),k.ConnectionController._getClient()?.updateBalance("eip155"),B.resetSend()},async sendERC20Token(e){M.RouterController.pushTransactionStack({onSuccess(){M.RouterController.replace("Account")}});let t=k.ConnectionController.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));if(I.N.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let r=S.j.getPlainAddress(e.tokenAddress);await k.ConnectionController.writeContract({fromAddress:I.N.state.address,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:E.getERC20Abi(r),chainNamespace:"eip155"}),B.resetSend()}},async sendSolanaToken(){if(!B.state.sendTokenAmount||!B.state.receiverAddress)throw Error("An amount and receiver address are required");M.RouterController.pushTransactionStack({onSuccess(){M.RouterController.replace("Account")}}),await k.ConnectionController.sendTransaction({chainNamespace:"solana",to:B.state.receiverAddress,value:B.state.sendTokenAmount}),k.ConnectionController._getClient()?.updateBalance("solana"),B.resetSend()},resetSend(){D.token=void 0,D.sendTokenAmount=void 0,D.receiverAddress=void 0,D.receiverProfileImageUrl=void 0,D.receiverProfileName=void 0,D.loading=!1,D.tokenBalances=[]}})},31283:function(e,t,r){"use strict";r.d(t,{SnackController:function(){return l}});var i=r(53722),n=r(10913),s=r(19876);let o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,i.sj)({...o}),l={state:a,subscribeKey:(e,t)=>(0,n.VW)(a,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){let t=s.j.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:r="success",autoClose:i=o.autoClose}){a.open?(a.open=!1,setTimeout(()=>{a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=i},150)):(a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=i)}}},96501:function(e,t,r){"use strict";r.d(t,{ThemeController:function(){return c}});var i=r(53722),n=r(76429),s=r(33091),o=r(95646);let a=(0,i.sj)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),l={state:a,subscribe:e=>(0,i.Ld)(a,()=>e(a)),setThemeMode(e){a.themeMode=e;try{let t=o.ConnectorController.getAuthConnector();if(t){let r=l.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:r,w3mThemeVariables:(0,n.t)(r,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){a.themeVariables={...a.themeVariables,...e};try{let e=o.ConnectorController.getAuthConnector();if(e){let t=l.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,n.t)(a.themeVariables,a.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,i.CO)(a)},c=(0,s.P)(l)},8112:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var i=r(53722),n=r(96424),s=r(32754);let o={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},a=(0,i.sj)({networkImagePromises:{}}),l={async fetchWalletImage(e){if(e)return await n.ApiController._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(e)return this.getNetworkImageById(e)||(a.networkImagePromises[e]||(a.networkImagePromises[e]=n.ApiController._fetchNetworkImage(e)),await a.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return s.W.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?s.W.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?s.W.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return s.W.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.imageId?s.W.state.connectorImages[e.imageId]:void 0,getChainImage:e=>s.W.state.networkImages[o[e]]}},15623:function(e,t,r){"use strict";r.d(t,{a$:function(){return o},bq:function(){return a},gy:function(){return s}});var i=r(62601);let n=(void 0!==i&&void 0!==i.env?i.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",s=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],o="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",a={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:n,SECURE_SITE_DASHBOARD:`${n}/dashboard`,SECURE_SITE_FAVICON:`${n}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}}},19876:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var i=r(29350),n=r(15623),s=r(92943);let o={isMobile(){return!!this.isClient()&&!!("function"==typeof window?.matchMedia&&window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return!!this.isClient()&&window?.navigator.userAgent.toLowerCase().includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=n.bq.TEN_SEC_MS,isAllowedRetry:(e,t=n.bq.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},isSafeApp(){if(o.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0];if(e){let t=new URL(e),r=new URL("https://app.safe.global");return t.hostname===r.hostname}}catch{}return!1},getPairingExpiry:()=>Date.now()+n.bq.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise(t=>{setTimeout(t,e)}),debounce(e,t=500){let r;return(...i)=>{r&&clearTimeout(r),r=setTimeout(function(){e(...i)},t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t,r=null){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let i=e,n=r;i.includes("://")||(i=e.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),n&&!n?.endsWith("/")&&(n=`${n}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));let s=encodeURIComponent(t);return{redirect:`${i}wc?uri=${s}`,redirectUniversalLink:n?`${n}wc?uri=${s}`:void 0,href:i}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let r=e;r.endsWith("/")||(r=`${r}/`);let i=encodeURIComponent(t);return{redirect:`${r}wc?uri=${i}`,href:r}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?s.M.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,r){window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},returnOpenHref(e,t,r){return window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto),isPWA(){if("undefined"==typeof window)return!1;let e=window.matchMedia?.("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return!!(e||t)},preloadImage:async e=>Promise.race([new Promise((t,r)=>{let i=new Image;i.onload=t,i.onerror=r,i.crossOrigin="anonymous",i.src=e}),o.wait(2e3)]),formatBalance(e,t){let r="0.000";if("string"==typeof e){let t=Number(e);if(t){let e=Math.floor(1e3*t)/1e3;e&&(r=e.toString())}}return`${r}${t?` ${t}`:""}`},formatBalance2(e,t){let r;if("0"===e)r="0";else if("string"==typeof e){let t=Number(e);t&&(r=t.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:"0"===r?"000":"",symbol:t}},getApiUrl:()=>i.b.W3M_API_URL,getBlockchainApiUrl:()=>i.b.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>i.b.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){let r={};return t&&e&&(e.forEach((e,t)=>{r[e]=t}),t.sort((e,t)=>{let i=r[e.id],n=r[t.id];return void 0!==i&&void 0!==n?i-n:void 0!==i?-1:void 0!==n?1:0})),t},calculateBalance(e){let t=0;for(let r of e)t+=r.value??0;return t},formatTokenBalance(e){let[t,r]=e.toFixed(2).split(".");return{dollars:t,pennies:r}},isAddress(e,t="eip155"){switch(t){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e)))return!0;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){let r=new Set;return e.filter(e=>{let i=e[t];return!r.has(i)&&(r.add(i),!0)})},generateSdkVersion(e,t,r){let i=0===e.length?n.bq.ADAPTER_TYPES.UNIVERSAL:e.map(e=>e.adapterType).join(",");return`${t}-${i}-${r}`},createAccount:(e,t,r,i,n)=>({namespace:e,address:t,type:r,publicKey:i,path:n}),isCaipAddress(e){if("string"!=typeof e)return!1;let t=e.split(":"),r=t[0];return 3===t.filter(Boolean).length&&r in i.b.CHAIN_NAME_MAP},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let t=`--${encodeURIComponent(window?.location.href)}`,r="state=";if("auth.magic.link"===new URL(e).host){let i="provider_authorization_url=",n=e.substring(e.indexOf(i)+i.length),s=this.injectIntoUrl(decodeURIComponent(n),r,t);return e.replace(n,encodeURIComponent(s))}return this.injectIntoUrl(e,r,t)},injectIntoUrl(e,t,r){let i=e.indexOf(t);if(-1===i)throw Error(`${t} parameter not found in the URL: ${e}`);let n=e.indexOf("&",i),s=t.length,o=-1!==n?n:e.length,a=e.substring(0,i+s);return a+(e.substring(i+s,o)+r)+e.substring(n)}}},29381:function(e,t,r){"use strict";async function i(...e){let t=await fetch(...e);if(!t.ok)throw Error(`HTTP status code: ${t.status}`,{cause:t});return t}r.d(t,{V:function(){return n}});class n{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){let n=this.createUrl(r);return(await i(n,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){let r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([e,t])=>{t&&r.searchParams.append(e,t)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}},5519:function(e,t,r){"use strict";r.d(t,{R:function(){return s},m:function(){return n}});var i=r(29350);let n={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},s={handleMobileDeeplinkRedirect(e,t){let r=window.location.href,s=encodeURIComponent(r);if(e===n.PHANTOM.id&&!("phantom"in window)){let e=r.startsWith("https")?"https":"http",t=r.split("/")[2],i=encodeURIComponent(`${e}://${t}`);window.location.href=`${n.PHANTOM.url}/ul/browse/${s}?ref=${i}`}e!==n.SOLFLARE.id||"solflare"in window||(window.location.href=`${n.SOLFLARE.url}/ul/v1/browse/${s}?ref=${s}`),t!==i.b.CHAIN.SOLANA||e!==n.COINBASE.id||"coinbaseSolana"in window||(window.location.href=`${n.COINBASE.url}/dapp?cb_url=${s}`)}}},99600:function(e,t,r){"use strict";r.d(t,{w:function(){return g}}),r(33234),r(54967),r(45280),r(53620),r(512),r(67133).Buffer,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var i=r(29350),n=r(70498),s=r(97576),o=r(25620),a=r(25172),l=r(95646),c=r(87163),u=r(44415),h=r(5969),d=r(75466),p=r(31283),f=r(19876);let g={getSIWX:()=>h.OptionsController.state.siwx,async initializeIfEnabled(){let e=h.OptionsController.state.siwx,t=o.R.getActiveCaipAddress();if(!(e&&t))return;let[r,i,n]=t.split(":");if(o.R.checkIfSupportedNetwork(r))try{if((await e.getSessions(`${r}:${i}`,n)).length)return;await u.I.open({view:"SIWXSignMessage"})}catch(e){console.error("SIWXUtil:initializeIfEnabled",e),c.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await a.ConnectionController._getClient()?.disconnect().catch(console.error),d.RouterController.reset("Connect"),p.SnackController.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){let e=h.OptionsController.state.siwx,t=f.j.getPlainAddress(o.R.getActiveCaipAddress()),r=o.R.getActiveCaipNetwork(),n=a.ConnectionController._getClient();if(!e)throw Error("SIWX is not enabled");if(!t)throw Error("No ActiveCaipAddress found");if(!r)throw Error("No ActiveCaipNetwork or client found");if(!n)throw Error("No ConnectionController client found");try{let s=await e.createMessage({chainId:r.caipNetworkId,accountAddress:t}),o=s.toString();l.ConnectorController.getConnectorId(r.chainNamespace)===i.b.CONNECTOR_ID.AUTH&&d.RouterController.pushTransactionStack({});let a=await n.signMessage(o);await e.addSession({data:s,message:o,signature:a}),u.I.close(),c.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(t){let e=this.getSIWXEventProperties();u.I.state.open&&"ApproveTransaction"!==d.RouterController.state.view||await u.I.open({view:"SIWXSignMessage"}),e.isSmartAccount?p.SnackController.showError("This application might not support Smart Accounts"):p.SnackController.showError("Signature declined"),c.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e}),console.error("SWIXUtil:requestSignMessage",t)}},async cancelSignMessage(){try{let e=this.getSIWX();e?.getRequired?.()?await a.ConnectionController.disconnect():u.I.close(),d.RouterController.reset("Connect"),c.X.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){let e=h.OptionsController.state.siwx,t=f.j.getPlainAddress(o.R.getActiveCaipAddress()),r=o.R.getActiveCaipNetwork();return e&&t&&r?e.getSessions(r.caipNetworkId,t):[]},async isSIWXCloseDisabled(){let e=this.getSIWX();if(e){let t="ApproveTransaction"===d.RouterController.state.view,r="SIWXSignMessage"===d.RouterController.state.view;if(t||r)return e.getRequired?.()&&0===(await this.getSessions()).length}return!1},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:r}){let i=g.getSIWX(),n=new Set(t.map(e=>e.split(":")[0]));if(!i||1!==n.size||!n.has("eip155"))return!1;let a=await i.createMessage({chainId:o.R.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),l=await e.authenticate({nonce:a.nonce,domain:a.domain,uri:a.uri,exp:a.expirationTime,iat:a.issuedAt,nbf:a.notBefore,requestId:a.requestId,version:a.version,resources:a.resources,statement:a.statement,chainId:a.chainId,methods:r,chains:[a.chainId,...t.filter(e=>e!==a.chainId)]});if(p.SnackController.showLoading("Authenticating...",{autoClose:!1}),s.N.setConnectedWalletInfo({...l.session.peer.metadata,name:l.session.peer.metadata.name,icon:l.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(n)[0]),l?.auths?.length){let t=l.auths.map(t=>{let r=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud,version:t.p.version||a.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:r,signature:t.s.s,cacao:t}});try{await i.setSessions(t),c.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:g.getSIWXEventProperties()})}catch(t){throw console.error("SIWX:universalProviderAuth - failed to set sessions",t),c.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:g.getSIWXEventProperties()}),await e.disconnect().catch(console.error),t}finally{p.SnackController.hide()}}return!0},getSIWXEventProperties(){let e=o.R.state.activeChain;return{network:o.R.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:s.N.state.preferredAccountTypes?.[e]===n.y_.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){let e=this.getSIWX();e&&await e.setSessions([])}}},92943:function(e,t,r){"use strict";r.d(t,{M:function(){return n}});var i=r(99861);let n={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){let e=n.getActiveNamespace(),t=n.getActiveCaipNetworkId(),r=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:r?isNaN(Number(r))?r:Number(r):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{i.mr.setItem(i.uJ.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=i.mr.getItem(i.uJ.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{i.mr.removeItem(i.uJ.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{i.mr.setItem(i.uJ.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{i.mr.setItem(i.uJ.ACTIVE_CAIP_NETWORK_ID,e),n.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return i.mr.getItem(i.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{i.mr.removeItem(i.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let t=(0,i.Vk)(e);i.mr.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let t=n.getRecentWallets();t.find(t=>t.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),i.mr.setItem(i.uJ.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=i.mr.getItem(i.uJ.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{let r=(0,i.Vk)(e);i.mr.setItem(r,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return i.mr.getItem(i.uJ.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let t=(0,i.Vk)(e);return i.mr.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider(e){try{i.mr.setItem(i.uJ.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return i.mr.getItem(i.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{i.mr.removeItem(i.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return i.mr.getItem(i.uJ.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){let e=i.mr.getItem(i.uJ.ACTIVE_CAIP_NETWORK_ID);return e?.split(":")?.[1]},setConnectionStatus(e){try{i.mr.setItem(i.uJ.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return i.mr.getItem(i.uJ.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=i.mr.getItem(i.uJ.CONNECTED_NAMESPACES);if(!e?.length)return[];return e.split(",")}catch{return[]}},setConnectedNamespaces(e){try{let t=Array.from(new Set(e));i.mr.setItem(i.uJ.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let t=n.getConnectedNamespaces();t.includes(e)||(t.push(e),n.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let t=n.getConnectedNamespaces(),r=t.indexOf(e);r>-1&&(t.splice(r,1),n.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return i.mr.getItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{i.mr.setItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{i.mr.removeItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let t=i.mr.getItem(i.uJ.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let t=n.getBalanceCache();i.mr.setItem(i.uJ.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=n.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let t=n.getBalanceCache();t[e.caipAddress]=e,i.mr.setItem(i.uJ.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let t=i.mr.getItem(i.uJ.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let t=n.getBalanceCache();i.mr.setItem(i.uJ.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=n.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let t=n.getNativeBalanceCache();t[e.caipAddress]=e,i.mr.setItem(i.uJ.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let t=i.mr.getItem(i.uJ.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=n.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;n.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let t=n.getEnsCache();t[e.address]=e,i.mr.setItem(i.uJ.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let t=n.getEnsCache();i.mr.setItem(i.uJ.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let t=i.mr.getItem(i.uJ.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=n.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;n.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let t=n.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},i.mr.setItem(i.uJ.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let t=n.getIdentityCache();i.mr.setItem(i.uJ.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{i.mr.removeItem(i.uJ.PORTFOLIO_CACHE),i.mr.removeItem(i.uJ.NATIVE_BALANCE_CACHE),i.mr.removeItem(i.uJ.ENS_CACHE),i.mr.removeItem(i.uJ.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{i.mr.setItem(i.uJ.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=i.mr.getItem(i.uJ.PREFERRED_ACCOUNT_TYPES);if(!e)return{};return JSON.parse(e)}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,t){try{let r={...n.getConnections(),[t]:e};i.mr.setItem(i.uJ.CONNECTIONS,JSON.stringify(r))}catch(e){console.error("Unable to sync connections to storage",e)}},getConnections(){try{let e=i.mr.getItem(i.uJ.CONNECTIONS);if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Unable to get connections from storage",e),{}}}}},33091:function(e,t,r){"use strict";r.d(t,{g:function(){return d},P:function(){return f}});var i=r(53722),n=r(10913),s=r(19876),o=r(29381),a=r(5969);let l=Object.freeze({enabled:!0,events:[]}),c=new o.V({baseUrl:s.j.getAnalyticsUrl(),clientId:null}),u=(0,i.sj)({...l}),h={state:u,subscribeKey:(e,t)=>(0,n.VW)(u,e,t),async sendError(e,t){if(!u.enabled)return;let r=Date.now();if(u.events.filter(e=>r-new Date(e.properties.timestamp||"").getTime()<6e4).length>=5)return;let i={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};u.events.push(i);try{if("undefined"==typeof window)return;let{projectId:r,sdkType:i,sdkVersion:n}=a.OptionsController.state;await c.post({path:"/e",params:{projectId:r,st:i,sv:n||"html-wagmi-4.2.2"},body:{eventId:s.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}},enable(){u.enabled=!0},disable(){u.enabled=!1},clearEvents(){u.events=[]}};class d extends Error{constructor(e,t,r){super(e),this.name="AppKitError",this.category=t,this.originalError=r,Object.setPrototypeOf(this,d.prototype);let i=!1;if(r instanceof Error&&"string"==typeof r.stack&&r.stack){let e=r.stack,t=e.indexOf("\n");if(t>-1){let r=e.substring(t+1);this.stack=`${this.name}: ${this.message}
${r}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,d):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function p(e,t){let r=e instanceof d?e:new d(e instanceof Error?e.message:String(e),t,e);throw h.sendError(r,r.category),r}function f(e,t="INTERNAL_SDK_ERROR"){let r={};return Object.keys(e).forEach(i=>{let n=e[i];if("function"==typeof n){let e=n;e="AsyncFunction"===n.constructor.name?async(...e)=>{try{return await n(...e)}catch(e){return p(e,t)}}:(...e)=>{try{return n(...e)}catch(e){return p(e,t)}},r[i]=e}else r[i]=n}),r}},16603:function(e,t,r){"use strict";r.r(t),r.d(t,{W3mAllWalletsView:function(){return tL},W3mConnectingWcBasicView:function(){return e3},W3mDownloadsView:function(){return t$}});var i=r(34954),n=r(29324),s=r(19876),o=r(96424),a=r(5969),l=r(92943),c=r(61217);r(57318);var u=r(14670),h=r(95646),d=r(87163),p=r(75466);r(58837),r(2614),r(11265);var f=r(6600),g=r(22817);r(92439),r(42545);var m=i.iv`
  :host {
    position: relative;
    background-color: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    width: var(--local-size);
    height: var(--local-size);
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host > wui-flex {
    overflow: hidden;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host([name='Extension'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  :host([data-wallet-icon='allWallets']) {
    background-color: var(--wui-all-wallets-bg-100);
  }

  :host([data-wallet-icon='allWallets'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  wui-icon[data-parent-size='inherit'] {
    width: 75%;
    height: 75%;
    align-items: center;
  }

  wui-icon[data-parent-size='sm'] {
    width: 18px;
    height: 18px;
  }

  wui-icon[data-parent-size='md'] {
    width: 24px;
    height: 24px;
  }

  wui-icon[data-parent-size='lg'] {
    width: 42px;
    height: 42px;
  }

  wui-icon[data-parent-size='full'] {
    width: 100%;
    height: 100%;
  }

  :host > wui-icon-box {
    position: absolute;
    overflow: hidden;
    right: -1px;
    bottom: -2px;
    z-index: 1;
    border: 2px solid var(--wui-color-bg-150, #1e1f1f);
    padding: 1px;
  }
`,y=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let v=class extends i.oi{constructor(){super(...arguments),this.size="md",this.name="",this.installed=!1,this.badgeSize="xs"}render(){let e="xxs";return e="lg"===this.size?"m":"md"===this.size?"xs":"xxs",this.style.cssText=`
       --local-border-radius: var(--wui-border-radius-${e});
       --local-size: var(--wui-wallet-image-size-${this.size});
   `,this.walletIcon&&(this.dataset.walletIcon=this.walletIcon),i.dy`
      <wui-flex justifyContent="center" alignItems="center"> ${this.templateVisual()} </wui-flex>
    `}templateVisual(){return this.imageSrc?i.dy`<wui-image src=${this.imageSrc} alt=${this.name}></wui-image>`:this.walletIcon?i.dy`<wui-icon
        data-parent-size="md"
        size="md"
        color="inherit"
        name=${this.walletIcon}
      ></wui-icon>`:i.dy`<wui-icon
      data-parent-size=${this.size}
      size="inherit"
      color="inherit"
      name="walletPlaceholder"
    ></wui-icon>`}};v.styles=[f.ZM,f.ET,m],y([(0,n.Cb)()],v.prototype,"size",void 0),y([(0,n.Cb)()],v.prototype,"name",void 0),y([(0,n.Cb)()],v.prototype,"imageSrc",void 0),y([(0,n.Cb)()],v.prototype,"walletIcon",void 0),y([(0,n.Cb)({type:Boolean})],v.prototype,"installed",void 0),y([(0,n.Cb)()],v.prototype,"badgeSize",void 0),v=y([(0,g.M)("wui-wallet-image")],v);var b=i.iv`
  :host {
    position: relative;
    border-radius: var(--wui-border-radius-xxs);
    width: 40px;
    height: 40px;
    overflow: hidden;
    background: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--wui-spacing-4xs);
    padding: 3.75px !important;
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host > wui-wallet-image {
    width: 14px;
    height: 14px;
    border-radius: var(--wui-border-radius-5xs);
  }

  :host > wui-flex {
    padding: 2px;
    position: fixed;
    overflow: hidden;
    left: 34px;
    bottom: 8px;
    background: var(--dark-background-150, #1e1f1f);
    border-radius: 50%;
    z-index: 2;
    display: flex;
  }
`,w=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let E=class extends i.oi{constructor(){super(...arguments),this.walletImages=[]}render(){let e=this.walletImages.length<4;return i.dy`${this.walletImages.slice(0,4).map(({src:e,walletName:t})=>i.dy`
            <wui-wallet-image
              size="inherit"
              imageSrc=${e}
              name=${(0,u.o)(t)}
            ></wui-wallet-image>
          `)}
      ${e?[...Array(4-this.walletImages.length)].map(()=>i.dy` <wui-wallet-image size="inherit" name=""></wui-wallet-image>`):null}
      <wui-flex>
        <wui-icon-box
          size="xxs"
          iconSize="xxs"
          iconcolor="success-100"
          backgroundcolor="success-100"
          icon="checkmark"
          background="opaque"
        ></wui-icon-box>
      </wui-flex>`}};E.styles=[f.ET,b],w([(0,n.Cb)({type:Array})],E.prototype,"walletImages",void 0),E=w([(0,g.M)("wui-all-wallets-image")],E),r(38008);var _=i.iv`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 7px var(--wui-spacing-l) 7px var(--wui-spacing-xs);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-100);
  }

  button > wui-text:nth-child(2) {
    display: flex;
    flex: 1;
  }

  button:disabled {
    background-color: var(--wui-color-gray-glass-015);
    color: var(--wui-color-gray-glass-015);
  }

  button:disabled > wui-tag {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-300);
  }

  wui-icon {
    color: var(--wui-color-fg-200) !important;
  }
`,C=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let S=class extends i.oi{constructor(){super(...arguments),this.walletImages=[],this.imageSrc="",this.name="",this.tabIdx=void 0,this.installed=!1,this.disabled=!1,this.showAllWallets=!1,this.loading=!1,this.loadingSpinnerColor="accent-100"}render(){return i.dy`
      <button ?disabled=${this.disabled} tabindex=${(0,u.o)(this.tabIdx)}>
        ${this.templateAllWallets()} ${this.templateWalletImage()}
        <wui-text variant="paragraph-500" color="inherit">${this.name}</wui-text>
        ${this.templateStatus()}
      </button>
    `}templateAllWallets(){return this.showAllWallets&&this.imageSrc?i.dy` <wui-all-wallets-image .imageeSrc=${this.imageSrc}> </wui-all-wallets-image> `:this.showAllWallets&&this.walletIcon?i.dy` <wui-wallet-image .walletIcon=${this.walletIcon} size="sm"> </wui-wallet-image> `:null}templateWalletImage(){return!this.showAllWallets&&this.imageSrc?i.dy`<wui-wallet-image
        size="sm"
        imageSrc=${this.imageSrc}
        name=${this.name}
        .installed=${this.installed}
      ></wui-wallet-image>`:this.showAllWallets||this.imageSrc?null:i.dy`<wui-wallet-image size="sm" name=${this.name}></wui-wallet-image>`}templateStatus(){return this.loading?i.dy`<wui-loading-spinner
        size="lg"
        color=${this.loadingSpinnerColor}
      ></wui-loading-spinner>`:this.tagLabel&&this.tagVariant?i.dy`<wui-tag variant=${this.tagVariant}>${this.tagLabel}</wui-tag>`:this.icon?i.dy`<wui-icon color="inherit" size="sm" name=${this.icon}></wui-icon>`:null}};S.styles=[f.ET,f.ZM,_],C([(0,n.Cb)({type:Array})],S.prototype,"walletImages",void 0),C([(0,n.Cb)()],S.prototype,"imageSrc",void 0),C([(0,n.Cb)()],S.prototype,"name",void 0),C([(0,n.Cb)()],S.prototype,"tagLabel",void 0),C([(0,n.Cb)()],S.prototype,"tagVariant",void 0),C([(0,n.Cb)()],S.prototype,"icon",void 0),C([(0,n.Cb)()],S.prototype,"walletIcon",void 0),C([(0,n.Cb)()],S.prototype,"tabIdx",void 0),C([(0,n.Cb)({type:Boolean})],S.prototype,"installed",void 0),C([(0,n.Cb)({type:Boolean})],S.prototype,"disabled",void 0),C([(0,n.Cb)({type:Boolean})],S.prototype,"showAllWallets",void 0),C([(0,n.Cb)({type:Boolean})],S.prototype,"loading",void 0),C([(0,n.Cb)({type:String})],S.prototype,"loadingSpinnerColor",void 0),S=C([(0,g.M)("wui-list-wallet")],S);var I=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let x=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.count=o.ApiController.state.count,this.filteredCount=o.ApiController.state.filteredWallets.length,this.isFetchingRecommendedWallets=o.ApiController.state.isFetchingRecommendedWallets,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e),o.ApiController.subscribeKey("count",e=>this.count=e),o.ApiController.subscribeKey("filteredWallets",e=>this.filteredCount=e.length),o.ApiController.subscribeKey("isFetchingRecommendedWallets",e=>this.isFetchingRecommendedWallets=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let e=this.connectors.find(e=>"walletConnect"===e.id),{allWallets:t}=a.OptionsController.state;if(!e||"HIDE"===t||"ONLY_MOBILE"===t&&!s.j.isMobile())return null;let r=o.ApiController.state.featured.length,n=this.count+r,l=this.filteredCount>0?this.filteredCount:n<10?n:10*Math.floor(n/10),c=`${l}`;return this.filteredCount>0?c=`${this.filteredCount}`:l<n&&(c=`${l}+`),i.dy`
      <wui-list-wallet
        name="All Wallets"
        walletIcon="allWallets"
        showAllWallets
        @click=${this.onAllWallets.bind(this)}
        tagLabel=${c}
        tagVariant="shade"
        data-testid="all-wallets"
        tabIdx=${(0,u.o)(this.tabIdx)}
        .loading=${this.isFetchingRecommendedWallets}
        loadingSpinnerColor=${this.isFetchingRecommendedWallets?"fg-300":"accent-100"}
      ></wui-list-wallet>
    `}onAllWallets(){d.X.sendEvent({type:"track",event:"CLICK_ALL_WALLETS"}),p.RouterController.push("AllWallets")}};I([(0,n.Cb)()],x.prototype,"tabIdx",void 0),I([(0,n.SB)()],x.prototype,"connectors",void 0),I([(0,n.SB)()],x.prototype,"count",void 0),I([(0,n.SB)()],x.prototype,"filteredCount",void 0),I([(0,n.SB)()],x.prototype,"isFetchingRecommendedWallets",void 0),x=I([(0,c.Mo)("w3m-all-wallets-widget")],x);var A=r(8112),k=r(43609),O=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let P=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let e=this.connectors.filter(e=>"ANNOUNCED"===e.type);return e?.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${e.filter(k.C.showConnector).map(e=>i.dy`
              <wui-list-wallet
                imageSrc=${(0,u.o)(A.f.getConnectorImage(e))}
                name=${e.name??"Unknown"}
                @click=${()=>this.onConnector(e)}
                tagVariant="success"
                tagLabel="installed"
                data-testid=${`wallet-selector-${e.id}`}
                .installed=${!0}
                tabIdx=${(0,u.o)(this.tabIdx)}
              >
              </wui-list-wallet>
            `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){"walletConnect"===e.id?s.j.isMobile()?p.RouterController.push("AllWallets"):p.RouterController.push("ConnectingWalletConnect"):p.RouterController.push("ConnectingExternal",{connector:e})}};O([(0,n.Cb)()],P.prototype,"tabIdx",void 0),O([(0,n.SB)()],P.prototype,"connectors",void 0),P=O([(0,c.Mo)("w3m-connect-announced-widget")],P);var R=r(25172),N=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let T=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.loading=!1,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e)),s.j.isTelegram()&&s.j.isIos()&&(this.loading=!R.ConnectionController.state.wcUri,this.unsubscribe.push(R.ConnectionController.subscribeKey("wcUri",e=>this.loading=!e)))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let{customWallets:e}=a.OptionsController.state;if(!e?.length)return this.style.cssText="display: none",null;let t=this.filterOutDuplicateWallets(e);return i.dy`<wui-flex flexDirection="column" gap="xs">
      ${t.map(e=>i.dy`
          <wui-list-wallet
            imageSrc=${(0,u.o)(A.f.getWalletImage(e))}
            name=${e.name??"Unknown"}
            @click=${()=>this.onConnectWallet(e)}
            data-testid=${`wallet-selector-${e.id}`}
            tabIdx=${(0,u.o)(this.tabIdx)}
            ?loading=${this.loading}
          >
          </wui-list-wallet>
        `)}
    </wui-flex>`}filterOutDuplicateWallets(e){let t=l.M.getRecentWallets(),r=this.connectors.map(e=>e.info?.rdns).filter(Boolean),i=t.map(e=>e.rdns).filter(Boolean),n=r.concat(i);if(n.includes("io.metamask.mobile")&&s.j.isMobile()){let e=n.indexOf("io.metamask.mobile");n[e]="io.metamask"}return e.filter(e=>!n.includes(String(e?.rdns)))}onConnectWallet(e){this.loading||p.RouterController.push("ConnectingWalletConnect",{wallet:e})}};N([(0,n.Cb)()],T.prototype,"tabIdx",void 0),N([(0,n.SB)()],T.prototype,"connectors",void 0),N([(0,n.SB)()],T.prototype,"loading",void 0),T=N([(0,c.Mo)("w3m-connect-custom-widget")],T);var M=r(29350),L=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let D=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let e=this.connectors.filter(e=>"EXTERNAL"===e.type).filter(k.C.showConnector).filter(e=>e.id!==M.b.CONNECTOR_ID.COINBASE_SDK);return e?.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(e=>i.dy`
            <wui-list-wallet
              imageSrc=${(0,u.o)(A.f.getConnectorImage(e))}
              .installed=${!0}
              name=${e.name??"Unknown"}
              data-testid=${`wallet-selector-external-${e.id}`}
              @click=${()=>this.onConnector(e)}
              tabIdx=${(0,u.o)(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){p.RouterController.push("ConnectingExternal",{connector:e})}};L([(0,n.Cb)()],D.prototype,"tabIdx",void 0),L([(0,n.SB)()],D.prototype,"connectors",void 0),D=L([(0,c.Mo)("w3m-connect-external-widget")],D);var B=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let j=class extends i.oi{constructor(){super(...arguments),this.tabIdx=void 0,this.wallets=[]}render(){return this.wallets.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${this.wallets.map(e=>i.dy`
            <wui-list-wallet
              data-testid=${`wallet-selector-featured-${e.id}`}
              imageSrc=${(0,u.o)(A.f.getWalletImage(e))}
              name=${e.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tabIdx=${(0,u.o)(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){h.ConnectorController.selectWalletConnector(e)}};B([(0,n.Cb)()],j.prototype,"tabIdx",void 0),B([(0,n.Cb)()],j.prototype,"wallets",void 0),j=B([(0,c.Mo)("w3m-connect-featured-widget")],j);var $=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let U=class extends i.oi{constructor(){super(...arguments),this.tabIdx=void 0,this.connectors=[]}render(){let e=this.connectors.filter(k.C.showConnector);return 0===e.length?(this.style.cssText="display: none",null):i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(e=>i.dy`
            <wui-list-wallet
              imageSrc=${(0,u.o)(A.f.getConnectorImage(e))}
              .installed=${!0}
              name=${e.name??"Unknown"}
              tagVariant="success"
              tagLabel="installed"
              data-testid=${`wallet-selector-${e.id}`}
              @click=${()=>this.onConnector(e)}
              tabIdx=${(0,u.o)(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnector(e){h.ConnectorController.setActiveConnector(e),p.RouterController.push("ConnectingExternal",{connector:e})}};$([(0,n.Cb)()],U.prototype,"tabIdx",void 0),$([(0,n.Cb)()],U.prototype,"connectors",void 0),U=$([(0,c.Mo)("w3m-connect-injected-widget")],U);var q=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let H=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let e=this.connectors.filter(e=>"MULTI_CHAIN"===e.type&&"WalletConnect"!==e.name);return e?.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(e=>i.dy`
            <wui-list-wallet
              imageSrc=${(0,u.o)(A.f.getConnectorImage(e))}
              .installed=${!0}
              name=${e.name??"Unknown"}
              tagVariant="shade"
              tagLabel="multichain"
              data-testid=${`wallet-selector-${e.id}`}
              @click=${()=>this.onConnector(e)}
              tabIdx=${(0,u.o)(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){h.ConnectorController.setActiveConnector(e),p.RouterController.push("ConnectingMultiChain")}};q([(0,n.Cb)()],H.prototype,"tabIdx",void 0),q([(0,n.SB)()],H.prototype,"connectors",void 0),H=q([(0,c.Mo)("w3m-connect-multi-chain-widget")],H);var F=r(25620),z=r(94579),W=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let K=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.loading=!1,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e)),s.j.isTelegram()&&s.j.isIos()&&(this.loading=!R.ConnectionController.state.wcUri,this.unsubscribe.push(R.ConnectionController.subscribeKey("wcUri",e=>this.loading=!e)))}render(){let e=l.M.getRecentWallets().filter(e=>!z.J.isExcluded(e)).filter(e=>!this.hasWalletConnector(e)).filter(e=>this.isWalletCompatibleWithCurrentChain(e));return e.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(e=>i.dy`
            <wui-list-wallet
              imageSrc=${(0,u.o)(A.f.getWalletImage(e))}
              name=${e.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tagLabel="recent"
              tagVariant="shade"
              tabIdx=${(0,u.o)(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){this.loading||h.ConnectorController.selectWalletConnector(e)}hasWalletConnector(e){return this.connectors.some(t=>t.id===e.id||t.name===e.name)}isWalletCompatibleWithCurrentChain(e){let t=F.R.state.activeChain;return!t||!e.chains||e.chains.some(e=>t===e.split(":")[0])}};W([(0,n.Cb)()],K.prototype,"tabIdx",void 0),W([(0,n.SB)()],K.prototype,"connectors",void 0),W([(0,n.SB)()],K.prototype,"loading",void 0),K=W([(0,c.Mo)("w3m-connect-recent-widget")],K);var V=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let G=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.wallets=[],this.loading=!1,s.j.isTelegram()&&s.j.isIos()&&(this.loading=!R.ConnectionController.state.wcUri,this.unsubscribe.push(R.ConnectionController.subscribeKey("wcUri",e=>this.loading=!e)))}render(){let{connectors:e}=h.ConnectorController.state,{customWallets:t,featuredWalletIds:r}=a.OptionsController.state,n=l.M.getRecentWallets(),s=e.find(e=>"walletConnect"===e.id),o=e.filter(e=>"INJECTED"===e.type||"ANNOUNCED"===e.type||"MULTI_CHAIN"===e.type).filter(e=>"Browser Wallet"!==e.name);if(!s)return null;if(r||t||!this.wallets.length)return this.style.cssText="display: none",null;let c=o.length+n.length,d=z.J.filterOutDuplicateWallets(this.wallets).slice(0,Math.max(0,2-c));return d.length?i.dy`
      <wui-flex flexDirection="column" gap="xs">
        ${d.map(e=>i.dy`
            <wui-list-wallet
              imageSrc=${(0,u.o)(A.f.getWalletImage(e))}
              name=${e?.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tabIdx=${(0,u.o)(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){if(this.loading)return;let t=h.ConnectorController.getConnector(e.id,e.rdns);t?p.RouterController.push("ConnectingExternal",{connector:t}):p.RouterController.push("ConnectingWalletConnect",{wallet:e})}};V([(0,n.Cb)()],G.prototype,"tabIdx",void 0),V([(0,n.Cb)()],G.prototype,"wallets",void 0),V([(0,n.SB)()],G.prototype,"loading",void 0),G=V([(0,c.Mo)("w3m-connect-recommended-widget")],G);var Z=r(32754),J=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let Y=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.connectorImages=Z.W.state.connectorImages,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e),Z.W.subscribeKey("connectorImages",e=>this.connectorImages=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(s.j.isMobile())return this.style.cssText="display: none",null;let e=this.connectors.find(e=>"walletConnect"===e.id);if(!e)return this.style.cssText="display: none",null;let t=e.imageUrl||this.connectorImages[e?.imageId??""];return i.dy`
      <wui-list-wallet
        imageSrc=${(0,u.o)(t)}
        name=${e.name??"Unknown"}
        @click=${()=>this.onConnector(e)}
        tagLabel="qr code"
        tagVariant="main"
        tabIdx=${(0,u.o)(this.tabIdx)}
        data-testid="wallet-selector-walletconnect"
      >
      </wui-list-wallet>
    `}onConnector(e){h.ConnectorController.setActiveConnector(e),p.RouterController.push("ConnectingWalletConnect")}};J([(0,n.Cb)()],Y.prototype,"tabIdx",void 0),J([(0,n.SB)()],Y.prototype,"connectors",void 0),J([(0,n.SB)()],Y.prototype,"connectorImages",void 0),Y=J([(0,c.Mo)("w3m-connect-walletconnect-widget")],Y);var X=i.iv`
  :host {
    margin-top: var(--wui-spacing-3xs);
  }
  wui-separator {
    margin: var(--wui-spacing-m) calc(var(--wui-spacing-m) * -1) var(--wui-spacing-xs)
      calc(var(--wui-spacing-m) * -1);
    width: calc(100% + var(--wui-spacing-s) * 2);
  }
`,Q=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ee=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=h.ConnectorController.state.connectors,this.recommended=o.ApiController.state.recommended,this.featured=o.ApiController.state.featured,this.unsubscribe.push(h.ConnectorController.subscribeKey("connectors",e=>this.connectors=e),o.ApiController.subscribeKey("recommended",e=>this.recommended=e),o.ApiController.subscribeKey("featured",e=>this.featured=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return i.dy`
      <wui-flex flexDirection="column" gap="xs"> ${this.connectorListTemplate()} </wui-flex>
    `}connectorListTemplate(){let{custom:e,recent:t,announced:r,injected:n,multiChain:s,recommended:o,featured:a,external:l}=k.C.getConnectorsByType(this.connectors,this.recommended,this.featured);return k.C.getConnectorTypeOrder({custom:e,recent:t,announced:r,injected:n,multiChain:s,recommended:o,featured:a,external:l}).map(e=>{switch(e){case"injected":return i.dy`
            ${s.length?i.dy`<w3m-connect-multi-chain-widget
                  tabIdx=${(0,u.o)(this.tabIdx)}
                ></w3m-connect-multi-chain-widget>`:null}
            ${r.length?i.dy`<w3m-connect-announced-widget
                  tabIdx=${(0,u.o)(this.tabIdx)}
                ></w3m-connect-announced-widget>`:null}
            ${n.length?i.dy`<w3m-connect-injected-widget
                  .connectors=${n}
                  tabIdx=${(0,u.o)(this.tabIdx)}
                ></w3m-connect-injected-widget>`:null}
          `;case"walletConnect":return i.dy`<w3m-connect-walletconnect-widget
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-walletconnect-widget>`;case"recent":return i.dy`<w3m-connect-recent-widget
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-recent-widget>`;case"featured":return i.dy`<w3m-connect-featured-widget
            .wallets=${a}
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-featured-widget>`;case"custom":return i.dy`<w3m-connect-custom-widget
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-custom-widget>`;case"external":return i.dy`<w3m-connect-external-widget
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-external-widget>`;case"recommended":return i.dy`<w3m-connect-recommended-widget
            .wallets=${o}
            tabIdx=${(0,u.o)(this.tabIdx)}
          ></w3m-connect-recommended-widget>`;default:return console.warn(`Unknown connector type: ${e}`),null}})}};ee.styles=X,Q([(0,n.Cb)()],ee.prototype,"tabIdx",void 0),Q([(0,n.SB)()],ee.prototype,"connectors",void 0),Q([(0,n.SB)()],ee.prototype,"recommended",void 0),Q([(0,n.SB)()],ee.prototype,"featured",void 0),ee=Q([(0,c.Mo)("w3m-connector-list")],ee);var et=r(44415),er=r(31283),ei=i.iv`
  :host {
    display: inline-flex;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-3xl);
    padding: var(--wui-spacing-3xs);
    position: relative;
    height: 36px;
    min-height: 36px;
    overflow: hidden;
  }

  :host::before {
    content: '';
    position: absolute;
    pointer-events: none;
    top: 4px;
    left: 4px;
    display: block;
    width: var(--local-tab-width);
    height: 28px;
    border-radius: var(--wui-border-radius-3xl);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transform: translateX(calc(var(--local-tab) * var(--local-tab-width)));
    transition: transform var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color, opacity;
  }

  :host([data-type='flex'])::before {
    left: 3px;
    transform: translateX(calc((var(--local-tab) * 34px) + (var(--local-tab) * 4px)));
  }

  :host([data-type='flex']) {
    display: flex;
    padding: 0px 0px 0px 12px;
    gap: 4px;
  }

  :host([data-type='flex']) > button > wui-text {
    position: absolute;
    left: 18px;
    opacity: 0;
  }

  button[data-active='true'] > wui-icon,
  button[data-active='true'] > wui-text {
    color: var(--wui-color-fg-100);
  }

  button[data-active='false'] > wui-icon,
  button[data-active='false'] > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='true']:disabled,
  button[data-active='false']:disabled {
    background-color: transparent;
    opacity: 0.5;
    cursor: not-allowed;
  }

  button[data-active='true']:disabled > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='false']:disabled > wui-text {
    color: var(--wui-color-fg-300);
  }

  button > wui-icon,
  button > wui-text {
    pointer-events: none;
    transition: color var(--wui-e ase-out-power-1) var(--wui-duration-md);
    will-change: color;
  }

  button {
    width: var(--local-tab-width);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
  }

  :host([data-type='flex']) > button {
    width: 34px;
    position: relative;
    display: flex;
    justify-content: flex-start;
  }

  button:hover:enabled,
  button:active:enabled {
    background-color: transparent !important;
  }

  button:hover:enabled > wui-icon,
  button:active:enabled > wui-icon {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button:hover:enabled > wui-text,
  button:active:enabled > wui-text {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button {
    border-radius: var(--wui-border-radius-3xl);
  }
`,en=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let es=class extends i.oi{constructor(){super(...arguments),this.tabs=[],this.onTabChange=()=>null,this.buttons=[],this.disabled=!1,this.localTabWidth="100px",this.activeTab=0,this.isDense=!1}render(){return this.isDense=this.tabs.length>3,this.style.cssText=`
      --local-tab: ${this.activeTab};
      --local-tab-width: ${this.localTabWidth};
    `,this.dataset.type=this.isDense?"flex":"block",this.tabs.map((e,t)=>{let r=t===this.activeTab;return i.dy`
        <button
          ?disabled=${this.disabled}
          @click=${()=>this.onTabClick(t)}
          data-active=${r}
          data-testid="tab-${e.label?.toLowerCase()}"
        >
          ${this.iconTemplate(e)}
          <wui-text variant="small-600" color="inherit"> ${e.label} </wui-text>
        </button>
      `})}firstUpdated(){this.shadowRoot&&this.isDense&&(this.buttons=[...this.shadowRoot.querySelectorAll("button")],setTimeout(()=>{this.animateTabs(0,!0)},0))}iconTemplate(e){return e.icon?i.dy`<wui-icon size="xs" color="inherit" name=${e.icon}></wui-icon>`:null}onTabClick(e){this.buttons&&this.animateTabs(e,!1),this.activeTab=e,this.onTabChange(e)}animateTabs(e,t){let r=this.buttons[this.activeTab],i=this.buttons[e],n=r?.querySelector("wui-text"),s=i?.querySelector("wui-text"),o=i?.getBoundingClientRect(),a=s?.getBoundingClientRect();r&&n&&!t&&e!==this.activeTab&&(n.animate([{opacity:0}],{duration:50,easing:"ease",fill:"forwards"}),r.animate([{width:"34px"}],{duration:500,easing:"ease",fill:"forwards"})),i&&o&&a&&s&&(e!==this.activeTab||t)&&(this.localTabWidth=`${Math.round(o.width+a.width)+6}px`,i.animate([{width:`${o.width+a.width}px`}],{duration:t?0:500,fill:"forwards",easing:"ease"}),s.animate([{opacity:1}],{duration:t?0:125,delay:t?0:200,fill:"forwards",easing:"ease"}))}};es.styles=[f.ET,f.ZM,ei],en([(0,n.Cb)({type:Array})],es.prototype,"tabs",void 0),en([(0,n.Cb)()],es.prototype,"onTabChange",void 0),en([(0,n.Cb)({type:Array})],es.prototype,"buttons",void 0),en([(0,n.Cb)({type:Boolean})],es.prototype,"disabled",void 0),en([(0,n.Cb)()],es.prototype,"localTabWidth",void 0),en([(0,n.SB)()],es.prototype,"activeTab",void 0),en([(0,n.SB)()],es.prototype,"isDense",void 0),es=en([(0,g.M)("wui-tabs")],es);var eo=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ea=class extends i.oi{constructor(){super(...arguments),this.platformTabs=[],this.unsubscribe=[],this.platforms=[],this.onSelectPlatfrom=void 0}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){let e=this.generateTabs();return i.dy`
      <wui-flex justifyContent="center" .padding=${["0","0","l","0"]}>
        <wui-tabs .tabs=${e} .onTabChange=${this.onTabChange.bind(this)}></wui-tabs>
      </wui-flex>
    `}generateTabs(){let e=this.platforms.map(e=>"browser"===e?{label:"Browser",icon:"extension",platform:"browser"}:"mobile"===e?{label:"Mobile",icon:"mobile",platform:"mobile"}:"qrcode"===e?{label:"Mobile",icon:"mobile",platform:"qrcode"}:"web"===e?{label:"Webapp",icon:"browser",platform:"web"}:"desktop"===e?{label:"Desktop",icon:"desktop",platform:"desktop"}:{label:"Browser",icon:"extension",platform:"unsupported"});return this.platformTabs=e.map(({platform:e})=>e),e}onTabChange(e){let t=this.platformTabs[e];t&&this.onSelectPlatfrom?.(t)}};eo([(0,n.Cb)({type:Array})],ea.prototype,"platforms",void 0),eo([(0,n.Cb)()],ea.prototype,"onSelectPlatfrom",void 0),ea=eo([(0,c.Mo)("w3m-connecting-header")],ea);var el=r(96501);r(11266);var ec=i.iv`
  :host {
    width: var(--local-width);
    position: relative;
  }

  button {
    border: none;
    border-radius: var(--local-border-radius);
    width: var(--local-width);
    white-space: nowrap;
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='md'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-l);
    height: 36px;
  }

  button[data-size='md'][data-icon-left='true'][data-icon-right='false'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-s);
  }

  button[data-size='md'][data-icon-right='true'][data-icon-left='false'] {
    padding: 8.2px var(--wui-spacing-s) 9px var(--wui-spacing-l);
  }

  button[data-size='lg'] {
    padding: var(--wui-spacing-m) var(--wui-spacing-2l);
    height: 48px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='inverse'] {
    background-color: var(--wui-color-inverse-100);
    color: var(--wui-color-inverse-000);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='accent-error'] {
    background: var(--wui-color-error-glass-015);
    color: var(--wui-color-error-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-error-glass-010);
  }

  button[data-variant='accent-success'] {
    background: var(--wui-color-success-glass-015);
    color: var(--wui-color-success-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-success-glass-010);
  }

  button[data-variant='neutral'] {
    background: transparent;
    color: var(--wui-color-fg-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  /* -- Focus states --------------------------------------------------- */
  button[data-variant='main']:focus-visible:enabled {
    background-color: var(--wui-color-accent-090);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='inverse']:focus-visible:enabled {
    background-color: var(--wui-color-inverse-100);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent']:focus-visible:enabled {
    background-color: var(--wui-color-accent-glass-010);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent-error']:focus-visible:enabled {
    background: var(--wui-color-error-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-error-100),
      0 0 0 4px var(--wui-color-error-glass-020);
  }
  button[data-variant='accent-success']:focus-visible:enabled {
    background: var(--wui-color-success-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-success-100),
      0 0 0 4px var(--wui-color-success-glass-020);
  }
  button[data-variant='neutral']:focus-visible:enabled {
    background: var(--wui-color-gray-glass-005);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-gray-glass-002);
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='accent-error']:hover:enabled {
      background: var(--wui-color-error-glass-020);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-error']:active:enabled {
      background: var(--wui-color-error-glass-030);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-success']:hover:enabled {
      background: var(--wui-color-success-glass-020);
      color: var(--wui-color-success-100);
    }

    button[data-variant='accent-success']:active:enabled {
      background: var(--wui-color-success-glass-030);
      color: var(--wui-color-success-100);
    }

    button[data-variant='neutral']:hover:enabled {
      background: var(--wui-color-gray-glass-002);
    }

    button[data-variant='neutral']:active:enabled {
      background: var(--wui-color-gray-glass-005);
    }

    button[data-size='lg'][data-icon-left='true'][data-icon-right='false'] {
      padding-left: var(--wui-spacing-m);
    }

    button[data-size='lg'][data-icon-right='true'][data-icon-left='false'] {
      padding-right: var(--wui-spacing-m);
    }
  }

  /* -- Disabled state --------------------------------------------------- */
  button:disabled {
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    color: var(--wui-color-gray-glass-020);
    cursor: not-allowed;
  }

  button > wui-text {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  ::slotted(*) {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  wui-loading-spinner {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: var(--local-opacity-000);
  }
`,eu=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eh={main:"inverse-100",inverse:"inverse-000",accent:"accent-100","accent-error":"error-100","accent-success":"success-100",neutral:"fg-100",disabled:"gray-glass-020"},ed={lg:"paragraph-600",md:"small-600"},ep={lg:"md",md:"md"},ef=class extends i.oi{constructor(){super(...arguments),this.size="lg",this.disabled=!1,this.fullWidth=!1,this.loading=!1,this.variant="main",this.hasIconLeft=!1,this.hasIconRight=!1,this.borderRadius="m"}render(){this.style.cssText=`
    --local-width: ${this.fullWidth?"100%":"auto"};
    --local-opacity-100: ${this.loading?0:1};
    --local-opacity-000: ${this.loading?1:0};
    --local-border-radius: var(--wui-border-radius-${this.borderRadius});
    `;let e=this.textVariant??ed[this.size];return i.dy`
      <button
        data-variant=${this.variant}
        data-icon-left=${this.hasIconLeft}
        data-icon-right=${this.hasIconRight}
        data-size=${this.size}
        ?disabled=${this.disabled}
      >
        ${this.loadingTemplate()}
        <slot name="iconLeft" @slotchange=${()=>this.handleSlotLeftChange()}></slot>
        <wui-text variant=${e} color="inherit">
          <slot></slot>
        </wui-text>
        <slot name="iconRight" @slotchange=${()=>this.handleSlotRightChange()}></slot>
      </button>
    `}handleSlotLeftChange(){this.hasIconLeft=!0}handleSlotRightChange(){this.hasIconRight=!0}loadingTemplate(){if(this.loading){let e=ep[this.size],t=this.disabled?eh.disabled:eh[this.variant];return i.dy`<wui-loading-spinner color=${t} size=${e}></wui-loading-spinner>`}return i.dy``}};ef.styles=[f.ET,f.ZM,ec],eu([(0,n.Cb)()],ef.prototype,"size",void 0),eu([(0,n.Cb)({type:Boolean})],ef.prototype,"disabled",void 0),eu([(0,n.Cb)({type:Boolean})],ef.prototype,"fullWidth",void 0),eu([(0,n.Cb)({type:Boolean})],ef.prototype,"loading",void 0),eu([(0,n.Cb)()],ef.prototype,"variant",void 0),eu([(0,n.Cb)({type:Boolean})],ef.prototype,"hasIconLeft",void 0),eu([(0,n.Cb)({type:Boolean})],ef.prototype,"hasIconRight",void 0),eu([(0,n.Cb)()],ef.prototype,"borderRadius",void 0),eu([(0,n.Cb)()],ef.prototype,"textVariant",void 0),ef=eu([(0,g.M)("wui-button")],ef),r(72888);var eg=i.iv`
  button {
    padding: var(--wui-spacing-4xs) var(--wui-spacing-xxs);
    border-radius: var(--wui-border-radius-3xs);
    background-color: transparent;
    color: var(--wui-color-accent-100);
  }

  button:disabled {
    background-color: transparent;
    color: var(--wui-color-gray-glass-015);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-005);
  }
`,em=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ey=class extends i.oi{constructor(){super(...arguments),this.tabIdx=void 0,this.disabled=!1,this.color="inherit"}render(){return i.dy`
      <button ?disabled=${this.disabled} tabindex=${(0,u.o)(this.tabIdx)}>
        <slot name="iconLeft"></slot>
        <wui-text variant="small-600" color=${this.color}>
          <slot></slot>
        </wui-text>
        <slot name="iconRight"></slot>
      </button>
    `}};ey.styles=[f.ET,f.ZM,eg],em([(0,n.Cb)()],ey.prototype,"tabIdx",void 0),em([(0,n.Cb)({type:Boolean})],ey.prototype,"disabled",void 0),em([(0,n.Cb)()],ey.prototype,"color",void 0),ey=em([(0,g.M)("wui-link")],ey);var ev=i.iv`
  :host {
    display: block;
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  svg {
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  rect {
    fill: none;
    stroke: var(--wui-color-accent-100);
    stroke-width: 4px;
    stroke-linecap: round;
    animation: dash 1s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0px;
    }
  }
`,eb=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ew=class extends i.oi{constructor(){super(...arguments),this.radius=36}render(){return this.svgLoaderTemplate()}svgLoaderTemplate(){let e=this.radius>50?50:this.radius,t=36-e;return i.dy`
      <svg viewBox="0 0 110 110" width="110" height="110">
        <rect
          x="2"
          y="2"
          width="106"
          height="106"
          rx=${e}
          stroke-dasharray="${116+t} ${245+t}"
          stroke-dashoffset=${360+1.75*t}
        />
      </svg>
    `}};ew.styles=[f.ET,ev],eb([(0,n.Cb)({type:Number})],ew.prototype,"radius",void 0),ew=eb([(0,g.M)("wui-loading-thumbnail")],ew),r(98906);var eE=i.iv`
  button {
    border: none;
    border-radius: var(--wui-border-radius-3xl);
  }

  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='gray'] {
    background-color: transparent;
    color: var(--wui-color-fg-200);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='shade'] {
    background-color: transparent;
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-size='sm'] {
    height: 32px;
    padding: 0 var(--wui-spacing-s);
  }

  button[data-size='md'] {
    height: 40px;
    padding: 0 var(--wui-spacing-l);
  }

  button[data-size='sm'] > wui-image {
    width: 16px;
    height: 16px;
  }

  button[data-size='md'] > wui-image {
    width: 24px;
    height: 24px;
  }

  button[data-size='sm'] > wui-icon {
    width: 12px;
    height: 12px;
  }

  button[data-size='md'] > wui-icon {
    width: 14px;
    height: 14px;
  }

  wui-image {
    border-radius: var(--wui-border-radius-3xl);
    overflow: hidden;
  }

  button.disabled > wui-icon,
  button.disabled > wui-image {
    filter: grayscale(1);
  }

  button[data-variant='main'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-accent-090);
  }

  button[data-variant='shade'] > wui-image,
  button[data-variant='gray'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:focus-visible {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='shade']:focus-visible,
    button[data-variant='gray']:focus-visible,
    button[data-variant='shade']:hover,
    button[data-variant='gray']:hover {
      background-color: var(--wui-color-gray-glass-002);
    }

    button[data-variant='gray']:active,
    button[data-variant='shade']:active {
      background-color: var(--wui-color-gray-glass-005);
    }
  }

  button.disabled {
    color: var(--wui-color-gray-glass-020);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    pointer-events: none;
  }
`,e_=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eC=class extends i.oi{constructor(){super(...arguments),this.variant="accent",this.imageSrc="",this.disabled=!1,this.icon="externalLink",this.size="md",this.text=""}render(){let e="sm"===this.size?"small-600":"paragraph-600";return i.dy`
      <button
        class=${this.disabled?"disabled":""}
        data-variant=${this.variant}
        data-size=${this.size}
      >
        ${this.imageSrc?i.dy`<wui-image src=${this.imageSrc}></wui-image>`:null}
        <wui-text variant=${e} color="inherit"> ${this.text} </wui-text>
        <wui-icon name=${this.icon} color="inherit" size="inherit"></wui-icon>
      </button>
    `}};eC.styles=[f.ET,f.ZM,eE],e_([(0,n.Cb)()],eC.prototype,"variant",void 0),e_([(0,n.Cb)()],eC.prototype,"imageSrc",void 0),e_([(0,n.Cb)({type:Boolean})],eC.prototype,"disabled",void 0),e_([(0,n.Cb)()],eC.prototype,"icon",void 0),e_([(0,n.Cb)()],eC.prototype,"size",void 0),e_([(0,n.Cb)()],eC.prototype,"text",void 0),eC=e_([(0,g.M)("wui-chip-button")],eC);var eS=i.iv`
  wui-flex {
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
  }
`,eI=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ex=class extends i.oi{constructor(){super(...arguments),this.disabled=!1,this.label="",this.buttonLabel=""}render(){return i.dy`
      <wui-flex
        justifyContent="space-between"
        alignItems="center"
        .padding=${["1xs","2l","1xs","2l"]}
      >
        <wui-text variant="paragraph-500" color="fg-200">${this.label}</wui-text>
        <wui-chip-button size="sm" variant="shade" text=${this.buttonLabel} icon="chevronRight">
        </wui-chip-button>
      </wui-flex>
    `}};ex.styles=[f.ET,f.ZM,eS],eI([(0,n.Cb)({type:Boolean})],ex.prototype,"disabled",void 0),eI([(0,n.Cb)()],ex.prototype,"label",void 0),eI([(0,n.Cb)()],ex.prototype,"buttonLabel",void 0),ex=eI([(0,g.M)("wui-cta-button")],ex);var eA=i.iv`
  :host {
    display: block;
    padding: 0 var(--wui-spacing-xl) var(--wui-spacing-xl);
  }
`,ek=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eO=class extends i.oi{constructor(){super(...arguments),this.wallet=void 0}render(){if(!this.wallet)return this.style.display="none",null;let{name:e,app_store:t,play_store:r,chrome_store:n,homepage:o}=this.wallet,a=s.j.isMobile(),l=s.j.isIos(),u=s.j.isAndroid(),h=[t,r,o,n].filter(Boolean).length>1,d=c.Hg.getTruncateString({string:e,charsStart:12,charsEnd:0,truncate:"end"});return h&&!a?i.dy`
        <wui-cta-button
          label=${`Don't have ${d}?`}
          buttonLabel="Get"
          @click=${()=>p.RouterController.push("Downloads",{wallet:this.wallet})}
        ></wui-cta-button>
      `:!h&&o?i.dy`
        <wui-cta-button
          label=${`Don't have ${d}?`}
          buttonLabel="Get"
          @click=${this.onHomePage.bind(this)}
        ></wui-cta-button>
      `:t&&l?i.dy`
        <wui-cta-button
          label=${`Don't have ${d}?`}
          buttonLabel="Get"
          @click=${this.onAppStore.bind(this)}
        ></wui-cta-button>
      `:r&&u?i.dy`
        <wui-cta-button
          label=${`Don't have ${d}?`}
          buttonLabel="Get"
          @click=${this.onPlayStore.bind(this)}
        ></wui-cta-button>
      `:(this.style.display="none",null)}onAppStore(){this.wallet?.app_store&&s.j.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&s.j.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&s.j.openHref(this.wallet.homepage,"_blank")}};eO.styles=[eA],ek([(0,n.Cb)({type:Object})],eO.prototype,"wallet",void 0),eO=ek([(0,c.Mo)("w3m-mobile-download-links")],eO);var eP=i.iv`
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(3px);
    }
    50% {
      transform: translateX(-3px);
    }
    75% {
      transform: translateX(3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-loading-thumbnail {
    position: absolute;
  }

  wui-icon-box {
    position: absolute;
    right: calc(var(--wui-spacing-3xs) * -1);
    bottom: calc(var(--wui-spacing-3xs) * -1);
    opacity: 0;
    transform: scale(0.5);
    transition-property: opacity, transform;
    transition-duration: var(--wui-duration-lg);
    transition-timing-function: var(--wui-ease-out-power-2);
    will-change: opacity, transform;
  }

  wui-text[align='center'] {
    width: 100%;
    padding: 0px var(--wui-spacing-l);
  }

  [data-error='true'] wui-icon-box {
    opacity: 1;
    transform: scale(1);
  }

  [data-error='true'] > wui-flex:first-child {
    animation: shake 250ms cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  }

  [data-retry='false'] wui-link {
    display: none;
  }

  [data-retry='true'] wui-link {
    display: block;
    opacity: 1;
  }
`,eR=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};class eN extends i.oi{constructor(){super(),this.wallet=p.RouterController.state.data?.wallet,this.connector=p.RouterController.state.data?.connector,this.timeout=void 0,this.secondaryBtnIcon="refresh",this.onConnect=void 0,this.onRender=void 0,this.onAutoConnect=void 0,this.isWalletConnect=!0,this.unsubscribe=[],this.imageSrc=A.f.getWalletImage(this.wallet)??A.f.getConnectorImage(this.connector),this.name=this.wallet?.name??this.connector?.name??"Wallet",this.isRetrying=!1,this.uri=R.ConnectionController.state.wcUri,this.error=R.ConnectionController.state.wcError,this.ready=!1,this.showRetry=!1,this.secondaryBtnLabel="Try again",this.secondaryLabel="Accept connection request in the wallet",this.isLoading=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(...[R.ConnectionController.subscribeKey("wcUri",e=>{this.uri=e,this.isRetrying&&this.onRetry&&(this.isRetrying=!1,this.onConnect?.())}),R.ConnectionController.subscribeKey("wcError",e=>this.error=e)]),(s.j.isTelegram()||s.j.isSafari())&&s.j.isIos()&&R.ConnectionController.state.wcUri&&this.onConnect?.()}firstUpdated(){this.onAutoConnect?.(),this.showRetry=!this.onAutoConnect}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),R.ConnectionController.setWcError(!1),clearTimeout(this.timeout)}render(){this.onRender?.(),this.onShowRetry();let e=this.error?"Connection can be declined if a previous request is still active":this.secondaryLabel,t=`Continue in ${this.name}`;return this.error&&(t="Connection declined"),i.dy`
      <wui-flex
        data-error=${(0,u.o)(this.error)}
        data-retry=${this.showRetry}
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-flex justifyContent="center" alignItems="center">
          <wui-wallet-image size="lg" imageSrc=${(0,u.o)(this.imageSrc)}></wui-wallet-image>

          ${this.error?null:this.loaderTemplate()}

          <wui-icon-box
            backgroundColor="error-100"
            background="opaque"
            iconColor="error-100"
            icon="close"
            size="sm"
            border
            borderColor="wui-color-bg-125"
          ></wui-icon-box>
        </wui-flex>

        <wui-flex flexDirection="column" alignItems="center" gap="xs">
          <wui-text variant="paragraph-500" color=${this.error?"error-100":"fg-100"}>
            ${t}
          </wui-text>
          <wui-text align="center" variant="small-500" color="fg-200">${e}</wui-text>
        </wui-flex>

        ${this.secondaryBtnLabel?i.dy`
              <wui-button
                variant="accent"
                size="md"
                ?disabled=${this.isRetrying||this.isLoading}
                @click=${this.onTryAgain.bind(this)}
                data-testid="w3m-connecting-widget-secondary-button"
              >
                <wui-icon color="inherit" slot="iconLeft" name=${this.secondaryBtnIcon}></wui-icon>
                ${this.secondaryBtnLabel}
              </wui-button>
            `:null}
      </wui-flex>

      ${this.isWalletConnect?i.dy`
            <wui-flex .padding=${["0","xl","xl","xl"]} justifyContent="center">
              <wui-link @click=${this.onCopyUri} color="fg-200" data-testid="wui-link-copy">
                <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
                Copy link
              </wui-link>
            </wui-flex>
          `:null}

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onShowRetry(){if(this.error&&!this.showRetry){this.showRetry=!0;let e=this.shadowRoot?.querySelector("wui-button");e?.animate([{opacity:0},{opacity:1}],{fill:"forwards",easing:"ease"})}}onTryAgain(){R.ConnectionController.setWcError(!1),this.onRetry?(this.isRetrying=!0,this.onRetry?.()):this.onConnect?.()}loaderTemplate(){let e=el.ThemeController.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4;return i.dy`<wui-loading-thumbnail radius=${9*t}></wui-loading-thumbnail>`}onCopyUri(){try{this.uri&&(s.j.copyToClopboard(this.uri),er.SnackController.showSuccess("Link copied"))}catch{er.SnackController.showError("Failed to copy")}}}eN.styles=eP,eR([(0,n.SB)()],eN.prototype,"isRetrying",void 0),eR([(0,n.SB)()],eN.prototype,"uri",void 0),eR([(0,n.SB)()],eN.prototype,"error",void 0),eR([(0,n.SB)()],eN.prototype,"ready",void 0),eR([(0,n.SB)()],eN.prototype,"showRetry",void 0),eR([(0,n.SB)()],eN.prototype,"secondaryBtnLabel",void 0),eR([(0,n.SB)()],eN.prototype,"secondaryLabel",void 0),eR([(0,n.SB)()],eN.prototype,"isLoading",void 0),eR([(0,n.Cb)({type:Boolean})],eN.prototype,"isMobile",void 0),eR([(0,n.Cb)()],eN.prototype,"onRetry",void 0);let eT=class extends eN{constructor(){if(super(),!this.wallet)throw Error("w3m-connecting-wc-browser: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onAutoConnect=this.onConnectProxy.bind(this),d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}async onConnectProxy(){try{this.error=!1;let{connectors:e}=h.ConnectorController.state,t=e.find(e=>"ANNOUNCED"===e.type&&e.info?.rdns===this.wallet?.rdns||"INJECTED"===e.type||e.name===this.wallet?.name);if(t)await R.ConnectionController.connectExternal(t,t.chain);else throw Error("w3m-connecting-wc-browser: No connector found");et.I.close(),d.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"browser",name:this.wallet?.name||"Unknown"}})}catch(e){d.X.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:e?.message??"Unknown"}}),this.error=!0}}};eT=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,c.Mo)("w3m-connecting-wc-browser")],eT);let eM=class extends eN{constructor(){if(super(),!this.wallet)throw Error("w3m-connecting-wc-desktop: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onRender=this.onRenderProxy.bind(this),d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"desktop"}})}onRenderProxy(){!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onConnectProxy(){if(this.wallet?.desktop_link&&this.uri)try{this.error=!1;let{desktop_link:e,name:t}=this.wallet,{redirect:r,href:i}=s.j.formatNativeUrl(e,this.uri);R.ConnectionController.setWcLinking({name:t,href:i}),R.ConnectionController.setRecentWallet(this.wallet),s.j.openHref(r,"_blank")}catch{this.error=!0}}};eM=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,c.Mo)("w3m-connecting-wc-desktop")],eM);var eL=r(15623),eD=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eB=class extends eN{constructor(){if(super(),this.btnLabelTimeout=void 0,this.redirectDeeplink=void 0,this.redirectUniversalLink=void 0,this.target=void 0,this.preferUniversalLinks=a.OptionsController.state.experimental_preferUniversalLinks,this.isLoading=!0,this.onConnect=()=>{if(this.wallet?.mobile_link&&this.uri)try{this.error=!1;let{mobile_link:e,link_mode:t,name:r}=this.wallet,{redirect:i,redirectUniversalLink:n,href:o}=s.j.formatNativeUrl(e,this.uri,t);this.redirectDeeplink=i,this.redirectUniversalLink=n,this.target=s.j.isIframe()?"_top":"_self",R.ConnectionController.setWcLinking({name:r,href:o}),R.ConnectionController.setRecentWallet(this.wallet),this.preferUniversalLinks&&this.redirectUniversalLink?s.j.openHref(this.redirectUniversalLink,this.target):s.j.openHref(this.redirectDeeplink,this.target)}catch(e){d.X.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:e instanceof Error?e.message:"Error parsing the deeplink",uri:this.uri,mobile_link:this.wallet.mobile_link,name:this.wallet.name}}),this.error=!0}},!this.wallet)throw Error("w3m-connecting-wc-mobile: No wallet provided");this.secondaryBtnLabel="Open",this.secondaryLabel=eL.bq.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.onHandleURI(),this.unsubscribe.push(R.ConnectionController.subscribeKey("wcUri",()=>{this.onHandleURI()})),d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"mobile"}})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.btnLabelTimeout)}onHandleURI(){this.isLoading=!this.uri,!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onTryAgain(){R.ConnectionController.setWcError(!1),this.onConnect?.()}};eD([(0,n.SB)()],eB.prototype,"redirectDeeplink",void 0),eD([(0,n.SB)()],eB.prototype,"redirectUniversalLink",void 0),eD([(0,n.SB)()],eB.prototype,"target",void 0),eD([(0,n.SB)()],eB.prototype,"preferUniversalLinks",void 0),eD([(0,n.SB)()],eB.prototype,"isLoading",void 0),eB=eD([(0,c.Mo)("w3m-connecting-wc-mobile")],eB);var ej=r(75298);function e$(e,t,r){return e!==t&&(e-t<0?t-e:e-t)<=r+.1}let eU={generate({uri:e,size:t,logoSize:r,dotColor:n="#141414"}){let s=[],o=function(e,t){let r=Array.prototype.slice.call(ej.create(e,{errorCorrectionLevel:"Q"}).modules.data,0),i=Math.sqrt(r.length);return r.reduce((e,t,r)=>(r%i==0?e.push([t]):e[e.length-1].push(t))&&e,[])}(e,0),a=t/o.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:e,y:t})=>{let r=(o.length-7)*a*e,c=(o.length-7)*a*t;for(let e=0;e<l.length;e+=1){let t=a*(7-2*e);s.push(i.YP`
            <rect
              fill=${2===e?n:"transparent"}
              width=${0===e?t-5:t}
              rx= ${0===e?(t-5)*.45:.45*t}
              ry= ${0===e?(t-5)*.45:.45*t}
              stroke=${n}
              stroke-width=${0===e?5:0}
              height=${0===e?t-5:t}
              x= ${0===e?c+a*e+2.5:c+a*e}
              y= ${0===e?r+a*e+2.5:r+a*e}
            />
          `)}});let c=Math.floor((r+25)/a),u=o.length/2-c/2,h=o.length/2+c/2-1,d=[];o.forEach((e,t)=>{e.forEach((e,r)=>{!o[t][r]||t<7&&r<7||t>o.length-8&&r<7||t<7&&r>o.length-8||t>u&&t<h&&r>u&&r<h||d.push([t*a+a/2,r*a+a/2])})});let p={};return d.forEach(([e,t])=>{p[e]?p[e]?.push(t):p[e]=[t]}),Object.entries(p).map(([e,t])=>{let r=t.filter(e=>t.every(t=>!e$(e,t,a)));return[Number(e),r]}).forEach(([e,t])=>{t.forEach(t=>{s.push(i.YP`<circle cx=${e} cy=${t} fill=${n} r=${a/2.5} />`)})}),Object.entries(p).filter(([e,t])=>t.length>1).map(([e,t])=>{let r=t.filter(e=>t.some(t=>e$(e,t,a)));return[Number(e),r]}).map(([e,t])=>{t.sort((e,t)=>e<t?-1:1);let r=[];for(let e of t){let t=r.find(t=>t.some(t=>e$(e,t,a)));t?t.push(e):r.push([e])}return[e,r.map(e=>[e[0],e[e.length-1]])]}).forEach(([e,t])=>{t.forEach(([t,r])=>{s.push(i.YP`
              <line
                x1=${e}
                x2=${e}
                y1=${t}
                y2=${r}
                stroke=${n}
                stroke-width=${a/1.25}
                stroke-linecap="round"
              />
            `)})}),s}};var eq=i.iv`
  :host {
    position: relative;
    user-select: none;
    display: block;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    width: var(--local-size);
  }

  :host([data-theme='dark']) {
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px);
    background-color: var(--wui-color-inverse-100);
    padding: var(--wui-spacing-l);
  }

  :host([data-theme='light']) {
    box-shadow: 0 0 0 1px var(--wui-color-bg-125);
    background-color: var(--wui-color-bg-125);
  }

  :host([data-clear='true']) > wui-icon {
    display: none;
  }

  svg:first-child,
  wui-image,
  wui-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
  }

  wui-image {
    width: 25%;
    height: 25%;
    border-radius: var(--wui-border-radius-xs);
  }

  wui-icon {
    width: 100%;
    height: 100%;
    color: var(--local-icon-color) !important;
    transform: translateY(-50%) translateX(-50%) scale(0.25);
  }
`,eH=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eF=class extends i.oi{constructor(){super(...arguments),this.uri="",this.size=0,this.theme="dark",this.imageSrc=void 0,this.alt=void 0,this.arenaClear=void 0,this.farcaster=void 0}render(){return this.dataset.theme=this.theme,this.dataset.clear=String(this.arenaClear),this.style.cssText=`
     --local-size: ${this.size}px;
     --local-icon-color: ${this.color??"#3396ff"}
    `,i.dy`${this.templateVisual()} ${this.templateSvg()}`}templateSvg(){let e="light"===this.theme?this.size:this.size-32;return i.YP`
      <svg height=${e} width=${e}>
        ${eU.generate({uri:this.uri,size:e,logoSize:this.arenaClear?0:e/4,dotColor:this.color})}
      </svg>
    `}templateVisual(){return this.imageSrc?i.dy`<wui-image src=${this.imageSrc} alt=${this.alt??"logo"}></wui-image>`:this.farcaster?i.dy`<wui-icon
        class="farcaster"
        size="inherit"
        color="inherit"
        name="farcaster"
      ></wui-icon>`:i.dy`<wui-icon size="inherit" color="inherit" name="walletConnect"></wui-icon>`}};eF.styles=[f.ET,eq],eH([(0,n.Cb)()],eF.prototype,"uri",void 0),eH([(0,n.Cb)({type:Number})],eF.prototype,"size",void 0),eH([(0,n.Cb)()],eF.prototype,"theme",void 0),eH([(0,n.Cb)()],eF.prototype,"imageSrc",void 0),eH([(0,n.Cb)()],eF.prototype,"alt",void 0),eH([(0,n.Cb)()],eF.prototype,"color",void 0),eH([(0,n.Cb)({type:Boolean})],eF.prototype,"arenaClear",void 0),eH([(0,n.Cb)({type:Boolean})],eF.prototype,"farcaster",void 0),eF=eH([(0,g.M)("wui-qr-code")],eF);var ez=i.iv`
  :host {
    display: block;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-200) 5%,
      var(--wui-color-bg-200) 48%,
      var(--wui-color-bg-300) 55%,
      var(--wui-color-bg-300) 60%,
      var(--wui-color-bg-300) calc(60% + 10px),
      var(--wui-color-bg-200) calc(60% + 12px),
      var(--wui-color-bg-200) 100%
    );
    background-size: 250%;
    animation: shimmer 3s linear infinite reverse;
  }

  :host([variant='light']) {
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-150) 5%,
      var(--wui-color-bg-150) 48%,
      var(--wui-color-bg-200) 55%,
      var(--wui-color-bg-200) 60%,
      var(--wui-color-bg-200) calc(60% + 10px),
      var(--wui-color-bg-150) calc(60% + 12px),
      var(--wui-color-bg-150) 100%
    );
    background-size: 250%;
  }

  @keyframes shimmer {
    from {
      background-position: -250% 0;
    }
    to {
      background-position: 250% 0;
    }
  }
`,eW=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eK=class extends i.oi{constructor(){super(...arguments),this.width="",this.height="",this.borderRadius="m",this.variant="default"}render(){return this.style.cssText=`
      width: ${this.width};
      height: ${this.height};
      border-radius: clamp(0px,var(--wui-border-radius-${this.borderRadius}), 40px);
    `,i.dy`<slot></slot>`}};eK.styles=[ez],eW([(0,n.Cb)()],eK.prototype,"width",void 0),eW([(0,n.Cb)()],eK.prototype,"height",void 0),eW([(0,n.Cb)()],eK.prototype,"borderRadius",void 0),eW([(0,n.Cb)()],eK.prototype,"variant",void 0),eK=eW([(0,g.M)("wui-shimmer")],eK);var eV=i.iv`
  .reown-logo {
    height: var(--wui-spacing-xxl);
  }

  a {
    text-decoration: none;
    cursor: pointer;
  }

  a:hover {
    opacity: 0.9;
  }
`;let eG=class extends i.oi{render(){return i.dy`
      <a
        data-testid="ux-branding-reown"
        href=${"https://reown.com"}
        rel="noreferrer"
        target="_blank"
        style="text-decoration: none;"
      >
        <wui-flex
          justifyContent="center"
          alignItems="center"
          gap="xs"
          .padding=${["0","0","l","0"]}
        >
          <wui-text variant="small-500" color="fg-100"> UX by </wui-text>
          <wui-icon name="reown" size="xxxl" class="reown-logo"></wui-icon>
        </wui-flex>
      </a>
    `}};eG.styles=[f.ET,f.ZM,eV],eG=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,g.M)("wui-ux-by-reown")],eG);var eZ=i.iv`
  @keyframes fadein {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  wui-shimmer {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px) !important;
  }

  wui-qr-code {
    opacity: 0;
    animation-duration: 200ms;
    animation-timing-function: ease;
    animation-name: fadein;
    animation-fill-mode: forwards;
  }
`;let eJ=class extends eN{constructor(){super(),this.forceUpdate=()=>{this.requestUpdate()},window.addEventListener("resize",this.forceUpdate),d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet?.name??"WalletConnect",platform:"qrcode"}})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe?.forEach(e=>e()),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),i.dy`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["0","xl","xl","xl"]}
        gap="xl"
      >
        <wui-shimmer borderRadius="l" width="100%"> ${this.qrCodeTemplate()} </wui-shimmer>

        <wui-text variant="paragraph-500" color="fg-100">
          Scan this QR Code with your phone
        </wui-text>
        ${this.copyTemplate()}
      </wui-flex>
      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout(()=>{this.ready=!0},200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;let e=this.getBoundingClientRect().width-40,t=this.wallet?this.wallet.name:void 0;return R.ConnectionController.setWcLinking(void 0),R.ConnectionController.setRecentWallet(this.wallet),i.dy` <wui-qr-code
      size=${e}
      theme=${el.ThemeController.state.themeMode}
      uri=${this.uri}
      imageSrc=${(0,u.o)(A.f.getWalletImage(this.wallet))}
      color=${(0,u.o)(el.ThemeController.state.themeVariables["--w3m-qr-color"])}
      alt=${(0,u.o)(t)}
      data-testid="wui-qr-code"
    ></wui-qr-code>`}copyTemplate(){let e=!this.uri||!this.ready;return i.dy`<wui-link
      .disabled=${e}
      @click=${this.onCopyUri}
      color="fg-200"
      data-testid="copy-wc2-uri"
    >
      <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
      Copy link
    </wui-link>`}};eJ.styles=eZ,eJ=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,c.Mo)("w3m-connecting-wc-qrcode")],eJ);let eY=class extends i.oi{constructor(){if(super(),this.wallet=p.RouterController.state.data?.wallet,!this.wallet)throw Error("w3m-connecting-wc-unsupported: No wallet provided");d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}render(){return i.dy`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-wallet-image
          size="lg"
          imageSrc=${(0,u.o)(A.f.getWalletImage(this.wallet))}
        ></wui-wallet-image>

        <wui-text variant="paragraph-500" color="fg-100">Not Detected</wui-text>
      </wui-flex>

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}};eY=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,c.Mo)("w3m-connecting-wc-unsupported")],eY);var eX=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eQ=class extends eN{constructor(){if(super(),this.isLoading=!0,!this.wallet)throw Error("w3m-connecting-wc-web: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.secondaryBtnLabel="Open",this.secondaryLabel=eL.bq.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.updateLoadingState(),this.unsubscribe.push(R.ConnectionController.subscribeKey("wcUri",()=>{this.updateLoadingState()})),d.X.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"web"}})}updateLoadingState(){this.isLoading=!this.uri}onConnectProxy(){if(this.wallet?.webapp_link&&this.uri)try{this.error=!1;let{webapp_link:e,name:t}=this.wallet,{redirect:r,href:i}=s.j.formatUniversalUrl(e,this.uri);R.ConnectionController.setWcLinking({name:t,href:i}),R.ConnectionController.setRecentWallet(this.wallet),s.j.openHref(r,"_blank")}catch{this.error=!0}}};eX([(0,n.SB)()],eQ.prototype,"isLoading",void 0),eQ=eX([(0,c.Mo)("w3m-connecting-wc-web")],eQ);var e0=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let e1=class extends i.oi{constructor(){super(),this.wallet=p.RouterController.state.data?.wallet,this.unsubscribe=[],this.platform=void 0,this.platforms=[],this.isSiwxEnabled=!!a.OptionsController.state.siwx,this.remoteFeatures=a.OptionsController.state.remoteFeatures,this.determinePlatforms(),this.initializeConnection(),this.unsubscribe.push(a.OptionsController.subscribeKey("remoteFeatures",e=>this.remoteFeatures=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return i.dy`
      ${this.headerTemplate()}
      <div>${this.platformTemplate()}</div>
      ${this.reownBrandingTemplate()}
    `}reownBrandingTemplate(){return this.remoteFeatures?.reownBranding?i.dy`<wui-ux-by-reown></wui-ux-by-reown>`:null}async initializeConnection(e=!1){if("browser"!==this.platform&&(!a.OptionsController.state.manualWCControl||e))try{let{wcPairingExpiry:t,status:r}=R.ConnectionController.state;(e||a.OptionsController.state.enableEmbedded||s.j.isPairingExpired(t)||"connecting"===r)&&(await R.ConnectionController.connectWalletConnect(),this.isSiwxEnabled||et.I.close())}catch(e){d.X.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:e?.message??"Unknown"}}),R.ConnectionController.setWcError(!0),er.SnackController.showError(e.message??"Connection error"),R.ConnectionController.resetWcConnection(),p.RouterController.goBack()}}determinePlatforms(){if(!this.wallet){this.platforms.push("qrcode"),this.platform="qrcode";return}if(this.platform)return;let{mobile_link:e,desktop_link:t,webapp_link:r,injected:i,rdns:n}=this.wallet,o=i?.map(({injected_id:e})=>e).filter(Boolean),l=[...n?[n]:o??[]],c=!a.OptionsController.state.isUniversalProvider&&l.length,u=R.ConnectionController.checkInstalled(l),h=c&&u,d=t&&!s.j.isMobile();h&&!F.R.state.noAdapters&&this.platforms.push("browser"),e&&this.platforms.push(s.j.isMobile()?"mobile":"qrcode"),r&&this.platforms.push("web"),d&&this.platforms.push("desktop"),h||!c||F.R.state.noAdapters||this.platforms.push("unsupported"),this.platform=this.platforms[0]}platformTemplate(){switch(this.platform){case"browser":return i.dy`<w3m-connecting-wc-browser></w3m-connecting-wc-browser>`;case"web":return i.dy`<w3m-connecting-wc-web></w3m-connecting-wc-web>`;case"desktop":return i.dy`
          <w3m-connecting-wc-desktop .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-desktop>
        `;case"mobile":return i.dy`
          <w3m-connecting-wc-mobile isMobile .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-mobile>
        `;case"qrcode":return i.dy`<w3m-connecting-wc-qrcode></w3m-connecting-wc-qrcode>`;default:return i.dy`<w3m-connecting-wc-unsupported></w3m-connecting-wc-unsupported>`}}headerTemplate(){return this.platforms.length>1?i.dy`
      <w3m-connecting-header
        .platforms=${this.platforms}
        .onSelectPlatfrom=${this.onSelectPlatform.bind(this)}
      >
      </w3m-connecting-header>
    `:null}async onSelectPlatform(e){let t=this.shadowRoot?.querySelector("div");t&&(await t.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.platform=e,t.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}};e0([(0,n.SB)()],e1.prototype,"platform",void 0),e0([(0,n.SB)()],e1.prototype,"platforms",void 0),e0([(0,n.SB)()],e1.prototype,"isSiwxEnabled",void 0),e0([(0,n.SB)()],e1.prototype,"remoteFeatures",void 0),e1=e0([(0,c.Mo)("w3m-connecting-wc-view")],e1);var e2=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let e3=class extends i.oi{constructor(){super(...arguments),this.isMobile=s.j.isMobile()}render(){if(this.isMobile){let{featured:e,recommended:t}=o.ApiController.state,{customWallets:r}=a.OptionsController.state,n=l.M.getRecentWallets(),s=e.length||t.length||r?.length||n.length;return i.dy`<wui-flex
        flexDirection="column"
        gap="xs"
        .margin=${["3xs","s","s","s"]}
      >
        ${s?i.dy`<w3m-connector-list></w3m-connector-list>`:null}
        <w3m-all-wallets-widget></w3m-all-wallets-widget>
      </wui-flex>`}return i.dy`<wui-flex flexDirection="column" .padding=${["0","0","l","0"]}>
      <w3m-connecting-wc-view></w3m-connecting-wc-view>
      <wui-flex flexDirection="column" .padding=${["0","m","0","m"]}>
        <w3m-all-wallets-widget></w3m-all-wallets-widget> </wui-flex
    ></wui-flex>`}};e2([(0,n.SB)()],e3.prototype,"isMobile",void 0),e3=e2([(0,c.Mo)("w3m-connecting-wc-basic-view")],e3);var e5=r(56528),e4=r(28252),e6=r(30220);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let e8=()=>new e9;class e9{}let e7=new WeakMap,te=(0,e6.XM)(class extends e4.sR{render(e){return e5.Ld}update(e,[t]){let r=t!==this.G;return r&&void 0!==this.G&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),e5.Ld}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.G){let t=this.ht??globalThis,r=e7.get(t);void 0===r&&(r=new WeakMap,e7.set(t,r)),void 0!==r.get(this.G)&&this.G.call(this.ht,void 0),r.set(this.G,e),void 0!==e&&this.G.call(this.ht,e)}else this.G.value=e}get lt(){return"function"==typeof this.G?e7.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var tt=i.iv`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  label {
    position: relative;
    display: inline-block;
    width: 32px;
    height: 22px;
  }

  input {
    width: 0;
    height: 0;
    opacity: 0;
  }

  span {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--wui-color-blue-100);
    border-width: 1px;
    border-style: solid;
    border-color: var(--wui-color-gray-glass-002);
    border-radius: 999px;
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color;
  }

  span:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 3px;
    top: 2px;
    background-color: var(--wui-color-inverse-100);
    transition: transform var(--wui-ease-inout-power-1) var(--wui-duration-lg);
    will-change: transform;
    border-radius: 50%;
  }

  input:checked + span {
    border-color: var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-blue-100);
  }

  input:not(:checked) + span {
    background-color: var(--wui-color-gray-glass-010);
  }

  input:checked + span:before {
    transform: translateX(calc(100% - 7px));
  }
`,tr=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ti=class extends i.oi{constructor(){super(...arguments),this.inputElementRef=e8(),this.checked=void 0}render(){return i.dy`
      <label>
        <input
          ${te(this.inputElementRef)}
          type="checkbox"
          ?checked=${(0,u.o)(this.checked)}
          @change=${this.dispatchChangeEvent.bind(this)}
        />
        <span></span>
      </label>
    `}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("switchChange",{detail:this.inputElementRef.value?.checked,bubbles:!0,composed:!0}))}};ti.styles=[f.ET,f.ZM,f.Bp,tt],tr([(0,n.Cb)({type:Boolean})],ti.prototype,"checked",void 0),ti=tr([(0,g.M)("wui-switch")],ti);var tn=i.iv`
  :host {
    height: 100%;
  }

  button {
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: var(--wui-spacing-1xs);
    padding: var(--wui-spacing-xs) var(--wui-spacing-s);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
    cursor: pointer;
  }

  wui-switch {
    pointer-events: none;
  }
`,ts=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let to=class extends i.oi{constructor(){super(...arguments),this.checked=void 0}render(){return i.dy`
      <button>
        <wui-icon size="xl" name="walletConnectBrown"></wui-icon>
        <wui-switch ?checked=${(0,u.o)(this.checked)}></wui-switch>
      </button>
    `}};to.styles=[f.ET,f.ZM,tn],ts([(0,n.Cb)({type:Boolean})],to.prototype,"checked",void 0),to=ts([(0,g.M)("wui-certified-switch")],to);var ta=i.iv`
  button {
    background-color: var(--wui-color-fg-300);
    border-radius: var(--wui-border-radius-4xs);
    width: 16px;
    height: 16px;
  }

  button:disabled {
    background-color: var(--wui-color-bg-300);
  }

  wui-icon {
    color: var(--wui-color-bg-200) !important;
  }

  button:focus-visible {
    background-color: var(--wui-color-fg-250);
    border: 1px solid var(--wui-color-accent-100);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-fg-250);
    }

    button:active:enabled {
      background-color: var(--wui-color-fg-225);
    }
  }
`,tl=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tc=class extends i.oi{constructor(){super(...arguments),this.icon="copy"}render(){return i.dy`
      <button>
        <wui-icon color="inherit" size="xxs" name=${this.icon}></wui-icon>
      </button>
    `}};tc.styles=[f.ET,f.ZM,ta],tl([(0,n.Cb)()],tc.prototype,"icon",void 0),tc=tl([(0,g.M)("wui-input-element")],tc);var tu=r(99901),th=i.iv`
  :host {
    position: relative;
    width: 100%;
    display: inline-block;
    color: var(--wui-color-fg-275);
  }

  input {
    width: 100%;
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    background: var(--wui-color-gray-glass-002);
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
    color: var(--wui-color-fg-100);
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color, box-shadow;
    caret-color: var(--wui-color-accent-100);
  }

  input:disabled {
    cursor: not-allowed;
    border: 1px solid var(--wui-color-gray-glass-010);
  }

  input:disabled::placeholder,
  input:disabled + wui-icon {
    color: var(--wui-color-fg-300);
  }

  input::placeholder {
    color: var(--wui-color-fg-275);
  }

  input:focus:enabled {
    background-color: var(--wui-color-gray-glass-005);
    -webkit-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    -moz-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
  }

  input:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  wui-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
  }

  .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px var(--wui-spacing-s);
  }

  wui-icon + .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px 36px;
  }

  wui-icon[data-input='sm'] {
    left: var(--wui-spacing-s);
  }

  .wui-size-md {
    padding: 15px var(--wui-spacing-m) var(--wui-spacing-l) var(--wui-spacing-m);
  }

  wui-icon + .wui-size-md,
  wui-loading-spinner + .wui-size-md {
    padding: 10.5px var(--wui-spacing-3xl) 10.5px var(--wui-spacing-3xl);
  }

  wui-icon[data-input='md'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-lg {
    padding: var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-l);
    letter-spacing: var(--wui-letter-spacing-medium-title);
    font-size: var(--wui-font-size-medium-title);
    font-weight: var(--wui-font-weight-light);
    line-height: 130%;
    color: var(--wui-color-fg-100);
    height: 64px;
  }

  .wui-padding-right-xs {
    padding-right: var(--wui-spacing-xs);
  }

  .wui-padding-right-s {
    padding-right: var(--wui-spacing-s);
  }

  .wui-padding-right-m {
    padding-right: var(--wui-spacing-m);
  }

  .wui-padding-right-l {
    padding-right: var(--wui-spacing-l);
  }

  .wui-padding-right-xl {
    padding-right: var(--wui-spacing-xl);
  }

  .wui-padding-right-2xl {
    padding-right: var(--wui-spacing-2xl);
  }

  .wui-padding-right-3xl {
    padding-right: var(--wui-spacing-3xl);
  }

  .wui-padding-right-4xl {
    padding-right: var(--wui-spacing-4xl);
  }

  .wui-padding-right-5xl {
    padding-right: var(--wui-spacing-5xl);
  }

  wui-icon + .wui-size-lg,
  wui-loading-spinner + .wui-size-lg {
    padding-left: 50px;
  }

  wui-icon[data-input='lg'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-m) 17.25px var(--wui-spacing-m);
  }
  wui-icon + .wui-size-mdl,
  wui-loading-spinner + .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-3xl) 17.25px 40px;
  }
  wui-icon[data-input='mdl'] {
    left: var(--wui-spacing-m);
  }

  input:placeholder-shown ~ ::slotted(wui-input-element),
  input:placeholder-shown ~ ::slotted(wui-icon) {
    opacity: 0;
    pointer-events: none;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  ::slotted(wui-input-element),
  ::slotted(wui-icon) {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }

  ::slotted(wui-input-element) {
    right: var(--wui-spacing-m);
  }

  ::slotted(wui-icon) {
    right: 0px;
  }
`,td=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tp=class extends i.oi{constructor(){super(...arguments),this.inputElementRef=e8(),this.size="md",this.disabled=!1,this.placeholder="",this.type="text",this.value=""}render(){let e=`wui-padding-right-${this.inputRightPadding}`,t={[`wui-size-${this.size}`]:!0,[e]:!!this.inputRightPadding};return i.dy`${this.templateIcon()}
      <input
        data-testid="wui-input-text"
        ${te(this.inputElementRef)}
        class=${(0,tu.$)(t)}
        type=${this.type}
        enterkeyhint=${(0,u.o)(this.enterKeyHint)}
        ?disabled=${this.disabled}
        placeholder=${this.placeholder}
        @input=${this.dispatchInputChangeEvent.bind(this)}
        .value=${this.value||""}
        tabindex=${(0,u.o)(this.tabIdx)}
      />
      <slot></slot>`}templateIcon(){return this.icon?i.dy`<wui-icon
        data-input=${this.size}
        size=${this.size}
        color="inherit"
        name=${this.icon}
      ></wui-icon>`:null}dispatchInputChangeEvent(){this.dispatchEvent(new CustomEvent("inputChange",{detail:this.inputElementRef.value?.value,bubbles:!0,composed:!0}))}};tp.styles=[f.ET,f.ZM,th],td([(0,n.Cb)()],tp.prototype,"size",void 0),td([(0,n.Cb)()],tp.prototype,"icon",void 0),td([(0,n.Cb)({type:Boolean})],tp.prototype,"disabled",void 0),td([(0,n.Cb)()],tp.prototype,"placeholder",void 0),td([(0,n.Cb)()],tp.prototype,"type",void 0),td([(0,n.Cb)()],tp.prototype,"keyHint",void 0),td([(0,n.Cb)()],tp.prototype,"value",void 0),td([(0,n.Cb)()],tp.prototype,"inputRightPadding",void 0),td([(0,n.Cb)()],tp.prototype,"tabIdx",void 0),tp=td([(0,g.M)("wui-input-text")],tp);var tf=i.iv`
  :host {
    position: relative;
    display: inline-block;
    width: 100%;
  }
`;let tg=class extends i.oi{constructor(){super(...arguments),this.inputComponentRef=e8()}render(){return i.dy`
      <wui-input-text
        ${te(this.inputComponentRef)}
        placeholder="Search wallet"
        icon="search"
        type="search"
        enterKeyHint="search"
        size="sm"
      >
        <wui-input-element @click=${this.clearValue} icon="close"></wui-input-element>
      </wui-input-text>
    `}clearValue(){let e=this.inputComponentRef.value,t=e?.inputElementRef.value;t&&(t.value="",t.focus(),t.dispatchEvent(new Event("input")))}};tg.styles=[f.ET,tf],tg=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,g.M)("wui-search-bar")],tg);let tm=i.YP`<svg  viewBox="0 0 48 54" fill="none">
  <path
    d="M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z"
  />
</svg>`;var ty=i.iv`
  :host {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-xs) 10px;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    position: relative;
  }

  wui-shimmer[data-type='network'] {
    border: none;
    -webkit-clip-path: var(--wui-path-network);
    clip-path: var(--wui-path-network);
  }

  svg {
    position: absolute;
    width: 48px;
    height: 54px;
    z-index: 1;
  }

  svg > path {
    stroke: var(--wui-color-gray-glass-010);
    stroke-width: 1px;
  }

  @media (max-width: 350px) {
    :host {
      width: 100%;
    }
  }
`,tv=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tb=class extends i.oi{constructor(){super(...arguments),this.type="wallet"}render(){return i.dy`
      ${this.shimmerTemplate()}
      <wui-shimmer width="56px" height="20px" borderRadius="xs"></wui-shimmer>
    `}shimmerTemplate(){return"network"===this.type?i.dy` <wui-shimmer
          data-type=${this.type}
          width="48px"
          height="54px"
          borderRadius="xs"
        ></wui-shimmer>
        ${tm}`:i.dy`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}};tb.styles=[f.ET,f.ZM,ty],tv([(0,n.Cb)()],tb.prototype,"type",void 0),tb=tv([(0,g.M)("wui-card-select-loader")],tb);var tw=r(35016),tE=i.iv`
  :host {
    display: grid;
    width: inherit;
    height: inherit;
  }
`,t_=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tC=class extends i.oi{render(){return this.style.cssText=`
      grid-template-rows: ${this.gridTemplateRows};
      grid-template-columns: ${this.gridTemplateColumns};
      justify-items: ${this.justifyItems};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      align-content: ${this.alignContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&tw.H.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&tw.H.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&tw.H.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&tw.H.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&tw.H.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&tw.H.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&tw.H.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&tw.H.getSpacingStyles(this.margin,3)};
    `,i.dy`<slot></slot>`}};tC.styles=[f.ET,tE],t_([(0,n.Cb)()],tC.prototype,"gridTemplateRows",void 0),t_([(0,n.Cb)()],tC.prototype,"gridTemplateColumns",void 0),t_([(0,n.Cb)()],tC.prototype,"justifyItems",void 0),t_([(0,n.Cb)()],tC.prototype,"alignItems",void 0),t_([(0,n.Cb)()],tC.prototype,"justifyContent",void 0),t_([(0,n.Cb)()],tC.prototype,"alignContent",void 0),t_([(0,n.Cb)()],tC.prototype,"columnGap",void 0),t_([(0,n.Cb)()],tC.prototype,"rowGap",void 0),t_([(0,n.Cb)()],tC.prototype,"gap",void 0),t_([(0,n.Cb)()],tC.prototype,"padding",void 0),t_([(0,n.Cb)()],tC.prototype,"margin",void 0),tC=t_([(0,g.M)("wui-grid")],tC);var tS=i.iv`
  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-s) var(--wui-spacing-0);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border-radius;
    outline: none;
    border: none;
  }

  button > wui-flex > wui-text {
    color: var(--wui-color-fg-100);
    max-width: 86px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    justify-content: center;
  }

  button > wui-flex > wui-text.certified {
    max-width: 66px;
  }

  button:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  button:disabled > wui-flex > wui-text {
    color: var(--wui-color-gray-glass-015);
  }

  [data-selected='true'] {
    background-color: var(--wui-color-accent-glass-020);
  }

  @media (hover: hover) and (pointer: fine) {
    [data-selected='true']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }
  }

  [data-selected='true']:active:enabled {
    background-color: var(--wui-color-accent-glass-010);
  }

  @media (max-width: 350px) {
    button {
      width: 100%;
    }
  }
`,tI=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tx=class extends i.oi{constructor(){super(),this.observer=new IntersectionObserver(()=>void 0),this.visible=!1,this.imageSrc=void 0,this.imageLoading=!1,this.wallet=void 0,this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(this.visible=!0,this.fetchImageSrc()):this.visible=!1})},{threshold:.01})}firstUpdated(){this.observer.observe(this)}disconnectedCallback(){this.observer.disconnect()}render(){let e=this.wallet?.badge_type==="certified";return i.dy`
      <button>
        ${this.imageTemplate()}
        <wui-flex flexDirection="row" alignItems="center" justifyContent="center" gap="3xs">
          <wui-text
            variant="tiny-500"
            color="inherit"
            class=${(0,u.o)(e?"certified":void 0)}
            >${this.wallet?.name}</wui-text
          >
          ${e?i.dy`<wui-icon size="sm" name="walletConnectBrown"></wui-icon>`:null}
        </wui-flex>
      </button>
    `}imageTemplate(){return(this.visible||this.imageSrc)&&!this.imageLoading?i.dy`
      <wui-wallet-image
        size="md"
        imageSrc=${(0,u.o)(this.imageSrc)}
        name=${this.wallet?.name}
        .installed=${this.wallet?.installed}
        badgeSize="sm"
      >
      </wui-wallet-image>
    `:this.shimmerTemplate()}shimmerTemplate(){return i.dy`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}async fetchImageSrc(){this.wallet&&(this.imageSrc=A.f.getWalletImage(this.wallet),this.imageSrc||(this.imageLoading=!0,this.imageSrc=await A.f.fetchWalletImage(this.wallet.image_id),this.imageLoading=!1))}};tx.styles=tS,tI([(0,n.SB)()],tx.prototype,"visible",void 0),tI([(0,n.SB)()],tx.prototype,"imageSrc",void 0),tI([(0,n.SB)()],tx.prototype,"imageLoading",void 0),tI([(0,n.Cb)()],tx.prototype,"wallet",void 0),tx=tI([(0,c.Mo)("w3m-all-wallets-list-item")],tx);var tA=i.iv`
  wui-grid {
    max-height: clamp(360px, 400px, 80vh);
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    padding-top: var(--wui-spacing-l);
    padding-bottom: var(--wui-spacing-l);
    justify-content: center;
    grid-column: 1 / span 4;
  }
`,tk=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tO="local-paginator",tP=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.loading=!o.ApiController.state.wallets.length,this.wallets=o.ApiController.state.wallets,this.recommended=o.ApiController.state.recommended,this.featured=o.ApiController.state.featured,this.filteredWallets=o.ApiController.state.filteredWallets,this.unsubscribe.push(...[o.ApiController.subscribeKey("wallets",e=>this.wallets=e),o.ApiController.subscribeKey("recommended",e=>this.recommended=e),o.ApiController.subscribeKey("featured",e=>this.featured=e),o.ApiController.subscribeKey("filteredWallets",e=>this.filteredWallets=e)])}firstUpdated(){this.initialFetch(),this.createPaginationObserver()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.paginationObserver?.disconnect()}render(){return i.dy`
      <wui-grid
        data-scroll=${!this.loading}
        .padding=${["0","s","s","s"]}
        columnGap="xxs"
        rowGap="l"
        justifyContent="space-between"
      >
        ${this.loading?this.shimmerTemplate(16):this.walletsTemplate()}
        ${this.paginationLoaderTemplate()}
      </wui-grid>
    `}async initialFetch(){this.loading=!0;let e=this.shadowRoot?.querySelector("wui-grid");e&&(await o.ApiController.fetchWalletsByPage({page:1}),await e.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.loading=!1,e.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}shimmerTemplate(e,t){return[...Array(e)].map(()=>i.dy`
        <wui-card-select-loader type="wallet" id=${(0,u.o)(t)}></wui-card-select-loader>
      `)}walletsTemplate(){let e=this.filteredWallets?.length>0?s.j.uniqueBy([...this.featured,...this.recommended,...this.filteredWallets],"id"):s.j.uniqueBy([...this.featured,...this.recommended,...this.wallets],"id");return z.J.markWalletsAsInstalled(e).map(e=>i.dy`
        <w3m-all-wallets-list-item
          @click=${()=>this.onConnectWallet(e)}
          .wallet=${e}
        ></w3m-all-wallets-list-item>
      `)}paginationLoaderTemplate(){let{wallets:e,recommended:t,featured:r,count:i}=o.ApiController.state,n=window.innerWidth<352?3:4,s=e.length+t.length,a=Math.ceil(s/n)*n-s+n;return(a-=e.length?r.length%n:0,0===i&&r.length>0)?null:0===i||[...r,...e,...t].length<i?this.shimmerTemplate(a,tO):null}createPaginationObserver(){let e=this.shadowRoot?.querySelector(`#${tO}`);e&&(this.paginationObserver=new IntersectionObserver(([e])=>{if(e?.isIntersecting&&!this.loading){let{page:e,count:t,wallets:r}=o.ApiController.state;r.length<t&&o.ApiController.fetchWalletsByPage({page:e+1})}}),this.paginationObserver.observe(e))}onConnectWallet(e){h.ConnectorController.selectWalletConnector(e)}};tP.styles=tA,tk([(0,n.SB)()],tP.prototype,"loading",void 0),tk([(0,n.SB)()],tP.prototype,"wallets",void 0),tk([(0,n.SB)()],tP.prototype,"recommended",void 0),tk([(0,n.SB)()],tP.prototype,"featured",void 0),tk([(0,n.SB)()],tP.prototype,"filteredWallets",void 0),tP=tk([(0,c.Mo)("w3m-all-wallets-list")],tP);var tR=i.iv`
  wui-grid,
  wui-loading-spinner,
  wui-flex {
    height: 360px;
  }

  wui-grid {
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
`,tN=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tT=class extends i.oi{constructor(){super(...arguments),this.prevQuery="",this.prevBadge=void 0,this.loading=!0,this.query=""}render(){return this.onSearch(),this.loading?i.dy`<wui-loading-spinner color="accent-100"></wui-loading-spinner>`:this.walletsTemplate()}async onSearch(){(this.query.trim()!==this.prevQuery.trim()||this.badge!==this.prevBadge)&&(this.prevQuery=this.query,this.prevBadge=this.badge,this.loading=!0,await o.ApiController.searchWallet({search:this.query,badge:this.badge}),this.loading=!1)}walletsTemplate(){let{search:e}=o.ApiController.state,t=z.J.markWalletsAsInstalled(e);return e.length?i.dy`
      <wui-grid
        data-testid="wallet-list"
        .padding=${["0","s","s","s"]}
        rowGap="l"
        columnGap="xs"
        justifyContent="space-between"
      >
        ${t.map(e=>i.dy`
            <w3m-all-wallets-list-item
              @click=${()=>this.onConnectWallet(e)}
              .wallet=${e}
              data-testid="wallet-search-item-${e.id}"
            ></w3m-all-wallets-list-item>
          `)}
      </wui-grid>
    `:i.dy`
        <wui-flex
          data-testid="no-wallet-found"
          justifyContent="center"
          alignItems="center"
          gap="s"
          flexDirection="column"
        >
          <wui-icon-box
            size="lg"
            iconColor="fg-200"
            backgroundColor="fg-300"
            icon="wallet"
            background="transparent"
          ></wui-icon-box>
          <wui-text data-testid="no-wallet-found-text" color="fg-200" variant="paragraph-500">
            No Wallet found
          </wui-text>
        </wui-flex>
      `}onConnectWallet(e){h.ConnectorController.selectWalletConnector(e)}};tT.styles=tR,tN([(0,n.SB)()],tT.prototype,"loading",void 0),tN([(0,n.Cb)()],tT.prototype,"query",void 0),tN([(0,n.Cb)()],tT.prototype,"badge",void 0),tT=tN([(0,c.Mo)("w3m-all-wallets-search")],tT);var tM=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tL=class extends i.oi{constructor(){super(...arguments),this.search="",this.onDebouncedSearch=s.j.debounce(e=>{this.search=e})}render(){let e=this.search.length>=2;return i.dy`
      <wui-flex .padding=${["0","s","s","s"]} gap="xs">
        <wui-search-bar @inputChange=${this.onInputChange.bind(this)}></wui-search-bar>
        <wui-certified-switch
          ?checked=${this.badge}
          @click=${this.onClick.bind(this)}
          data-testid="wui-certified-switch"
        ></wui-certified-switch>
        ${this.qrButtonTemplate()}
      </wui-flex>
      ${e||this.badge?i.dy`<w3m-all-wallets-search
            query=${this.search}
            badge=${(0,u.o)(this.badge)}
          ></w3m-all-wallets-search>`:i.dy`<w3m-all-wallets-list badge=${(0,u.o)(this.badge)}></w3m-all-wallets-list>`}
    `}onInputChange(e){this.onDebouncedSearch(e.detail)}onClick(){if("certified"===this.badge){this.badge=void 0;return}this.badge="certified",er.SnackController.showSvg("Only WalletConnect certified",{icon:"walletConnectBrown",iconColor:"accent-100"})}qrButtonTemplate(){return s.j.isMobile()?i.dy`
        <wui-icon-box
          size="lg"
          iconSize="xl"
          iconColor="accent-100"
          backgroundColor="accent-100"
          icon="qrCode"
          background="transparent"
          border
          borderColor="wui-accent-glass-010"
          @click=${this.onWalletConnectQr.bind(this)}
        ></wui-icon-box>
      `:null}onWalletConnectQr(){p.RouterController.push("ConnectingWalletConnect")}};tM([(0,n.SB)()],tL.prototype,"search",void 0),tM([(0,n.SB)()],tL.prototype,"badge",void 0),tL=tM([(0,c.Mo)("w3m-all-wallets-view")],tL);var tD=i.iv`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 11px 18px 11px var(--wui-spacing-s);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-250);
    transition:
      color var(--wui-ease-out-power-1) var(--wui-duration-md),
      background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: color, background-color;
  }

  button[data-iconvariant='square'],
  button[data-iconvariant='square-blue'] {
    padding: 6px 18px 6px 9px;
  }

  button > wui-flex {
    flex: 1;
  }

  button > wui-image {
    width: 32px;
    height: 32px;
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
    border-radius: var(--wui-border-radius-3xl);
  }

  button > wui-icon {
    width: 36px;
    height: 36px;
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
  }

  button > wui-icon-box[data-variant='blue'] {
    box-shadow: 0 0 0 2px var(--wui-color-accent-glass-005);
  }

  button > wui-icon-box[data-variant='overlay'] {
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
  }

  button > wui-icon-box[data-variant='square-blue'] {
    border-radius: var(--wui-border-radius-3xs);
    position: relative;
    border: none;
    width: 36px;
    height: 36px;
  }

  button > wui-icon-box[data-variant='square-blue']::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-accent-glass-010);
    pointer-events: none;
  }

  button > wui-icon:last-child {
    width: 14px;
    height: 14px;
  }

  button:disabled {
    color: var(--wui-color-gray-glass-020);
  }

  button[data-loading='true'] > wui-icon {
    opacity: 0;
  }

  wui-loading-spinner {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
  }
`,tB=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let tj=class extends i.oi{constructor(){super(...arguments),this.tabIdx=void 0,this.variant="icon",this.disabled=!1,this.imageSrc=void 0,this.alt=void 0,this.chevron=!1,this.loading=!1}render(){return i.dy`
      <button
        ?disabled=${!!this.loading||!!this.disabled}
        data-loading=${this.loading}
        data-iconvariant=${(0,u.o)(this.iconVariant)}
        tabindex=${(0,u.o)(this.tabIdx)}
      >
        ${this.loadingTemplate()} ${this.visualTemplate()}
        <wui-flex gap="3xs">
          <slot></slot>
        </wui-flex>
        ${this.chevronTemplate()}
      </button>
    `}visualTemplate(){if("image"===this.variant&&this.imageSrc)return i.dy`<wui-image src=${this.imageSrc} alt=${this.alt??"list item"}></wui-image>`;if("square"===this.iconVariant&&this.icon&&"icon"===this.variant)return i.dy`<wui-icon name=${this.icon}></wui-icon>`;if("icon"===this.variant&&this.icon&&this.iconVariant){let e=["blue","square-blue"].includes(this.iconVariant)?"accent-100":"fg-200",t="square-blue"===this.iconVariant?"mdl":"md",r=this.iconSize?this.iconSize:t;return i.dy`
        <wui-icon-box
          data-variant=${this.iconVariant}
          icon=${this.icon}
          iconSize=${r}
          background="transparent"
          iconColor=${e}
          backgroundColor=${e}
          size=${t}
        ></wui-icon-box>
      `}return null}loadingTemplate(){return this.loading?i.dy`<wui-loading-spinner
        data-testid="wui-list-item-loading-spinner"
        color="fg-300"
      ></wui-loading-spinner>`:i.dy``}chevronTemplate(){return this.chevron?i.dy`<wui-icon size="inherit" color="fg-200" name="chevronRight"></wui-icon>`:null}};tj.styles=[f.ET,f.ZM,tD],tB([(0,n.Cb)()],tj.prototype,"icon",void 0),tB([(0,n.Cb)()],tj.prototype,"iconSize",void 0),tB([(0,n.Cb)()],tj.prototype,"tabIdx",void 0),tB([(0,n.Cb)()],tj.prototype,"variant",void 0),tB([(0,n.Cb)()],tj.prototype,"iconVariant",void 0),tB([(0,n.Cb)({type:Boolean})],tj.prototype,"disabled",void 0),tB([(0,n.Cb)()],tj.prototype,"imageSrc",void 0),tB([(0,n.Cb)()],tj.prototype,"alt",void 0),tB([(0,n.Cb)({type:Boolean})],tj.prototype,"chevron",void 0),tB([(0,n.Cb)({type:Boolean})],tj.prototype,"loading",void 0),tj=tB([(0,g.M)("wui-list-item")],tj);let t$=class extends i.oi{constructor(){super(...arguments),this.wallet=p.RouterController.state.data?.wallet}render(){if(!this.wallet)throw Error("w3m-downloads-view");return i.dy`
      <wui-flex gap="xs" flexDirection="column" .padding=${["s","s","l","s"]}>
        ${this.chromeTemplate()} ${this.iosTemplate()} ${this.androidTemplate()}
        ${this.homepageTemplate()}
      </wui-flex>
    `}chromeTemplate(){return this.wallet?.chrome_store?i.dy`<wui-list-item
      variant="icon"
      icon="chromeStore"
      iconVariant="square"
      @click=${this.onChromeStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Chrome Extension</wui-text>
    </wui-list-item>`:null}iosTemplate(){return this.wallet?.app_store?i.dy`<wui-list-item
      variant="icon"
      icon="appStore"
      iconVariant="square"
      @click=${this.onAppStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">iOS App</wui-text>
    </wui-list-item>`:null}androidTemplate(){return this.wallet?.play_store?i.dy`<wui-list-item
      variant="icon"
      icon="playStore"
      iconVariant="square"
      @click=${this.onPlayStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Android App</wui-text>
    </wui-list-item>`:null}homepageTemplate(){return this.wallet?.homepage?i.dy`
      <wui-list-item
        variant="icon"
        icon="browser"
        iconVariant="square-blue"
        @click=${this.onHomePage.bind(this)}
        chevron
      >
        <wui-text variant="paragraph-500" color="fg-100">Website</wui-text>
      </wui-list-item>
    `:null}onChromeStore(){this.wallet?.chrome_store&&s.j.openHref(this.wallet.chrome_store,"_blank")}onAppStore(){this.wallet?.app_store&&s.j.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&s.j.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&s.j.openHref(this.wallet.homepage,"_blank")}};t$=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,c.Mo)("w3m-downloads-view")],t$)},13315:function(e,t,r){"use strict";r.r(t),r.d(t,{AppKitModal:function(){return em},W3mModal:function(){return eg},W3mModalBase:function(){return ef}});var i=r(34954),n=r(29324),s=r(14670),o=r(29350),a=r(5969),l=r(44415),c=r(25620),u=r(95646),h=r(96424),d=r(75466),p=r(99600);let f={isUnsupportedChainView:()=>"UnsupportedChain"===d.RouterController.state.view||"SwitchNetwork"===d.RouterController.state.view&&d.RouterController.state.history.includes("UnsupportedChain"),async safeClose(){if(this.isUnsupportedChainView()||await p.w.isSIWXCloseDisabled()){l.I.shake();return}l.I.close()}};var g=r(96501),m=r(31283),y=r(19876),v=r(61217),b=r(6600),w=r(22817),E=i.iv`
  :host {
    display: block;
    border-radius: clamp(0px, var(--wui-border-radius-l), 44px);
    box-shadow: 0 0 0 1px var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-modal-bg);
    overflow: hidden;
  }

  :host([data-embedded='true']) {
    box-shadow:
      0 0 0 1px var(--wui-color-gray-glass-005),
      0px 4px 12px 4px var(--w3m-card-embedded-shadow-color);
  }
`;let _=class extends i.oi{render(){return i.dy`<slot></slot>`}};_.styles=[b.ET,E],_=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}([(0,w.M)("wui-card")],_),r(57318);var C=r(8272);r(58837),r(2614),r(92439);var S=i.iv`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-dark-glass-100);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-325);
    box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.25);
  }

  wui-flex {
    width: 100%;
  }

  wui-text {
    word-break: break-word;
    flex: 1;
  }

  .close {
    cursor: pointer;
  }

  .icon-box {
    height: 40px;
    width: 40px;
    border-radius: var(--wui-border-radius-3xs);
    background-color: var(--local-icon-bg-value);
  }
`,I=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let x=class extends i.oi{constructor(){super(...arguments),this.message="",this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="info"}render(){return this.style.cssText=`
      --local-icon-bg-value: var(--wui-color-${this.backgroundColor});
   `,i.dy`
      <wui-flex flexDirection="row" justifyContent="space-between" alignItems="center">
        <wui-flex columnGap="xs" flexDirection="row" alignItems="center">
          <wui-flex
            flexDirection="row"
            alignItems="center"
            justifyContent="center"
            class="icon-box"
          >
            <wui-icon color=${this.iconColor} size="md" name=${this.icon}></wui-icon>
          </wui-flex>
          <wui-text variant="small-500" color="bg-350" data-testid="wui-alertbar-text"
            >${this.message}</wui-text
          >
        </wui-flex>
        <wui-icon
          class="close"
          color="bg-350"
          size="sm"
          name="close"
          @click=${this.onClose}
        ></wui-icon>
      </wui-flex>
    `}onClose(){C.AlertController.close()}};x.styles=[b.ET,S],I([(0,n.Cb)()],x.prototype,"message",void 0),I([(0,n.Cb)()],x.prototype,"backgroundColor",void 0),I([(0,n.Cb)()],x.prototype,"iconColor",void 0),I([(0,n.Cb)()],x.prototype,"icon",void 0),x=I([(0,w.M)("wui-alertbar")],x);var A=i.iv`
  :host {
    display: block;
    position: absolute;
    top: var(--wui-spacing-s);
    left: var(--wui-spacing-l);
    right: var(--wui-spacing-l);
    opacity: 0;
    pointer-events: none;
  }
`,k=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let O={info:{backgroundColor:"fg-350",iconColor:"fg-325",icon:"info"},success:{backgroundColor:"success-glass-reown-020",iconColor:"success-125",icon:"checkmark"},warning:{backgroundColor:"warning-glass-reown-020",iconColor:"warning-100",icon:"warningCircle"},error:{backgroundColor:"error-glass-reown-020",iconColor:"error-125",icon:"exclamationTriangle"}},P=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.open=C.AlertController.state.open,this.onOpen(!0),this.unsubscribe.push(C.AlertController.subscribeKey("open",e=>{this.open=e,this.onOpen(!1)}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){let{message:e,variant:t}=C.AlertController.state,r=O[t];return i.dy`
      <wui-alertbar
        message=${e}
        backgroundColor=${r?.backgroundColor}
        iconColor=${r?.iconColor}
        icon=${r?.icon}
      ></wui-alertbar>
    `}onOpen(e){this.open?(this.animate([{opacity:0,transform:"scale(0.85)"},{opacity:1,transform:"scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: auto"):e||(this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: none")}};P.styles=A,k([(0,n.SB)()],P.prototype,"open",void 0),P=k([(0,v.Mo)("w3m-alertbar")],P);var R=r(97576),N=r(8112),T=r(32754),M=r(87163),L=i.iv`
  button {
    border-radius: var(--local-border-radius);
    color: var(--wui-color-fg-100);
    padding: var(--local-padding);
  }

  @media (max-width: 700px) {
    button {
      padding: var(--wui-spacing-s);
    }
  }

  button > wui-icon {
    pointer-events: none;
  }

  button:disabled > wui-icon {
    color: var(--wui-color-bg-300) !important;
  }

  button:disabled {
    background-color: transparent;
  }
`,D=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let B=class extends i.oi{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.icon="copy",this.iconColor="inherit"}render(){let e="lg"===this.size?"--wui-border-radius-xs":"--wui-border-radius-xxs",t="lg"===this.size?"--wui-spacing-1xs":"--wui-spacing-2xs";return this.style.cssText=`
    --local-border-radius: var(${e});
    --local-padding: var(${t});
`,i.dy`
      <button ?disabled=${this.disabled}>
        <wui-icon color=${this.iconColor} size=${this.size} name=${this.icon}></wui-icon>
      </button>
    `}};B.styles=[b.ET,b.ZM,b.Bp,L],D([(0,n.Cb)()],B.prototype,"size",void 0),D([(0,n.Cb)({type:Boolean})],B.prototype,"disabled",void 0),D([(0,n.Cb)()],B.prototype,"icon",void 0),D([(0,n.Cb)()],B.prototype,"iconColor",void 0),B=D([(0,w.M)("wui-icon-link")],B),r(42545),r(11265);var j=i.iv`
  button {
    display: block;
    display: flex;
    align-items: center;
    padding: var(--wui-spacing-xxs);
    gap: var(--wui-spacing-xxs);
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-md);
    border-radius: var(--wui-border-radius-xxs);
  }

  wui-image {
    border-radius: 100%;
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  wui-icon-box {
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-002);
  }

  button:active {
    background-color: var(--wui-color-gray-glass-005);
  }
`,$=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let U=class extends i.oi{constructor(){super(...arguments),this.imageSrc=""}render(){return i.dy`<button>
      ${this.imageTemplate()}
      <wui-icon size="xs" color="fg-200" name="chevronBottom"></wui-icon>
    </button>`}imageTemplate(){return this.imageSrc?i.dy`<wui-image src=${this.imageSrc} alt="select visual"></wui-image>`:i.dy`<wui-icon-box
      size="xxs"
      iconColor="fg-200"
      backgroundColor="fg-100"
      background="opaque"
      icon="networkPlaceholder"
    ></wui-icon-box>`}};U.styles=[b.ET,b.ZM,b.Bp,j],$([(0,n.Cb)()],U.prototype,"imageSrc",void 0),U=$([(0,w.M)("wui-select")],U),r(38008),r(98906);var q=r(62357),H=i.iv`
  :host {
    height: 64px;
  }

  wui-text {
    text-transform: capitalize;
  }

  wui-flex.w3m-header-title {
    transform: translateY(0);
    opacity: 1;
  }

  wui-flex.w3m-header-title[view-direction='prev'] {
    animation:
      slide-down-out 120ms forwards var(--wui-ease-out-power-2),
      slide-down-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-flex.w3m-header-title[view-direction='next'] {
    animation:
      slide-up-out 120ms forwards var(--wui-ease-out-power-2),
      slide-up-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-icon-link[data-hidden='true'] {
    opacity: 0 !important;
    pointer-events: none;
  }

  @keyframes slide-up-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(3px);
      opacity: 0;
    }
  }

  @keyframes slide-up-in {
    from {
      transform: translateY(-3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-down-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(-3px);
      opacity: 0;
    }
  }

  @keyframes slide-down-in {
    from {
      transform: translateY(3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,F=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let z=["SmartSessionList"];function W(){let e=d.RouterController.state.data?.connector?.name,t=d.RouterController.state.data?.wallet?.name,r=d.RouterController.state.data?.network?.name,i=t??e,n=u.ConnectorController.getConnectors(),s=1===n.length&&n[0]?.id==="w3m-email";return{Connect:`Connect ${s?"Email":""} Wallet`,Create:"Create Wallet",ChooseAccountName:void 0,Account:void 0,AccountSettings:void 0,AllWallets:"All Wallets",ApproveTransaction:"Approve Transaction",BuyInProgress:"Buy",ConnectingExternal:i??"Connect Wallet",ConnectingWalletConnect:i??"WalletConnect",ConnectingWalletConnectBasic:"WalletConnect",ConnectingSiwe:"Sign In",Convert:"Convert",ConvertSelectToken:"Select token",ConvertPreview:"Preview convert",Downloads:i?`Get ${i}`:"Downloads",EmailLogin:"Email Login",EmailVerifyOtp:"Confirm Email",EmailVerifyDevice:"Register Device",GetWallet:"Get a wallet",Networks:"Choose Network",OnRampProviders:"Choose Provider",OnRampActivity:"Activity",OnRampTokenSelect:"Select Token",OnRampFiatSelect:"Select Currency",Pay:"How you pay",Profile:void 0,SwitchNetwork:r??"Switch Network",SwitchAddress:"Switch Address",Transactions:"Activity",UnsupportedChain:"Switch Network",UpgradeEmailWallet:"Upgrade your Wallet",UpdateEmailWallet:"Edit Email",UpdateEmailPrimaryOtp:"Confirm Current Email",UpdateEmailSecondaryOtp:"Confirm New Email",WhatIsABuy:"What is Buy?",RegisterAccountName:"Choose name",RegisterAccountNameSuccess:"",WalletReceive:"Receive",WalletCompatibleNetworks:"Compatible Networks",Swap:"Swap",SwapSelectToken:"Select token",SwapPreview:"Preview swap",WalletSend:"Send",WalletSendPreview:"Review send",WalletSendSelectToken:"Select Token",WhatIsANetwork:"What is a network?",WhatIsAWallet:"What is a wallet?",ConnectWallets:"Connect wallet",ConnectSocials:"All socials",ConnectingSocial:R.N.state.socialProvider?R.N.state.socialProvider:"Connect Social",ConnectingMultiChain:"Select chain",ConnectingFarcaster:"Farcaster",SwitchActiveChain:"Switch chain",SmartSessionCreated:void 0,SmartSessionList:"Smart Sessions",SIWXSignMessage:"Sign In",PayLoading:"Payment in progress"}}let K=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.heading=W()[d.RouterController.state.view],this.network=c.R.state.activeCaipNetwork,this.networkImage=N.f.getNetworkImage(this.network),this.showBack=!1,this.prevHistoryLength=1,this.view=d.RouterController.state.view,this.viewDirection="",this.headerText=W()[d.RouterController.state.view],this.unsubscribe.push(T.W.subscribeNetworkImages(()=>{this.networkImage=N.f.getNetworkImage(this.network)}),d.RouterController.subscribeKey("view",e=>{setTimeout(()=>{this.view=e,this.headerText=W()[e]},q.b.ANIMATION_DURATIONS.HeaderText),this.onViewChange(),this.onHistoryChange()}),c.R.subscribeKey("activeCaipNetwork",e=>{this.network=e,this.networkImage=N.f.getNetworkImage(this.network)}))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){return i.dy`
      <wui-flex .padding=${this.getPadding()} justifyContent="space-between" alignItems="center">
        ${this.leftHeaderTemplate()} ${this.titleTemplate()} ${this.rightHeaderTemplate()}
      </wui-flex>
    `}onWalletHelp(){M.X.sendEvent({type:"track",event:"CLICK_WALLET_HELP"}),d.RouterController.push("WhatIsAWallet")}async onClose(){await f.safeClose()}rightHeaderTemplate(){let e=a.OptionsController?.state?.features?.smartSessions;return"Account"===d.RouterController.state.view&&e?i.dy`<wui-flex>
      <wui-icon-link
        icon="clock"
        @click=${()=>d.RouterController.push("SmartSessionList")}
        data-testid="w3m-header-smart-sessions"
      ></wui-icon-link>
      ${this.closeButtonTemplate()}
    </wui-flex> `:this.closeButtonTemplate()}closeButtonTemplate(){return i.dy`
      <wui-icon-link
        icon="close"
        @click=${this.onClose.bind(this)}
        data-testid="w3m-header-close"
      ></wui-icon-link>
    `}titleTemplate(){let e=z.includes(this.view);return i.dy`
      <wui-flex
        view-direction="${this.viewDirection}"
        class="w3m-header-title"
        alignItems="center"
        gap="xs"
      >
        <wui-text variant="paragraph-700" color="fg-100" data-testid="w3m-header-text"
          >${this.headerText}</wui-text
        >
        ${e?i.dy`<wui-tag variant="main">Beta</wui-tag>`:null}
      </wui-flex>
    `}leftHeaderTemplate(){let{view:e}=d.RouterController.state,t="Connect"===e,r=a.OptionsController.state.enableEmbedded,n=a.OptionsController.state.enableNetworkSwitch;return"Account"===e&&n?i.dy`<wui-select
        id="dynamic"
        data-testid="w3m-account-select-network"
        active-network=${(0,s.o)(this.network?.name)}
        @click=${this.onNetworks.bind(this)}
        imageSrc=${(0,s.o)(this.networkImage)}
      ></wui-select>`:this.showBack&&!("ApproveTransaction"===e||"ConnectingSiwe"===e||t&&r)?i.dy`<wui-icon-link
        data-testid="header-back"
        id="dynamic"
        icon="chevronLeft"
        @click=${this.onGoBack.bind(this)}
      ></wui-icon-link>`:i.dy`<wui-icon-link
      data-hidden=${!t}
      id="dynamic"
      icon="helpCircle"
      @click=${this.onWalletHelp.bind(this)}
    ></wui-icon-link>`}onNetworks(){this.isAllowedNetworkSwitch()&&(M.X.sendEvent({type:"track",event:"CLICK_NETWORKS"}),d.RouterController.push("Networks"))}isAllowedNetworkSwitch(){let e=c.R.getAllRequestedCaipNetworks(),t=!!e&&e.length>1,r=e?.find(({id:e})=>e===this.network?.id);return t||!r}getPadding(){return this.heading?["l","2l","l","2l"]:["0","2l","0","2l"]}onViewChange(){let{history:e}=d.RouterController.state,t=q.b.VIEW_DIRECTION.Next;e.length<this.prevHistoryLength&&(t=q.b.VIEW_DIRECTION.Prev),this.prevHistoryLength=e.length,this.viewDirection=t}async onHistoryChange(){let{history:e}=d.RouterController.state,t=this.shadowRoot?.querySelector("#dynamic");e.length>1&&!this.showBack&&t?(await t.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!0,t.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"})):e.length<=1&&this.showBack&&t&&(await t.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!1,t.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}onGoBack(){d.RouterController.goBack()}};K.styles=H,F([(0,n.SB)()],K.prototype,"heading",void 0),F([(0,n.SB)()],K.prototype,"network",void 0),F([(0,n.SB)()],K.prototype,"networkImage",void 0),F([(0,n.SB)()],K.prototype,"showBack",void 0),F([(0,n.SB)()],K.prototype,"prevHistoryLength",void 0),F([(0,n.SB)()],K.prototype,"view",void 0),F([(0,n.SB)()],K.prototype,"viewDirection",void 0),F([(0,n.SB)()],K.prototype,"headerText",void 0),K=F([(0,v.Mo)("w3m-header")],K),r(11266);var V=i.iv`
  :host {
    display: flex;
    column-gap: var(--wui-spacing-s);
    align-items: center;
    padding: var(--wui-spacing-xs) var(--wui-spacing-m) var(--wui-spacing-xs) var(--wui-spacing-xs);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-gray-glass-005);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-175);
    box-shadow:
      0px 14px 64px -4px rgba(0, 0, 0, 0.15),
      0px 8px 22px -6px rgba(0, 0, 0, 0.15);

    max-width: 300px;
  }

  :host wui-loading-spinner {
    margin-left: var(--wui-spacing-3xs);
  }
`,G=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let Z=class extends i.oi{constructor(){super(...arguments),this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="checkmark",this.message="",this.loading=!1,this.iconType="default"}render(){return i.dy`
      ${this.templateIcon()}
      <wui-text variant="paragraph-500" color="fg-100" data-testid="wui-snackbar-message"
        >${this.message}</wui-text
      >
    `}templateIcon(){return this.loading?i.dy`<wui-loading-spinner size="md" color="accent-100"></wui-loading-spinner>`:"default"===this.iconType?i.dy`<wui-icon size="xl" color=${this.iconColor} name=${this.icon}></wui-icon>`:i.dy`<wui-icon-box
      size="sm"
      iconSize="xs"
      iconColor=${this.iconColor}
      backgroundColor=${this.backgroundColor}
      icon=${this.icon}
      background="opaque"
    ></wui-icon-box>`}};Z.styles=[b.ET,V],G([(0,n.Cb)()],Z.prototype,"backgroundColor",void 0),G([(0,n.Cb)()],Z.prototype,"iconColor",void 0),G([(0,n.Cb)()],Z.prototype,"icon",void 0),G([(0,n.Cb)()],Z.prototype,"message",void 0),G([(0,n.Cb)()],Z.prototype,"loading",void 0),G([(0,n.Cb)()],Z.prototype,"iconType",void 0),Z=G([(0,w.M)("wui-snackbar")],Z);var J=i.iv`
  :host {
    display: block;
    position: absolute;
    opacity: 0;
    pointer-events: none;
    top: 11px;
    left: 50%;
    width: max-content;
  }
`,Y=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let X={loading:void 0,success:{backgroundColor:"success-100",iconColor:"success-100",icon:"checkmark"},error:{backgroundColor:"error-100",iconColor:"error-100",icon:"close"}},Q=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.open=m.SnackController.state.open,this.unsubscribe.push(m.SnackController.subscribeKey("open",e=>{this.open=e,this.onOpen()}))}disconnectedCallback(){clearTimeout(this.timeout),this.unsubscribe.forEach(e=>e())}render(){let{message:e,variant:t,svg:r}=m.SnackController.state,n=X[t],{icon:s,iconColor:o}=r??n??{};return i.dy`
      <wui-snackbar
        message=${e}
        backgroundColor=${n?.backgroundColor}
        iconColor=${o}
        icon=${s}
        .loading=${"loading"===t}
      ></wui-snackbar>
    `}onOpen(){clearTimeout(this.timeout),this.open?(this.animate([{opacity:0,transform:"translateX(-50%) scale(0.85)"},{opacity:1,transform:"translateX(-50%) scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.timeout&&clearTimeout(this.timeout),m.SnackController.state.autoClose&&(this.timeout=setTimeout(()=>m.SnackController.hide(),2500))):this.animate([{opacity:1,transform:"translateX(-50%) scale(1)"},{opacity:0,transform:"translateX(-50%) scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"})}};Q.styles=J,Y([(0,n.SB)()],Q.prototype,"open",void 0),Q=Y([(0,v.Mo)("w3m-snackbar")],Q);var ee=r(53722),et=r(10913),er=r(33091);let ei=(0,ee.sj)({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),en=(0,er.P)({state:ei,subscribe:e=>(0,ee.Ld)(ei,()=>e(ei)),subscribeKey:(e,t)=>(0,et.VW)(ei,e,t),showTooltip({message:e,triggerRect:t,variant:r}){ei.open=!0,ei.message=e,ei.triggerRect=t,ei.variant=r},hide(){ei.open=!1,ei.message="",ei.triggerRect={width:0,height:0,top:0,left:0}}});r(72888);var es=i.iv`
  :host {
    pointer-events: none;
  }

  :host > wui-flex {
    display: var(--w3m-tooltip-display);
    opacity: var(--w3m-tooltip-opacity);
    padding: 9px var(--wui-spacing-s) 10px var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-xxs);
    color: var(--wui-color-bg-100);
    position: fixed;
    top: var(--w3m-tooltip-top);
    left: var(--w3m-tooltip-left);
    transform: translate(calc(-50% + var(--w3m-tooltip-parent-width)), calc(-100% - 8px));
    max-width: calc(var(--w3m-modal-width) - var(--wui-spacing-xl));
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host([data-variant='shade']) > wui-flex {
    background-color: var(--wui-color-bg-150);
    border: 1px solid var(--wui-color-gray-glass-005);
  }

  :host([data-variant='shade']) > wui-flex > wui-text {
    color: var(--wui-color-fg-150);
  }

  :host([data-variant='fill']) > wui-flex {
    background-color: var(--wui-color-fg-100);
    border: none;
  }

  wui-icon {
    position: absolute;
    width: 12px !important;
    height: 4px !important;
    color: var(--wui-color-bg-150);
  }

  wui-icon[data-placement='top'] {
    bottom: 0px;
    left: 50%;
    transform: translate(-50%, 95%);
  }

  wui-icon[data-placement='bottom'] {
    top: 0;
    left: 50%;
    transform: translate(-50%, -95%) rotate(180deg);
  }

  wui-icon[data-placement='right'] {
    top: 50%;
    left: 0;
    transform: translate(-65%, -50%) rotate(90deg);
  }

  wui-icon[data-placement='left'] {
    top: 50%;
    right: 0%;
    transform: translate(65%, -50%) rotate(270deg);
  }
`,eo=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ea=class extends i.oi{constructor(){super(),this.unsubscribe=[],this.open=en.state.open,this.message=en.state.message,this.triggerRect=en.state.triggerRect,this.variant=en.state.variant,this.unsubscribe.push(...[en.subscribe(e=>{this.open=e.open,this.message=e.message,this.triggerRect=e.triggerRect,this.variant=e.variant})])}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){this.dataset.variant=this.variant;let e=this.triggerRect.top,t=this.triggerRect.left;return this.style.cssText=`
    --w3m-tooltip-top: ${e}px;
    --w3m-tooltip-left: ${t}px;
    --w3m-tooltip-parent-width: ${this.triggerRect.width/2}px;
    --w3m-tooltip-display: ${this.open?"flex":"none"};
    --w3m-tooltip-opacity: ${this.open?1:0};
    `,i.dy`<wui-flex>
      <wui-icon data-placement="top" color="fg-100" size="inherit" name="cursor"></wui-icon>
      <wui-text color="inherit" variant="small-500">${this.message}</wui-text>
    </wui-flex>`}};ea.styles=[es],eo([(0,n.SB)()],ea.prototype,"open",void 0),eo([(0,n.SB)()],ea.prototype,"message",void 0),eo([(0,n.SB)()],ea.prototype,"triggerRect",void 0),eo([(0,n.SB)()],ea.prototype,"variant",void 0),ea=eo([(0,v.Mo)("w3m-tooltip"),(0,v.Mo)("w3m-tooltip")],ea);var el=i.iv`
  :host {
    --prev-height: 0px;
    --new-height: 0px;
    display: block;
  }

  div.w3m-router-container {
    transform: translateY(0);
    opacity: 1;
  }

  div.w3m-router-container[view-direction='prev'] {
    animation:
      slide-left-out 150ms forwards ease,
      slide-left-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  div.w3m-router-container[view-direction='next'] {
    animation:
      slide-right-out 150ms forwards ease,
      slide-right-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  @keyframes slide-left-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(10px);
      opacity: 0;
    }
  }

  @keyframes slide-left-in {
    from {
      transform: translateX(-10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-right-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(-10px);
      opacity: 0;
    }
  }

  @keyframes slide-right-in {
    from {
      transform: translateX(10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`,ec=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let eu=class extends i.oi{constructor(){super(),this.resizeObserver=void 0,this.prevHeight="0px",this.prevHistoryLength=1,this.unsubscribe=[],this.view=d.RouterController.state.view,this.viewDirection="",this.unsubscribe.push(d.RouterController.subscribeKey("view",e=>this.onViewChange(e)))}firstUpdated(){this.resizeObserver=new ResizeObserver(([e])=>{let t=`${e?.contentRect.height}px`;"0px"!==this.prevHeight&&(this.style.setProperty("--prev-height",this.prevHeight),this.style.setProperty("--new-height",t),this.style.animation="w3m-view-height 150ms forwards ease",this.style.height="auto"),setTimeout(()=>{this.prevHeight=t,this.style.animation="unset"},q.b.ANIMATION_DURATIONS.ModalHeight)}),this.resizeObserver?.observe(this.getWrapper())}disconnectedCallback(){this.resizeObserver?.unobserve(this.getWrapper()),this.unsubscribe.forEach(e=>e())}render(){return i.dy`<div class="w3m-router-container" view-direction="${this.viewDirection}">
      ${this.viewTemplate()}
    </div>`}viewTemplate(){switch(this.view){case"AccountSettings":return i.dy`<w3m-account-settings-view></w3m-account-settings-view>`;case"Account":return i.dy`<w3m-account-view></w3m-account-view>`;case"AllWallets":return i.dy`<w3m-all-wallets-view></w3m-all-wallets-view>`;case"ApproveTransaction":return i.dy`<w3m-approve-transaction-view></w3m-approve-transaction-view>`;case"BuyInProgress":return i.dy`<w3m-buy-in-progress-view></w3m-buy-in-progress-view>`;case"ChooseAccountName":return i.dy`<w3m-choose-account-name-view></w3m-choose-account-name-view>`;case"Connect":default:return i.dy`<w3m-connect-view></w3m-connect-view>`;case"Create":return i.dy`<w3m-connect-view walletGuide="explore"></w3m-connect-view>`;case"ConnectingWalletConnect":return i.dy`<w3m-connecting-wc-view></w3m-connecting-wc-view>`;case"ConnectingWalletConnectBasic":return i.dy`<w3m-connecting-wc-basic-view></w3m-connecting-wc-basic-view>`;case"ConnectingExternal":return i.dy`<w3m-connecting-external-view></w3m-connecting-external-view>`;case"ConnectingSiwe":return i.dy`<w3m-connecting-siwe-view></w3m-connecting-siwe-view>`;case"ConnectWallets":return i.dy`<w3m-connect-wallets-view></w3m-connect-wallets-view>`;case"ConnectSocials":return i.dy`<w3m-connect-socials-view></w3m-connect-socials-view>`;case"ConnectingSocial":return i.dy`<w3m-connecting-social-view></w3m-connecting-social-view>`;case"Downloads":return i.dy`<w3m-downloads-view></w3m-downloads-view>`;case"EmailLogin":return i.dy`<w3m-email-login-view></w3m-email-login-view>`;case"EmailVerifyOtp":return i.dy`<w3m-email-verify-otp-view></w3m-email-verify-otp-view>`;case"EmailVerifyDevice":return i.dy`<w3m-email-verify-device-view></w3m-email-verify-device-view>`;case"GetWallet":return i.dy`<w3m-get-wallet-view></w3m-get-wallet-view>`;case"Networks":return i.dy`<w3m-networks-view></w3m-networks-view>`;case"SwitchNetwork":return i.dy`<w3m-network-switch-view></w3m-network-switch-view>`;case"Profile":return i.dy`<w3m-profile-view></w3m-profile-view>`;case"SwitchAddress":return i.dy`<w3m-switch-address-view></w3m-switch-address-view>`;case"Transactions":return i.dy`<w3m-transactions-view></w3m-transactions-view>`;case"OnRampProviders":return i.dy`<w3m-onramp-providers-view></w3m-onramp-providers-view>`;case"OnRampActivity":return i.dy`<w3m-onramp-activity-view></w3m-onramp-activity-view>`;case"OnRampTokenSelect":return i.dy`<w3m-onramp-token-select-view></w3m-onramp-token-select-view>`;case"OnRampFiatSelect":return i.dy`<w3m-onramp-fiat-select-view></w3m-onramp-fiat-select-view>`;case"UpgradeEmailWallet":return i.dy`<w3m-upgrade-wallet-view></w3m-upgrade-wallet-view>`;case"UpdateEmailWallet":return i.dy`<w3m-update-email-wallet-view></w3m-update-email-wallet-view>`;case"UpdateEmailPrimaryOtp":return i.dy`<w3m-update-email-primary-otp-view></w3m-update-email-primary-otp-view>`;case"UpdateEmailSecondaryOtp":return i.dy`<w3m-update-email-secondary-otp-view></w3m-update-email-secondary-otp-view>`;case"UnsupportedChain":return i.dy`<w3m-unsupported-chain-view></w3m-unsupported-chain-view>`;case"Swap":return i.dy`<w3m-swap-view></w3m-swap-view>`;case"SwapSelectToken":return i.dy`<w3m-swap-select-token-view></w3m-swap-select-token-view>`;case"SwapPreview":return i.dy`<w3m-swap-preview-view></w3m-swap-preview-view>`;case"WalletSend":return i.dy`<w3m-wallet-send-view></w3m-wallet-send-view>`;case"WalletSendSelectToken":return i.dy`<w3m-wallet-send-select-token-view></w3m-wallet-send-select-token-view>`;case"WalletSendPreview":return i.dy`<w3m-wallet-send-preview-view></w3m-wallet-send-preview-view>`;case"WhatIsABuy":return i.dy`<w3m-what-is-a-buy-view></w3m-what-is-a-buy-view>`;case"WalletReceive":return i.dy`<w3m-wallet-receive-view></w3m-wallet-receive-view>`;case"WalletCompatibleNetworks":return i.dy`<w3m-wallet-compatible-networks-view></w3m-wallet-compatible-networks-view>`;case"WhatIsAWallet":return i.dy`<w3m-what-is-a-wallet-view></w3m-what-is-a-wallet-view>`;case"ConnectingMultiChain":return i.dy`<w3m-connecting-multi-chain-view></w3m-connecting-multi-chain-view>`;case"WhatIsANetwork":return i.dy`<w3m-what-is-a-network-view></w3m-what-is-a-network-view>`;case"ConnectingFarcaster":return i.dy`<w3m-connecting-farcaster-view></w3m-connecting-farcaster-view>`;case"SwitchActiveChain":return i.dy`<w3m-switch-active-chain-view></w3m-switch-active-chain-view>`;case"RegisterAccountName":return i.dy`<w3m-register-account-name-view></w3m-register-account-name-view>`;case"RegisterAccountNameSuccess":return i.dy`<w3m-register-account-name-success-view></w3m-register-account-name-success-view>`;case"SmartSessionCreated":return i.dy`<w3m-smart-session-created-view></w3m-smart-session-created-view>`;case"SmartSessionList":return i.dy`<w3m-smart-session-list-view></w3m-smart-session-list-view>`;case"SIWXSignMessage":return i.dy`<w3m-siwx-sign-message-view></w3m-siwx-sign-message-view>`;case"Pay":return i.dy`<w3m-pay-view></w3m-pay-view>`;case"PayLoading":return i.dy`<w3m-pay-loading-view></w3m-pay-loading-view>`}}onViewChange(e){en.hide();let t=q.b.VIEW_DIRECTION.Next,{history:r}=d.RouterController.state;r.length<this.prevHistoryLength&&(t=q.b.VIEW_DIRECTION.Prev),this.prevHistoryLength=r.length,this.viewDirection=t,setTimeout(()=>{this.view=e},q.b.ANIMATION_DURATIONS.ViewTransition)}getWrapper(){return this.shadowRoot?.querySelector("div")}};eu.styles=el,ec([(0,n.SB)()],eu.prototype,"view",void 0),ec([(0,n.SB)()],eu.prototype,"viewDirection",void 0),eu=ec([(0,v.Mo)("w3m-router")],eu);var eh=i.iv`
  :host {
    z-index: var(--w3m-z-index);
    display: block;
    backface-visibility: hidden;
    will-change: opacity;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0;
    background-color: var(--wui-cover);
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host(.open) {
    opacity: 1;
  }

  :host(.appkit-modal) {
    position: relative;
    pointer-events: unset;
    background: none;
    width: 100%;
    opacity: 1;
  }

  wui-card {
    max-width: var(--w3m-modal-width);
    width: 100%;
    position: relative;
    animation: zoom-in 0.2s var(--wui-ease-out-power-2);
    animation-fill-mode: backwards;
    outline: none;
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host(.appkit-modal) wui-card {
    max-width: 400px;
  }

  wui-card[shake='true'] {
    animation:
      zoom-in 0.2s var(--wui-ease-out-power-2),
      w3m-shake 0.5s var(--wui-ease-out-power-2);
  }

  wui-flex {
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  @media (max-height: 700px) and (min-width: 431px) {
    wui-flex {
      align-items: flex-start;
    }

    wui-card {
      margin: var(--wui-spacing-xxl) 0px;
    }
  }

  @media (max-width: 430px) {
    wui-flex {
      align-items: flex-end;
    }

    wui-card {
      max-width: 100%;
      border-bottom-left-radius: var(--local-border-bottom-mobile-radius);
      border-bottom-right-radius: var(--local-border-bottom-mobile-radius);
      border-bottom: none;
      animation: slide-in 0.2s var(--wui-ease-out-power-2);
    }

    wui-card[shake='true'] {
      animation:
        slide-in 0.2s var(--wui-ease-out-power-2),
        w3m-shake 0.5s var(--wui-ease-out-power-2);
    }
  }

  @keyframes zoom-in {
    0% {
      transform: scale(0.95) translateY(0);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes slide-in {
    0% {
      transform: scale(1) translateY(50px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes w3m-shake {
    0% {
      transform: scale(1) rotate(0deg);
    }
    20% {
      transform: scale(1) rotate(-1deg);
    }
    40% {
      transform: scale(1) rotate(1.5deg);
    }
    60% {
      transform: scale(1) rotate(-1.5deg);
    }
    80% {
      transform: scale(1) rotate(1deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes w3m-view-height {
    from {
      height: var(--prev-height);
    }
    to {
      height: var(--new-height);
    }
  }
`,ed=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let ep="scroll-lock";class ef extends i.oi{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.hasPrefetched=!1,this.enableEmbedded=a.OptionsController.state.enableEmbedded,this.open=l.I.state.open,this.caipAddress=c.R.state.activeCaipAddress,this.caipNetwork=c.R.state.activeCaipNetwork,this.shake=l.I.state.shake,this.filterByNamespace=u.ConnectorController.state.filterByNamespace,this.initializeTheming(),h.ApiController.prefetchAnalyticsConfig(),this.unsubscribe.push(...[l.I.subscribeKey("open",e=>e?this.onOpen():this.onClose()),l.I.subscribeKey("shake",e=>this.shake=e),c.R.subscribeKey("activeCaipNetwork",e=>this.onNewNetwork(e)),c.R.subscribeKey("activeCaipAddress",e=>this.onNewAddress(e)),a.OptionsController.subscribeKey("enableEmbedded",e=>this.enableEmbedded=e),u.ConnectorController.subscribeKey("filterByNamespace",e=>{this.filterByNamespace===e||c.R.getAccountData(e)?.caipAddress||(h.ApiController.fetchRecommendedWallets(),this.filterByNamespace=e)})])}firstUpdated(){if(this.caipAddress){if(this.enableEmbedded){l.I.close(),this.prefetch();return}this.onNewAddress(this.caipAddress)}this.open&&this.onOpen(),this.enableEmbedded&&this.prefetch()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return(this.style.cssText=`
      --local-border-bottom-mobile-radius: ${this.enableEmbedded?"clamp(0px, var(--wui-border-radius-l), 44px)":"0px"};
    `,this.enableEmbedded)?i.dy`${this.contentTemplate()}
        <w3m-tooltip></w3m-tooltip> `:this.open?i.dy`
          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid="w3m-modal-overlay">
            ${this.contentTemplate()}
          </wui-flex>
          <w3m-tooltip></w3m-tooltip>
        `:null}contentTemplate(){return i.dy` <wui-card
      shake="${this.shake}"
      data-embedded="${(0,s.o)(this.enableEmbedded)}"
      role="alertdialog"
      aria-modal="true"
      tabindex="0"
      data-testid="w3m-modal-card"
    >
      <w3m-header></w3m-header>
      <w3m-router></w3m-router>
      <w3m-snackbar></w3m-snackbar>
      <w3m-alertbar></w3m-alertbar>
    </wui-card>`}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){await f.safeClose()}initializeTheming(){let{themeVariables:e,themeMode:t}=g.ThemeController.state,r=v.Hg.getColorTheme(t);(0,v.n)(e,r)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),m.SnackController.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){let e=document.createElement("style");e.dataset.w3m=ep,e.textContent=`
      body {
        touch-action: none;
        overflow: hidden;
        overscroll-behavior: contain;
      }
      w3m-modal {
        pointer-events: auto;
      }
    `,document.head.appendChild(e)}onScrollUnlock(){let e=document.head.querySelector(`style[data-w3m="${ep}"]`);e&&e.remove()}onAddKeyboardListener(){this.abortController=new AbortController;let e=this.shadowRoot?.querySelector("wui-card");e?.focus(),window.addEventListener("keydown",t=>{if("Escape"===t.key)this.handleClose();else if("Tab"===t.key){let{tagName:r}=t.target;!r||r.includes("W3M-")||r.includes("WUI-")||e?.focus()}},this.abortController)}onRemoveKeyboardListener(){this.abortController?.abort(),this.abortController=void 0}async onNewAddress(e){let t=c.R.state.isSwitchingNamespace,r=y.j.getPlainAddress(e);r||t?t&&r&&d.RouterController.goBack():l.I.close(),await p.w.initializeIfEnabled(),this.caipAddress=e,c.R.setIsSwitchingNamespace(!1)}onNewNetwork(e){let t=this.caipNetwork,r=t?.caipNetworkId?.toString(),i=t?.chainNamespace,n=e?.caipNetworkId?.toString(),s=e?.chainNamespace,a=r!==n,u=t?.name===o.b.UNSUPPORTED_NETWORK_NAME,h="ConnectingExternal"===d.RouterController.state.view,p=!c.R.getAccountData(e?.chainNamespace)?.caipAddress,f="UnsupportedChain"===d.RouterController.state.view,g=l.I.state.open,m=!1;g&&!h&&(p?a&&(m=!0):f?m=!0:!a||i!==s||u||(m=!0)),m&&"SIWXSignMessage"!==d.RouterController.state.view&&d.RouterController.goBack(),this.caipNetwork=e}prefetch(){this.hasPrefetched||(h.ApiController.prefetch(),h.ApiController.fetchWalletsByPage({page:1}),this.hasPrefetched=!0)}}ef.styles=eh,ed([(0,n.Cb)({type:Boolean})],ef.prototype,"enableEmbedded",void 0),ed([(0,n.SB)()],ef.prototype,"open",void 0),ed([(0,n.SB)()],ef.prototype,"caipAddress",void 0),ed([(0,n.SB)()],ef.prototype,"caipNetwork",void 0),ed([(0,n.SB)()],ef.prototype,"shake",void 0),ed([(0,n.SB)()],ef.prototype,"filterByNamespace",void 0);let eg=class extends ef{};eg=ed([(0,v.Mo)("w3m-modal")],eg);let em=class extends ef{};em=ed([(0,v.Mo)("appkit-modal")],em)},43609:function(e,t,r){"use strict";r.d(t,{C:function(){return p}});var i=r(29350),n=r(5969),s=r(92943),o=r(96424),a=r(19876),l=r(25172),c=r(25620),u=r(95646),h=r(38413),d=r(94579);let p={getConnectorsByType(e,t,r){let{customWallets:i}=n.OptionsController.state,o=s.M.getRecentWallets(),a=d.J.filterOutDuplicateWallets(t),l=d.J.filterOutDuplicateWallets(r),c=e.filter(e=>"MULTI_CHAIN"===e.type),u=e.filter(e=>"ANNOUNCED"===e.type),h=e.filter(e=>"INJECTED"===e.type);return{custom:i,recent:o,external:e.filter(e=>"EXTERNAL"===e.type),multiChain:c,announced:u,injected:h,recommended:a,featured:l}},showConnector(e){let t=e.info?.rdns,r=!!t&&o.ApiController.state.excludedWallets.some(e=>!!e.rdns&&e.rdns===t),i=!!e.name&&o.ApiController.state.excludedWallets.some(t=>h.g.isLowerCaseMatch(t.name,e.name));return!("INJECTED"===e.type&&("Browser Wallet"===e.name&&(!a.j.isMobile()||a.j.isMobile()&&!t&&!l.ConnectionController.checkInstalled())||r||i))&&("ANNOUNCED"!==e.type&&"EXTERNAL"!==e.type||!r&&!i)},getIsConnectedWithWC:()=>Array.from(c.R.state.chains.values()).some(e=>u.ConnectorController.getConnectorId(e.namespace)===i.b.CONNECTOR_ID.WALLET_CONNECT),getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:i,announced:s,injected:o,multiChain:a,external:l,overriddenConnectors:c=n.OptionsController.state.features?.connectorTypeOrder??[]}){let u=p.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:n.OptionsController.state.enableWalletConnect&&!u},{type:"recent",isEnabled:i.length>0},{type:"injected",isEnabled:[...o,...s,...a].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:e.length>0}].filter(e=>e.isEnabled),d=new Set(h.map(e=>e.type)),f=c.filter(e=>d.has(e)).map(e=>({type:e,isEnabled:!0})),g=h.filter(({type:e})=>!f.some(({type:t})=>t===e));return Array.from(new Set([...f,...g].map(({type:e})=>e)))}}},62357:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var i=r(62601);let n={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(void 0!==i&&void 0!==i.env?i.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}},94579:function(e,t,r){"use strict";r.d(t,{J:function(){return h}});var i=r(5969),n=r(95646),s=r(92943),o=r(19876),a=r(96424),l=r(38413),c=r(43609),u=r(62357);let h={filterOutDuplicatesByRDNS(e){let t=i.OptionsController.state.enableEIP6963?n.ConnectorController.state.connectors:[],r=s.M.getRecentWallets(),a=t.map(e=>e.info?.rdns).filter(Boolean),l=r.map(e=>e.rdns).filter(Boolean),c=a.concat(l);if(c.includes("io.metamask.mobile")&&o.j.isMobile()){let e=c.indexOf("io.metamask.mobile");c[e]="io.metamask"}return e.filter(e=>!c.includes(String(e?.rdns)))},filterOutDuplicatesByIds(e){let t=n.ConnectorController.state.connectors.filter(e=>"ANNOUNCED"===e.type||"INJECTED"===e.type),r=s.M.getRecentWallets(),i=t.map(e=>e.explorerId),o=r.map(e=>e.id),a=i.concat(o);return e.filter(e=>!a.includes(e?.id))},filterOutDuplicateWallets(e){let t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){let{connectors:t}=n.ConnectorController.state,{featuredWalletIds:r}=i.OptionsController.state,s=t.filter(e=>"ANNOUNCED"===e.type).reduce((e,t)=>(t.info?.rdns&&(e[t.info.rdns]=!0),e),{});return e.map(e=>({...e,installed:!!e.rdns&&!!s[e.rdns??""]})).sort((e,t)=>{let i=Number(t.installed)-Number(e.installed);if(0!==i)return i;if(r?.length){let i=r.indexOf(e.id),n=r.indexOf(t.id);if(-1!==i&&-1!==n)return i-n;if(-1!==i)return -1;if(-1!==n)return 1}return 0})},getConnectOrderMethod(e,t){let r=e?.connectMethodsOrder||i.OptionsController.state.features?.connectMethodsOrder,s=t||n.ConnectorController.state.connectors;if(r)return r;let{injected:o,announced:l}=c.C.getConnectorsByType(s,a.ApiController.state.recommended,a.ApiController.state.featured),h=o.filter(c.C.showConnector),d=l.filter(c.C.showConnector);return h.length||d.length?["wallet","email","social"]:u.b.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){let t=!!e.rdns&&a.ApiController.state.excludedWallets.some(t=>t.rdns===e.rdns),r=!!e.name&&a.ApiController.state.excludedWallets.some(t=>l.g.isLowerCaseMatch(t.name,e.name));return t||r}}},61217:function(e,t,r){"use strict";r.d(t,{Hg:function(){return n.H},Mo:function(){return u.M},n:function(){return i.n},Hs:function(){return i.Hs},R:function(){return i.R}});var i=r(6600),n=r(35016),s=r(74548),o=r(93330),a=r(6537),l=r(20239);s.extend(a),s.extend(l);let c={...o,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}};s.locale("en-web3-modal",c);var u=r(22817)},57318:function(e,t,r){"use strict";r(92439)},72888:function(e,t,r){"use strict";r(58837)},98906:function(e,t,r){"use strict";r(2614)},69437:function(e,t,r){"use strict";r.r(t),r.d(t,{addSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.0023 0.875C7.48571 0.875 7.8776 1.26675 7.8776 1.75V6.125H12.2541C12.7375 6.125 13.1294 6.51675 13.1294 7C13.1294 7.48325 12.7375 7.875 12.2541 7.875H7.8776V12.25C7.8776 12.7332 7.48571 13.125 7.0023 13.125C6.51889 13.125 6.12701 12.7332 6.12701 12.25V7.875H1.75054C1.26713 7.875 0.875244 7.48325 0.875244 7C0.875244 6.51675 1.26713 6.125 1.75054 6.125H6.12701V1.75C6.12701 1.26675 6.51889 0.875 7.0023 0.875Z"
    fill="#667dff"
  /></svg
>`},3110:function(e,t,r){"use strict";r.r(t),r.d(t,{allWalletsSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 24 24">
  <path
    style="fill: var(--wui-color-accent-100);"
    d="M10.2 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM10.2 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0Z"
  />
</svg>`},16413:function(e,t,r){"use strict";r.r(t),r.d(t,{appStoreSvg:function(){return n}});var i=r(34954);let n=i.YP`
<svg width="36" height="36">
  <path
    d="M28.724 0H7.271A7.269 7.269 0 0 0 0 7.272v21.46A7.268 7.268 0 0 0 7.271 36H28.73A7.272 7.272 0 0 0 36 28.728V7.272A7.275 7.275 0 0 0 28.724 0Z"
    fill="url(#a)"
  />
  <path
    d="m17.845 8.271.729-1.26a1.64 1.64 0 1 1 2.843 1.638l-7.023 12.159h5.08c1.646 0 2.569 1.935 1.853 3.276H6.434a1.632 1.632 0 0 1-1.638-1.638c0-.909.73-1.638 1.638-1.638h4.176l5.345-9.265-1.67-2.898a1.642 1.642 0 0 1 2.844-1.638l.716 1.264Zm-6.317 17.5-1.575 2.732a1.64 1.64 0 1 1-2.844-1.638l1.17-2.025c1.323-.41 2.398-.095 3.249.931Zm13.56-4.954h4.262c.909 0 1.638.729 1.638 1.638 0 .909-.73 1.638-1.638 1.638h-2.367l1.597 2.772c.45.788.185 1.782-.602 2.241a1.642 1.642 0 0 1-2.241-.603c-2.69-4.666-4.711-8.159-6.052-10.485-1.372-2.367-.391-4.743.576-5.549 1.075 1.846 2.682 4.631 4.828 8.348Z"
    fill="#fff"
  />
  <defs>
    <linearGradient id="a" x1="18" y1="0" x2="18" y2="36" gradientUnits="userSpaceOnUse">
      <stop stop-color="#18BFFB" />
      <stop offset="1" stop-color="#2072F3" />
    </linearGradient>
  </defs>
</svg>`},2623:function(e,t,r){"use strict";r.r(t),r.d(t,{appleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#000" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M28.77 23.3c-.69 1.99-2.75 5.52-4.87 5.56-1.4.03-1.86-.84-3.46-.84-1.61 0-2.12.81-3.45.86-2.25.1-5.72-5.1-5.72-9.62 0-4.15 2.9-6.2 5.42-6.25 1.36-.02 2.64.92 3.47.92.83 0 2.38-1.13 4.02-.97.68.03 2.6.28 3.84 2.08-3.27 2.14-2.76 6.61.75 8.25ZM24.2 7.88c-2.47.1-4.49 2.69-4.2 4.84 2.28.17 4.47-2.39 4.2-4.84Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`},24750:function(e,t,r){"use strict";r.r(t),r.d(t,{arrowBottomCircleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10.5 2.42908C6.31875 2.42908 2.92859 5.81989 2.92859 10.0034C2.92859 14.1869 6.31875 17.5777 10.5 17.5777C14.6813 17.5777 18.0714 14.1869 18.0714 10.0034C18.0714 5.81989 14.6813 2.42908 10.5 2.42908ZM0.928589 10.0034C0.928589 4.71596 5.21355 0.429077 10.5 0.429077C15.7865 0.429077 20.0714 4.71596 20.0714 10.0034C20.0714 15.2908 15.7865 19.5777 10.5 19.5777C5.21355 19.5777 0.928589 15.2908 0.928589 10.0034ZM10.5 5.75003C11.0523 5.75003 11.5 6.19774 11.5 6.75003L11.5 10.8343L12.7929 9.54137C13.1834 9.15085 13.8166 9.15085 14.2071 9.54137C14.5976 9.9319 14.5976 10.5651 14.2071 10.9556L11.2071 13.9556C10.8166 14.3461 10.1834 14.3461 9.79291 13.9556L6.79291 10.9556C6.40239 10.5651 6.40239 9.9319 6.79291 9.54137C7.18343 9.15085 7.8166 9.15085 8.20712 9.54137L9.50002 10.8343L9.50002 6.75003C9.50002 6.19774 9.94773 5.75003 10.5 5.75003Z"
    clip-rule="evenodd"
  /></svg
>`},45207:function(e,t,r){"use strict";r.r(t),r.d(t,{arrowBottomSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 1.99a1 1 0 0 1 1 1v7.58l2.46-2.46a1 1 0 0 1 1.41 1.42L7.7 13.69a1 1 0 0 1-1.41 0L2.12 9.53A1 1 0 0 1 3.54 8.1L6 10.57V3a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`},71768:function(e,t,r){"use strict";r.r(t),r.d(t,{arrowLeftSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13 7.99a1 1 0 0 1-1 1H4.4l2.46 2.46a1 1 0 1 1-1.41 1.41L1.29 8.7a1 1 0 0 1 0-1.41L5.46 3.1a1 1 0 0 1 1.41 1.42L4.41 6.99H12a1 1 0 0 1 1 1Z"
    clip-rule="evenodd"
  />
</svg>`},38837:function(e,t,r){"use strict";r.r(t),r.d(t,{arrowRightSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1 7.99a1 1 0 0 1 1-1h7.58L7.12 4.53A1 1 0 1 1 8.54 3.1l4.16 4.17a1 1 0 0 1 0 1.41l-4.16 4.17a1 1 0 1 1-1.42-1.41l2.46-2.46H2a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`},36986:function(e,t,r){"use strict";r.r(t),r.d(t,{arrowTopSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 13.99a1 1 0 0 1-1-1V5.4L3.54 7.86a1 1 0 0 1-1.42-1.41L6.3 2.28a1 1 0 0 1 1.41 0l4.17 4.17a1 1 0 1 1-1.41 1.41L8 5.4v7.59a1 1 0 0 1-1 1Z"
    clip-rule="evenodd"
  />
</svg>`},78038:function(e,t,r){"use strict";r.r(t),r.d(t,{bankSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.61391 1.57124C5.85142 1.42873 6.14813 1.42873 6.38564 1.57124L11.0793 4.38749C11.9179 4.89067 11.5612 6.17864 10.5832 6.17864H9.96398V10.0358H10.2854C10.6996 10.0358 11.0354 10.3716 11.0354 10.7858C11.0354 11.2 10.6996 11.5358 10.2854 11.5358H1.71416C1.29995 11.5358 0.964172 11.2 0.964172 10.7858C0.964172 10.3716 1.29995 10.0358 1.71416 10.0358H2.03558L2.03558 6.17864H1.41637C0.438389 6.17864 0.0816547 4.89066 0.920263 4.38749L5.61391 1.57124ZM3.53554 6.17864V10.0358H5.24979V6.17864H3.53554ZM6.74976 6.17864V10.0358H8.46401V6.17864H6.74976ZM8.64913 4.67864H3.35043L5.99978 3.089L8.64913 4.67864Z"
    fill="currentColor"
  /></svg
>`},39828:function(e,t,r){"use strict";r.r(t),r.d(t,{browserSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4 6.4a1 1 0 0 1-.46.89 6.98 6.98 0 0 0 .38 6.18A7 7 0 0 0 16.46 7.3a1 1 0 0 1-.47-.92 7 7 0 0 0-12 .03Zm-2.02-.5a9 9 0 1 1 16.03 8.2A9 9 0 0 1 1.98 5.9Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.03 8.63c-1.46-.3-2.72-.75-3.6-1.35l-.02-.01-.14-.11a1 1 0 0 1 1.2-1.6l.1.08c.6.4 1.52.74 2.69 1 .16-.99.39-1.88.67-2.65.3-.79.68-1.5 1.15-2.02A2.58 2.58 0 0 1 9.99 1c.8 0 1.45.44 1.92.97.47.52.84 1.23 1.14 2.02.29.77.52 1.66.68 2.64a8 8 0 0 0 2.7-1l.26-.18h.48a1 1 0 0 1 .12 2c-.86.51-2.01.91-3.34 1.18a22.24 22.24 0 0 1-.03 3.19c1.45.29 2.7.73 3.58 1.31a1 1 0 0 1-1.1 1.68c-.6-.4-1.56-.76-2.75-1-.15.8-.36 1.55-.6 2.2-.3.79-.67 1.5-1.14 2.02-.47.53-1.12.97-1.92.97-.8 0-1.45-.44-1.91-.97a6.51 6.51 0 0 1-1.15-2.02c-.24-.65-.44-1.4-.6-2.2-1.18.24-2.13.6-2.73.99a1 1 0 1 1-1.1-1.67c.88-.58 2.12-1.03 3.57-1.31a22.03 22.03 0 0 1-.04-3.2Zm2.2-1.7c.15-.86.34-1.61.58-2.24.24-.65.51-1.12.76-1.4.25-.28.4-.29.42-.29.03 0 .17.01.42.3.25.27.52.74.77 1.4.23.62.43 1.37.57 2.22a19.96 19.96 0 0 1-3.52 0Zm-.18 4.6a20.1 20.1 0 0 1-.03-2.62 21.95 21.95 0 0 0 3.94 0 20.4 20.4 0 0 1-.03 2.63 21.97 21.97 0 0 0-3.88 0Zm.27 2c.13.66.3 1.26.49 1.78.24.65.51 1.12.76 1.4.25.28.4.29.42.29.03 0 .17-.01.42-.3.25-.27.52-.74.77-1.4.19-.5.36-1.1.49-1.78a20.03 20.03 0 0 0-3.35 0Z"
    clip-rule="evenodd"
  />
</svg>`},75102:function(e,t,r){"use strict";r.r(t),r.d(t,{cardSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.16072 2C4.17367 2 4.18665 2 4.19968 2L7.83857 2C8.36772 1.99998 8.82398 1.99996 9.19518 2.04018C9.5895 2.0829 9.97577 2.17811 10.3221 2.42971C10.5131 2.56849 10.6811 2.73647 10.8198 2.92749C11.0714 3.27379 11.1666 3.66007 11.2094 4.0544C11.2496 4.42561 11.2496 4.88188 11.2495 5.41105V7.58896C11.2496 8.11812 11.2496 8.57439 11.2094 8.94561C11.1666 9.33994 11.0714 9.72621 10.8198 10.0725C10.6811 10.2635 10.5131 10.4315 10.3221 10.5703C9.97577 10.8219 9.5895 10.9171 9.19518 10.9598C8.82398 11 8.36772 11 7.83856 11H4.16073C3.63157 11 3.17531 11 2.80411 10.9598C2.40979 10.9171 2.02352 10.8219 1.67722 10.5703C1.48621 10.4315 1.31824 10.2635 1.17946 10.0725C0.927858 9.72621 0.832652 9.33994 0.78993 8.94561C0.749713 8.5744 0.749733 8.11813 0.749757 7.58896L0.749758 5.45C0.749758 5.43697 0.749758 5.42399 0.749757 5.41104C0.749733 4.88188 0.749713 4.42561 0.78993 4.0544C0.832652 3.66007 0.927858 3.27379 1.17946 2.92749C1.31824 2.73647 1.48621 2.56849 1.67722 2.42971C2.02352 2.17811 2.40979 2.0829 2.80411 2.04018C3.17531 1.99996 3.63157 1.99998 4.16072 2ZM2.96567 3.53145C2.69897 3.56034 2.60687 3.60837 2.55888 3.64324C2.49521 3.6895 2.43922 3.74549 2.39296 3.80916C2.35809 3.85715 2.31007 3.94926 2.28117 4.21597C2.26629 4.35335 2.25844 4.51311 2.25431 4.70832H9.74498C9.74085 4.51311 9.733 4.35335 9.71812 4.21597C9.68922 3.94926 9.6412 3.85715 9.60633 3.80916C9.56007 3.74549 9.50408 3.6895 9.44041 3.64324C9.39242 3.60837 9.30031 3.56034 9.03362 3.53145C8.75288 3.50103 8.37876 3.5 7.79961 3.5H4.19968C3.62053 3.5 3.24641 3.50103 2.96567 3.53145ZM9.74956 6.20832H2.24973V7.55C2.24973 8.12917 2.25076 8.5033 2.28117 8.78404C2.31007 9.05074 2.35809 9.14285 2.39296 9.19084C2.43922 9.25451 2.49521 9.31051 2.55888 9.35677C2.60687 9.39163 2.69897 9.43966 2.96567 9.46856C3.24641 9.49897 3.62053 9.5 4.19968 9.5H7.79961C8.37876 9.5 8.75288 9.49897 9.03362 9.46856C9.30032 9.43966 9.39242 9.39163 9.44041 9.35677C9.50408 9.31051 9.56007 9.25451 9.60633 9.19084C9.6412 9.14285 9.68922 9.05075 9.71812 8.78404C9.74854 8.5033 9.74956 8.12917 9.74956 7.55V6.20832ZM6.74963 8C6.74963 7.58579 7.08541 7.25 7.49961 7.25H8.2496C8.6638 7.25 8.99958 7.58579 8.99958 8C8.99958 8.41422 8.6638 8.75 8.2496 8.75H7.49961C7.08541 8.75 6.74963 8.41422 6.74963 8Z"
    fill="currentColor"
  /></svg
>`},83945:function(e,t,r){"use strict";r.r(t),r.d(t,{checkmarkBoldSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M12.9576 2.23383C13.3807 2.58873 13.4361 3.21947 13.0812 3.64263L6.37159 11.6426C6.19161 11.8572 5.92989 11.9865 5.65009 11.999C5.3703 12.0115 5.09808 11.9062 4.89965 11.7085L0.979321 7.80331C0.588042 7.41354 0.586817 6.78038 0.976585 6.3891C1.36635 5.99782 1.99952 5.99659 2.3908 6.38636L5.53928 9.52268L11.5488 2.35742C11.9037 1.93426 12.5344 1.87893 12.9576 2.23383Z"
    clip-rule="evenodd"
  />
</svg>`},78332:function(e,t,r){"use strict";r.r(t),r.d(t,{checkmarkSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  width="28"
  height="28"
  viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M25.5297 4.92733C26.1221 5.4242 26.1996 6.30724 25.7027 6.89966L12.2836 22.8997C12.0316 23.2001 11.6652 23.3811 11.2735 23.3986C10.8817 23.4161 10.5006 23.2686 10.2228 22.9919L2.38218 15.1815C1.83439 14.6358 1.83268 13.7494 2.37835 13.2016C2.92403 12.6538 3.81046 12.6521 4.35825 13.1978L11.1183 19.9317L23.5573 5.10036C24.0542 4.50794 24.9372 4.43047 25.5297 4.92733Z"
    fill="currentColor"/>
</svg>
`},58024:function(e,t,r){"use strict";r.r(t),r.d(t,{chevronBottomSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1.46 4.96a1 1 0 0 1 1.41 0L8 10.09l5.13-5.13a1 1 0 1 1 1.41 1.41l-5.83 5.84a1 1 0 0 1-1.42 0L1.46 6.37a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`},63427:function(e,t,r){"use strict";r.r(t),r.d(t,{chevronLeftSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M11.04 1.46a1 1 0 0 1 0 1.41L5.91 8l5.13 5.13a1 1 0 1 1-1.41 1.41L3.79 8.71a1 1 0 0 1 0-1.42l5.84-5.83a1 1 0 0 1 1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`},1494:function(e,t,r){"use strict";r.r(t),r.d(t,{chevronRightSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.96 14.54a1 1 0 0 1 0-1.41L10.09 8 4.96 2.87a1 1 0 0 1 1.41-1.41l5.84 5.83a1 1 0 0 1 0 1.42l-5.84 5.83a1 1 0 0 1-1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`},88994:function(e,t,r){"use strict";r.r(t),r.d(t,{chevronTopSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.54 11.04a1 1 0 0 1-1.41 0L8 5.92l-5.13 5.12a1 1 0 1 1-1.41-1.41l5.83-5.84a1 1 0 0 1 1.42 0l5.83 5.84a1 1 0 0 1 0 1.41Z"
    clip-rule="evenodd"
  />
</svg>`},27031:function(e,t,r){"use strict";r.r(t),r.d(t,{chromeStoreSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="36" height="36" fill="none">
  <path
    fill="#fff"
    fill-opacity=".05"
    d="M0 14.94c0-5.55 0-8.326 1.182-10.4a9 9 0 0 1 3.359-3.358C6.614 0 9.389 0 14.94 0h6.12c5.55 0 8.326 0 10.4 1.182a9 9 0 0 1 3.358 3.359C36 6.614 36 9.389 36 14.94v6.12c0 5.55 0 8.326-1.182 10.4a9 9 0 0 1-3.359 3.358C29.386 36 26.611 36 21.06 36h-6.12c-5.55 0-8.326 0-10.4-1.182a9 9 0 0 1-3.358-3.359C0 29.386 0 26.611 0 21.06v-6.12Z"
  />
  <path
    stroke="#fff"
    stroke-opacity=".05"
    d="M14.94.5h6.12c2.785 0 4.84 0 6.46.146 1.612.144 2.743.43 3.691.97a8.5 8.5 0 0 1 3.172 3.173c.541.948.826 2.08.971 3.692.145 1.62.146 3.675.146 6.459v6.12c0 2.785 0 4.84-.146 6.46-.145 1.612-.43 2.743-.97 3.691a8.5 8.5 0 0 1-3.173 3.172c-.948.541-2.08.826-3.692.971-1.62.145-3.674.146-6.459.146h-6.12c-2.784 0-4.84 0-6.46-.146-1.612-.145-2.743-.43-3.691-.97a8.5 8.5 0 0 1-3.172-3.173c-.541-.948-.827-2.08-.971-3.692C.5 25.9.5 23.845.5 21.06v-6.12c0-2.784 0-4.84.146-6.46.144-1.612.43-2.743.97-3.691A8.5 8.5 0 0 1 4.79 1.617C5.737 1.076 6.869.79 8.48.646 10.1.5 12.156.5 14.94.5Z"
  />
  <path
    fill="url(#a)"
    d="M17.998 10.8h12.469a14.397 14.397 0 0 0-24.938.001l6.234 10.798.006-.001a7.19 7.19 0 0 1 6.23-10.799Z"
  />
  <path
    fill="url(#b)"
    d="m24.237 21.598-6.234 10.798A14.397 14.397 0 0 0 30.47 10.798H18.002l-.002.006a7.191 7.191 0 0 1 6.237 10.794Z"
  />
  <path
    fill="url(#c)"
    d="M11.765 21.601 5.531 10.803A14.396 14.396 0 0 0 18.001 32.4l6.235-10.798-.004-.004a7.19 7.19 0 0 1-12.466.004Z"
  />
  <path fill="#fff" d="M18 25.2a7.2 7.2 0 1 0 0-14.4 7.2 7.2 0 0 0 0 14.4Z" />
  <path fill="#1A73E8" d="M18 23.7a5.7 5.7 0 1 0 0-11.4 5.7 5.7 0 0 0 0 11.4Z" />
  <defs>
    <linearGradient
      id="a"
      x1="6.294"
      x2="41.1"
      y1="5.995"
      y2="5.995"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#D93025" />
      <stop offset="1" stop-color="#EA4335" />
    </linearGradient>
    <linearGradient
      id="b"
      x1="20.953"
      x2="37.194"
      y1="32.143"
      y2="2.701"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#FCC934" />
      <stop offset="1" stop-color="#FBBC04" />
    </linearGradient>
    <linearGradient
      id="c"
      x1="25.873"
      x2="9.632"
      y1="31.2"
      y2="1.759"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#1E8E3E" />
      <stop offset="1" stop-color="#34A853" />
    </linearGradient>
  </defs>
</svg>`},87154:function(e,t,r){"use strict";r.r(t),r.d(t,{clockSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path 
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M7.00235 2C4.24 2 2.00067 4.23858 2.00067 7C2.00067 9.76142 4.24 12 7.00235 12C9.7647 12 12.004 9.76142 12.004 7C12.004 4.23858 9.7647 2 7.00235 2ZM0 7C0 3.13401 3.13506 0 7.00235 0C10.8696 0 14.0047 3.13401 14.0047 7C14.0047 10.866 10.8696 14 7.00235 14C3.13506 14 0 10.866 0 7ZM7.00235 3C7.55482 3 8.00269 3.44771 8.00269 4V6.58579L9.85327 8.43575C10.2439 8.82627 10.2439 9.45944 9.85327 9.84996C9.46262 10.2405 8.82924 10.2405 8.43858 9.84996L6.29501 7.70711C6.10741 7.51957 6.00201 7.26522 6.00201 7V4C6.00201 3.44771 6.44988 3 7.00235 3Z" 
    fill="currentColor"
  />
</svg>`},53428:function(e,t,r){"use strict";r.r(t),r.d(t,{closeSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M2.54 2.54a1 1 0 0 1 1.42 0L8 6.6l4.04-4.05a1 1 0 1 1 1.42 1.42L9.4 8l4.05 4.04a1 1 0 0 1-1.42 1.42L8 9.4l-4.04 4.05a1 1 0 0 1-1.42-1.42L6.6 8 2.54 3.96a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`},84916:function(e,t,r){"use strict";r.r(t),r.d(t,{coinPlaceholderSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 3a7 7 0 0 0-6.85 8.44l8.29-8.3C10.97 3.06 10.49 3 10 3Zm3.49.93-9.56 9.56c.32.55.71 1.06 1.16 1.5L15 5.1a7.03 7.03 0 0 0-1.5-1.16Zm2.7 2.8-9.46 9.46a7 7 0 0 0 9.46-9.46ZM1.99 5.9A9 9 0 1 1 18 14.09 9 9 0 0 1 1.98 5.91Z"
    clip-rule="evenodd"
  />
</svg>`},15001:function(e,t,r){"use strict";r.r(t),r.d(t,{compassSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2ZM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm10.66-2.65a1 1 0 0 1 .23 1.06L9.83 9.24a1 1 0 0 1-.59.58l-2.83 1.06A1 1 0 0 1 5.13 9.6l1.06-2.82a1 1 0 0 1 .58-.59L9.6 5.12a1 1 0 0 1 1.06.23ZM7.9 7.89l-.13.35.35-.13.12-.35-.34.13Z"
    clip-rule="evenodd"
  />
</svg>`},5958:function(e,t,r){"use strict";r.r(t),r.d(t,{copySvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.21498 1.28565H10.5944C11.1458 1.28562 11.6246 1.2856 12.0182 1.32093C12.4353 1.35836 12.853 1.44155 13.2486 1.66724C13.7005 1.92498 14.0749 2.29935 14.3326 2.75122C14.5583 3.14689 14.6415 3.56456 14.6789 3.9817C14.7143 4.37531 14.7142 4.85403 14.7142 5.40545V6.78489C14.7142 7.33631 14.7143 7.81503 14.6789 8.20865C14.6415 8.62578 14.5583 9.04345 14.3326 9.43912C14.0749 9.89099 13.7005 10.2654 13.2486 10.5231C12.853 10.7488 12.4353 10.832 12.0182 10.8694C11.7003 10.8979 11.3269 10.9034 10.9045 10.9045C10.9034 11.3269 10.8979 11.7003 10.8694 12.0182C10.832 12.4353 10.7488 12.853 10.5231 13.2486C10.2654 13.7005 9.89099 14.0749 9.43912 14.3326C9.04345 14.5583 8.62578 14.6415 8.20865 14.6789C7.81503 14.7143 7.33631 14.7142 6.78489 14.7142H5.40545C4.85403 14.7142 4.37531 14.7143 3.9817 14.6789C3.56456 14.6415 3.14689 14.5583 2.75122 14.3326C2.29935 14.0749 1.92498 13.7005 1.66724 13.2486C1.44155 12.853 1.35836 12.4353 1.32093 12.0182C1.2856 11.6246 1.28562 11.1458 1.28565 10.5944V9.21498C1.28562 8.66356 1.2856 8.18484 1.32093 7.79122C1.35836 7.37409 1.44155 6.95642 1.66724 6.56074C1.92498 6.10887 2.29935 5.73451 2.75122 5.47677C3.14689 5.25108 3.56456 5.16789 3.9817 5.13045C4.2996 5.10192 4.67301 5.09645 5.09541 5.09541C5.09645 4.67302 5.10192 4.2996 5.13045 3.9817C5.16789 3.56456 5.25108 3.14689 5.47676 2.75122C5.73451 2.29935 6.10887 1.92498 6.56074 1.66724C6.95642 1.44155 7.37409 1.35836 7.79122 1.32093C8.18484 1.2856 8.66356 1.28562 9.21498 1.28565ZM5.09541 7.09552C4.68397 7.09667 4.39263 7.10161 4.16046 7.12245C3.88053 7.14757 3.78516 7.18949 3.74214 7.21403C3.60139 7.29431 3.48478 7.41091 3.4045 7.55166C3.37997 7.59468 3.33804 7.69005 3.31292 7.96999C3.28659 8.26345 3.28565 8.65147 3.28565 9.25708V10.5523C3.28565 11.1579 3.28659 11.5459 3.31292 11.8394C3.33804 12.1193 3.37997 12.2147 3.4045 12.2577C3.48478 12.3985 3.60139 12.5151 3.74214 12.5954C3.78516 12.6199 3.88053 12.6618 4.16046 12.6869C4.45393 12.7133 4.84195 12.7142 5.44755 12.7142H6.74279C7.3484 12.7142 7.73641 12.7133 8.02988 12.6869C8.30981 12.6618 8.40518 12.6199 8.44821 12.5954C8.58895 12.5151 8.70556 12.3985 8.78584 12.2577C8.81038 12.2147 8.8523 12.1193 8.87742 11.8394C8.89825 11.6072 8.90319 11.3159 8.90435 10.9045C8.48219 10.9034 8.10898 10.8979 7.79122 10.8694C7.37409 10.832 6.95641 10.7488 6.56074 10.5231C6.10887 10.2654 5.73451 9.89099 5.47676 9.43912C5.25108 9.04345 5.16789 8.62578 5.13045 8.20865C5.10194 7.89089 5.09645 7.51767 5.09541 7.09552ZM7.96999 3.31292C7.69005 3.33804 7.59468 3.37997 7.55166 3.4045C7.41091 3.48478 7.29431 3.60139 7.21403 3.74214C7.18949 3.78516 7.14757 3.88053 7.12245 4.16046C7.09611 4.45393 7.09517 4.84195 7.09517 5.44755V6.74279C7.09517 7.3484 7.09611 7.73641 7.12245 8.02988C7.14757 8.30981 7.18949 8.40518 7.21403 8.4482C7.29431 8.58895 7.41091 8.70556 7.55166 8.78584C7.59468 8.81038 7.69005 8.8523 7.96999 8.87742C8.26345 8.90376 8.65147 8.9047 9.25708 8.9047H10.5523C11.1579 8.9047 11.5459 8.90376 11.8394 8.87742C12.1193 8.8523 12.2147 8.81038 12.2577 8.78584C12.3985 8.70556 12.5151 8.58895 12.5954 8.4482C12.6199 8.40518 12.6618 8.30981 12.6869 8.02988C12.7133 7.73641 12.7142 7.3484 12.7142 6.74279V5.44755C12.7142 4.84195 12.7133 4.45393 12.6869 4.16046C12.6618 3.88053 12.6199 3.78516 12.5954 3.74214C12.5151 3.60139 12.3985 3.48478 12.2577 3.4045C12.2147 3.37997 12.1193 3.33804 11.8394 3.31292C11.5459 3.28659 11.1579 3.28565 10.5523 3.28565H9.25708C8.65147 3.28565 8.26345 3.28659 7.96999 3.31292Z"
    fill="#788181"
  /></svg
>`},80677:function(e,t,r){"use strict";r.r(t),r.d(t,{cursorTransparentSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 6">
  <path style="fill: var(--wui-color-bg-150);" d="M0 1h14L9.21 5.12a3.31 3.31 0 0 1-4.49 0L0 1Z" />
  <path
    style="stroke: var(--wui-color-inverse-100);"
    stroke-opacity=".05"
    d="M1.33 1.5h11.32L8.88 4.75l-.01.01a2.81 2.81 0 0 1-3.8 0l-.02-.01L1.33 1.5Z"
  />
  <path
    style="fill: var(--wui-color-bg-150);"
    d="M1.25.71h11.5L9.21 3.88a3.31 3.31 0 0 1-4.49 0L1.25.71Z"
  />
</svg> `},20314:function(e,t,r){"use strict";r.r(t),r.d(t,{cursorSvg:function(){return n}});var i=r(34954);let n=i.YP` <svg fill="none" viewBox="0 0 13 4">
  <path fill="currentColor" d="M.5 0h12L8.9 3.13a3.76 3.76 0 0 1-4.8 0L.5 0Z" />
</svg>`},7004:function(e,t,r){"use strict";r.r(t),r.d(t,{desktopSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13.66 2H6.34c-1.07 0-1.96 0-2.68.08-.74.08-1.42.25-2.01.68a4 4 0 0 0-.89.89c-.43.6-.6 1.27-.68 2.01C0 6.38 0 7.26 0 8.34v.89c0 1.07 0 1.96.08 2.68.08.74.25 1.42.68 2.01a4 4 0 0 0 .89.89c.6.43 1.27.6 2.01.68a27 27 0 0 0 2.68.08h7.32a27 27 0 0 0 2.68-.08 4.03 4.03 0 0 0 2.01-.68 4 4 0 0 0 .89-.89c.43-.6.6-1.27.68-2.01.08-.72.08-1.6.08-2.68v-.89c0-1.07 0-1.96-.08-2.68a4.04 4.04 0 0 0-.68-2.01 4 4 0 0 0-.89-.89c-.6-.43-1.27-.6-2.01-.68C15.62 2 14.74 2 13.66 2ZM2.82 4.38c.2-.14.48-.25 1.06-.31C4.48 4 5.25 4 6.4 4h7.2c1.15 0 1.93 0 2.52.07.58.06.86.17 1.06.31a2 2 0 0 1 .44.44c.14.2.25.48.31 1.06.07.6.07 1.37.07 2.52v.77c0 1.15 0 1.93-.07 2.52-.06.58-.17.86-.31 1.06a2 2 0 0 1-.44.44c-.2.14-.48.25-1.06.32-.6.06-1.37.06-2.52.06H6.4c-1.15 0-1.93 0-2.52-.06-.58-.07-.86-.18-1.06-.32a2 2 0 0 1-.44-.44c-.14-.2-.25-.48-.31-1.06C2 11.1 2 10.32 2 9.17V8.4c0-1.15 0-1.93.07-2.52.06-.58.17-.86.31-1.06a2 2 0 0 1 .44-.44Z"
    clip-rule="evenodd"
  />
  <path fill="currentColor" d="M6.14 17.57a1 1 0 1 0 0 2h7.72a1 1 0 1 0 0-2H6.14Z" />
</svg>`},11665:function(e,t,r){"use strict";r.r(t),r.d(t,{disconnectSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.07 1h.57a1 1 0 0 1 0 2h-.52c-.98 0-1.64 0-2.14.06-.48.05-.7.14-.84.24-.13.1-.25.22-.34.35-.1.14-.2.35-.25.83-.05.5-.05 1.16-.05 2.15v2.74c0 .99 0 1.65.05 2.15.05.48.14.7.25.83.1.14.2.25.34.35.14.1.36.2.84.25.5.05 1.16.05 2.14.05h.52a1 1 0 0 1 0 2h-.57c-.92 0-1.69 0-2.3-.07a3.6 3.6 0 0 1-1.8-.61c-.3-.22-.57-.49-.8-.8a3.6 3.6 0 0 1-.6-1.79C.5 11.11.5 10.35.5 9.43V6.58c0-.92 0-1.7.06-2.31a3.6 3.6 0 0 1 .62-1.8c.22-.3.48-.57.79-.79a3.6 3.6 0 0 1 1.8-.61C4.37 1 5.14 1 6.06 1ZM9.5 3a1 1 0 0 1 1.42 0l4.28 4.3a1 1 0 0 1 0 1.4L10.93 13a1 1 0 0 1-1.42-1.42L12.1 9H6.8a1 1 0 1 1 0-2h5.3L9.51 4.42a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`},42773:function(e,t,r){"use strict";r.r(t),r.d(t,{discordSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5865F2" />
      <path
        fill="#fff"
        fill-rule="evenodd"
        d="M25.71 28.15C30.25 28 32 25.02 32 25.02c0-6.61-2.96-11.98-2.96-11.98-2.96-2.22-5.77-2.15-5.77-2.15l-.29.32c3.5 1.07 5.12 2.61 5.12 2.61a16.75 16.75 0 0 0-10.34-1.93l-.35.04a15.43 15.43 0 0 0-5.88 1.9s1.71-1.63 5.4-2.7l-.2-.24s-2.81-.07-5.77 2.15c0 0-2.96 5.37-2.96 11.98 0 0 1.73 2.98 6.27 3.13l1.37-1.7c-2.6-.79-3.6-2.43-3.6-2.43l.58.35.09.06.08.04.02.01.08.05a17.25 17.25 0 0 0 4.52 1.58 14.4 14.4 0 0 0 8.3-.86c.72-.27 1.52-.66 2.37-1.21 0 0-1.03 1.68-3.72 2.44.61.78 1.35 1.67 1.35 1.67Zm-9.55-9.6c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28.01-1.25-.93-2.28-2.1-2.28Zm7.5 0c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28 0-1.25-.93-2.28-2.1-2.28Z"
        clip-rule="evenodd"
      />
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
  </defs>
</svg>`},94809:function(e,t,r){"use strict";r.r(t),r.d(t,{etherscanSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M4.25 7a.63.63 0 0 0-.63.63v3.97c0 .28-.2.51-.47.54l-.75.07a.93.93 0 0 1-.9-.47A7.51 7.51 0 0 1 5.54.92a7.5 7.5 0 0 1 9.54 4.62c.12.35.06.72-.16 1-.74.97-1.68 1.78-2.6 2.44V4.44a.64.64 0 0 0-.63-.64h-1.06c-.35 0-.63.3-.63.64v5.5c0 .23-.12.42-.32.5l-.52.23V6.05c0-.36-.3-.64-.64-.64H7.45c-.35 0-.64.3-.64.64v4.97c0 .25-.17.46-.4.52a5.8 5.8 0 0 0-.45.11v-4c0-.36-.3-.65-.64-.65H4.25ZM14.07 12.4A7.49 7.49 0 0 1 3.6 14.08c4.09-.58 9.14-2.5 11.87-6.6v.03a7.56 7.56 0 0 1-1.41 4.91Z"
  />
</svg>`},99565:function(e,t,r){"use strict";r.r(t),r.d(t,{exclamationTriangleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.0162 11.6312L9.55059 2.13937C9.39228 1.86862 9.16584 1.64405 8.8938 1.48798C8.62176 1.33192 8.3136 1.2498 7.99997 1.2498C7.68634 1.2498 7.37817 1.33192 7.10613 1.48798C6.83409 1.64405 6.60765 1.86862 6.44934 2.13937L0.983716 11.6312C0.830104 11.894 0.749146 12.1928 0.749146 12.4972C0.749146 12.8015 0.830104 13.1004 0.983716 13.3631C1.14027 13.6352 1.3664 13.8608 1.63889 14.0166C1.91139 14.1725 2.22044 14.253 2.53434 14.25H13.4656C13.7793 14.2528 14.0881 14.1721 14.3603 14.0163C14.6326 13.8604 14.8585 13.635 15.015 13.3631C15.1688 13.1005 15.2499 12.8017 15.2502 12.4973C15.2504 12.193 15.1696 11.8941 15.0162 11.6312ZM13.7162 12.6125C13.6908 12.6558 13.6541 12.6914 13.6101 12.7157C13.5661 12.7399 13.5164 12.7517 13.4662 12.75H2.53434C2.48415 12.7517 2.43442 12.7399 2.39042 12.7157C2.34641 12.6914 2.30976 12.6558 2.28434 12.6125C2.26278 12.5774 2.25137 12.5371 2.25137 12.4959C2.25137 12.4548 2.26278 12.4144 2.28434 12.3794L7.74997 2.88749C7.77703 2.84583 7.81408 2.8116 7.85774 2.7879C7.9014 2.7642 7.95029 2.75178 7.99997 2.75178C8.04964 2.75178 8.09854 2.7642 8.1422 2.7879C8.18586 2.8116 8.2229 2.84583 8.24997 2.88749L13.715 12.3794C13.7367 12.4143 13.7483 12.4546 13.7486 12.4958C13.7488 12.5369 13.7376 12.5773 13.7162 12.6125ZM7.24997 8.49999V6.49999C7.24997 6.30108 7.32898 6.11031 7.46964 5.96966C7.61029 5.82901 7.80105 5.74999 7.99997 5.74999C8.19888 5.74999 8.38964 5.82901 8.5303 5.96966C8.67095 6.11031 8.74997 6.30108 8.74997 6.49999V8.49999C8.74997 8.6989 8.67095 8.88967 8.5303 9.03032C8.38964 9.17097 8.19888 9.24999 7.99997 9.24999C7.80105 9.24999 7.61029 9.17097 7.46964 9.03032C7.32898 8.88967 7.24997 8.6989 7.24997 8.49999ZM8.99997 11C8.99997 11.1978 8.94132 11.3911 8.83144 11.5556C8.72155 11.72 8.56538 11.8482 8.38265 11.9239C8.19992 11.9996 7.99886 12.0194 7.80488 11.9808C7.6109 11.9422 7.43271 11.847 7.29286 11.7071C7.15301 11.5672 7.05777 11.3891 7.01918 11.1951C6.9806 11.0011 7.0004 10.8 7.07609 10.6173C7.15177 10.4346 7.27995 10.2784 7.4444 10.1685C7.60885 10.0586 7.80219 9.99999 7.99997 9.99999C8.26518 9.99999 8.51954 10.1053 8.70707 10.2929C8.89461 10.4804 8.99997 10.7348 8.99997 11Z" fill="currentColor"/>
</svg>
`},31889:function(e,t,r){"use strict";r.r(t),r.d(t,{extensionSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.71 2.99a.57.57 0 0 0-.57.57 1 1 0 0 1-1 1c-.58 0-.96 0-1.24.03-.27.03-.37.07-.42.1a.97.97 0 0 0-.36.35c-.04.08-.09.21-.11.67a2.57 2.57 0 0 1 0 5.13c.02.45.07.6.11.66.09.15.21.28.36.36.07.04.21.1.67.12a2.57 2.57 0 0 1 5.12 0c.46-.03.6-.08.67-.12a.97.97 0 0 0 .36-.36c.03-.04.07-.14.1-.41.02-.29.03-.66.03-1.24a1 1 0 0 1 1-1 .57.57 0 0 0 0-1.15 1 1 0 0 1-1-1c0-.58 0-.95-.03-1.24a1.04 1.04 0 0 0-.1-.42.97.97 0 0 0-.36-.36 1.04 1.04 0 0 0-.42-.1c-.28-.02-.65-.02-1.24-.02a1 1 0 0 1-1-1 .57.57 0 0 0-.57-.57ZM5.15 13.98a1 1 0 0 0 .99-1v-.78a.57.57 0 0 1 1.14 0v.78a1 1 0 0 0 .99 1H8.36a66.26 66.26 0 0 0 .73 0 3.78 3.78 0 0 0 1.84-.38c.46-.26.85-.64 1.1-1.1.23-.4.32-.8.36-1.22.02-.2.03-.4.03-.63a2.57 2.57 0 0 0 0-4.75c0-.23-.01-.44-.03-.63a2.96 2.96 0 0 0-.35-1.22 2.97 2.97 0 0 0-1.1-1.1c-.4-.22-.8-.31-1.22-.35a8.7 8.7 0 0 0-.64-.04 2.57 2.57 0 0 0-4.74 0c-.23 0-.44.02-.63.04-.42.04-.83.13-1.22.35-.46.26-.84.64-1.1 1.1-.33.57-.37 1.2-.39 1.84a21.39 21.39 0 0 0 0 .72v.1a1 1 0 0 0 1 .99h.78a.57.57 0 0 1 0 1.15h-.77a1 1 0 0 0-1 .98v.1a63.87 63.87 0 0 0 0 .73c0 .64.05 1.27.38 1.83.26.47.64.85 1.1 1.11.56.32 1.2.37 1.84.38a20.93 20.93 0 0 0 .72 0h.1Z"
    clip-rule="evenodd"
  />
</svg>`},90683:function(e,t,r){"use strict";r.r(t),r.d(t,{externalLinkSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.74 3.99a1 1 0 0 1 1-1H11a1 1 0 0 1 1 1v6.26a1 1 0 0 1-2 0V6.4l-6.3 6.3a1 1 0 0 1-1.4-1.42l6.29-6.3H4.74a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`},53255:function(e,t,r){"use strict";r.r(t),r.d(t,{facebookSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1877F2" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M26 12.38h-2.89c-.92 0-1.61.38-1.61 1.34v1.66H26l-.36 4.5H21.5v12H17v-12h-3v-4.5h3V12.5c0-3.03 1.6-4.62 5.2-4.62H26v4.5Z"
        />
      </g>
    </g>
    <path
      fill="#1877F2"
      d="M40 20a20 20 0 1 0-23.13 19.76V25.78H11.8V20h5.07v-4.4c0-5.02 3-7.79 7.56-7.79 2.19 0 4.48.4 4.48.4v4.91h-2.53c-2.48 0-3.25 1.55-3.25 3.13V20h5.54l-.88 5.78h-4.66v13.98A20 20 0 0 0 40 20Z"
    />
    <path
      fill="#fff"
      d="m27.79 25.78.88-5.78h-5.55v-3.75c0-1.58.78-3.13 3.26-3.13h2.53V8.2s-2.3-.39-4.48-.39c-4.57 0-7.55 2.77-7.55 7.78V20H11.8v5.78h5.07v13.98a20.15 20.15 0 0 0 6.25 0V25.78h4.67Z"
    />
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`},52713:function(e,t,r){"use strict";r.r(t),r.d(t,{farcasterSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg style="border-radius: 9999px; overflow: hidden;"  fill="none" viewBox="0 0 1000 1000">
  <rect width="1000" height="1000" rx="9999" ry="9999" fill="#855DCD"/>
  <path fill="#855DCD" d="M0 0h1000v1000H0V0Z" />
  <path
    fill="#fff"
    d="M320 248h354v504h-51.96V521.13h-.5c-5.76-63.8-59.31-113.81-124.54-113.81s-118.78 50-124.53 113.81h-.5V752H320V248Z"
  />
  <path
    fill="#fff"
    d="m225 320 21.16 71.46h17.9v289.09a16.29 16.29 0 0 0-16.28 16.24v19.49h-3.25a16.3 16.3 0 0 0-16.28 16.24V752h182.26v-19.48a16.22 16.22 0 0 0-16.28-16.24h-3.25v-19.5a16.22 16.22 0 0 0-16.28-16.23h-19.52V320H225Zm400.3 360.55a16.3 16.3 0 0 0-15.04 10.02 16.2 16.2 0 0 0-1.24 6.22v19.49h-3.25a16.29 16.29 0 0 0-16.27 16.24V752h182.24v-19.48a16.23 16.23 0 0 0-16.27-16.24h-3.25v-19.5a16.2 16.2 0 0 0-10.04-15 16.3 16.3 0 0 0-6.23-1.23v-289.1h17.9L775 320H644.82v360.55H625.3Z"
  />
</svg>`},86397:function(e,t,r){"use strict";r.r(t),r.d(t,{filtersSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 3a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1Zm2.63 5.25a1 1 0 0 1 1-1h8.75a1 1 0 1 1 0 2H3.63a1 1 0 0 1-1-1Zm2.62 5.25a1 1 0 0 1 1-1h3.5a1 1 0 0 1 0 2h-3.5a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`},56003:function(e,t,r){"use strict";r.r(t),r.d(t,{githubSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1B1F23" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M8 19.89a12 12 0 1 1 15.8 11.38c-.6.12-.8-.26-.8-.57v-3.3c0-1.12-.4-1.85-.82-2.22 2.67-.3 5.48-1.31 5.48-5.92 0-1.31-.47-2.38-1.24-3.22.13-.3.54-1.52-.12-3.18 0 0-1-.32-3.3 1.23a11.54 11.54 0 0 0-6 0c-2.3-1.55-3.3-1.23-3.3-1.23a4.32 4.32 0 0 0-.12 3.18 4.64 4.64 0 0 0-1.24 3.22c0 4.6 2.8 5.63 5.47 5.93-.34.3-.65.83-.76 1.6-.69.31-2.42.84-3.5-1 0 0-.63-1.15-1.83-1.23 0 0-1.18-.02-.09.73 0 0 .8.37 1.34 1.76 0 0 .7 2.14 4.03 1.41v2.24c0 .31-.2.68-.8.57A12 12 0 0 1 8 19.9Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`},83829:function(e,t,r){"use strict";r.r(t),r.d(t,{googleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <path
    fill="#4285F4"
    d="M32.74 20.3c0-.93-.08-1.81-.24-2.66H20.26v5.03h7a6 6 0 0 1-2.62 3.91v3.28h4.22c2.46-2.27 3.88-5.6 3.88-9.56Z"
  />
  <path
    fill="#34A853"
    d="M20.26 33a12.4 12.4 0 0 0 8.6-3.14l-4.22-3.28a7.74 7.74 0 0 1-4.38 1.26 7.76 7.76 0 0 1-7.28-5.36H8.65v3.36A12.99 12.99 0 0 0 20.26 33Z"
  />
  <path
    fill="#FBBC05"
    d="M12.98 22.47a7.79 7.79 0 0 1 0-4.94v-3.36H8.65a12.84 12.84 0 0 0 0 11.66l3.37-2.63.96-.73Z"
  />
  <path
    fill="#EA4335"
    d="M20.26 12.18a7.1 7.1 0 0 1 4.98 1.93l3.72-3.72A12.47 12.47 0 0 0 20.26 7c-5.08 0-9.47 2.92-11.6 7.17l4.32 3.36a7.76 7.76 0 0 1 7.28-5.35Z"
  />
</svg>`},39476:function(e,t,r){"use strict";r.r(t),r.d(t,{helpCircleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M8.51 5.66a.83.83 0 0 0-.57-.2.83.83 0 0 0-.52.28.8.8 0 0 0-.25.52 1 1 0 0 1-2 0c0-.75.34-1.43.81-1.91a2.75 2.75 0 0 1 4.78 1.92c0 1.24-.8 1.86-1.25 2.2l-.04.03c-.47.36-.5.43-.5.65a1 1 0 1 1-2 0c0-1.25.8-1.86 1.24-2.2l.04-.04c.47-.36.5-.43.5-.65 0-.3-.1-.49-.24-.6ZM9.12 11.87a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6a6 6 0 1 0 0 12A6 6 0 0 0 8 2Z"
    clip-rule="evenodd"
  />
</svg>`},98058:function(e,t,r){"use strict";r.r(t),r.d(t,{idSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
 xmlns="http://www.w3.org/2000/svg"
 width="28"
 height="28"
 viewBox="0 0 28 28"
 fill="none">
  <path
    fill="#949E9E"
    fill-rule="evenodd"
    d="M7.974 2.975h12.052c1.248 0 2.296 0 3.143.092.89.096 1.723.307 2.461.844a4.9 4.9 0 0 1 1.084 1.084c.537.738.748 1.57.844 2.461.092.847.092 1.895.092 3.143v6.802c0 1.248 0 2.296-.092 3.143-.096.89-.307 1.723-.844 2.461a4.9 4.9 0 0 1-1.084 1.084c-.738.537-1.57.748-2.461.844-.847.092-1.895.092-3.143.092H7.974c-1.247 0-2.296 0-3.143-.092-.89-.096-1.723-.307-2.461-.844a4.901 4.901 0 0 1-1.084-1.084c-.537-.738-.748-1.571-.844-2.461C.35 19.697.35 18.649.35 17.4v-6.802c0-1.248 0-2.296.092-3.143.096-.89.307-1.723.844-2.461A4.9 4.9 0 0 1 2.37 3.91c.738-.537 1.571-.748 2.461-.844.847-.092 1.895-.092 3.143-.092ZM5.133 5.85c-.652.071-.936.194-1.117.326a2.1 2.1 0 0 0-.465.465c-.132.181-.255.465-.325 1.117-.074.678-.076 1.573-.076 2.917v6.65c0 1.344.002 2.239.076 2.917.07.652.193.936.325 1.117a2.1 2.1 0 0 0 .465.465c.181.132.465.255 1.117.326.678.073 1.574.075 2.917.075h11.9c1.344 0 2.239-.002 2.917-.075.652-.071.936-.194 1.117-.326.179-.13.335-.286.465-.465.132-.181.255-.465.326-1.117.073-.678.075-1.573.075-2.917v-6.65c0-1.344-.002-2.239-.075-2.917-.071-.652-.194-.936-.326-1.117a2.1 2.1 0 0 0-.465-.465c-.181-.132-.465-.255-1.117-.326-.678-.073-1.573-.075-2.917-.075H8.05c-1.343 0-2.239.002-2.917.075Zm.467 7.275a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0Zm8.75-1.75a1.4 1.4 0 0 1 1.4-1.4h3.5a1.4 1.4 0 0 1 0 2.8h-3.5a1.4 1.4 0 0 1-1.4-1.4Zm0 5.25a1.4 1.4 0 0 1 1.4-1.4H21a1.4 1.4 0 1 1 0 2.8h-5.25a1.4 1.4 0 0 1-1.4-1.4Z"
    clip-rule="evenodd"/>
</svg>`},13021:function(e,t,r){"use strict";r.r(t),r.d(t,{imageSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M4.98926 3.73932C4.2989 3.73932 3.73926 4.29896 3.73926 4.98932C3.73926 5.67968 4.2989 6.23932 4.98926 6.23932C5.67962 6.23932 6.23926 5.67968 6.23926 4.98932C6.23926 4.29896 5.67962 3.73932 4.98926 3.73932Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.60497 0.500001H6.39504C5.41068 0.499977 4.59185 0.499958 3.93178 0.571471C3.24075 0.64634 2.60613 0.809093 2.04581 1.21619C1.72745 1.44749 1.44749 1.72745 1.21619 2.04581C0.809093 2.60613 0.64634 3.24075 0.571471 3.93178C0.499958 4.59185 0.499977 5.41065 0.500001 6.39501V7.57815C0.499998 8.37476 0.499995 9.05726 0.534869 9.62725C0.570123 10.2034 0.644114 10.7419 0.828442 11.2302C0.925651 11.4877 1.05235 11.7287 1.21619 11.9542C1.44749 12.2726 1.72745 12.5525 2.04581 12.7838C2.60613 13.1909 3.24075 13.3537 3.93178 13.4285C4.59185 13.5001 5.41066 13.5 6.39503 13.5H7.60496C8.58933 13.5 9.40815 13.5001 10.0682 13.4285C10.7593 13.3537 11.3939 13.1909 11.9542 12.7838C12.2726 12.5525 12.5525 12.2726 12.7838 11.9542C13.1909 11.3939 13.3537 10.7593 13.4285 10.0682C13.5 9.40816 13.5 8.58935 13.5 7.60497V6.39505C13.5 5.41068 13.5 4.59185 13.4285 3.93178C13.3537 3.24075 13.1909 2.60613 12.7838 2.04581C12.5525 1.72745 12.2726 1.44749 11.9542 1.21619C11.3939 0.809093 10.7593 0.64634 10.0682 0.571471C9.40816 0.499958 8.58933 0.499977 7.60497 0.500001ZM3.22138 2.83422C3.38394 2.71612 3.62634 2.61627 4.14721 2.55984C4.68679 2.50138 5.39655 2.5 6.45 2.5H7.55C8.60345 2.5 9.31322 2.50138 9.8528 2.55984C10.3737 2.61627 10.6161 2.71612 10.7786 2.83422C10.9272 2.94216 11.0578 3.07281 11.1658 3.22138C11.2839 3.38394 11.3837 3.62634 11.4402 4.14721C11.4986 4.68679 11.5 5.39655 11.5 6.45V6.49703C10.9674 6.11617 10.386 5.84936 9.74213 5.81948C8.40536 5.75745 7.3556 6.73051 6.40509 7.84229C6.33236 7.92737 6.27406 7.98735 6.22971 8.02911L6.1919 8.00514L6.17483 7.99427C6.09523 7.94353 5.98115 7.87083 5.85596 7.80302C5.56887 7.64752 5.18012 7.4921 4.68105 7.4921C4.66697 7.4921 4.6529 7.49239 4.63884 7.49299C3.79163 7.52878 3.09922 8.1106 2.62901 8.55472C2.58751 8.59392 2.54594 8.6339 2.50435 8.6745C2.50011 8.34653 2.5 7.97569 2.5 7.55V6.45C2.5 5.39655 2.50138 4.68679 2.55984 4.14721C2.61627 3.62634 2.71612 3.38394 2.83422 3.22138C2.94216 3.07281 3.07281 2.94216 3.22138 2.83422ZM10.3703 8.14825C10.6798 8.37526 11.043 8.71839 11.4832 9.20889C11.4744 9.44992 11.4608 9.662 11.4402 9.8528C11.3837 10.3737 11.2839 10.6161 11.1658 10.7786C11.0578 10.9272 10.9272 11.0578 10.7786 11.1658C10.6161 11.2839 10.3737 11.3837 9.8528 11.4402C9.31322 11.4986 8.60345 11.5 7.55 11.5H6.45C5.39655 11.5 4.68679 11.4986 4.14721 11.4402C3.62634 11.3837 3.38394 11.2839 3.22138 11.1658C3.15484 11.1174 3.0919 11.0645 3.03298 11.0075C3.10126 10.9356 3.16806 10.8649 3.23317 10.7959L3.29772 10.7276C3.55763 10.4525 3.78639 10.2126 4.00232 10.0087C4.22016 9.80294 4.39412 9.66364 4.53524 9.57742C4.63352 9.51738 4.69022 9.49897 4.71275 9.49345C4.76387 9.49804 4.81803 9.51537 4.90343 9.56162C4.96409 9.59447 5.02355 9.63225 5.11802 9.69238L5.12363 9.69595C5.20522 9.74789 5.32771 9.82587 5.46078 9.89278C5.76529 10.0459 6.21427 10.186 6.74977 10.0158C7.21485 9.86796 7.59367 9.52979 7.92525 9.14195C8.91377 7.98571 9.38267 7.80495 9.64941 7.81733C9.7858 7.82366 10.0101 7.884 10.3703 8.14825Z" fill="currentColor"/>
</svg>`},96001:function(e,t,r){"use strict";r.r(t),r.d(t,{infoCircleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    d="M6 10.49a1 1 0 1 0 2 0v-2a1 1 0 0 0-2 0v2ZM7 4.49a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 14.99a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm5-7a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"
    clip-rule="evenodd"
  />
</svg>`},69757:function(e,t,r){"use strict";r.r(t),r.d(t,{infoSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.125 6.875C9.125 6.57833 9.21298 6.28832 9.3778 6.04165C9.54262 5.79497 9.77689 5.60271 10.051 5.48918C10.3251 5.37565 10.6267 5.34594 10.9176 5.40382C11.2086 5.4617 11.4759 5.60456 11.6857 5.81434C11.8954 6.02412 12.0383 6.29139 12.0962 6.58236C12.1541 6.87334 12.1244 7.17494 12.0108 7.44903C11.8973 7.72311 11.705 7.95738 11.4584 8.1222C11.2117 8.28703 10.9217 8.375 10.625 8.375C10.2272 8.375 9.84565 8.21696 9.56434 7.93566C9.28304 7.65436 9.125 7.27282 9.125 6.875ZM21.125 11C21.125 13.0025 20.5312 14.9601 19.4186 16.6251C18.3061 18.2902 16.7248 19.5879 14.8747 20.3543C13.0246 21.1206 10.9888 21.3211 9.02471 20.9305C7.06066 20.5398 5.25656 19.5755 3.84055 18.1595C2.42454 16.7435 1.46023 14.9393 1.06955 12.9753C0.678878 11.0112 0.879387 8.97543 1.64572 7.12533C2.41206 5.27523 3.70981 3.69392 5.37486 2.58137C7.0399 1.46882 8.99747 0.875 11 0.875C13.6844 0.877978 16.258 1.94567 18.1562 3.84383C20.0543 5.74199 21.122 8.3156 21.125 11ZM18.875 11C18.875 9.44247 18.4131 7.91992 17.5478 6.62488C16.6825 5.32985 15.4526 4.32049 14.0136 3.72445C12.5747 3.12841 10.9913 2.97246 9.46367 3.27632C7.93607 3.58017 6.53288 4.3302 5.43154 5.43153C4.3302 6.53287 3.58018 7.93606 3.27632 9.46366C2.97246 10.9913 3.12841 12.5747 3.72445 14.0136C4.32049 15.4526 5.32985 16.6825 6.62489 17.5478C7.91993 18.4131 9.44248 18.875 11 18.875C13.0879 18.8728 15.0896 18.0424 16.566 16.566C18.0424 15.0896 18.8728 13.0879 18.875 11ZM12.125 14.4387V11.375C12.125 10.8777 11.9275 10.4008 11.5758 10.0492C11.2242 9.69754 10.7473 9.5 10.25 9.5C9.98433 9.4996 9.72708 9.59325 9.52383 9.76435C9.32058 9.93544 9.18444 10.173 9.13952 10.4348C9.09461 10.6967 9.14381 10.966 9.27843 11.195C9.41304 11.4241 9.62438 11.5981 9.875 11.6863V14.75C9.875 15.2473 10.0725 15.7242 10.4242 16.0758C10.7758 16.4275 11.2527 16.625 11.75 16.625C12.0157 16.6254 12.2729 16.5318 12.4762 16.3607C12.6794 16.1896 12.8156 15.952 12.8605 15.6902C12.9054 15.4283 12.8562 15.159 12.7216 14.93C12.587 14.7009 12.3756 14.5269 12.125 14.4387Z" fill="currentColor"/>
</svg>`},97348:function(e,t,r){"use strict";r.r(t),r.d(t,{lightbulbSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.00177 1.78569C3.8179 1.78569 2.85819 2.74508 2.85819 3.92855C2.85819 4.52287 3.09928 5.05956 3.49077 5.4485L3.5005 5.45817C3.64381 5.60054 3.76515 5.72108 3.85631 5.81845C3.93747 5.90512 4.05255 6.03218 4.12889 6.1805C4.16999 6.26034 4.19 6.30843 4.21768 6.39385C4.22145 6.40546 4.22499 6.41703 4.22833 6.42855H5.77521C5.77854 6.41703 5.78208 6.40547 5.78585 6.39385C5.81353 6.30843 5.83354 6.26034 5.87464 6.1805C5.95098 6.03218 6.06606 5.90512 6.14722 5.81845C6.23839 5.72108 6.35973 5.60053 6.50304 5.45816L6.51276 5.4485C6.90425 5.05956 7.14534 4.52287 7.14534 3.92855C7.14534 2.74508 6.18563 1.78569 5.00177 1.78569ZM5.71629 7.85712H4.28724C4.28724 8.21403 4.28876 8.40985 4.30703 8.54571C4.30727 8.54748 4.30751 8.54921 4.30774 8.55091C4.30944 8.55115 4.31118 8.55138 4.31295 8.55162C4.44884 8.56989 4.64474 8.5714 5.00177 8.5714C5.3588 8.5714 5.55469 8.56989 5.69059 8.55162C5.69236 8.55138 5.69409 8.55115 5.69579 8.55091C5.69603 8.54921 5.69627 8.54748 5.6965 8.54571C5.71477 8.40985 5.71629 8.21403 5.71629 7.85712ZM2.85819 7.14283C2.85819 6.9948 2.85796 6.91114 2.8548 6.85032C2.85461 6.84656 2.85441 6.84309 2.85421 6.83988C2.84393 6.8282 2.83047 6.81334 2.81301 6.79469C2.74172 6.71856 2.63908 6.61643 2.48342 6.46178C1.83307 5.81566 1.42914 4.91859 1.42914 3.92855C1.42914 1.9561 3.02866 0.357117 5.00177 0.357117C6.97487 0.357117 8.57439 1.9561 8.57439 3.92855C8.57439 4.91859 8.17047 5.81566 7.52012 6.46178C7.36445 6.61643 7.26182 6.71856 7.19053 6.79469C7.17306 6.81334 7.1596 6.8282 7.14932 6.83988C7.14912 6.84309 7.14892 6.84656 7.14873 6.85032C7.14557 6.91114 7.14534 6.9948 7.14534 7.14283V7.85712C7.14534 7.87009 7.14535 7.88304 7.14535 7.89598C7.14541 8.19889 7.14547 8.49326 7.11281 8.73606C7.076 9.00978 6.98631 9.32212 6.72678 9.58156C6.46726 9.841 6.15481 9.93065 5.881 9.96745C5.63813 10.0001 5.34365 10 5.04064 9.99998C5.0277 9.99998 5.01474 9.99998 5.00177 9.99998C4.98879 9.99998 4.97583 9.99998 4.96289 9.99998C4.65988 10 4.36541 10.0001 4.12253 9.96745C3.84872 9.93065 3.53628 9.841 3.27675 9.58156C3.01722 9.32212 2.92753 9.00978 2.89072 8.73606C2.85807 8.49326 2.85812 8.19889 2.85818 7.89598C2.85819 7.88304 2.85819 7.87008 2.85819 7.85712V7.14283ZM7.1243 6.86977C7.12366 6.87069 7.1233 6.87116 7.12327 6.87119C7.12323 6.87123 7.12356 6.87076 7.1243 6.86977ZM2.88027 6.8712C2.88025 6.87119 2.87988 6.8707 2.87921 6.86975C2.87995 6.87072 2.88028 6.8712 2.88027 6.8712Z" fill="#949E9E"/>
</svg>`},96840:function(e,t,r){"use strict";r.r(t),r.d(t,{mailSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.83 1.34h6.34c.68 0 1.26 0 1.73.04.5.05.97.15 1.42.4.52.3.95.72 1.24 1.24.26.45.35.92.4 1.42.04.47.04 1.05.04 1.73v3.71c0 .69 0 1.26-.04 1.74-.05.5-.14.97-.4 1.41-.3.52-.72.95-1.24 1.25-.45.25-.92.35-1.42.4-.47.03-1.05.03-1.73.03H4.83c-.68 0-1.26 0-1.73-.04-.5-.04-.97-.14-1.42-.4-.52-.29-.95-.72-1.24-1.24a3.39 3.39 0 0 1-.4-1.41A20.9 20.9 0 0 1 0 9.88v-3.7c0-.7 0-1.27.04-1.74.05-.5.14-.97.4-1.42.3-.52.72-.95 1.24-1.24.45-.25.92-.35 1.42-.4.47-.04 1.05-.04 1.73-.04ZM3.28 3.38c-.36.03-.51.08-.6.14-.21.11-.39.29-.5.5a.8.8 0 0 0-.08.19l5.16 3.44c.45.3 1.03.3 1.48 0L13.9 4.2a.79.79 0 0 0-.08-.2c-.11-.2-.29-.38-.5-.5-.09-.05-.24-.1-.6-.13-.37-.04-.86-.04-1.6-.04H4.88c-.73 0-1.22 0-1.6.04ZM14 6.54 9.85 9.31a3.33 3.33 0 0 1-3.7 0L2 6.54v3.3c0 .74 0 1.22.03 1.6.04.36.1.5.15.6.11.2.29.38.5.5.09.05.24.1.6.14.37.03.86.03 1.6.03h6.25c.73 0 1.22 0 1.6-.03.35-.03.5-.09.6-.14.2-.12.38-.3.5-.5.05-.1.1-.24.14-.6.03-.38.03-.86.03-1.6v-3.3Z"
    clip-rule="evenodd"
  />
</svg>`},38634:function(e,t,r){"use strict";r.r(t),r.d(t,{mobileSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path fill="currentColor" d="M10.81 5.81a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z" />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3 4.75A4.75 4.75 0 0 1 7.75 0h4.5A4.75 4.75 0 0 1 17 4.75v10.5A4.75 4.75 0 0 1 12.25 20h-4.5A4.75 4.75 0 0 1 3 15.25V4.75ZM7.75 2A2.75 2.75 0 0 0 5 4.75v10.5A2.75 2.75 0 0 0 7.75 18h4.5A2.75 2.75 0 0 0 15 15.25V4.75A2.75 2.75 0 0 0 12.25 2h-4.5Z"
    clip-rule="evenodd"
  />
</svg>`},28724:function(e,t,r){"use strict";r.r(t),r.d(t,{moreSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 41 40">
  <path
    style="fill: var(--wui-color-fg-100);"
    fill-opacity=".05"
    d="M.6 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z"
  />
  <path
    fill="#949E9E"
    d="M15.6 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM23.1 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM28.1 22.81a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"
  />
</svg>`},13163:function(e,t,r){"use strict";r.r(t),r.d(t,{networkPlaceholderSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 22 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M16.32 13.62a3.14 3.14 0 1 1-.99 1.72l-1.6-.93a3.83 3.83 0 0 1-3.71 1 3.66 3.66 0 0 1-1.74-1l-1.6.94a3.14 3.14 0 1 1-1-1.73l1.6-.94a3.7 3.7 0 0 1 0-2 3.81 3.81 0 0 1 1.8-2.33c.29-.17.6-.3.92-.38V6.1a3.14 3.14 0 1 1 2 0l-.01.02v1.85H12a3.82 3.82 0 0 1 2.33 1.8 3.7 3.7 0 0 1 .39 2.91l1.6.93ZM2.6 16.54a1.14 1.14 0 0 0 1.98-1.14 1.14 1.14 0 0 0-1.98 1.14ZM11 2.01a1.14 1.14 0 1 0 0 2.28 1.14 1.14 0 0 0 0-2.28Zm1.68 10.45c.08-.19.14-.38.16-.58v-.05l.02-.13v-.13a1.92 1.92 0 0 0-.24-.8l-.11-.15a1.89 1.89 0 0 0-.74-.6 1.86 1.86 0 0 0-.77-.17h-.19a1.97 1.97 0 0 0-.89.34 1.98 1.98 0 0 0-.61.74 1.99 1.99 0 0 0-.16.9v.05a1.87 1.87 0 0 0 .24.74l.1.15c.12.16.26.3.42.42l.16.1.13.07.04.02a1.84 1.84 0 0 0 .76.17h.17a2 2 0 0 0 .91-.35 1.78 1.78 0 0 0 .52-.58l.03-.05a.84.84 0 0 0 .05-.11Zm5.15 4.5a1.14 1.14 0 0 0 1.14-1.97 1.13 1.13 0 0 0-1.55.41c-.32.55-.13 1.25.41 1.56Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.63 9.43a1.5 1.5 0 1 0 1.5-2.6 1.5 1.5 0 0 0-1.5 2.6Zm.32-1.55a.5.5 0 0 1 .68-.19.5.5 0 0 1 .18.68.5.5 0 0 1-.68.19.5.5 0 0 1-.18-.68ZM17.94 8.88a1.5 1.5 0 1 1-2.6-1.5 1.5 1.5 0 1 1 2.6 1.5ZM16.9 7.69a.5.5 0 0 0-.68.19.5.5 0 0 0 .18.68.5.5 0 0 0 .68-.19.5.5 0 0 0-.18-.68ZM9.75 17.75a1.5 1.5 0 1 1 2.6 1.5 1.5 1.5 0 1 1-2.6-1.5Zm1.05 1.18a.5.5 0 0 0 .68-.18.5.5 0 0 0-.18-.68.5.5 0 0 0-.68.18.5.5 0 0 0 .18.68Z"
    clip-rule="evenodd"
  />
</svg>`},58148:function(e,t,r){"use strict";r.r(t),r.d(t,{nftPlaceholderSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.13 1h1.71c1.46 0 2.63 0 3.56.1.97.1 1.8.33 2.53.85a5 5 0 0 1 1.1 1.11c.53.73.75 1.56.86 2.53.1.93.1 2.1.1 3.55v1.72c0 1.45 0 2.62-.1 3.55-.1.97-.33 1.8-.86 2.53a5 5 0 0 1-1.1 1.1c-.73.53-1.56.75-2.53.86-.93.1-2.1.1-3.55.1H9.13c-1.45 0-2.62 0-3.56-.1-.96-.1-1.8-.33-2.52-.85a5 5 0 0 1-1.1-1.11 5.05 5.05 0 0 1-.86-2.53c-.1-.93-.1-2.1-.1-3.55V9.14c0-1.45 0-2.62.1-3.55.1-.97.33-1.8.85-2.53a5 5 0 0 1 1.1-1.1 5.05 5.05 0 0 1 2.53-.86C6.51 1 7.67 1 9.13 1ZM5.79 3.09a3.1 3.1 0 0 0-1.57.48 3 3 0 0 0-.66.67c-.24.32-.4.77-.48 1.56-.1.82-.1 1.88-.1 3.4v1.6c0 1.15 0 2.04.05 2.76l.41-.42c.5-.5.93-.92 1.32-1.24.41-.33.86-.6 1.43-.7a3 3 0 0 1 .94 0c.35.06.66.2.95.37a17.11 17.11 0 0 0 .8.45c.1-.08.2-.2.41-.4l.04-.03a27 27 0 0 1 1.95-1.84 4.03 4.03 0 0 1 1.91-.94 4 4 0 0 1 1.25 0c.73.11 1.33.46 1.91.94l.64.55V9.2c0-1.52 0-2.58-.1-3.4a3.1 3.1 0 0 0-.48-1.56 3 3 0 0 0-.66-.67 3.1 3.1 0 0 0-1.56-.48C13.37 3 12.3 3 10.79 3h-1.6c-1.52 0-2.59 0-3.4.09Zm11.18 10-.04-.05a26.24 26.24 0 0 0-1.83-1.74c-.45-.36-.73-.48-.97-.52a2 2 0 0 0-.63 0c-.24.04-.51.16-.97.52-.46.38-1.01.93-1.83 1.74l-.02.02c-.17.18-.34.34-.49.47a2.04 2.04 0 0 1-1.08.5 1.97 1.97 0 0 1-1.25-.27l-.79-.46-.02-.02a.65.65 0 0 0-.24-.1 1 1 0 0 0-.31 0c-.08.02-.21.06-.49.28-.3.24-.65.59-1.2 1.14l-.56.56-.65.66a3 3 0 0 0 .62.6c.33.24.77.4 1.57.49.81.09 1.88.09 3.4.09h1.6c1.52 0 2.58 0 3.4-.09a3.1 3.1 0 0 0 1.56-.48 3 3 0 0 0 .66-.67c.24-.32.4-.77.49-1.56l.07-1.12Zm-8.02-1.03ZM4.99 7a2 2 0 1 1 4 0 2 2 0 0 1-4 0Z"
    clip-rule="evenodd"
  />
</svg>`},50490:function(e,t,r){"use strict";r.r(t),r.d(t,{offSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 0a1 1 0 0 1 1 1v5.38a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1ZM5.26 2.6a1 1 0 0 1-.28 1.39 5.46 5.46 0 1 0 6.04 0 1 1 0 1 1 1.1-1.67 7.46 7.46 0 1 1-8.25 0 1 1 0 0 1 1.4.28Z"
    clip-rule="evenodd"
  />
</svg>`},61536:function(e,t,r){"use strict";r.r(t),r.d(t,{playStoreSvg:function(){return n}});var i=r(34954);let n=i.YP` <svg
  width="36"
  height="36"
  fill="none"
>
  <path
    d="M0 8a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V8Z"
    fill="#fff"
    fill-opacity=".05"
  />
  <path
    d="m18.262 17.513-8.944 9.49v.01a2.417 2.417 0 0 0 3.56 1.452l.026-.017 10.061-5.803-4.703-5.132Z"
    fill="#EA4335"
  />
  <path
    d="m27.307 15.9-.008-.008-4.342-2.52-4.896 4.36 4.913 4.912 4.325-2.494a2.42 2.42 0 0 0 .008-4.25Z"
    fill="#FBBC04"
  />
  <path
    d="M9.318 8.997c-.05.202-.084.403-.084.622V26.39c0 .218.025.42.084.621l9.246-9.247-9.246-8.768Z"
    fill="#4285F4"
  />
  <path
    d="m18.33 18 4.627-4.628-10.053-5.828a2.427 2.427 0 0 0-3.586 1.444L18.329 18Z"
    fill="#34A853"
  />
  <path
    d="M8 .5h20A7.5 7.5 0 0 1 35.5 8v20a7.5 7.5 0 0 1-7.5 7.5H8A7.5 7.5 0 0 1 .5 28V8A7.5 7.5 0 0 1 8 .5Z"
    stroke="#fff"
    stroke-opacity=".05"
  />
</svg>`},21286:function(e,t,r){"use strict";r.r(t),r.d(t,{plusSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  width="13"
  height="12"
  viewBox="0 0 13 12"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M0.794373 5.99982C0.794373 5.52643 1.17812 5.14268 1.6515 5.14268H5.643V1.15109C5.643 0.677701 6.02675 0.293946 6.50012 0.293945C6.9735 0.293946 7.35725 0.677701 7.35725 1.15109V5.14268H11.3488C11.8221 5.14268 12.2059 5.52643 12.2059 5.99982C12.2059 6.47321 11.8221 6.85696 11.3488 6.85696H7.35725V10.8486C7.35725 11.3219 6.9735 11.7057 6.50012 11.7057C6.02675 11.7057 5.643 11.3219 5.643 10.8486V6.85696H1.6515C1.17812 6.85696 0.794373 6.47321 0.794373 5.99982Z"
  /></svg
>`},43792:function(e,t,r){"use strict";r.r(t),r.d(t,{qrCodeIcon:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M3 6a3 3 0 0 1 3-3h1a1 1 0 1 0 0-2H6a5 5 0 0 0-5 5v1a1 1 0 0 0 2 0V6ZM13 1a1 1 0 1 0 0 2h1a3 3 0 0 1 3 3v1a1 1 0 1 0 2 0V6a5 5 0 0 0-5-5h-1ZM3 13a1 1 0 1 0-2 0v1a5 5 0 0 0 5 5h1a1 1 0 1 0 0-2H6a3 3 0 0 1-3-3v-1ZM19 13a1 1 0 1 0-2 0v1a3 3 0 0 1-3 3h-1a1 1 0 1 0 0 2h1.01a5 5 0 0 0 5-5v-1ZM5.3 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05A1.5 1.5 0 0 0 9.2 8.14c.06-.2.06-.43.06-.89s0-.7-.06-.89A1.5 1.5 0 0 0 8.14 5.3c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM10.8 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM5.26 12.75c0-.46 0-.7.05-.89a1.5 1.5 0 0 1 1.06-1.06c.19-.05.42-.05.89-.05.46 0 .7 0 .88.05.52.14.93.54 1.06 1.06.06.2.06.43.06.89s0 .7-.06.89a1.5 1.5 0 0 1-1.06 1.06c-.19.05-.42.05-.88.05-.47 0-.7 0-.9-.05a1.5 1.5 0 0 1-1.05-1.06c-.05-.2-.05-.43-.05-.89ZM10.8 11.86c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06Z"
  />
</svg>`},16153:function(e,t,r){"use strict";r.r(t),r.d(t,{recycleHorizontalSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    d="M8.8071 0.292893C9.19763 0.683417 9.19763 1.31658 8.8071 1.70711L6.91421 3.6H11.8404C14.3368 3.6 16.5533 5.1975 17.3427 7.56588L17.4487 7.88377C17.6233 8.40772 17.3402 8.97404 16.8162 9.14868C16.2923 9.32333 15.726 9.04017 15.5513 8.51623L15.4453 8.19834C14.9281 6.64664 13.476 5.6 11.8404 5.6H6.91421L8.8071 7.49289C9.19763 7.88342 9.19763 8.51658 8.8071 8.90711C8.41658 9.29763 7.78341 9.29763 7.39289 8.90711L3.79289 5.30711C3.40236 4.91658 3.40236 4.28342 3.79289 3.89289L7.39289 0.292893C7.78341 -0.0976311 8.41658 -0.0976311 8.8071 0.292893ZM4.18377 10.8513C4.70771 10.6767 5.27403 10.9598 5.44868 11.4838L5.55464 11.8017C6.07188 13.3534 7.52401 14.4 9.15964 14.4L14.0858 14.4L12.1929 12.5071C11.8024 12.1166 11.8024 11.4834 12.1929 11.0929C12.5834 10.7024 13.2166 10.7024 13.6071 11.0929L17.2071 14.6929C17.5976 15.0834 17.5976 15.7166 17.2071 16.1071L13.6071 19.7071C13.2166 20.0976 12.5834 20.0976 12.1929 19.7071C11.8024 19.3166 11.8024 18.6834 12.1929 18.2929L14.0858 16.4L9.15964 16.4C6.66314 16.4 4.44674 14.8025 3.65728 12.4341L3.55131 12.1162C3.37667 11.5923 3.65983 11.026 4.18377 10.8513Z"
  /></svg
>`},92787:function(e,t,r){"use strict";r.r(t),r.d(t,{refreshSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.94 1.04a1 1 0 0 1 .7 1.23l-.48 1.68a5.85 5.85 0 0 1 8.53 4.32 5.86 5.86 0 0 1-11.4 2.56 1 1 0 0 1 1.9-.57 3.86 3.86 0 1 0 1.83-4.5l1.87.53a1 1 0 0 1-.55 1.92l-4.1-1.15a1 1 0 0 1-.69-1.23l1.16-4.1a1 1 0 0 1 1.23-.7Z"
    clip-rule="evenodd"
  />
</svg>`},10948:function(e,t,r){"use strict";r.r(t),r.d(t,{reownSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="60" height="16" viewBox="0 0 60 16" fill="none"">
  <path d="M9.3335 4.66667C9.3335 2.08934 11.4229 0 14.0002 0H20.6669C23.2442 0 25.3335 2.08934 25.3335 4.66667V11.3333C25.3335 13.9106 23.2442 16 20.6669 16H14.0002C11.4229 16 9.3335 13.9106 9.3335 11.3333V4.66667Z" fill="#363636"/>
  <path d="M15.6055 11.0003L17.9448 4.66699H18.6316L16.2923 11.0003H15.6055Z" fill="#F6F6F6"/>
  <path d="M0 4.33333C0 1.9401 1.9401 0 4.33333 0C6.72657 0 8.66669 1.9401 8.66669 4.33333V11.6667C8.66669 14.0599 6.72657 16 4.33333 16C1.9401 16 0 14.0599 0 11.6667V4.33333Z" fill="#363636"/>
  <path d="M3.9165 9.99934V9.16602H4.74983V9.99934H3.9165Z" fill="#F6F6F6"/>
  <path d="M26 8C26 3.58172 29.3517 0 33.4863 0H52.5137C56.6483 0 60 3.58172 60 8C60 12.4183 56.6483 16 52.5137 16H33.4863C29.3517 16 26 12.4183 26 8Z" fill="#363636"/>
  <path d="M49.3687 9.95834V6.26232H50.0213V6.81966C50.256 6.40899 50.7326 6.16699 51.2606 6.16699C52.0599 6.16699 52.6173 6.67299 52.6173 7.65566V9.95834H51.972V7.69234C51.972 7.04696 51.6053 6.70966 51.07 6.70966C50.4906 6.70966 50.0213 7.17168 50.0213 7.82433V9.95834H49.3687Z" fill="#F6F6F6"/>
  <path d="M45.2538 9.95773L44.5718 6.26172H45.1877L45.6717 9.31242L46.3098 7.30306H46.9184L47.5491 9.29041L48.0404 6.26172H48.6564L47.9744 9.95773H47.2411L46.6178 8.03641L45.9871 9.95773H45.2538Z" fill="#F6F6F6"/>
  <path d="M42.3709 10.0536C41.2489 10.0536 40.5889 9.21765 40.5889 8.1103C40.5889 7.01035 41.2489 6.16699 42.3709 6.16699C43.4929 6.16699 44.1529 7.01035 44.1529 8.1103C44.1529 9.21765 43.4929 10.0536 42.3709 10.0536ZM42.3709 9.51096C43.1775 9.51096 43.4856 8.82164 43.4856 8.10296C43.4856 7.39163 43.1775 6.70966 42.3709 6.70966C41.5642 6.70966 41.2562 7.39163 41.2562 8.10296C41.2562 8.82164 41.5642 9.51096 42.3709 9.51096Z" fill="#F6F6F6"/>
  <path d="M38.2805 10.0536C37.1952 10.0536 36.5132 9.22499 36.5132 8.1103C36.5132 7.00302 37.1952 6.16699 38.2805 6.16699C39.1972 6.16699 40.0038 6.68766 39.9159 8.27896H37.1805C37.2319 8.96103 37.5472 9.5183 38.2805 9.5183C38.7718 9.5183 39.0945 9.21765 39.2045 8.87299H39.8499C39.7472 9.48903 39.1679 10.0536 38.2805 10.0536ZM37.1952 7.78765H39.2852C39.2338 7.04696 38.8892 6.70232 38.2805 6.70232C37.6132 6.70232 37.2832 7.18635 37.1952 7.78765Z" fill="#F6F6F6"/>
  <path d="M33.3828 9.95773V6.26172H34.0501V6.88506C34.2848 6.47439 34.6882 6.26172 35.1061 6.26172H35.9935V6.88506H35.0548C34.4682 6.88506 34.0501 7.26638 34.0501 8.00706V9.95773H33.3828Z" fill="#F6F6F6"/>
</svg>`},9483:function(e,t,r){"use strict";r.r(t),r.d(t,{searchSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.36 4.21a5.14 5.14 0 1 0 0 10.29 5.14 5.14 0 0 0 0-10.29ZM1.64 9.36a7.71 7.71 0 1 1 14 4.47l2.52 2.5a1.29 1.29 0 1 1-1.82 1.83l-2.51-2.51A7.71 7.71 0 0 1 1.65 9.36Z"
    clip-rule="evenodd"
  />
</svg>`},86552:function(e,t,r){"use strict";r.r(t),r.d(t,{sendSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 21 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.3808 4.34812C13.72 4.47798 12.8501 4.7587 11.5748 5.17296L9.00869 6.00646C6.90631 6.68935 5.40679 7.17779 4.38121 7.63178C3.87166 7.85734 3.5351 8.05091 3.32022 8.22035C3.11183 8.38466 3.07011 8.48486 3.05969 8.51817C2.98058 8.77103 2.98009 9.04195 3.05831 9.29509C3.06861 9.32844 3.10998 9.42878 3.31777 9.59384C3.53205 9.76404 3.86792 9.95881 4.37667 10.1862C5.29287 10.5957 6.58844 11.0341 8.35529 11.6164L10.8876 8.59854C11.2426 8.17547 11.8733 8.12028 12.2964 8.47528C12.7195 8.83029 12.7746 9.46104 12.4196 9.88412L9.88738 12.9019C10.7676 14.5408 11.4244 15.7406 11.9867 16.5718C12.299 17.0333 12.5491 17.3303 12.7539 17.5117C12.9526 17.6877 13.0586 17.711 13.0932 17.7154C13.3561 17.7484 13.6228 17.7009 13.8581 17.5791C13.8891 17.563 13.9805 17.5046 14.1061 17.2708C14.2357 17.0298 14.3679 16.6647 14.5015 16.1237C14.7705 15.0349 14.9912 13.4733 15.2986 11.2843L15.6738 8.61249C15.8603 7.28456 15.9857 6.37917 15.9989 5.7059C16.012 5.03702 15.9047 4.8056 15.8145 4.69183C15.7044 4.55297 15.5673 4.43792 15.4114 4.35365C15.2837 4.28459 15.0372 4.2191 14.3808 4.34812ZM7.99373 13.603C6.11919 12.9864 4.6304 12.4902 3.5606 12.0121C2.98683 11.7557 2.4778 11.4808 2.07383 11.1599C1.66337 10.8339 1.31312 10.4217 1.14744 9.88551C0.949667 9.24541 0.950886 8.56035 1.15094 7.92096C1.31852 7.38534 1.67024 6.97442 2.08185 6.64985C2.48697 6.33041 2.99697 6.05734 3.57166 5.80295C4.70309 5.3021 6.30179 4.78283 8.32903 4.12437L11.0196 3.25042C12.2166 2.86159 13.2017 2.54158 13.9951 2.38566C14.8065 2.22618 15.6202 2.19289 16.3627 2.59437C16.7568 2.80747 17.1035 3.09839 17.3818 3.4495C17.9062 4.111 18.0147 4.91815 17.9985 5.74496C17.9827 6.55332 17.8386 7.57903 17.6636 8.82534L17.2701 11.6268C16.9737 13.7376 16.7399 15.4022 16.4432 16.6034C16.2924 17.2135 16.1121 17.7632 15.8678 18.2176C15.6197 18.6794 15.2761 19.0971 14.7777 19.3551C14.1827 19.6632 13.5083 19.7833 12.8436 19.6997C12.2867 19.6297 11.82 19.3563 11.4277 19.0087C11.0415 18.6666 10.6824 18.213 10.3302 17.6925C9.67361 16.722 8.92648 15.342 7.99373 13.603Z"
    clip-rule="evenodd"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="21"
    height="20"
    viewBox="0 0 21 20"
    fill="none"
  ></svg></svg
>`},25422:function(e,t,r){"use strict";r.r(t),r.d(t,{swapHorizontalSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.76.3a1 1 0 0 1 0 1.4L4.07 4.4h9a1 1 0 1 1 0 2h-9l2.69 2.68a1 1 0 1 1-1.42 1.42L.95 6.09a1 1 0 0 1 0-1.4l4.4-4.4a1 1 0 0 1 1.4 0Zm6.49 9.21a1 1 0 0 1 1.41 0l4.39 4.4a1 1 0 0 1 0 1.4l-4.39 4.4a1 1 0 0 1-1.41-1.42l2.68-2.68h-9a1 1 0 0 1 0-2h9l-2.68-2.68a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`},65180:function(e,t,r){"use strict";r.r(t),r.d(t,{swapHorizontalBoldSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="10" height="10" viewBox="0 0 10 10">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.77986 0.566631C4.0589 0.845577 4.0589 1.29784 3.77986 1.57678L3.08261 2.2738H6.34184C6.73647 2.2738 7.05637 2.5936 7.05637 2.98808C7.05637 3.38257 6.73647 3.70237 6.34184 3.70237H3.08261L3.77986 4.39938C4.0589 4.67833 4.0589 5.13059 3.77986 5.40954C3.50082 5.68848 3.04841 5.68848 2.76937 5.40954L0.852346 3.49316C0.573306 3.21421 0.573306 2.76195 0.852346 2.48301L2.76937 0.566631C3.04841 0.287685 3.50082 0.287685 3.77986 0.566631ZM6.22 4.59102C6.49904 4.31208 6.95145 4.31208 7.23049 4.59102L9.14751 6.5074C9.42655 6.78634 9.42655 7.23861 9.14751 7.51755L7.23049 9.43393C6.95145 9.71287 6.49904 9.71287 6.22 9.43393C5.94096 9.15498 5.94096 8.70272 6.22 8.42377L6.91725 7.72676L3.65802 7.72676C3.26339 7.72676 2.94349 7.40696 2.94349 7.01247C2.94349 6.61798 3.26339 6.29819 3.65802 6.29819L6.91725 6.29819L6.22 5.60117C5.94096 5.32223 5.94096 4.86997 6.22 4.59102Z"
    clip-rule="evenodd"
  />
</svg>`},30668:function(e,t,r){"use strict";r.r(t),r.d(t,{swapHorizontalMediumSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.7306 3.24213C14.0725 3.58384 14.0725 4.13786 13.7306 4.47957L10.7418 7.46737C10.4 7.80908 9.84581 7.80908 9.50399 7.46737C9.16216 7.12567 9.16216 6.57165 9.50399 6.22994L10.9986 4.73585H5.34082C4.85741 4.73585 4.46553 4.3441 4.46553 3.86085C4.46553 3.3776 4.85741 2.98585 5.34082 2.98585L10.9986 2.98585L9.50399 1.49177C9.16216 1.15006 9.16216 0.596037 9.50399 0.254328C9.84581 -0.0873803 10.4 -0.0873803 10.7418 0.254328L13.7306 3.24213ZM9.52515 10.1352C9.52515 10.6185 9.13327 11.0102 8.64986 11.0102L2.9921 11.0102L4.48669 12.5043C4.82852 12.846 4.82852 13.4001 4.48669 13.7418C4.14487 14.0835 3.59066 14.0835 3.24884 13.7418L0.26003 10.754C0.0958806 10.5899 0.0036621 10.3673 0.00366211 10.1352C0.00366212 9.90318 0.0958806 9.68062 0.26003 9.51652L3.24884 6.52872C3.59066 6.18701 4.14487 6.18701 4.48669 6.52872C4.82851 6.87043 4.82851 7.42445 4.48669 7.76616L2.9921 9.26024L8.64986 9.26024C9.13327 9.26024 9.52515 9.65199 9.52515 10.1352Z"
    fill="currentColor"
  />
</svg>

`},5509:function(e,t,r){"use strict";r.r(t),r.d(t,{swapHorizontalRoundedBoldSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <path 
    fill="currentColor"
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M8.3071 0.292893C8.69763 0.683417 8.69763 1.31658 8.3071 1.70711L6.41421 3.6H11.3404C13.8368 3.6 16.0533 5.1975 16.8427 7.56588L16.9487 7.88377C17.1233 8.40772 16.8402 8.97404 16.3162 9.14868C15.7923 9.32333 15.226 9.04017 15.0513 8.51623L14.9453 8.19834C14.4281 6.64664 12.976 5.6 11.3404 5.6H6.41421L8.3071 7.49289C8.69763 7.88342 8.69763 8.51658 8.3071 8.90711C7.91658 9.29763 7.28341 9.29763 6.89289 8.90711L3.29289 5.30711C2.90236 4.91658 2.90236 4.28342 3.29289 3.89289L6.89289 0.292893C7.28341 -0.0976311 7.91658 -0.0976311 8.3071 0.292893ZM3.68377 10.8513C4.20771 10.6767 4.77403 10.9598 4.94868 11.4838L5.05464 11.8017C5.57188 13.3534 7.024 14.4 8.65964 14.4L13.5858 14.4L11.6929 12.5071C11.3024 12.1166 11.3024 11.4834 11.6929 11.0929C12.0834 10.7024 12.7166 10.7024 13.1071 11.0929L16.7071 14.6929C17.0976 15.0834 17.0976 15.7166 16.7071 16.1071L13.1071 19.7071C12.7166 20.0976 12.0834 20.0976 11.6929 19.7071C11.3024 19.3166 11.3024 18.6834 11.6929 18.2929L13.5858 16.4L8.65964 16.4C6.16314 16.4 3.94674 14.8025 3.15728 12.4341L3.05131 12.1162C2.87667 11.5923 3.15983 11.026 3.68377 10.8513Z" 
  />
</svg>`},35178:function(e,t,r){"use strict";r.r(t),r.d(t,{swapVerticalSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.48 2.18a1 1 0 0 1 1.41 0l2.68 2.68a1 1 0 1 1-1.41 1.42l-.98-.98v4.56a1 1 0 0 1-2 0V5.3l-.97.98A1 1 0 0 1 .79 4.86l2.69-2.68Zm6.34 2.93a1 1 0 0 1 1 1v4.56l.97-.98a1 1 0 1 1 1.42 1.42l-2.69 2.68a1 1 0 0 1-1.41 0l-2.68-2.68a1 1 0 0 1 1.41-1.42l.98.98V6.1a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`},86389:function(e,t,r){"use strict";r.r(t),r.d(t,{telegramSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <g clip-path="url(#a)">
    <path fill="url(#b)" d="M0 0h32v32H0z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.034 15.252c4.975-2.167 8.293-3.596 9.953-4.287 4.74-1.971 5.725-2.314 6.366-2.325.142-.002.457.033.662.198.172.14.22.33.243.463.022.132.05.435.028.671-.257 2.7-1.368 9.248-1.933 12.27-.24 1.28-.71 1.708-1.167 1.75-.99.091-1.743-.655-2.703-1.284-1.502-.985-2.351-1.598-3.81-2.558-1.684-1.11-.592-1.721.368-2.718.252-.261 4.619-4.233 4.703-4.594.01-.045.02-.213-.08-.301-.1-.09-.246-.059-.353-.035-.15.034-2.55 1.62-7.198 4.758-.682.468-1.298.696-1.851.684-.61-.013-1.782-.344-2.653-.628-1.069-.347-1.918-.53-1.845-1.12.039-.308.462-.623 1.27-.944Z" fill="#fff"/>
  </g>
  <path d="M.5 16C.5 7.44 7.44.5 16 .5 24.56.5 31.5 7.44 31.5 16c0 8.56-6.94 15.5-15.5 15.5C7.44 31.5.5 24.56.5 16Z" stroke="#141414" stroke-opacity=".05"/>
  <defs>
    <linearGradient id="b" x1="1600" y1="0" x2="1600" y2="3176.27" gradientUnits="userSpaceOnUse">
      <stop stop-color="#2AABEE"/>
      <stop offset="1" stop-color="#229ED9"/>
    </linearGradient>
    <clipPath id="a">
      <path d="M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z" fill="#fff"/>
    </clipPath>
  </defs>
</svg>`},30743:function(e,t,r){"use strict";r.r(t),r.d(t,{threeDotsSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M7 3.71875C6.0335 3.71875 5.25 2.93525 5.25 1.96875C5.25 1.00225 6.0335 0.21875 7 0.21875C7.9665 0.21875 8.75 1.00225 8.75 1.96875C8.75 2.93525 7.9665 3.71875 7 3.71875Z" fill="#949E9E"/>
  <path d="M7 8.96875C6.0335 8.96875 5.25 8.18525 5.25 7.21875C5.25 6.25225 6.0335 5.46875 7 5.46875C7.9665 5.46875 8.75 6.25225 8.75 7.21875C8.75 8.18525 7.9665 8.96875 7 8.96875Z" fill="#949E9E"/>
  <path d="M5.25 12.4688C5.25 13.4352 6.0335 14.2187 7 14.2187C7.9665 14.2187 8.75 13.4352 8.75 12.4688C8.75 11.5023 7.9665 10.7188 7 10.7188C6.0335 10.7188 5.25 11.5023 5.25 12.4688Z" fill="#949E9E"/>
</svg>`},57369:function(e,t,r){"use strict";r.r(t),r.d(t,{twitchSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5A3E85" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M18.22 25.7 20 23.91h3.34l2.1-2.1v-6.68H15.4v8.78h2.82v1.77Zm3.87-8.16h1.25v3.66H22.1v-3.66Zm-3.34 0H20v3.66h-1.25v-3.66ZM20 7.9a12 12 0 1 0 0 24 12 12 0 0 0 0-24Zm6.69 14.56-3.66 3.66h-2.72l-1.77 1.78h-1.88V26.1H13.3v-9.82l.94-2.4H26.7v8.56Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`},79385:function(e,t,r){"use strict";r.r(t),r.d(t,{twitterIconSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="m14.36 4.74.01.42c0 4.34-3.3 9.34-9.34 9.34A9.3 9.3 0 0 1 0 13.03a6.6 6.6 0 0 0 4.86-1.36 3.29 3.29 0 0 1-3.07-2.28c.5.1 1 .07 1.48-.06A3.28 3.28 0 0 1 .64 6.11v-.04c.46.26.97.4 1.49.41A3.29 3.29 0 0 1 1.11 2.1a9.32 9.32 0 0 0 6.77 3.43 3.28 3.28 0 0 1 5.6-3 6.59 6.59 0 0 0 2.08-.8 3.3 3.3 0 0 1-1.45 1.82A6.53 6.53 0 0 0 16 3.04c-.44.66-1 1.23-1.64 1.7Z"
  />
</svg>`},5308:function(e,t,r){"use strict";r.r(t),r.d(t,{verifyFilledSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="m4.1 12.43-.45-.78-.93-.2a1.65 1.65 0 0 1-1.31-1.8l.1-.86-.61-.71a1.65 1.65 0 0 1 0-2.16l.6-.7-.09-.85c-.1-.86.47-1.64 1.3-1.81l.94-.2.45-.78A1.65 1.65 0 0 1 6.23.9l.77.36.78-.36c.77-.36 1.69-.07 2.12.66l.47.8.91.2c.84.17 1.4.95 1.31 1.8l-.1.86.6.7c.54.62.54 1.54.01 2.16l-.6.71.09.86c.1.85-.47 1.63-1.3 1.8l-.92.2-.47.79a1.65 1.65 0 0 1-2.12.66L7 12.74l-.77.36c-.78.35-1.7.07-2.13-.67Zm5.74-6.9a1 1 0 1 0-1.68-1.07L6.32 7.3l-.55-.66a1 1 0 0 0-1.54 1.28l1.43 1.71a1 1 0 0 0 1.61-.1l2.57-4Z"
    clip-rule="evenodd"
  />
</svg>`},38984:function(e,t,r){"use strict";r.r(t),r.d(t,{verifySvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 28 28">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M18.1 4.76c-.42-.73-1.33-1.01-2.09-.66l-1.42.66c-.37.18-.8.18-1.18 0l-1.4-.65a1.63 1.63 0 0 0-2.1.66l-.84 1.45c-.2.34-.53.59-.92.67l-1.7.35c-.83.17-1.39.94-1.3 1.78l.19 1.56c.04.39-.08.78-.33 1.07l-1.12 1.3c-.52.6-.52 1.5 0 2.11L5 16.38c.25.3.37.68.33 1.06l-.18 1.57c-.1.83.46 1.6 1.28 1.78l1.7.35c.4.08.73.32.93.66l.84 1.43a1.63 1.63 0 0 0 2.09.66l1.41-.66c.37-.17.8-.17 1.18 0l1.43.67c.76.35 1.66.07 2.08-.65l.86-1.45c.2-.34.54-.58.92-.66l1.68-.35A1.63 1.63 0 0 0 22.84 19l-.18-1.57a1.4 1.4 0 0 1 .33-1.06l1.12-1.32c.52-.6.52-1.5 0-2.11l-1.12-1.3a1.4 1.4 0 0 1-.33-1.07l.18-1.57c.1-.83-.46-1.6-1.28-1.77l-1.68-.35a1.4 1.4 0 0 1-.92-.66l-.86-1.47Zm-3.27-3.2a4.43 4.43 0 0 1 5.69 1.78l.54.93 1.07.22a4.43 4.43 0 0 1 3.5 4.84l-.11.96.7.83a4.43 4.43 0 0 1 .02 5.76l-.72.85.1.96a4.43 4.43 0 0 1-3.5 4.84l-1.06.22-.54.92a4.43 4.43 0 0 1-5.68 1.77l-.84-.4-.82.39a4.43 4.43 0 0 1-5.7-1.79l-.51-.89-1.09-.22a4.43 4.43 0 0 1-3.5-4.84l.1-.96-.72-.85a4.43 4.43 0 0 1 .01-5.76l.71-.83-.1-.95a4.43 4.43 0 0 1 3.5-4.84l1.08-.23.53-.9a4.43 4.43 0 0 1 5.7-1.8l.81.38.83-.39ZM18.2 9.4c.65.42.84 1.28.42 1.93l-4.4 6.87a1.4 1.4 0 0 1-2.26.14L9.5 15.39a1.4 1.4 0 0 1 2.15-1.8l1.23 1.48 3.38-5.26a1.4 1.4 0 0 1 1.93-.42Z"
    clip-rule="evenodd"
  />
</svg>`},68802:function(e,t,r){"use strict";r.r(t),r.d(t,{walletPlaceholderSvg:function(){return n}});var i=r(34954);let n=i.YP`
  <svg fill="none" viewBox="0 0 48 44">
    <path
      style="fill: var(--wui-color-bg-300);"
      d="M4.56 8.64c-1.23 1.68-1.23 4.08-1.23 8.88v8.96c0 4.8 0 7.2 1.23 8.88.39.55.87 1.02 1.41 1.42C7.65 38 10.05 38 14.85 38h14.3c4.8 0 7.2 0 8.88-1.22a6.4 6.4 0 0 0 1.41-1.42c.83-1.14 1.1-2.6 1.19-4.92a6.4 6.4 0 0 0 5.16-4.65c.21-.81.21-1.8.21-3.79 0-1.98 0-2.98-.22-3.79a6.4 6.4 0 0 0-5.15-4.65c-.1-2.32-.36-3.78-1.19-4.92a6.4 6.4 0 0 0-1.41-1.42C36.35 6 33.95 6 29.15 6h-14.3c-4.8 0-7.2 0-8.88 1.22a6.4 6.4 0 0 0-1.41 1.42Z"
    />
    <path
      style="fill: var(--wui-color-fg-200);"
      fill-rule="evenodd"
      d="M2.27 11.33a6.4 6.4 0 0 1 6.4-6.4h26.66a6.4 6.4 0 0 1 6.4 6.4v1.7a6.4 6.4 0 0 1 5.34 6.3v5.34a6.4 6.4 0 0 1-5.34 6.3v1.7a6.4 6.4 0 0 1-6.4 6.4H8.67a6.4 6.4 0 0 1-6.4-6.4V11.33ZM39.6 31.07h-6.93a9.07 9.07 0 1 1 0-18.14h6.93v-1.6a4.27 4.27 0 0 0-4.27-4.26H8.67a4.27 4.27 0 0 0-4.27 4.26v21.34a4.27 4.27 0 0 0 4.27 4.26h26.66a4.27 4.27 0 0 0 4.27-4.26v-1.6Zm-6.93-16a6.93 6.93 0 0 0 0 13.86h8a4.27 4.27 0 0 0 4.26-4.26v-5.34a4.27 4.27 0 0 0-4.26-4.26h-8Z"
      clip-rule="evenodd"
    />
  </svg>
`},40889:function(e,t,r){"use strict";r.r(t),r.d(t,{walletSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 5.5c0-1.8 1.46-3.25 3.25-3.25H14.5c1.8 0 3.25 1.46 3.25 3.25v.28A3.25 3.25 0 0 1 20 8.88v2.24c0 1.45-.94 2.68-2.25 3.1v.28c0 1.8-1.46 3.25-3.25 3.25H3.25A3.25 3.25 0 0 1 0 14.5v-9Zm15.75 8.88h-2.38a4.38 4.38 0 0 1 0-8.76h2.38V5.5c0-.69-.56-1.25-1.25-1.25H3.25C2.56 4.25 2 4.81 2 5.5v9c0 .69.56 1.25 1.25 1.25H14.5c.69 0 1.25-.56 1.25-1.25v-.13Zm-2.38-6.76a2.37 2.37 0 1 0 0 4.75h3.38c.69 0 1.25-.55 1.25-1.24V8.87c0-.69-.56-1.24-1.25-1.24h-3.38Z"
    clip-rule="evenodd"
  />
</svg>`},50582:function(e,t,r){"use strict";r.r(t),r.d(t,{walletConnectBrownSvg:function(){return o},walletConnectLightBrownSvg:function(){return s},walletConnectSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 96 67">
  <path
    fill="currentColor"
    d="M25.32 18.8a32.56 32.56 0 0 1 45.36 0l1.5 1.47c.63.62.63 1.61 0 2.22l-5.15 5.05c-.31.3-.82.3-1.14 0l-2.07-2.03a22.71 22.71 0 0 0-31.64 0l-2.22 2.18c-.31.3-.82.3-1.14 0l-5.15-5.05a1.55 1.55 0 0 1 0-2.22l1.65-1.62Zm56.02 10.44 4.59 4.5c.63.6.63 1.6 0 2.21l-20.7 20.26c-.62.61-1.63.61-2.26 0L48.28 41.83a.4.4 0 0 0-.56 0L33.03 56.21c-.63.61-1.64.61-2.27 0L10.07 35.95a1.55 1.55 0 0 1 0-2.22l4.59-4.5a1.63 1.63 0 0 1 2.27 0L31.6 43.63a.4.4 0 0 0 .57 0l14.69-14.38a1.63 1.63 0 0 1 2.26 0l14.69 14.38a.4.4 0 0 0 .57 0l14.68-14.38a1.63 1.63 0 0 1 2.27 0Z"
  />
  <path
    stroke="#000"
    stroke-opacity=".1"
    d="M25.67 19.15a32.06 32.06 0 0 1 44.66 0l1.5 1.48c.43.42.43 1.09 0 1.5l-5.15 5.05a.31.31 0 0 1-.44 0l-2.07-2.03a23.21 23.21 0 0 0-32.34 0l-2.22 2.18a.31.31 0 0 1-.44 0l-5.15-5.05a1.05 1.05 0 0 1 0-1.5l1.65-1.63ZM81 29.6l4.6 4.5c.42.41.42 1.09 0 1.5l-20.7 20.26c-.43.43-1.14.43-1.57 0L48.63 41.47a.9.9 0 0 0-1.26 0L32.68 55.85c-.43.43-1.14.43-1.57 0L10.42 35.6a1.05 1.05 0 0 1 0-1.5l4.59-4.5a1.13 1.13 0 0 1 1.57 0l14.68 14.38a.9.9 0 0 0 1.27 0l-.35-.35.35.35L47.22 29.6a1.13 1.13 0 0 1 1.56 0l14.7 14.38a.9.9 0 0 0 1.26 0L79.42 29.6a1.13 1.13 0 0 1 1.57 0Z"
  />
</svg>`,s=i.YP`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_22274_4692)">
<path d="M0 6.64C0 4.17295 0 2.93942 0.525474 2.01817C0.880399 1.39592 1.39592 0.880399 2.01817 0.525474C2.93942 0 4.17295 0 6.64 0H9.36C11.8271 0 13.0606 0 13.9818 0.525474C14.6041 0.880399 15.1196 1.39592 15.4745 2.01817C16 2.93942 16 4.17295 16 6.64V9.36C16 11.8271 16 13.0606 15.4745 13.9818C15.1196 14.6041 14.6041 15.1196 13.9818 15.4745C13.0606 16 11.8271 16 9.36 16H6.64C4.17295 16 2.93942 16 2.01817 15.4745C1.39592 15.1196 0.880399 14.6041 0.525474 13.9818C0 13.0606 0 11.8271 0 9.36V6.64Z" fill="#C7B994"/>
<path d="M4.49038 5.76609C6.42869 3.86833 9.5713 3.86833 11.5096 5.76609L11.7429 5.99449C11.8398 6.08938 11.8398 6.24323 11.7429 6.33811L10.9449 7.11942C10.8964 7.16686 10.8179 7.16686 10.7694 7.11942L10.4484 6.80512C9.09617 5.48119 6.90381 5.48119 5.5516 6.80512L5.20782 7.14171C5.15936 7.18915 5.08079 7.18915 5.03234 7.14171L4.23434 6.3604C4.13742 6.26552 4.13742 6.11167 4.23434 6.01678L4.49038 5.76609ZM13.1599 7.38192L13.8702 8.07729C13.9671 8.17217 13.9671 8.32602 13.8702 8.4209L10.6677 11.5564C10.5708 11.6513 10.4137 11.6513 10.3168 11.5564L8.04388 9.33105C8.01965 9.30733 7.98037 9.30733 7.95614 9.33105L5.6833 11.5564C5.58638 11.6513 5.42925 11.6513 5.33234 11.5564L2.12982 8.42087C2.0329 8.32598 2.0329 8.17213 2.12982 8.07724L2.84004 7.38188C2.93695 7.28699 3.09408 7.28699 3.191 7.38188L5.46392 9.60726C5.48815 9.63098 5.52743 9.63098 5.55166 9.60726L7.82447 7.38188C7.92138 7.28699 8.07851 7.28699 8.17543 7.38187L10.4484 9.60726C10.4726 9.63098 10.5119 9.63098 10.5361 9.60726L12.809 7.38192C12.9059 7.28703 13.063 7.28703 13.1599 7.38192Z" fill="#202020"/>
</g>
<defs>
<clipPath id="clip0_22274_4692">
<path d="M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,o=i.YP`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="11" r="11" transform="matrix(-1 0 0 1 23 1)" fill="#202020"/>
<circle cx="11" cy="11" r="11.5" transform="matrix(-1 0 0 1 23 1)" stroke="#C7B994" stroke-opacity="0.7"/>
<path d="M15.4523 11.0686L16.7472 9.78167C13.8205 6.87297 10.1838 6.87297 7.25708 9.78167L8.55201 11.0686C10.7779 8.85645 13.2279 8.85645 15.4538 11.0686H15.4523Z" fill="#C7B994"/>
<path d="M15.0199 14.067L12 11.0656L8.98 14.067L5.96004 11.0656L4.66663 12.3511L8.98 16.6393L12 13.638L15.0199 16.6393L19.3333 12.3511L18.0399 11.0656L15.0199 14.067Z" fill="#C7B994"/>
</svg>
`},21492:function(e,t,r){"use strict";r.r(t),r.d(t,{warningCircleSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M11 6.67a1 1 0 1 0-2 0v2.66a1 1 0 0 0 2 0V6.67ZM10 14.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 1a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm-7 9a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"
    clip-rule="evenodd"
  />
</svg>`},80598:function(e,t,r){"use strict";r.r(t),r.d(t,{xSvg:function(){return n}});var i=r(34954);let n=i.YP`<svg fill="none" viewBox="0 0 41 40">
  <g clip-path="url(#a)">
    <path fill="#000" d="M.8 0h40v40H.8z" />
    <path
      fill="#fff"
      d="m22.63 18.46 7.14-8.3h-1.69l-6.2 7.2-4.96-7.2H11.2l7.5 10.9-7.5 8.71h1.7l6.55-7.61 5.23 7.61h5.72l-7.77-11.31Zm-9.13-7.03h2.6l11.98 17.13h-2.6L13.5 11.43Z"
    />
  </g>
  <defs>
    <clipPath id="a"><path fill="#fff" d="M.8 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z" /></clipPath>
  </defs>
</svg>`},58837:function(e,t,r){"use strict";var i=r(34954),n=r(29324),s=r(56528),o=r(76479),a=r(28252);class l{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class c{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise(e=>this.Z=e)}resume(){this.Z?.(),this.Y=this.Z=void 0}}var u=r(30220);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let h=e=>!(0,o.pt)(e)&&"function"==typeof e.then;class d extends a.sR{constructor(){super(...arguments),this._$Cwt=1073741823,this._$Cbt=[],this._$CK=new l(this),this._$CX=new c}render(...e){return e.find(e=>!h(e))??s.Jb}update(e,t){let r=this._$Cbt,i=r.length;this._$Cbt=t;let n=this._$CK,o=this._$CX;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this._$Cwt);e++){let s=t[e];if(!h(s))return this._$Cwt=e,s;e<i&&s===r[e]||(this._$Cwt=1073741823,i=0,Promise.resolve(s).then(async e=>{for(;o.get();)await o.get();let t=n.deref();if(void 0!==t){let r=t._$Cbt.indexOf(s);r>-1&&r<t._$Cwt&&(t._$Cwt=r,t.setValue(e))}}))}return s.Jb}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}let p=(0,u.XM)(d);class f{constructor(){this.cache=new Map}set(e,t){this.cache.set(e,t)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}let g=new f;var m=r(6600),y=r(22817),v=i.iv`
  :host {
    display: flex;
    aspect-ratio: var(--local-aspect-ratio);
    color: var(--local-color);
    width: var(--local-width);
  }

  svg {
    width: inherit;
    height: inherit;
    object-fit: contain;
    object-position: center;
  }

  .fallback {
    width: var(--local-width);
    height: var(--local-height);
  }
`,b=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let w={add:async()=>(await r.e(736).then(r.bind(r,69437))).addSvg,allWallets:async()=>(await r.e(736).then(r.bind(r,3110))).allWalletsSvg,arrowBottomCircle:async()=>(await r.e(736).then(r.bind(r,24750))).arrowBottomCircleSvg,appStore:async()=>(await r.e(736).then(r.bind(r,16413))).appStoreSvg,apple:async()=>(await r.e(736).then(r.bind(r,2623))).appleSvg,arrowBottom:async()=>(await r.e(736).then(r.bind(r,45207))).arrowBottomSvg,arrowLeft:async()=>(await r.e(736).then(r.bind(r,71768))).arrowLeftSvg,arrowRight:async()=>(await r.e(736).then(r.bind(r,38837))).arrowRightSvg,arrowTop:async()=>(await r.e(736).then(r.bind(r,36986))).arrowTopSvg,bank:async()=>(await r.e(736).then(r.bind(r,78038))).bankSvg,browser:async()=>(await r.e(736).then(r.bind(r,39828))).browserSvg,card:async()=>(await r.e(736).then(r.bind(r,75102))).cardSvg,checkmark:async()=>(await r.e(736).then(r.bind(r,78332))).checkmarkSvg,checkmarkBold:async()=>(await r.e(736).then(r.bind(r,83945))).checkmarkBoldSvg,chevronBottom:async()=>(await r.e(736).then(r.bind(r,58024))).chevronBottomSvg,chevronLeft:async()=>(await r.e(736).then(r.bind(r,63427))).chevronLeftSvg,chevronRight:async()=>(await r.e(736).then(r.bind(r,1494))).chevronRightSvg,chevronTop:async()=>(await r.e(736).then(r.bind(r,88994))).chevronTopSvg,chromeStore:async()=>(await r.e(736).then(r.bind(r,27031))).chromeStoreSvg,clock:async()=>(await r.e(736).then(r.bind(r,87154))).clockSvg,close:async()=>(await r.e(736).then(r.bind(r,53428))).closeSvg,compass:async()=>(await r.e(736).then(r.bind(r,15001))).compassSvg,coinPlaceholder:async()=>(await r.e(736).then(r.bind(r,84916))).coinPlaceholderSvg,copy:async()=>(await r.e(736).then(r.bind(r,5958))).copySvg,cursor:async()=>(await r.e(736).then(r.bind(r,20314))).cursorSvg,cursorTransparent:async()=>(await r.e(736).then(r.bind(r,80677))).cursorTransparentSvg,desktop:async()=>(await r.e(736).then(r.bind(r,7004))).desktopSvg,disconnect:async()=>(await r.e(736).then(r.bind(r,11665))).disconnectSvg,discord:async()=>(await r.e(736).then(r.bind(r,42773))).discordSvg,etherscan:async()=>(await r.e(736).then(r.bind(r,94809))).etherscanSvg,extension:async()=>(await r.e(736).then(r.bind(r,31889))).extensionSvg,externalLink:async()=>(await r.e(736).then(r.bind(r,90683))).externalLinkSvg,facebook:async()=>(await r.e(736).then(r.bind(r,53255))).facebookSvg,farcaster:async()=>(await r.e(736).then(r.bind(r,52713))).farcasterSvg,filters:async()=>(await r.e(736).then(r.bind(r,86397))).filtersSvg,github:async()=>(await r.e(736).then(r.bind(r,56003))).githubSvg,google:async()=>(await r.e(736).then(r.bind(r,83829))).googleSvg,helpCircle:async()=>(await r.e(736).then(r.bind(r,39476))).helpCircleSvg,image:async()=>(await r.e(736).then(r.bind(r,13021))).imageSvg,id:async()=>(await r.e(736).then(r.bind(r,98058))).idSvg,infoCircle:async()=>(await r.e(736).then(r.bind(r,96001))).infoCircleSvg,lightbulb:async()=>(await r.e(736).then(r.bind(r,97348))).lightbulbSvg,mail:async()=>(await r.e(736).then(r.bind(r,96840))).mailSvg,mobile:async()=>(await r.e(736).then(r.bind(r,38634))).mobileSvg,more:async()=>(await r.e(736).then(r.bind(r,28724))).moreSvg,networkPlaceholder:async()=>(await r.e(736).then(r.bind(r,13163))).networkPlaceholderSvg,nftPlaceholder:async()=>(await r.e(736).then(r.bind(r,58148))).nftPlaceholderSvg,off:async()=>(await r.e(736).then(r.bind(r,50490))).offSvg,playStore:async()=>(await r.e(736).then(r.bind(r,61536))).playStoreSvg,plus:async()=>(await r.e(736).then(r.bind(r,21286))).plusSvg,qrCode:async()=>(await r.e(736).then(r.bind(r,43792))).qrCodeIcon,recycleHorizontal:async()=>(await r.e(736).then(r.bind(r,16153))).recycleHorizontalSvg,refresh:async()=>(await r.e(736).then(r.bind(r,92787))).refreshSvg,search:async()=>(await r.e(736).then(r.bind(r,9483))).searchSvg,send:async()=>(await r.e(736).then(r.bind(r,86552))).sendSvg,swapHorizontal:async()=>(await r.e(736).then(r.bind(r,25422))).swapHorizontalSvg,swapHorizontalMedium:async()=>(await r.e(736).then(r.bind(r,30668))).swapHorizontalMediumSvg,swapHorizontalBold:async()=>(await r.e(736).then(r.bind(r,65180))).swapHorizontalBoldSvg,swapHorizontalRoundedBold:async()=>(await r.e(736).then(r.bind(r,5509))).swapHorizontalRoundedBoldSvg,swapVertical:async()=>(await r.e(736).then(r.bind(r,35178))).swapVerticalSvg,telegram:async()=>(await r.e(736).then(r.bind(r,86389))).telegramSvg,threeDots:async()=>(await r.e(736).then(r.bind(r,30743))).threeDotsSvg,twitch:async()=>(await r.e(736).then(r.bind(r,57369))).twitchSvg,twitter:async()=>(await r.e(736).then(r.bind(r,80598))).xSvg,twitterIcon:async()=>(await r.e(736).then(r.bind(r,79385))).twitterIconSvg,verify:async()=>(await r.e(736).then(r.bind(r,38984))).verifySvg,verifyFilled:async()=>(await r.e(736).then(r.bind(r,5308))).verifyFilledSvg,wallet:async()=>(await r.e(736).then(r.bind(r,40889))).walletSvg,walletConnect:async()=>(await r.e(736).then(r.bind(r,50582))).walletConnectSvg,walletConnectLightBrown:async()=>(await r.e(736).then(r.bind(r,50582))).walletConnectLightBrownSvg,walletConnectBrown:async()=>(await r.e(736).then(r.bind(r,50582))).walletConnectBrownSvg,walletPlaceholder:async()=>(await r.e(736).then(r.bind(r,68802))).walletPlaceholderSvg,warningCircle:async()=>(await r.e(736).then(r.bind(r,21492))).warningCircleSvg,x:async()=>(await r.e(736).then(r.bind(r,80598))).xSvg,info:async()=>(await r.e(736).then(r.bind(r,69757))).infoSvg,exclamationTriangle:async()=>(await r.e(736).then(r.bind(r,99565))).exclamationTriangleSvg,reown:async()=>(await r.e(736).then(r.bind(r,10948))).reownSvg};async function E(e){if(g.has(e))return g.get(e);let t=(w[e]??w.copy)();return g.set(e,t),t}let _=class extends i.oi{constructor(){super(...arguments),this.size="md",this.name="copy",this.color="fg-300",this.aspectRatio="1 / 1"}render(){return this.style.cssText=`
      --local-color: var(--wui-color-${this.color});
      --local-width: var(--wui-icon-size-${this.size});
      --local-aspect-ratio: ${this.aspectRatio}
    `,i.dy`${p(E(this.name),i.dy`<div class="fallback"></div>`)}`}};_.styles=[m.ET,m.Bp,v],b([(0,n.Cb)()],_.prototype,"size",void 0),b([(0,n.Cb)()],_.prototype,"name",void 0),b([(0,n.Cb)()],_.prototype,"color",void 0),b([(0,n.Cb)()],_.prototype,"aspectRatio",void 0),b([(0,y.M)("wui-icon")],_)},42545:function(e,t,r){"use strict";var i=r(34954),n=r(29324),s=r(6600),o=r(22817),a=i.iv`
  :host {
    display: block;
    width: var(--local-width);
    height: var(--local-height);
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    border-radius: inherit;
  }
`,l=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let c=class extends i.oi{constructor(){super(...arguments),this.src="./path/to/image.jpg",this.alt="Image",this.size=void 0}render(){return this.style.cssText=`
      --local-width: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      --local-height: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      `,i.dy`<img src=${this.src} alt=${this.alt} @error=${this.handleImageError} />`}handleImageError(){this.dispatchEvent(new CustomEvent("onLoadError",{bubbles:!0,composed:!0}))}};c.styles=[s.ET,s.Bp,a],l([(0,n.Cb)()],c.prototype,"src",void 0),l([(0,n.Cb)()],c.prototype,"alt",void 0),l([(0,n.Cb)()],c.prototype,"size",void 0),l([(0,o.M)("wui-image")],c)},11266:function(e,t,r){"use strict";var i=r(34954),n=r(29324),s=r(6600),o=r(22817),a=i.iv`
  :host {
    display: flex;
  }

  :host([data-size='sm']) > svg {
    width: 12px;
    height: 12px;
  }

  :host([data-size='md']) > svg {
    width: 16px;
    height: 16px;
  }

  :host([data-size='lg']) > svg {
    width: 24px;
    height: 24px;
  }

  :host([data-size='xl']) > svg {
    width: 32px;
    height: 32px;
  }

  svg {
    animation: rotate 2s linear infinite;
  }

  circle {
    fill: none;
    stroke: var(--local-color);
    stroke-width: 4px;
    stroke-dasharray: 1, 124;
    stroke-dashoffset: 0;
    stroke-linecap: round;
    animation: dash 1.5s ease-in-out infinite;
  }

  :host([data-size='md']) > svg > circle {
    stroke-width: 6px;
  }

  :host([data-size='sm']) > svg > circle {
    stroke-width: 8px;
  }

  @keyframes rotate {
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes dash {
    0% {
      stroke-dasharray: 1, 124;
      stroke-dashoffset: 0;
    }

    50% {
      stroke-dasharray: 90, 124;
      stroke-dashoffset: -35;
    }

    100% {
      stroke-dashoffset: -125;
    }
  }
`,l=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let c=class extends i.oi{constructor(){super(...arguments),this.color="accent-100",this.size="lg"}render(){return this.style.cssText=`--local-color: ${"inherit"===this.color?"inherit":`var(--wui-color-${this.color})`}`,this.dataset.size=this.size,i.dy`<svg viewBox="25 25 50 50">
      <circle r="20" cy="50" cx="50"></circle>
    </svg>`}};c.styles=[s.ET,a],l([(0,n.Cb)()],c.prototype,"color",void 0),l([(0,n.Cb)()],c.prototype,"size",void 0),l([(0,o.M)("wui-loading-spinner")],c)},2614:function(e,t,r){"use strict";var i=r(34954),n=r(29324),s=r(99901),o=r(6600),a=r(22817),l=i.iv`
  :host {
    display: inline-flex !important;
  }

  slot {
    width: 100%;
    display: inline-block;
    font-style: normal;
    font-family: var(--wui-font-family);
    font-feature-settings:
      'tnum' on,
      'lnum' on,
      'case' on;
    line-height: 130%;
    font-weight: var(--wui-font-weight-regular);
    overflow: inherit;
    text-overflow: inherit;
    text-align: var(--local-align);
    color: var(--local-color);
  }

  .wui-line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .wui-line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .wui-font-medium-400 {
    font-size: var(--wui-font-size-medium);
    font-weight: var(--wui-font-weight-light);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-medium-600 {
    font-size: var(--wui-font-size-medium);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-title-600 {
    font-size: var(--wui-font-size-title);
    letter-spacing: var(--wui-letter-spacing-title);
  }

  .wui-font-title-6-600 {
    font-size: var(--wui-font-size-title-6);
    letter-spacing: var(--wui-letter-spacing-title-6);
  }

  .wui-font-mini-700 {
    font-size: var(--wui-font-size-mini);
    letter-spacing: var(--wui-letter-spacing-mini);
    text-transform: uppercase;
  }

  .wui-font-large-500,
  .wui-font-large-600,
  .wui-font-large-700 {
    font-size: var(--wui-font-size-large);
    letter-spacing: var(--wui-letter-spacing-large);
  }

  .wui-font-2xl-500,
  .wui-font-2xl-600,
  .wui-font-2xl-700 {
    font-size: var(--wui-font-size-2xl);
    letter-spacing: var(--wui-letter-spacing-2xl);
  }

  .wui-font-paragraph-400,
  .wui-font-paragraph-500,
  .wui-font-paragraph-600,
  .wui-font-paragraph-700 {
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
  }

  .wui-font-small-400,
  .wui-font-small-500,
  .wui-font-small-600 {
    font-size: var(--wui-font-size-small);
    letter-spacing: var(--wui-letter-spacing-small);
  }

  .wui-font-tiny-400,
  .wui-font-tiny-500,
  .wui-font-tiny-600 {
    font-size: var(--wui-font-size-tiny);
    letter-spacing: var(--wui-letter-spacing-tiny);
  }

  .wui-font-micro-700,
  .wui-font-micro-600 {
    font-size: var(--wui-font-size-micro);
    letter-spacing: var(--wui-letter-spacing-micro);
    text-transform: uppercase;
  }

  .wui-font-tiny-400,
  .wui-font-small-400,
  .wui-font-medium-400,
  .wui-font-paragraph-400 {
    font-weight: var(--wui-font-weight-light);
  }

  .wui-font-large-700,
  .wui-font-paragraph-700,
  .wui-font-micro-700,
  .wui-font-mini-700 {
    font-weight: var(--wui-font-weight-bold);
  }

  .wui-font-medium-600,
  .wui-font-medium-title-600,
  .wui-font-title-6-600,
  .wui-font-large-600,
  .wui-font-paragraph-600,
  .wui-font-small-600,
  .wui-font-tiny-600,
  .wui-font-micro-600 {
    font-weight: var(--wui-font-weight-medium);
  }

  :host([disabled]) {
    opacity: 0.4;
  }
`,c=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let u=class extends i.oi{constructor(){super(...arguments),this.variant="paragraph-500",this.color="fg-300",this.align="left",this.lineClamp=void 0}render(){let e={[`wui-font-${this.variant}`]:!0,[`wui-color-${this.color}`]:!0,[`wui-line-clamp-${this.lineClamp}`]:!!this.lineClamp};return this.style.cssText=`
      --local-align: ${this.align};
      --local-color: var(--wui-color-${this.color});
    `,i.dy`<slot class=${(0,s.$)(e)}></slot>`}};u.styles=[o.ET,l],c([(0,n.Cb)()],u.prototype,"variant",void 0),c([(0,n.Cb)()],u.prototype,"color",void 0),c([(0,n.Cb)()],u.prototype,"align",void 0),c([(0,n.Cb)()],u.prototype,"lineClamp",void 0),c([(0,a.M)("wui-text")],u)},11265:function(e,t,r){"use strict";var i=r(34954),n=r(29324);r(58837);var s=r(6600),o=r(22817),a=i.iv`
  :host {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    background-color: var(--wui-color-gray-glass-020);
    border-radius: var(--local-border-radius);
    border: var(--local-border);
    box-sizing: content-box;
    width: var(--local-size);
    height: var(--local-size);
    min-height: var(--local-size);
    min-width: var(--local-size);
  }

  @supports (background: color-mix(in srgb, white 50%, black)) {
    :host {
      background-color: color-mix(in srgb, var(--local-bg-value) var(--local-bg-mix), transparent);
    }
  }
`,l=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let c=class extends i.oi{constructor(){super(...arguments),this.size="md",this.backgroundColor="accent-100",this.iconColor="accent-100",this.background="transparent",this.border=!1,this.borderColor="wui-color-bg-125",this.icon="copy"}render(){let e=this.iconSize||this.size,t="lg"===this.size,r="xl"===this.size,n="gray"===this.background,s="opaque"===this.background,o="accent-100"===this.backgroundColor&&s||"success-100"===this.backgroundColor&&s||"error-100"===this.backgroundColor&&s||"inverse-100"===this.backgroundColor&&s,a=`var(--wui-color-${this.backgroundColor})`;return o?a=`var(--wui-icon-box-bg-${this.backgroundColor})`:n&&(a=`var(--wui-color-gray-${this.backgroundColor})`),this.style.cssText=`
       --local-bg-value: ${a};
       --local-bg-mix: ${o||n?"100%":t?"12%":"16%"};
       --local-border-radius: var(--wui-border-radius-${t?"xxs":r?"s":"3xl"});
       --local-size: var(--wui-icon-box-size-${this.size});
       --local-border: ${"wui-color-bg-125"===this.borderColor?"2px":"1px"} solid ${this.border?`var(--${this.borderColor})`:"transparent"}
   `,i.dy` <wui-icon color=${this.iconColor} size=${e} name=${this.icon}></wui-icon> `}};c.styles=[s.ET,s.ZM,a],l([(0,n.Cb)()],c.prototype,"size",void 0),l([(0,n.Cb)()],c.prototype,"backgroundColor",void 0),l([(0,n.Cb)()],c.prototype,"iconColor",void 0),l([(0,n.Cb)()],c.prototype,"iconSize",void 0),l([(0,n.Cb)()],c.prototype,"background",void 0),l([(0,n.Cb)({type:Boolean})],c.prototype,"border",void 0),l([(0,n.Cb)()],c.prototype,"borderColor",void 0),l([(0,n.Cb)()],c.prototype,"icon",void 0),l([(0,o.M)("wui-icon-box")],c)},38008:function(e,t,r){"use strict";var i=r(34954),n=r(29324);r(2614);var s=r(6600),o=r(22817),a=i.iv`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    height: var(--wui-spacing-m);
    padding: 0 var(--wui-spacing-3xs) !important;
    border-radius: var(--wui-border-radius-5xs);
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host > wui-text {
    transform: translateY(5%);
  }

  :host([data-variant='main']) {
    background-color: var(--wui-color-accent-glass-015);
    color: var(--wui-color-accent-100);
  }

  :host([data-variant='shade']) {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-200);
  }

  :host([data-variant='success']) {
    background-color: var(--wui-icon-box-bg-success-100);
    color: var(--wui-color-success-100);
  }

  :host([data-variant='error']) {
    background-color: var(--wui-icon-box-bg-error-100);
    color: var(--wui-color-error-100);
  }

  :host([data-size='lg']) {
    padding: 11px 5px !important;
  }

  :host([data-size='lg']) > wui-text {
    transform: translateY(2%);
  }
`,l=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let c=class extends i.oi{constructor(){super(...arguments),this.variant="main",this.size="lg"}render(){this.dataset.variant=this.variant,this.dataset.size=this.size;let e="md"===this.size?"mini-700":"micro-700";return i.dy`
      <wui-text data-variant=${this.variant} variant=${e} color="inherit">
        <slot></slot>
      </wui-text>
    `}};c.styles=[s.ET,a],l([(0,n.Cb)()],c.prototype,"variant",void 0),l([(0,n.Cb)()],c.prototype,"size",void 0),l([(0,o.M)("wui-tag")],c)},92439:function(e,t,r){"use strict";var i=r(34954),n=r(29324),s=r(6600),o=r(35016),a=r(22817),l=i.iv`
  :host {
    display: flex;
    width: inherit;
    height: inherit;
  }
`,c=function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};let u=class extends i.oi{render(){return this.style.cssText=`
      flex-direction: ${this.flexDirection};
      flex-wrap: ${this.flexWrap};
      flex-basis: ${this.flexBasis};
      flex-grow: ${this.flexGrow};
      flex-shrink: ${this.flexShrink};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&o.H.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&o.H.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&o.H.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&o.H.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&o.H.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&o.H.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&o.H.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&o.H.getSpacingStyles(this.margin,3)};
    `,i.dy`<slot></slot>`}};u.styles=[s.ET,l],c([(0,n.Cb)()],u.prototype,"flexDirection",void 0),c([(0,n.Cb)()],u.prototype,"flexWrap",void 0),c([(0,n.Cb)()],u.prototype,"flexBasis",void 0),c([(0,n.Cb)()],u.prototype,"flexGrow",void 0),c([(0,n.Cb)()],u.prototype,"flexShrink",void 0),c([(0,n.Cb)()],u.prototype,"alignItems",void 0),c([(0,n.Cb)()],u.prototype,"justifyContent",void 0),c([(0,n.Cb)()],u.prototype,"columnGap",void 0),c([(0,n.Cb)()],u.prototype,"rowGap",void 0),c([(0,n.Cb)()],u.prototype,"gap",void 0),c([(0,n.Cb)()],u.prototype,"padding",void 0),c([(0,n.Cb)()],u.prototype,"margin",void 0),c([(0,a.M)("wui-flex")],u)},6600:function(e,t,r){"use strict";let i,n,s;r.d(t,{Bp:function(){return f},ET:function(){return d},Hs:function(){return c},R:function(){return u},ZM:function(){return p},n:function(){return l}});var o=r(34954),a=r(76429);function l(e,t){i=document.createElement("style"),n=document.createElement("style"),s=document.createElement("style"),i.textContent=h(e).core.cssText,n.textContent=h(e).dark.cssText,s.textContent=h(e).light.cssText,document.head.appendChild(i),document.head.appendChild(n),document.head.appendChild(s),c(t)}function c(e){n&&s&&("light"===e?(n.removeAttribute("media"),s.media="enabled"):(s.removeAttribute("media"),n.media="enabled"))}function u(e){i&&n&&s&&(i.textContent=h(e).core.cssText,n.textContent=h(e).dark.cssText,s.textContent=h(e).light.cssText)}function h(e){return{core:o.iv`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${(0,o.$m)(e?.["--w3m-color-mix-strength"]?`${e["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${(0,o.$m)(e?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${(0,o.$m)(e?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${(0,o.$m)(e?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${(0,o.$m)(e?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:o.iv`
      :root {
        --w3m-color-mix: ${(0,o.$m)(e?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${(0,o.$m)((0,a.t)(e,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${(0,o.$m)((0,a.t)(e,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:o.iv`
      :root {
        --w3m-color-mix: ${(0,o.$m)(e?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${(0,o.$m)((0,a.t)(e,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${(0,o.$m)((0,a.t)(e,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}let d=o.iv`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,p=o.iv`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,f=o.iv`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`},35016:function(e,t,r){"use strict";r.d(t,{H:function(){return i}});let i={getSpacingStyles:(e,t)=>Array.isArray(e)?e[t]?`var(--wui-spacing-${e[t]})`:void 0:"string"==typeof e?`var(--wui-spacing-${e})`:void 0,getFormattedDate:e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e),getHostName(e){try{return new URL(e).hostname}catch(e){return""}},getTruncateString:({string:e,charsStart:t,charsEnd:r,truncate:i})=>e.length<=t+r?e:"end"===i?`${e.substring(0,t)}...`:"start"===i?`...${e.substring(e.length-r)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(r))}`,generateAvatarColors(e){let t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(t),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),n=100-3*Number(i?.replace("px","")),s=`${n}% ${n}% at 65% 40%`,o=[];for(let e=0;e<5;e+=1){let t=this.tintColor(r,.15*e);o.push(`rgb(${t[0]}, ${t[1]}, ${t[2]})`)}return`
    --local-color-1: ${o[0]};
    --local-color-2: ${o[1]};
    --local-color-3: ${o[2]};
    --local-color-4: ${o[3]};
    --local-color-5: ${o[4]};
    --local-radial-circle: ${s}
   `},hexToRgb(e){let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor(e,t){let[r,i,n]=e;return[Math.round(r+(255-r)*t),Math.round(i+(255-i)*t),Math.round(n+(255-n)*t)]},isNumber:e=>/^[0-9]+$/u.test(e),getColorTheme:e=>e||("undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark"),splitBalance(e){let t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:(e,t,r)=>e.toString().length>=t?Number(e).toFixed(r):e,formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}},22817:function(e,t,r){"use strict";function i(e){return function(t){return"function"==typeof t?(customElements.get(e)||customElements.define(e,t),t):function(e,t){let{kind:r,elements:i}=t;return{kind:r,elements:i,finisher(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}r.d(t,{M:function(){return i}})},62616:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});let i={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"}},38413:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var i=r(62616);let n={getCaipTokens(e){if(!e)return;let t={};return Object.entries(e).forEach(([e,r])=>{t[`${i.b.EIP155}:${e}`]=r}),t},isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase()}},70498:function(e,t,r){"use strict";r.d(t,{y_:function(){return n}});var i=r(62601);void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;let n={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},99542:function(e,t,r){"use strict";r.d(t,{createAppKit:function(){return uN}});var i=r(95646),n=r(25172),s=r(19876),o=r(5969),a=r(512),l=r.n(a),c=r(50545),u=r(34149),h=r(67133).Buffer;function d(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function p(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return p(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let f="base64:";function g(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function m(e){return(e=g(e))?e+":":""}let y=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function v(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function b(e){"function"==typeof e.dispose&&await d(e.dispose)}var w=r(5484),E=r(43283),_=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=(0,w.MT)(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await (0,w.U2)(i(e),t)>"u"),getItem:async e=>await (0,w.U2)(i(e),t)??null,setItem:(e,r)=>(0,w.t8)(i(e),r,t),removeItem:e=>(0,w.IV)(i(e),t),getKeys:()=>(0,w.XP)(t),clear:()=>(0,w.ZH)(t)}};class C{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||y()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=g(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await v(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=g(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},l=r(n);s(l).items.push({key:n,value:o,relativeKey:l.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},l={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=g(e));return d(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=g(e));return d(n.getItem,i,t).then(e=>(0,u.ZP)(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?d(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return g(e.join(":"))}(e.base,t.key),value:(0,u.ZP)(t.value)}))):Promise.all(e.items.map(t=>d(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:(0,u.ZP)(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=g(e));return n.getItemRaw?d(n.getItemRaw,i,t):d(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(f)?(t=e.slice(f.length),globalThis.Buffer?h.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return l.removeItem(e);let{relativeKey:s,driver:o}=r(e=g(e));o.setItem&&(await d(o.setItem,s,p(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return d(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:p(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>d(e.driver.setItem,t.relativeKey,p(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return l.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=g(e));if(o.setItemRaw)await d(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await d(o.setItem,s,"string"==typeof t?t:f+(globalThis.Buffer?h.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=g(e));s.removeItem&&(await d(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await d(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=g(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await d(n.getMeta,i,t)),!t.nativeOnly){let e=await d(n.getItem,i+"$",t).then(e=>(0,u.ZP)(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=m(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await d(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+g(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=m(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?d(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>b(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=m(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(v(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),l},async unmount(e,r=!0){(e=m(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await b(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=g(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=g(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>l.getKeys(e,t),get:(e,t={})=>l.getItem(e,t),set:(e,t,r={})=>l.setItem(e,t,r),has:(e,t={})=>l.hasItem(e,t),del:(e,t={})=>l.removeItem(e,t),remove:(e,t={})=>l.removeItem(e,t)};return l}({driver:_({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,E.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var S="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},I={exports:{}};function x(e){var t;return[e[0],(0,E.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof S&&S.localStorage?I.exports=S.localStorage:"u">typeof window&&window.localStorage?I.exports=window.localStorage:I.exports=new e}();class A{constructor(){this.localStorage=I.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(x)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,E.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,E.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}let k=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),O(e,o)},O=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class P{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new A;this.storage=e;try{let t=new C;k(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var R=r(33234),N=r(95097),T=Object.defineProperty,M=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t,r)=>M(e,"symbol"!=typeof t?t+"":t,r);class D extends N.q{constructor(e){super(),this.opts=e,L(this,"protocol","wc"),L(this,"version",2)}}var B=Object.defineProperty,j=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t,r)=>j(e,"symbol"!=typeof t?t+"":t,r);class U extends N.q{constructor(e,t){super(),this.core=e,this.logger=t,$(this,"records",new Map)}}class q{constructor(e,t){this.logger=e,this.core=t}}class H extends N.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class F extends N.q{constructor(e){super()}}class z{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class W extends N.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class K extends N.q{constructor(e,t){super(),this.core=e,this.logger=t}}class V{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class G{constructor(e,t){this.projectId=e,this.logger=t}}class Z{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var J=Object.defineProperty,Y=(e,t,r)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,X=(e,t,r)=>Y(e,"symbol"!=typeof t?t+"":t,r);class Q{constructor(e){this.opts=e,X(this,"protocol","wc"),X(this,"version",2)}}class ee{constructor(e){this.client=e}}var et=r(58619),er=r(99022),ei=r(69954),en=r(849),es=r(36073),eo=r(40800),ea=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let l=(e.length-s)*n+1>>>0,c=new Uint8Array(l);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=l-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*c[e]>>>0,c[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let u=l-a;for(;u!==l&&0===c[u];)u++;let h=new Uint8Array(o+(l-u)),d=o;for(;u!==l;)h[d++]=c[u++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,l=t.length;for(;a!==l&&0===t[a];)a++,n++;let c=(l-a)*s+1>>>0,u=new Uint8Array(c);for(;a!==l;){let e=t[a],i=0;for(let t=c-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let h=c-o;for(;h!==c&&0===u[h];)h++;let d=i.repeat(n);for(;h<c;++h)d+=e.charAt(u[h]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),el=r(55601),ec=r(18431),eu=r(62601),eh=r(67133).Buffer;function ed(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function ep(e,t){return e.includes(":")?[e]:t.chains||[]}var ef=Object.defineProperty,eg=Object.defineProperties,em=Object.getOwnPropertyDescriptors,ey=Object.getOwnPropertySymbols,ev=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,ew=(e,t,r)=>t in e?ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eE=(e,t)=>{for(var r in t||(t={}))ev.call(t,r)&&ew(e,r,t[r]);if(ey)for(var r of ey(t))eb.call(t,r)&&ew(e,r,t[r]);return e},e_=(e,t)=>eg(e,em(t));let eC={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function eS(){return"u">typeof eu&&"u">typeof eu.versions&&"u">typeof eu.versions.node}function eI(){return!(0,en.getDocument)()&&!!(0,en.getNavigator)()&&"ReactNative"===navigator.product}function ex(){return!eS()&&!!(0,en.getNavigator)()&&!!(0,en.getDocument)()}function eA(){return eI()?eC.reactNative:eS()?eC.node:ex()?eC.browser:eC.unknown}function ek(){var e;try{return eI()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function eO(){return(0,es.D)()||{name:"",description:"",url:"",icons:[""]}}function eP(e,t,i){let n=function(){if(eA()===eC.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let e=(0,ei.qY)();if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;let t=eA();return t===eC.browser?[t,(null==(e=(0,en.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,s].join("/")}function eR(e,t){return e.filter(e=>t.includes(e)).length===e.length}function eN(e){return Object.fromEntries(e.entries())}function eT(e){return new Map(Object.entries(e))}function eM(e=et.FIVE_MINUTES,t){let r,i,n,s;let o=(0,et.toMiliseconds)(e||et.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,a)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),a(e)},o),r=e,i=a})}}function eL(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function eD(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function eB(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function ej(e,t){return(0,et.fromMiliseconds)((t||Date.now())+(0,et.toMiliseconds)(e))}function e$(e){return Date.now()>=(0,et.toMiliseconds)(e)}function eU(e,t){return`${e}${t?`:${t}`:""}`}function eq(e=[],t=[]){return[...new Set([...e,...t])]}async function eH({id:e,topic:t,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let a=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=eh.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),l=eA();if(l===eC.browser){let e;if(!(null!=(n=(0,en.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||a.startsWith("https://")||a.startsWith("http://"))&&(e="_blank"),window.open(a,e,"noreferrer noopener")}else l===eC.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}async function eF(e,t){let r="";try{if(ex()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function ez(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function eW(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function eK(){return"u">typeof eu&&"true"===eu.env.IS_VITEST}function eV(e){return eh.from(e,"base64").toString("utf-8")}function eG(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function eZ(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function eJ(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");eG(e.outputLen),eG(e.blockLen)}function eY(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function eX(e,t){eZ(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let eQ=BigInt(4294967296-1),e0=BigInt(32),e1=(e,t,r)=>e<<r|t>>>32-r,e2=(e,t,r)=>t<<r|e>>>32-r,e3=(e,t,r)=>t<<r-32|e>>>64-r,e5=(e,t,r)=>e<<r-32|t>>>64-r,e4="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function e6(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function e8(e,t){return e<<32-t|e>>>t}let e9=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function e7(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function te(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),eZ(e),e}class tt{clone(){return this._cloneInto()}}function tr(e){let t=t=>e().update(te(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ti(e=32){if(e4&&"function"==typeof e4.getRandomValues)return e4.getRandomValues(new Uint8Array(e));if(e4&&"function"==typeof e4.randomBytes)return e4.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let tn=[],ts=[],to=[],ta=BigInt(0),tl=BigInt(1),tc=BigInt(2),tu=BigInt(7),th=BigInt(256),td=BigInt(113);for(let e=0,t=tl,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],tn.push(2*(5*i+r)),ts.push((e+1)*(e+2)/2%64);let n=ta;for(let e=0;e<7;e++)(t=(t<<tl^(t>>tu)*td)%th)&tc&&(n^=tl<<(tl<<BigInt(e))-tl);to.push(n)}let[tp,tf]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&eQ),l:Number(e>>e0&eQ)}:{h:0|Number(e>>e0&eQ),l:0|Number(e&eQ)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(to,!0),tg=(e,t,r)=>r>32?e3(e,t,r):e1(e,t,r),tm=(e,t,r)=>r>32?e5(e,t,r):e2(e,t,r);class ty extends tt{constructor(e,t,r,i=!1,n=24){var s;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,eG(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){e9||e7(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=tg(s,o,1)^r[i],l=tm(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ts[r],s=tg(t,n,i),o=tm(t,n,i),a=tn[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=tp[i],e[1]^=tf[i]}r.fill(0)}(this.state32,this.rounds),e9||e7(this.state32),this.posOut=0,this.pos=0}update(e){eY(this);let{blockLen:t,state:r}=this,i=(e=te(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){eY(this,!1),eZ(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return eG(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eX(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new ty(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let tv=tr(()=>new ty(136,1,32));function tb(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+eh.from(tv(r)).toString("hex")}async function tw(e,t,r,i,n,s){switch(r.t){case"eip191":return await tE(e,t,r.s);case"eip1271":return await t_(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function tE(e,t,r){return(await (0,eo.R)({hash:tb(t),signature:r})).toLowerCase()===e.toLowerCase()}async function t_(e,t,r,i,n,s){let o=ed(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),l=tb(t).substring(2),c=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:o+l+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a},"latest"]})}),{result:u}=await c.json();return!!u&&u.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var tC=Object.defineProperty,tS=Object.defineProperties,tI=Object.getOwnPropertyDescriptors,tx=Object.getOwnPropertySymbols,tA=Object.prototype.hasOwnProperty,tk=Object.prototype.propertyIsEnumerable,tO=(e,t,r)=>t in e?tC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tP=(e,t)=>{for(var r in t||(t={}))tA.call(t,r)&&tO(e,r,t[r]);if(tx)for(var r of tx(t))tk.call(t,r)&&tO(e,r,t[r]);return e},tR=(e,t)=>tS(e,tI(t));let tN=e=>e?.split(":"),tT=e=>{let t=e&&tN(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},tM=e=>{let t=e&&tN(e);if(t)return t[2]+":"+t[3]},tL=e=>{let t=e&&tN(e);if(t)return t.pop()};async function tD(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=tB(n,n.iss),o=tL(n.iss);return await tw(o,s,i,tM(n.iss),r)}let tB=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=tL(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${tT(t)}`,l=`Nonce: ${e.nonce}`,c=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,f=tF(e.resources);return f&&(n=function(e="",t){tj(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,tU(f))),[r,i,"",n,"",s,o,a,l,c,u,h,d,p].filter(e=>null!=e).join(`
`)};function tj(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function t$(e){return tj(e),`urn:recap:${eh.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function tU(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(eh.from(t,"base64").toString("utf-8")));return tj(r),r}function tq(e){var t;let r=tU(e);tj(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function tH(e){let t=tU(e);tj(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function tF(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function tz(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function tW(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tK(e,...t){if(!tW(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function tV(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function tG(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let tZ=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),tJ=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function tY(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(tW(e))e=t0(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function tX(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function tQ(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}function t0(e){return Uint8Array.from(e)}function t1(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let t2=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),t3=t2("expand 16-byte k"),t5=t2("expand 32-byte k"),t4=tZ(t3),t6=tZ(t5);function t8(e,t){return e<<t|e>>>32-t}function t9(e){return e.byteOffset%4==0}let t7=4294967296-1,re=new Uint32Array,rt=(e,t)=>255&e[t++]|(255&e[t++])<<8;class rr{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,tK(e=tY(e),32);let t=rt(e,0),r=rt(e,2),i=rt(e,4),n=rt(e,6),s=rt(e,8),o=rt(e,10),a=rt(e,12),l=rt(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=rt(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],h=n[6],d=n[7],p=n[8],f=n[9],g=rt(e,t+0),m=rt(e,t+2),y=rt(e,t+4),v=rt(e,t+6),b=rt(e,t+8),w=rt(e,t+10),E=rt(e,t+12),_=rt(e,t+14),C=i[0]+(8191&g),S=i[1]+((g>>>13|m<<3)&8191),I=i[2]+((m>>>10|y<<6)&8191),x=i[3]+((y>>>7|v<<9)&8191),A=i[4]+((v>>>4|b<<12)&8191),k=i[5]+(b>>>1&8191),O=i[6]+((b>>>14|w<<2)&8191),P=i[7]+((w>>>11|E<<5)&8191),R=i[8]+((E>>>8|_<<8)&8191),N=i[9]+(_>>>5|(r?0:2048)),T=0,M=0+C*s+5*f*S+5*p*I+5*d*x+5*h*A;T=M>>>13,M&=8191,M+=5*u*k+5*c*O+5*l*P+5*a*R+5*o*N,T+=M>>>13,M&=8191;let L=T+C*o+S*s+5*f*I+5*p*x+5*d*A;T=L>>>13,L&=8191,L+=5*h*k+5*u*O+5*c*P+5*l*R+5*a*N,T+=L>>>13,L&=8191;let D=T+C*a+S*o+I*s+5*f*x+5*p*A;T=D>>>13,D&=8191,D+=5*d*k+5*h*O+5*u*P+5*c*R+5*l*N,T+=D>>>13,D&=8191;let B=T+C*l+S*a+I*o+x*s+5*f*A;T=B>>>13,B&=8191,B+=5*p*k+5*d*O+5*h*P+5*u*R+5*c*N,T+=B>>>13,B&=8191;let j=T+C*c+S*l+I*a+x*o+A*s;T=j>>>13,j&=8191,j+=5*f*k+5*p*O+5*d*P+5*h*R+5*u*N,T+=j>>>13,j&=8191;let $=T+C*u+S*c+I*l+x*a+A*o;T=$>>>13,$&=8191,$+=k*s+5*f*O+5*p*P+5*d*R+5*h*N,T+=$>>>13,$&=8191;let U=T+C*h+S*u+I*c+x*l+A*a;T=U>>>13,U&=8191,U+=k*o+O*s+5*f*P+5*p*R+5*d*N,T+=U>>>13,U&=8191;let q=T+C*d+S*h+I*u+x*c+A*l;T=q>>>13,q&=8191,q+=k*a+O*o+P*s+5*f*R+5*p*N,T+=q>>>13,q&=8191;let H=T+C*p+S*d+I*h+x*u+A*c;T=H>>>13,H&=8191,H+=k*l+O*a+P*o+R*s+5*f*N,T+=H>>>13,H&=8191;let F=T+C*f+S*p+I*d+x*h+A*u;T=F>>>13,F&=8191,F+=k*c+O*l+P*a+R*o+N*s,T+=F>>>13,F&=8191,M=8191&(T=(T=(T<<2)+T|0)+M|0),T>>>=13,L+=T,i[0]=M,i[1]=L,i[2]=D,i[3]=B,i[4]=j,i[5]=$,i[6]=U,i[7]=q,i[8]=H,i[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;t1(r)}update(e){tV(this);let{buffer:t,blockLen:r}=this,i=(e=tY(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){t1(this.h,this.r,this.buffer,this.pad)}digestInto(e){tV(this),function(e,t){tK(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let ri=function(e){let t=(t,r)=>e(r).update(tY(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new rr(e)),rn=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return tz(n),tz(o),tG(s),tG(r),(t,a,l,c,u=0)=>{tK(t),tK(a),tK(l);let h=l.length;if(void 0===c&&(c=new Uint8Array(h)),tK(c),tz(u),u<0||u>=t7)throw Error("arx: counter overflow");if(c.length<h)throw Error(`arx: output (${c.length}) is shorter than data (${h})`);let d=[],p=t.length,f,g;if(32===p)d.push(f=t0(t)),g=t6;else if(16===p&&r)(f=new Uint8Array(32)).set(t),f.set(t,16),g=t4,d.push(f);else throw Error(`arx: invalid 32-byte key, got length=${p}`);t9(a)||d.push(a=t0(a));let m=tZ(f);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,m,tZ(a.subarray(0,16)),m),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let l=n.length,c=new Uint8Array(64),u=tZ(c),h=t9(n)&&t9(s),d=h?tZ(n):re,p=h?tZ(s):re;for(let f=0;f<l;o++){if(e(t,r,i,u,o,a),o>=t7)throw Error("arx: counter overflow");let g=Math.min(64,l-f);if(h&&64===g){let e=f/4;if(f%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)p[r=e+t]=d[r]^u[t];f+=64;continue}for(let e=0,t;e<g;e++)s[t=f+e]=n[t]^c[e];f+=g}}(e,g,m,tZ(a),l,c,u,o),t1(...d),c}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],l=e[2],c=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],v=r[0],b=r[1],w=r[2],E=o,_=a,C=l,S=c,I=u,x=h,A=d,k=p,O=f,P=g,R=m,N=y,T=n,M=v,L=b,D=w;for(let e=0;e<s;e+=2)O=O+(T=t8(T^(E=E+I|0),16))|0,E=E+(I=t8(I^O,12))|0,O=O+(T=t8(T^E,8))|0,I=t8(I^O,7),P=P+(M=t8(M^(_=_+x|0),16))|0,_=_+(x=t8(x^P,12))|0,P=P+(M=t8(M^_,8))|0,x=t8(x^P,7),R=R+(L=t8(L^(C=C+A|0),16))|0,C=C+(A=t8(A^R,12))|0,R=R+(L=t8(L^C,8))|0,A=t8(A^R,7),N=N+(D=t8(D^(S=S+k|0),16))|0,S=S+(k=t8(k^N,12))|0,N=N+(D=t8(D^S,8))|0,k=t8(k^N,7),R=R+(D=t8(D^(E=E+x|0),16))|0,E=E+(x=t8(x^R,12))|0,R=R+(D=t8(D^E,8))|0,x=t8(x^R,7),N=N+(T=t8(T^(_=_+A|0),16))|0,_=_+(A=t8(A^N,12))|0,N=N+(T=t8(T^_,8))|0,A=t8(A^N,7),O=O+(M=t8(M^(C=C+k|0),16))|0,C=C+(k=t8(k^O,12))|0,O=O+(M=t8(M^C,8))|0,k=t8(k^O,7),P=P+(L=t8(L^(S=S+I|0),16))|0,S=S+(I=t8(I^P,12))|0,P=P+(L=t8(L^S,8))|0,I=t8(I^P,7);let B=0;i[B++]=o+E|0,i[B++]=a+_|0,i[B++]=l+C|0,i[B++]=c+S|0,i[B++]=u+I|0,i[B++]=h+x|0,i[B++]=d+A|0,i[B++]=p+k|0,i[B++]=f+O|0,i[B++]=g+P|0,i[B++]=m+R|0,i[B++]=y+N|0,i[B++]=n+T|0,i[B++]=v+M|0,i[B++]=b+L|0,i[B++]=w+D|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),rs=new Uint8Array(16),ro=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(rs.subarray(r))},ra=new Uint8Array(32);function rl(e,t,r,i,n){let s=e(t,r,ra),o=ri.create(s);n&&ro(o,n),ro(o,i);let a=new Uint8Array(16),l=tJ(a);tQ(l,0,BigInt(n?n.length:0),!0),tQ(l,8,BigInt(i.length),!0),o.update(a);let c=o.digest();return t1(s,a),c}let rc=((e,t)=>{function r(i,...n){if(tK(i),void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?tK(t):tK(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&tK(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");tK(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,tK(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(tK(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=tX(s+16,n,!1)).set(i);let o=n.subarray(0,-16);rn(e,t,o,o,1);let a=rl(rn,e,t,o,r);return n.set(a,s),t1(a),n},decrypt(i,n){n=tX(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=rl(rn,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),rn(e,t,n,n,1),t1(a),n}}));class ru extends tt{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,eJ(e);let r=te(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return eY(this),this.iHash.update(e),this}digestInto(e){eY(this),eZ(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let rh=(e,t,r)=>new ru(e,t).update(r).digest();rh.create=(e,t)=>new ru(e,t);let rd=new Uint8Array([0]),rp=new Uint8Array,rf=(e,t,r,i,n)=>{var s;return function(e,t,r,i=32){if(eJ(e),eG(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=rp);let s=new Uint8Array(n*e.outputLen),o=rh.create(e,t),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)rd[0]=t+1,a.update(0===t?rp:l).update(r).update(rd).digestInto(l),s.set(l,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),rd.fill(0),s.slice(0,i)}(e,(s=r,eJ(e),void 0===s&&(s=new Uint8Array(e.outputLen)),rh(e,te(s),te(t))),i,n)};class rg extends tt{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e6(this.buffer)}update(e){eY(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=te(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=e6(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){eY(this),eX(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=e6(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let rm=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ry=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rv=new Uint32Array(64);class rb extends rg{constructor(){super(64,32,8,!1),this.A=0|ry[0],this.B=0|ry[1],this.C=0|ry[2],this.D=0|ry[3],this.E=0|ry[4],this.F=0|ry[5],this.G=0|ry[6],this.H=0|ry[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)rv[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rv[e-15],r=rv[e-2],i=e8(t,7)^e8(t,18)^t>>>3,n=e8(r,17)^e8(r,19)^r>>>10;rv[e]=n+rv[e-7]+i+rv[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){var u,h,d,p;let t=c+(e8(o,6)^e8(o,11)^e8(o,25))+((u=o)&a^~u&l)+rm[e]+rv[e]|0,f=(e8(r,2)^e8(r,13)^e8(r,22))+((h=r)&(d=i)^h&(p=n)^d&p)|0;c=l,l=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+f|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,n,s,o,a,l,c)}roundClean(){rv.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let rw=tr(()=>new rb),rE=BigInt(0),r_=BigInt(1),rC=BigInt(2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rS(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function rI(e){if(!rS(e))throw Error("Uint8Array expected")}function rx(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let rA=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rk(e){rI(e);let t="";for(let r=0;r<e.length;r++)t+=rA[e[r]];return t}function rO(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function rP(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?rE:BigInt("0x"+e)}let rR={_0:48,_9:57,A:65,F:70,a:97,f:102};function rN(e){return e>=rR._0&&e<=rR._9?e-rR._0:e>=rR.A&&e<=rR.F?e-(rR.A-10):e>=rR.a&&e<=rR.f?e-(rR.a-10):void 0}function rT(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=rN(e.charCodeAt(n)),s=rN(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function rM(e){return rP(rk(e))}function rL(e){return rI(e),rP(rk(Uint8Array.from(e).reverse()))}function rD(e,t){return rT(e.toString(16).padStart(2*t,"0"))}function rB(e,t){return rD(e,t).reverse()}function rj(e,t,r){let i;if("string"==typeof t)try{i=rT(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(rS(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function r$(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];rI(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let rU=e=>"bigint"==typeof e&&rE<=e;function rq(e,t,r){return rU(e)&&rU(t)&&rU(r)&&t<=e&&e<r}function rH(e,t,r,i){if(!rq(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function rF(e){let t;for(t=0;e>rE;e>>=r_,t+=1);return t}let rz=e=>(rC<<BigInt(e-1))-r_,rW=e=>new Uint8Array(e),rK=e=>Uint8Array.from(e);function rV(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=rW(e),n=rW(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=rW())=>{n=a(rK([0]),e),i=a(),0!==e.length&&(n=a(rK([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return r$(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let rG={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||rS(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function rZ(e,t,r={}){let i=(t,r,i)=>{let n=rG[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function rJ(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}var rY=Object.freeze({__proto__:null,isBytes:rS,abytes:rI,abool:rx,bytesToHex:rk,numberToHexUnpadded:rO,hexToNumber:rP,hexToBytes:rT,bytesToNumberBE:rM,bytesToNumberLE:rL,numberToBytesBE:rD,numberToBytesLE:rB,numberToVarBytesBE:function(e){return rT(rO(e))},ensureBytes:rj,concatBytes:r$,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},inRange:rq,aInRange:rH,bitLen:rF,bitGet:function(e,t){return e>>BigInt(t)&r_},bitSet:function(e,t,r){return e|(r?r_:rE)<<BigInt(t)},bitMask:rz,createHmacDrbg:rV,validateObject:rZ,notImplemented:()=>{throw Error("not implemented")},memoized:rJ});let rX=BigInt(0),rQ=BigInt(1),r0=BigInt(2),r1=BigInt(3),r2=BigInt(4),r3=BigInt(5),r5=BigInt(8);function r4(e,t){let r=e%t;return r>=rX?r:t+r}function r6(e,t,r){if(t<rX)throw Error("invalid exponent, negatives unsupported");if(r<=rX)throw Error("invalid modulus");if(r===rQ)return rX;let i=rQ;for(;t>rX;)t&rQ&&(i=i*e%r),e=e*e%r,t>>=rQ;return i}function r8(e,t,r){let i=e;for(;t-- >rX;)i*=i,i%=r;return i}function r9(e,t){if(e===rX)throw Error("invert: expected non-zero number");if(t<=rX)throw Error("invert: expected positive modulus, got "+t);let r=r4(e,t),i=t,n=rX,s=rQ;for(;r!==rX;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==rQ)throw Error("invert: does not exist");return r4(n,t)}let r7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ie(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function it(e,t,r=!1,i={}){let n;if(e<=rX)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=ie(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:rz(s),ZERO:rX,ONE:rQ,create:t=>r4(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return rX<=t&&t<e},is0:e=>e===rX,isOdd:e=>(e&rQ)===rQ,neg:t=>r4(-t,e),eql:(e,t)=>e===t,sqr:t=>r4(t*t,e),add:(t,r)=>r4(t+r,e),sub:(t,r)=>r4(t-r,e),mul:(t,r)=>r4(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<rX)throw Error("invalid exponent, negatives unsupported");if(r===rX)return e.ONE;if(r===rQ)return t;let i=e.ONE,n=t;for(;r>rX;)r&rQ&&(i=e.mul(i,n)),n=e.sqr(n),r>>=rQ;return i})(a,e,t),div:(t,r)=>r4(t*r9(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>r9(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%r2===r1){let t=(e+rQ)/r2;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%r5===r3){let t=(e-r3)/r5;return function(e,r){let i=e.mul(r,r0),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,r0),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-rQ)/r0;for(t=e-rQ,r=0;t%r0===rX;t/=r0,r++);for(i=r0;i<e&&r6(i,n,e)!==e-rQ;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+rQ)/r2;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+rQ)/r0;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,rQ<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?rB(e,o):rD(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?rL(e):rM(e)}});return Object.freeze(a)}function ir(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function ii(e){let t=ir(e);return t+Math.ceil(t/2)}let is=BigInt(0),io=BigInt(1);function ia(e,t){let r=t.negate();return e?r:t}function il(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ic(e,t){return il(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let iu=new WeakMap,ih=new WeakMap;function id(e){return ih.get(e)||1}function ip(e){return rZ(e.Fp,r7.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),rZ(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ie(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);let ig=BigInt(0),im=BigInt(1),iy=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let iv=BigInt(1),ib=BigInt(2),iw=BigInt(3),iE=BigInt(5);BigInt(8);let i_=function(e){let t=(rZ(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>r4(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),l=t.powPminus2||(e=>r6(e,r-BigInt(2),r));function c(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let u=(t.a-BigInt(2))/BigInt(4);function h(e,t){let h=function(e,t){rH("u",e,ig,r),rH("scalar",t,ig,r);let s=im,o=ig,a=e,h=im,d=ig,p;for(let r=BigInt(n-1);r>=ig;r--){let n=t>>r&im;d^=n,s=(p=c(d,s,a))[0],a=p[1],o=(p=c(d,o,h))[0],h=p[1],d=n;let l=s+o,f=i(l*l),g=s-o,m=i(g*g),y=f-m,v=a+h,b=i((a-h)*l),w=i(v*g),E=b+w,_=b-w;a=i(E*E),h=i(e*i(_*_)),s=i(f*m),o=i(y*(f+i(u*y)))}return s=(p=c(d,s,a))[0],a=p[1],o=(p=c(d,o,h))[0],h=p[1],i(s*l(o))}(function(e){let t=rj("u coordinate",e,s);return 32===o&&(t[31]&=127),rL(t)}(t),function(e){let t=rj("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return rL(a(t))}(e));if(h===ig)throw Error("invalid private or public key received");return rB(i(h),s)}let d=rB(i(t.Gu),s);function p(e){return h(e,d)}return{scalarMult:h,scalarMultBase:p,getSharedSecret:(e,t)=>h(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:d}}({P:iy,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%iy*e%iy,o=r8(s,ib,iy)*s%iy,a=r8(o,iv,iy)*e%iy,l=r8(a,iE,iy)*a%iy,c=r8(l,t,iy)*l%iy,u=r8(c,r,iy)*c%iy,h=r8(u,i,iy)*u%iy,d=r8(h,n,iy)*h%iy,p=r8(d,n,iy)*h%iy,f=r8(p,t,iy)*l%iy;return{pow_p_5_8:r8(f,ib,iy)*e%iy,b2:s}}(e);return r4(r8(t,iw,iy)*r,iy)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:ti});function iC(e){void 0!==e.lowS&&rx("lowS",e.lowS),void 0!==e.prehash&&rx("prehash",e.prehash)}let{bytesToNumberBE:iS,hexToBytes:iI}=rY;class ix extends Error{constructor(e=""){super(e)}}let iA={Err:ix,_tlv:{encode:(e,t)=>{let{Err:r}=iA;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=rO(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?rO(n.length/2|128):"";return rO(e)+s+n+t},decode(e,t){let{Err:r}=iA,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=iA;if(e<ik)throw new t("integer: negative integers are not allowed");let r=rO(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=iA;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return iS(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=iA,n="string"==typeof e?iI(e):e;rI(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=iA,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},ik=BigInt(0),iO=BigInt(1);BigInt(2);let iP=BigInt(3);BigInt(4);let iR=it(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),iN=function(e,t){let r=t=>(function(e){let t=function(e){let t=ip(e);return rZ(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return r4(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){var t;let r=function(e){let t=ip(e);rZ(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:i}=r,n=it(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let n=t.toAffine();return r$(Uint8Array.from([4]),i.toBytes(n.x),i.toBytes(n.y))}),o=r.fromBytes||(e=>{let t=e.subarray(1);return{x:i.fromBytes(t.subarray(0,i.BYTES)),y:i.fromBytes(t.subarray(i.BYTES,2*i.BYTES))}});function a(e){let{a:t,b:n}=r,s=i.sqr(e),o=i.mul(s,e);return i.add(i.add(o,i.mul(e,t)),n)}if(!i.eql(i.sqr(r.Gy),a(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=r;if(i&&"bigint"!=typeof e){if(rS(e)&&(e=rk(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{t="bigint"==typeof e?e:rM(rj("private key",e,n))}catch{throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(t=r4(t,o)),rH("private key",t,iO,o),t}function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let u=rJ((e,t)=>{let{px:r,py:n,pz:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),l=i.mul(n,t),c=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(c,i.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),h=rJ(e=>{if(e.is0()){if(r.allowInfinityPoint&&!i.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!i.isValid(t)||!i.isValid(n))throw Error("bad point: x or y not FE");let s=i.sqr(n),o=a(t);if(!i.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!i.isValid(e))throw Error("x required");if(null==t||!i.isValid(t))throw Error("y required");if(null==r||!i.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let n=e=>i.eql(e,i.ZERO);return n(t)&&n(r)?d.ZERO:new d(t,r,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(rj("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=rF(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(d,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(i.isOdd)return!i.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:n}=this,{px:s,py:o,pz:a}=e,l=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return l&&u}negate(){return new d(this.px,i.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,n=i.mul(t,iP),{px:s,py:o,pz:a}=this,l=i.ZERO,c=i.ZERO,u=i.ZERO,h=i.mul(s,s),p=i.mul(o,o),f=i.mul(a,a),g=i.mul(s,o);return g=i.add(g,g),u=i.mul(s,a),u=i.add(u,u),l=i.mul(e,u),c=i.mul(n,f),c=i.add(l,c),l=i.sub(p,c),c=i.add(p,c),c=i.mul(l,c),l=i.mul(g,l),u=i.mul(n,u),f=i.mul(e,f),g=i.sub(h,f),g=i.mul(e,g),g=i.add(g,u),u=i.add(h,h),h=i.add(u,h),h=i.add(h,f),h=i.mul(h,g),c=i.add(c,h),f=i.mul(o,a),f=i.add(f,f),h=i.mul(f,g),l=i.sub(l,h),u=i.mul(f,p),u=i.add(u,u),new d(l,c,u=i.add(u,u))}add(e){c(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=i.ZERO,h=i.ZERO,p=i.ZERO,f=r.a,g=i.mul(r.b,iP),m=i.mul(t,o),y=i.mul(n,a),v=i.mul(s,l),b=i.add(t,n),w=i.add(o,a);b=i.mul(b,w),w=i.add(m,y),b=i.sub(b,w),w=i.add(t,s);let E=i.add(o,l);return w=i.mul(w,E),E=i.add(m,v),w=i.sub(w,E),E=i.add(n,s),u=i.add(a,l),E=i.mul(E,u),u=i.add(y,v),E=i.sub(E,u),p=i.mul(f,w),u=i.mul(g,v),p=i.add(u,p),u=i.sub(y,p),p=i.add(y,p),h=i.mul(u,p),y=i.add(m,m),y=i.add(y,m),v=i.mul(f,v),w=i.mul(g,w),y=i.add(y,v),v=i.sub(m,v),v=i.mul(f,v),w=i.add(w,v),m=i.mul(y,w),h=i.add(h,m),m=i.mul(E,w),u=i.mul(b,u),u=i.sub(u,m),m=i.mul(b,y),p=i.mul(E,p),new d(u,h,p=i.add(p,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=r;rH("scalar",e,ik,n);let s=d.ZERO;if(e===ik)return s;if(this.is0()||e===iO)return this;if(!t||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:c}=t.splitScalar(e),u=s,h=s,p=this;for(;a>ik||c>ik;)a&iO&&(u=u.add(p)),c&iO&&(h=h.add(p)),p=p.double(),a>>=iO,c>>=iO;return o&&(u=u.negate()),l&&(h=h.negate()),h=new d(i.mul(h.px,t.beta),h.py,h.pz),u.add(h)}multiply(e){let t,n;let{endo:s,n:o}=r;if(rH("scalar",e,iO,o),s){let{k1neg:r,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(r,c),h=f.constTimeNegate(a,h),h=new d(i.mul(h.px,s.beta),h.py,h.pz),t=c.add(h),n=u.add(p)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return d.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=d.BASE,n=(e,t)=>t!==ik&&t!==iO&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===iO)return!0;if(t)return t(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===iO?this:t?t(d,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return rx("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return rx("isCompressed",e),rk(this.toRawBytes(e))}}d.BASE=new d(r.Gx,r.Gy,i.ONE),d.ZERO=new d(i.ZERO,i.ONE,i.ZERO);let p=r.nBitLength,f=(t=r.endo?Math.ceil(p/2):p,{constTimeNegate:ia,hasPrecomputes:e=>1!==id(e),unsafeLadder(e,t,r=d.ZERO){let i=e;for(;t>is;)t&io&&(r=r.add(i)),i=i.double(),t>>=io;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=ic(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=ic(e,t),o=d.ZERO,a=d.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=io);let h=t+Math.abs(n)-1,d=e%2!=0,p=n<0;0===n?a=a.add(ia(d,r[t])):o=o.add(ia(p,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=d.ZERO){let{windows:s,windowSize:o}=ic(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===is)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=io),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=iu.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&iu.set(t,r(i))),i},wNAFCached(e,t,r){let i=id(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=id(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){il(r,t),ih.set(e,r),iu.delete(e)}});return{CURVE:r,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return rq(e,iO,r.n)}}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x);return rx("isCompressed",i),i?r$(Uint8Array.from([t.hasEvenY()?2:3]),s):r$(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=rM(o);if(!rq(t,iO,r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&iO)===iO)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+s+", got "+t)}}),h=e=>rk(rD(e,t.nByteLength)),d=(e,t,r)=>rM(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(d(e=rj("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=iA.toSig(rj("DER",e));return new p(t,r)}assertValidity(){rH("r",this.r,iO,i),rH("s",this.s,iO,i)}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:s,recovery:l}=this,c=m(rj("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",p=a.fromHex(d+h(u)),f=r9(u,i),g=o(-c*f),y=o(s*f),v=a.BASE.multiplyAndAddUnsafe(p,g,y);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>i>>iO}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return rT(this.toDERHex())}toDERHex(){return iA.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rT(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function f(e){let t=rS(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=rM(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},m=t.bits2int_modN||function(e){return o(g(e))},y=rz(t.nBitLength);function v(e){return rH("num < 2^"+t.nBitLength,e,ik,y),rD(e,t.nByteLength)}let b={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(f(e))throw Error("first arg must be private key");if(!f(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=b){let{seed:c,k2sig:h}=function(e,n,s=b){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:f,extraEntropy:y}=s;null==d&&(d=!0),e=rj("msgHash",e),iC(s),f&&(e=rj("prehashed msgHash",c(e)));let w=m(e),E=l(n),_=[v(E),v(w)];if(null!=y&&!1!==y){let e=!0===y?h(r.BYTES):y;_.push(rj("extraEntropy",e))}return{seed:r$(..._),k2sig:function(e){let t=g(e);if(!u(t))return;let r=r9(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===ik)return;let l=o(r*o(w+s*E));if(l===ik)return;let c=(n.x===s?0:2)|Number(n.y&iO),h=l;return d&&l>i>>iO&&(h=l>i>>iO?o(-l):l,c^=1),new p(s,h,c)}}}(e,n,s);return rV(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=w){let l,c;r=rj("msgHash",r),n=rj("publicKey",n);let{lowS:u,prehash:h,format:d}=s;if(iC(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let f="string"==typeof e||rS(e),g=!f&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(l=new p(e.r,e.s)),f){try{"compact"!==d&&(l=p.fromDER(e))}catch(e){if(!(e instanceof iA.Err))throw e}l||"der"===d||(l=p.fromCompact(e))}c=a.fromHex(n)}catch{return!1}if(!l||u&&l.hasHighS())return!1;h&&(r=t.hash(r));let{r:y,s:v}=l,b=m(r),E=r9(v,i),_=o(b*E),C=o(y*E),S=a.BASE.multiplyAndAddUnsafe(c,_,C)?.toAffine();return!!S&&o(S.x)===y},ProjectivePoint:a,Signature:p,utils:{isValidPrivateKey(e){try{return l(e),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=ii(t.n);return function(e,t,r=!1){let i=e.length,n=ir(t),s=ii(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=r4(r?rL(e):rM(e),t-rQ)+rQ;return r?rB(o,n):rD(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>rh(t,e,function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];eZ(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}(...r)),randomBytes:ti});return{...r(t),create:r}}({a:iR.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:iR,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},rw),iT="base10",iM="base16",iL="base64pad",iD="base64url",iB="utf8";function ij(){let e=ti(32);return(0,el.BB)(e,iM)}function i$(e){let t=rw((0,el.mL)(e,iM));return(0,el.BB)(t,iM)}function iU(e){let t=rw((0,el.mL)(e,iB));return(0,el.BB)(t,iM)}function iq(e){return(0,el.mL)(`${e}`,iT)}function iH(e){return Number((0,el.BB)(e,iT))}function iF(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function iz(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function iW(e){if(2===iH(e.type))return(0,el.BB)((0,el.zo)([e.type,e.sealed]),iL);if(1===iH(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,el.BB)((0,el.zo)([e.type,e.senderPublicKey,e.iv,e.sealed]),iL)}return(0,el.BB)((0,el.zo)([e.type,e.iv,e.sealed]),iL)}function iK(e){let t=(e.encoding||iL)===iD?iz(e.encoded):e.encoded,r=(0,el.mL)(t,iL),i=r.slice(0,1);if(1===iH(i)){let e=r.slice(1,33),t=r.slice(33,45);return{type:i,sealed:r.slice(45),iv:t,senderPublicKey:e}}if(2===iH(i))return{type:i,sealed:r.slice(1),iv:ti(12)};let n=r.slice(1,13);return{type:i,sealed:r.slice(13),iv:n}}function iV(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function iG(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function iZ(e){return e?.relay||{protocol:"irn"}}function iJ(e){let t=ec.iO[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function iY(e){var t;if(!e.includes("wc:")){let t=eV(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o="u">typeof i?e.substring(i):"",a=new URLSearchParams(o),l={};a.forEach((e,t)=>{l[t]=e});let c="string"==typeof l.methods?l.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:l.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(l),methods:c,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function iX(e){let t=new URLSearchParams,r=function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay);Object.keys(r).sort().forEach(e=>{t.set(e,r[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function iQ(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}var i0=Object.defineProperty,i1=Object.defineProperties,i2=Object.getOwnPropertyDescriptors,i3=Object.getOwnPropertySymbols,i5=Object.prototype.hasOwnProperty,i4=Object.prototype.propertyIsEnumerable,i6=(e,t,r)=>t in e?i0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,i8=(e,t)=>{for(var r in t||(t={}))i5.call(t,r)&&i6(e,r,t[r]);if(i3)for(var r of i3(t))i4.call(t,r)&&i6(e,r,t[r]);return e},i9=(e,t)=>i1(e,i2(t));function i7(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function ne(e){return e.includes(":")}function nt(e){return ne(e)?e.split(":")[0]:e}function nr(e){var t,r,i;let n={};if(!nc(e))return n;for(let[s,o]of Object.entries(e)){let e=ne(s)?[s]:o.chains,a=o.methods||[],l=o.events||[],c=nt(s);n[c]=i9(i8({},n[c]),{chains:eq(e,null==(t=n[c])?void 0:t.chains),methods:eq(a,null==(r=n[c])?void 0:r.methods),events:eq(l,null==(i=n[c])?void 0:i.events)})}return n}function ni(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=eq(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}let nn={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ns={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function no(e,t){let{message:r,code:i}=ns[e];return{message:t?`${r} ${t}`:r,code:i}}function na(e,t){let{message:r,code:i}=nn[e];return{message:t?`${r} ${t}`:r,code:i}}function nl(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function nc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function nu(e){return typeof e>"u"}function nh(e,t){return!!(t&&nu(e))||"string"==typeof e&&!!e.trim().length}function nd(e,t){return!!(t&&nu(e))||"number"==typeof e&&!isNaN(e)}function np(e){return!!(nh(e,!1)&&e.includes(":"))&&2===e.split(":").length}function nf(e){let t=!0;return nl(e)?e.length&&(t=e.every(e=>nh(e,!1))):t=!1,t}function ng(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,nf(e?.methods)?nf(e?.events)||(n=na("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=na("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function nm(e,t){let r=null;if(e&&nc(e)){let i;let n=ng(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,nl(r)?r.forEach(e=>{s||function(e){if(nh(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&np(e)}}return!1}(e)||(s=na("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=na("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=no("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function ny(e){return nh(e.protocol,!0)}function nv(e){return"u">typeof e}function nb(e,t){return!(!np(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...i7(e.accounts))}),t})(e).includes(t))}function nw(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=i7(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),l=nE(Object.keys(e)),c=nE(Object.keys(t)),u=l.filter(e=>!c.includes(e));return u.length&&(i=no("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),eR(o,a)||(i=no("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=i7(t[e].accounts);n.includes(e)||(i=no("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(eR(n[e].methods,s[e].methods)?eR(n[e].events,s[e].events)||(i=no("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=no("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function nE(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function n_(){let e=eA();return new Promise(t=>{switch(e){case eC.browser:t(ex()&&navigator?.onLine);break;case eC.reactNative:t(nC());break;case eC.node:default:t(!0)}})}async function nC(){if(eI()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let nS={};class nI{static get(e){return nS[e]}static set(e,t){nS[e]=t}static delete(e){delete nS[e]}}var nx=r(45280),nA=r(53620),nk=r(12869),nO=r(67133).Buffer,nP=r(62601);let nR="core",nN=`wc@2:${nR}:`,nT={logger:"error"},nM={database:":memory:"},nL="client_ed25519_seed",nD=et.ONE_DAY,nB=et.SIX_HOURS,nj="wss://relay.walletconnect.org",n$={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},nU={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nq="2.21.0",nH={link_mode:"link_mode",relay:"relay"},nF={inbound:"inbound",outbound:"outbound"},nz="WALLETCONNECT_LINK_MODE_APPS",nW={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},nK=(et.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:et.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:et.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:et.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:et.ONE_DAY,prompt:!1,tag:0},res:{ttl:et.ONE_DAY,prompt:!1,tag:0}}}),nV={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},nG={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},nZ={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},nJ="https://verify.walletconnect.org",nY=`${nJ}/v3`,nX=["https://verify.walletconnect.com",nJ],nQ={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},n0={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},n1={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},n2={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},n3={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},n5={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var n4=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=s-n;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(i+(s-p)),g=i;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,p=o-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var g=l.repeat(r);f<o;++f)g+=e.charAt(c[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let n6=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},n8=e=>new TextEncoder().encode(e),n9=e=>new TextDecoder().decode(e);class n7{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class se{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return sr(this,e)}}class st{constructor(e){this.decoders=e}or(e){return sr(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let sr=(e,t)=>new st({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class si{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new n7(e,t,r),this.decoder=new se(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let sn=({name:e,prefix:t,encode:r,decode:i})=>new si(e,t,r,i),ss=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=n4(r,t);return sn({prefix:e,name:t,encode:i,decode:e=>n6(n(e))})},so=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},sa=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},sl=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>sn({prefix:t,name:e,encode:e=>sa(e,i,r),decode:t=>so(t,i,r,e)});var sc=Object.freeze({__proto__:null,identity:sn({prefix:"\x00",name:"identity",encode:e=>n9(e),decode:e=>n8(e)})}),su=Object.freeze({__proto__:null,base2:sl({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),sh=Object.freeze({__proto__:null,base8:sl({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),sd=Object.freeze({__proto__:null,base10:ss({prefix:"9",name:"base10",alphabet:"0123456789"})}),sp=Object.freeze({__proto__:null,base16:sl({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:sl({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let sf=sl({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sg=sl({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sm=sl({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sy=sl({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sv=sl({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sb=sl({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var sw=Object.freeze({__proto__:null,base32:sf,base32upper:sg,base32pad:sm,base32padupper:sy,base32hex:sv,base32hexupper:sb,base32hexpad:sl({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:sl({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:sl({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),sE=Object.freeze({__proto__:null,base36:ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),s_=Object.freeze({__proto__:null,base58btc:ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let sC=sl({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var sS=Object.freeze({__proto__:null,base64:sC,base64pad:sl({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:sl({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:sl({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let sI=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sx=sI.reduce((e,t,r)=>(e[r]=t,e),[]),sA=sI.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var sk=Object.freeze({__proto__:null,base256emoji:sn({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=sx[t],"")},decode:function(e){let t=[];for(let r of e){let e=sA[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})}),sO={encode:function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let sP=(e,t,r=0)=>(sO.encode(e,t,r),t),sR=e=>sO.encodingLength(e),sN=(e,t)=>{let r=t.byteLength,i=sR(e),n=i+sR(r),s=new Uint8Array(n+r);return sP(e,s,0),sP(r,s,i),s.set(t,n),new sT(e,r,t,s)};class sT{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let sM=({name:e,code:t,encode:r})=>new sL(e,t,r);class sL{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?sN(this.code,t):t.then(e=>sN(this.code,e))}throw Error("Unknown type, must be binary type")}}let sD=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var sB=Object.freeze({__proto__:null,sha256:sM({name:"sha2-256",code:18,encode:sD("SHA-256")}),sha512:sM({name:"sha2-512",code:19,encode:sD("SHA-512")})}),sj=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:n6,digest:e=>sN(0,n6(e))}});new TextEncoder,new TextDecoder;let s$={...sc,...su,...sh,...sd,...sp,...sw,...sE,...s_,...sS,...sk};function sU(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...sB,...sj});let sq=sU("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),sH=sU("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),sF={utf8:sq,"utf-8":sq,hex:s$.base16,latin1:sH,ascii:sH,binary:sH,...s$};var sz=Object.defineProperty,sW=(e,t,r)=>t in e?sz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sK=(e,t,r)=>sW(e,"symbol"!=typeof t?t+"":t,r);class sV{constructor(e,t){this.core=e,this.logger=t,sK(this,"keychain",new Map),sK(this,"name","keychain"),sK(this,"version","0.3"),sK(this,"initialized",!1),sK(this,"storagePrefix",nN),sK(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),sK(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),sK(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),sK(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=no("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),sK(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=(0,R.Ep)(t,this.name)}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,eN(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?eT(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var sG=Object.defineProperty,sZ=(e,t,r)=>t in e?sG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,sJ=(e,t,r)=>sZ(e,"symbol"!=typeof t?t+"":t,r);class sY{constructor(e,t,r){this.core=e,this.logger=t,sJ(this,"name","crypto"),sJ(this,"keychain"),sJ(this,"randomSessionIdentifier",ij()),sJ(this,"initialized",!1),sJ(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),sJ(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),sJ(this,"getClientId",async()=>{this.isInitialized();let e=await this.getClientSeed(),t=er.Au(e);return er.bG(t.publicKey)}),sJ(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=i_.utils.randomPrivateKey(),t=i_.getPublicKey(e);return{privateKey:(0,el.BB)(e,iM),publicKey:(0,el.BB)(t,iM)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),sJ(this,"signJWT",async e=>{this.isInitialized();let t=await this.getClientSeed(),r=er.Au(t),i=this.randomSessionIdentifier;return await er.vf(i,e,nD,r)}),sJ(this,"generateSharedKey",(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=rf(rw,i_.getSharedSecret((0,el.mL)(e,iM),(0,el.mL)(t,iM)),void 0,void 0,32);return(0,el.BB)(r,iM)}(this.getPrivateKey(e),t);return this.setSymKey(i,r)}),sJ(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||i$(e);return await this.keychain.set(r,e),r}),sJ(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),sJ(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),sJ(this,"encode",async(e,t,r)=>{this.isInitialized();let i=iV(r),n=(0,E.u)(t);if(2===i.type)return function(e,t){let r=iq(2),i=ti(12),n=iW({type:r,sealed:(0,el.mL)(e,iB),iv:i});return t===iD?iF(n):n}(n,r?.encoding);if(iG(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){let t=iq("u">typeof e.type?e.type:0);if(1===iH(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?(0,el.mL)(e.senderPublicKey,iM):void 0,i="u">typeof e.iv?(0,el.mL)(e.iv,iM):ti(12),n=iW({type:t,sealed:rc((0,el.mL)(e.symKey,iM),i).encrypt((0,el.mL)(e.message,iB)),iv:i,senderPublicKey:r});return e.encoding===iD?iF(n):n}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),sJ(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=iK({encoded:e,encoding:t?.encoding});return iV({type:iH(r.type),senderPublicKey:"u">typeof r.senderPublicKey?(0,el.BB)(r.senderPublicKey,iM):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type){let e=function(e,t){let{sealed:r}=iK({encoded:e,encoding:t});return(0,el.BB)(r,iB)}(t,r?.encoding);return(0,E.D)(e)}if(iG(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=(0,el.mL)(e.symKey,iM),{sealed:r,iv:i}=iK({encoded:e.encoded,encoding:e.encoding}),n=rc(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return(0,el.BB)(n,iB)}({symKey:i,encoded:t,encoding:r?.encoding});return(0,E.D)(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),sJ(this,"getPayloadType",(e,t=iL)=>iH(iK({encoded:e,encoding:t}).type)),sJ(this,"getPayloadSenderPublicKey",(e,t=iL)=>{let r=iK({encoded:e,encoding:t});return r.senderPublicKey?(0,el.BB)(r.senderPublicKey,iM):void 0}),this.core=e,this.logger=(0,R.Ep)(t,this.name),this.keychain=r||new sV(this.core,this.logger)}get context(){return(0,R.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(nL)}catch{e=ij(),await this.keychain.set(nL,e)}return function(e,t="utf8"){let r=sF[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var sX=Object.defineProperty,sQ=Object.defineProperties,s0=Object.getOwnPropertyDescriptors,s1=Object.getOwnPropertySymbols,s2=Object.prototype.hasOwnProperty,s3=Object.prototype.propertyIsEnumerable,s5=(e,t,r)=>t in e?sX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s4=(e,t)=>{for(var r in t||(t={}))s2.call(t,r)&&s5(e,r,t[r]);if(s1)for(var r of s1(t))s3.call(t,r)&&s5(e,r,t[r]);return e},s6=(e,t)=>sQ(e,s0(t)),s8=(e,t,r)=>s5(e,"symbol"!=typeof t?t+"":t,r);class s9 extends q{constructor(e,t){super(e,t),this.logger=e,this.core=t,s8(this,"messages",new Map),s8(this,"messagesWithoutClientAck",new Map),s8(this,"name","messages"),s8(this,"version","0.3"),s8(this,"initialized",!1),s8(this,"storagePrefix",nN),s8(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),s8(this,"set",async(e,t,r)=>{this.isInitialized();let i=iU(t),n=this.messages.get(e);if(typeof n>"u"&&(n={}),"u">typeof n[i])return i;if(n[i]=t,this.messages.set(e,n),r===nF.inbound){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,s6(s4({},r),{[i]:t}))}return await this.persist(),i}),s8(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),s8(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),s8(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[iU(t)])),s8(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let i=iU(t);delete r[i],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),s8(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=(0,R.Ep)(e,this.name),this.core=t}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,eN(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,eN(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?eT(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?eT(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var s7=Object.defineProperty,oe=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,or=Object.getOwnPropertySymbols,oi=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,os=(e,t,r)=>t in e?s7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oo=(e,t)=>{for(var r in t||(t={}))oi.call(t,r)&&os(e,r,t[r]);if(or)for(var r of or(t))on.call(t,r)&&os(e,r,t[r]);return e},oa=(e,t)=>oe(e,ot(t)),ol=(e,t,r)=>os(e,"symbol"!=typeof t?t+"":t,r);class oc extends H{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ol(this,"events",new a.EventEmitter),ol(this,"name","publisher"),ol(this,"queue",new Map),ol(this,"publishTimeout",(0,et.toMiliseconds)(et.ONE_MINUTE)),ol(this,"initialPublishTimeout",(0,et.toMiliseconds)(15*et.ONE_SECOND)),ol(this,"needsTransportRestart",!1),ol(this,"publish",async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||nB,s=iZ(r),o=r?.prompt||!1,a=r?.tag||0,l=r?.id||(0,nA.getBigIntRpcId)().toString(),c={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${l} tag:${a}`;try{let i=new Promise(async i=>{let s=({id:e})=>{c.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(n$.publish,s),i(c))};this.relayer.events.on(n$.publish,s);let u=eL(new Promise((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:l,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch(e=>{this.logger.warn(e,e?.message),s(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${l} tag:${a}`);try{await u,this.events.removeListener(n$.publish,s)}catch(e){this.queue.set(l,oa(oo({},c),{attempt:1})),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:l,topic:e,message:t,opts:r}}),await eL(i,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(l)}}),ol(this,"on",(e,t)=>{this.events.on(e,t)}),ol(this,"once",(e,t)=>{this.events.once(e,t)}),ol(this,"off",(e,t)=>{this.events.off(e,t)}),ol(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,R.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,R.Fd)(this.logger)}async rpcPublish(e){var t,r,i,n;let{topic:s,message:o,ttl:a=nB,prompt:l,tag:c,id:u,attestation:h,tvf:d}=e,p={method:iJ(iZ().protocol).publish,params:oo({topic:s,message:o,ttl:a,prompt:l,tag:c,attestation:h},d),id:u};nu(null==(t=p.params)?void 0:t.prompt)&&(null==(r=p.params)||delete r.prompt),nu(null==(i=p.params)?void 0:i.tag)&&(null==(n=p.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});let f=await this.relayer.request(p);return this.relayer.events.emit(n$.publish,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let r=e.attempt+1;this.queue.set(t,oa(oo({},e),{attempt:r}));let{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(oa(oo({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(c.Lx.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(n$.connection_stalled);return}this.checkQueue()}),this.relayer.on(n$.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ou=Object.defineProperty,oh=(e,t,r)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,od=(e,t,r)=>oh(e,"symbol"!=typeof t?t+"":t,r);class op{constructor(){od(this,"map",new Map),od(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),od(this,"get",e=>this.map.get(e)||[]),od(this,"exists",(e,t)=>this.get(e).includes(t)),od(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),od(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var of=Object.defineProperty,og=Object.defineProperties,om=Object.getOwnPropertyDescriptors,oy=Object.getOwnPropertySymbols,ov=Object.prototype.hasOwnProperty,ob=Object.prototype.propertyIsEnumerable,ow=(e,t,r)=>t in e?of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oE=(e,t)=>{for(var r in t||(t={}))ov.call(t,r)&&ow(e,r,t[r]);if(oy)for(var r of oy(t))ob.call(t,r)&&ow(e,r,t[r]);return e},o_=(e,t)=>og(e,om(t)),oC=(e,t,r)=>ow(e,"symbol"!=typeof t?t+"":t,r);class oS extends W{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,oC(this,"subscriptions",new Map),oC(this,"topicMap",new op),oC(this,"events",new a.EventEmitter),oC(this,"name","subscription"),oC(this,"version","0.3"),oC(this,"pending",new Map),oC(this,"cached",[]),oC(this,"initialized",!1),oC(this,"storagePrefix",nN),oC(this,"subscribeTimeout",(0,et.toMiliseconds)(et.ONE_MINUTE)),oC(this,"initialSubscribeTimeout",(0,et.toMiliseconds)(15*et.ONE_SECOND)),oC(this,"clientId"),oC(this,"batchSubscribeTopicsLimit",500),oC(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),oC(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=iZ(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),oC(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),oC(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),oC(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),oC(this,"on",(e,t)=>{this.events.on(e,t)}),oC(this,"once",(e,t)=>{this.events.once(e,t)}),oC(this,"off",(e,t)=>{this.events.off(e,t)}),oC(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),oC(this,"start",async()=>{await this.onConnect()}),oC(this,"stop",async()=>{await this.onDisconnect()}),oC(this,"restart",async()=>{await this.restore(),await this.onRestart()}),oC(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),oC(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(c.Lx.pulse,async()=>{await this.checkPending()}),this.events.on(nW.created,async e=>{let t=nW.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(nW.deleted,async e=>{let t=nW.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=(0,R.Ep)(t,this.name),this.clientId=""}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=iZ(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=na("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r&&r?.transportType!==nH.relay||await this.restartToComplete({topic:e,id:e,relay:t});let n={method:iJ(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(r?.transportType===nH.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,et.toMiliseconds)(et.ONE_SECOND)),t;let i=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(nW.created,r),t(i.id))};this.events.on(nW.created,r);try{let i=await eL(new Promise((e,t)=>{this.relayer.request(n).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(nW.created,r),t(i)}catch{}}),o=await eL(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(n$.connection_stalled),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:iJ(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await eL(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(n$.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:iJ(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await eL(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(n$.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let i={method:iJ(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,o_(oE({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,oE({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,oE({},t)),this.topicMap.set(t.topic,e),this.events.emit(nW.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=no("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(nW.deleted,o_(oE({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(nW.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(nW.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=no("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>o_(oE({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,et.toMiliseconds)(et.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return iU(e+await this.getClientId())}}var oI=Object.defineProperty,ox=Object.getOwnPropertySymbols,oA=Object.prototype.hasOwnProperty,ok=Object.prototype.propertyIsEnumerable,oO=(e,t,r)=>t in e?oI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oP=(e,t)=>{for(var r in t||(t={}))oA.call(t,r)&&oO(e,r,t[r]);if(ox)for(var r of ox(t))ok.call(t,r)&&oO(e,r,t[r]);return e},oR=(e,t,r)=>oO(e,"symbol"!=typeof t?t+"":t,r);class oN extends F{constructor(e){super(e),oR(this,"protocol","wc"),oR(this,"version",2),oR(this,"core"),oR(this,"logger"),oR(this,"events",new a.EventEmitter),oR(this,"provider"),oR(this,"messages"),oR(this,"subscriber"),oR(this,"publisher"),oR(this,"name","relayer"),oR(this,"transportExplicitlyClosed",!1),oR(this,"initialized",!1),oR(this,"connectionAttemptInProgress",!1),oR(this,"relayUrl"),oR(this,"projectId"),oR(this,"packageName"),oR(this,"bundleId"),oR(this,"hasExperiencedNetworkDisruption",!1),oR(this,"pingTimeout"),oR(this,"heartBeatTimeout",(0,et.toMiliseconds)(et.THIRTY_SECONDS+et.FIVE_SECONDS)),oR(this,"reconnectTimeout"),oR(this,"connectPromise"),oR(this,"reconnectInProgress",!1),oR(this,"requestsInFlight",[]),oR(this,"connectTimeout",(0,et.toMiliseconds)(15*et.ONE_SECOND)),oR(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||(0,nA.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),oR(this,"resetPingTimeout",()=>{eS()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(e){this.logger.warn(e,e?.message)}},this.heartBeatTimeout))}),oR(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),oR(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(n$.connect)}),oR(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),oR(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(n$.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),oR(this,"registerProviderListeners",()=>{this.provider.on(nU.payload,this.onPayloadHandler),this.provider.on(nU.connect,this.onConnectHandler),this.provider.on(nU.disconnect,this.onDisconnectHandler),this.provider.on(nU.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,R.Ep)(e.logger,this.name):(0,R.gw)((0,R.jI)({level:e.logger||"error"})),this.messages=new s9(this.logger,e.core),this.subscriber=new oS(this,this.logger),this.publisher=new oc(this,this.logger),this.relayUrl=e?.relayUrl||nj,this.projectId=e.projectId,eI()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="android"?this.packageName=ek():eI()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="ios"&&(this.bundleId=ek()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,R.Fd)(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:nH.relay},nF.outbound)}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,l=t=>{t.topic===e&&(this.subscriber.off(nW.created,l),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(nW.created,l)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,oP({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await eL(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await n_())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=ej(et.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(n$.message,e),await this.recordMessageEvent(e,nF.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(nU.disconnect,r),await eL(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(nU.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(nU.disconnect,r),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(nU.disconnect,r)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,et.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,i,n;if(eS())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new nx.r(new nk.Z(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:l}){let c=r.split("?"),u=eP(e,t,i),h=function(e,t){let r=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(c[1]||"",{auth:n,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:l||void 0,bundleId:a||void 0});return c[0]+"?"+h}({sdkVersion:nq,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,nA.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:nH.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oP({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,nA.isJsonRpcResponse)(e)&&this.events.emit(n$.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,nF.inbound),this.events.emit(n$.message,e))}async acknowledgePayload(e){let t=(0,nA.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(nU.payload,this.onPayloadHandler),this.provider.off(nU.connect,this.onConnectHandler),this.provider.off(nU.disconnect,this.onDisconnectHandler),this.provider.off(nU.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await n_();(function(e){switch(eA()){case eC.browser:!eI()&&ex()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case eC.reactNative:eI()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case eC.node:}})(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(c.Lx.pulse,async()=>{var e;if(!this.transportExplicitlyClosed&&!this.connected&&(!(ex()&&(0,en.getDocument)())||(null==(e=(0,en.getDocument)())?void 0:e.visibilityState)==="visible"))try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(n$.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,et.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function oT(){}function oM(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function oL(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function oD(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let oB="[object Arguments]",oj="[object Object]";var o$=Object.defineProperty,oU=Object.getOwnPropertySymbols,oq=Object.prototype.hasOwnProperty,oH=Object.prototype.propertyIsEnumerable,oF=(e,t,r)=>t in e?o$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oz=(e,t)=>{for(var r in t||(t={}))oq.call(t,r)&&oF(e,r,t[r]);if(oU)for(var r of oU(t))oH.call(t,r)&&oF(e,r,t[r]);return e},oW=(e,t,r)=>oF(e,"symbol"!=typeof t?t+"":t,r);class oK extends z{constructor(e,t,r,i=nN,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,oW(this,"map",new Map),oW(this,"version","0.3"),oW(this,"cached",[]),oW(this,"initialized",!1),oW(this,"getKey"),oW(this,"storagePrefix",nN),oW(this,"recentlyDeleted",[]),oW(this,"recentlyDeletedLimit",200),oW(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!nu(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),oW(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),oW(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),oW(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>(function e(t,r,i,n,s,o,a){let l=a(t,r,i,n,s,o);if(void 0!==l)return l;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,i,n,s){if(Object.is(r,i))return!0;let o=oD(r),a=oD(i);if(o===oB&&(o=oj),a===oB&&(a=oj),o!==a)return!1;switch(o){case"[object String]":return r.toString()===i.toString();case"[object Number]":{let e=r.valueOf(),t=i.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),i.valueOf());case"[object RegExp]":return r.source===i.source&&r.flags===i.flags;case"[object Function]":return r===i}let l=(n=n??new Map).get(r),c=n.get(i);if(null!=l&&null!=c)return l===i;n.set(r,i),n.set(i,r);try{switch(o){case"[object Map]":if(r.size!==i.size)return!1;for(let[t,o]of r.entries())if(!i.has(t)||!e(o,i.get(t),t,r,i,n,s))return!1;return!0;case"[object Set]":{if(r.size!==i.size)return!1;let t=Array.from(r.values()),o=Array.from(i.values());for(let a=0;a<t.length;a++){let l=t[a],c=o.findIndex(t=>e(l,t,void 0,r,i,n,s));if(-1===c)return!1;o.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof nO&&nO.isBuffer(r)!==nO.isBuffer(i)||r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],i[t],t,r,i,n,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===i.byteLength&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object DataView]":return r.byteLength===i.byteLength&&r.byteOffset===i.byteOffset&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object Error]":return r.name===i.name&&r.message===i.message;case oj:{if(!(t(r.constructor,i.constructor,n,s)||oM(r)&&oM(i)))return!1;let o=[...Object.keys(r),...oL(r)],a=[...Object.keys(i),...oL(i)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],l=r[a];if(!Object.hasOwn(i,a))return!1;let c=i[a];if(!e(l,c,a,r,i,n,s))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(i)}}(t,r,o,a)})(t[r],e[r],void 0,void 0,void 0,void 0,oT))):this.values)),oW(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=oz(oz({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),oW(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=(0,R.Ep)(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=no("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=no("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=no("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var oV=Object.defineProperty,oG=(e,t,r)=>t in e?oV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oZ=(e,t,r)=>oG(e,"symbol"!=typeof t?t+"":t,r);class oJ{constructor(e,t){this.core=e,this.logger=t,oZ(this,"name","pairing"),oZ(this,"version","0.3"),oZ(this,"events",new(l())),oZ(this,"pairings"),oZ(this,"initialized",!1),oZ(this,"storagePrefix",nN),oZ(this,"ignoredPayloadTypes",[1]),oZ(this,"registeredMethods",[]),oZ(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),oZ(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),oZ(this,"create",async e=>{this.isInitialized();let t=ij(),r=await this.core.crypto.setSymKey(t),i=ej(et.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=iX({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(nV.create,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}}),oZ(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[nQ.pairing_started]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=iY(e.uri);if(r.props.properties.topic=i,r.addTrace(nQ.pairing_uri_validation_success),r.addTrace(nQ.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace(nQ.existing_pairing),t.active)throw r.setError(n0.active_pairing_already_exists),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace(nQ.pairing_not_expired)}let l=o||ej(et.FIVE_MINUTES),c={topic:i,relay:s,expiry:l,active:!1,methods:a};this.core.expirer.set(i,l),await this.pairings.set(i,c),r.addTrace(nQ.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(nV.create,c),r.addTrace(nQ.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace(nQ.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(n0.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError(n0.subscribe_pairing_topic_failure),e}return r.addTrace(nQ.subscribe_pairing_topic_success),c}),oZ(this,"activate",async({topic:e})=>{this.isInitialized();let t=ej(et.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),oZ(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=eM();this.events.once(eU("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),oZ(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),oZ(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),oZ(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),oZ(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",na("USER_DISCONNECTED")),await this.deletePairing(t))}),oZ(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return iX({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),oZ(this,"sendRequest",async(e,t,r)=>{let i=(0,nA.formatJsonRpcRequest)(t,r),n=await this.core.crypto.encode(e,i),s=nK[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),oZ(this,"sendResult",async(e,t,r)=>{let i=(0,nA.formatJsonRpcResult)(e,r),n=await this.core.crypto.encode(t,i),s=nK[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),oZ(this,"sendError",async(e,t,r)=>{let i=(0,nA.formatJsonRpcError)(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=nK[s]?nK[s].res:nK.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),oZ(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,na("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),oZ(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>e$(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),oZ(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),oZ(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),oZ(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(nV.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oZ(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("pairing_ping",r),{}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("pairing_ping",r),{error:t.error})},500)}),oZ(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(nV.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oZ(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=na("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),oZ(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(na("WC_METHOD_UNSUPPORTED",e))}),oZ(this,"isValidPair",(e,t)=>{var r;if(!nv(e)){let{message:r}=no("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(n0.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(nh(e,!1)){if(t(e))return!0;let r=eV(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=no("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(n0.malformed_pairing_uri),Error(r)}let i=iY(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=no("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(n0.malformed_pairing_uri),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=no("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(n0.malformed_pairing_uri),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,et.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(n0.pairing_expired);let{message:e}=no("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),oZ(this,"isValidPing",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),oZ(this,"isValidDisconnect",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),oZ(this,"isValidPairingTopic",async e=>{if(!nh(e,!1)){let{message:t}=no("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=no("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(e$(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=no("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=(0,R.Ep)(t,this.name),this.pairings=new oK(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,R.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(n$.message,async e=>{let{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==nH.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);(0,nA.isJsonRpcRequest)(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):(0,nA.isJsonRpcResponse)(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(nZ.expired,async e=>{let{topic:t}=eB(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(nV.expire,{topic:t}))})}}var oY=Object.defineProperty,oX=(e,t,r)=>t in e?oY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oQ=(e,t,r)=>oX(e,"symbol"!=typeof t?t+"":t,r);class o0 extends U{constructor(e,t){super(e,t),this.core=e,this.logger=t,oQ(this,"records",new Map),oQ(this,"events",new a.EventEmitter),oQ(this,"name","history"),oQ(this,"version","0.3"),oQ(this,"cached",[]),oQ(this,"initialized",!1),oQ(this,"storagePrefix",nN),oQ(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),oQ(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:ej(et.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(nG.created,i)}),oQ(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,nA.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(nG.updated,t))}),oQ(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),oQ(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(nG.deleted,r))}),this.persist()}),oQ(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),oQ(this,"on",(e,t)=>{this.events.on(e,t)}),oQ(this,"once",(e,t)=>{this.events.once(e,t)}),oQ(this,"off",(e,t)=>{this.events.off(e,t)}),oQ(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,R.Ep)(t,this.name)}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,nA.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=no("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(nG.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=no("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(nG.created,e=>{let t=nG.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(nG.updated,e=>{let t=nG.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(nG.deleted,e=>{let t=nG.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(c.Lx.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,et.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(nG.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var o1=Object.defineProperty,o2=(e,t,r)=>t in e?o1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o3=(e,t,r)=>o2(e,"symbol"!=typeof t?t+"":t,r);class o5 extends K{constructor(e,t){super(e,t),this.core=e,this.logger=t,o3(this,"expirations",new Map),o3(this,"events",new a.EventEmitter),o3(this,"name","expirer"),o3(this,"version","0.3"),o3(this,"cached",[]),o3(this,"initialized",!1),o3(this,"storagePrefix",nN),o3(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),o3(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),o3(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(nZ.created,{target:r,expiration:i})}),o3(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),o3(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(nZ.deleted,{target:t,expiration:r})}}),o3(this,"on",(e,t)=>{this.events.on(e,t)}),o3(this,"once",(e,t)=>{this.events.once(e,t)}),o3(this,"off",(e,t)=>{this.events.off(e,t)}),o3(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,R.Ep)(t,this.name)}get context(){return(0,R.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return eD("topic",e);if("number"==typeof e)return eD("id",e);let{message:t}=no("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(nZ.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=no("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=no("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,et.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(nZ.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(c.Lx.pulse,()=>this.checkExpirations()),this.events.on(nZ.created,e=>{let t=nZ.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(nZ.expired,e=>{let t=nZ.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(nZ.deleted,e=>{let t=nZ.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}}var o4=Object.defineProperty,o6=(e,t,r)=>t in e?o4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o8=(e,t,r)=>o6(e,"symbol"!=typeof t?t+"":t,r);class o9 extends V{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,o8(this,"name","verify-api"),o8(this,"abortController"),o8(this,"isDevEnv"),o8(this,"verifyUrlV3",nY),o8(this,"storagePrefix",nN),o8(this,"version",2),o8(this,"publicKey"),o8(this,"fetchPromise"),o8(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,et.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),o8(this,"register",async e=>{if(!ex()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,en.getDocument)(),t=this.startAbortTimer(5*et.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",l),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let l=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if((0,er.xp)(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",l),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",l,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""}),o8(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if((0,er.xp)(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),o8(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*et.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),o8(this,"getVerifyUrl",e=>{let t=e||nJ;return nX.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${nJ}`),t=nJ),t}),o8(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(et.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),o8(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),o8(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),o8(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),o8(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),o8(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),o8(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=eh.from(iz(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32),a=s.slice(32,64),l=rw(`${r}.${i}`),c=function(e){let t=eh.from(e.x,"base64"),r=eh.from(e.y,"base64");return(0,el.zo)([new Uint8Array([4]),t,r])}(t);if(!iN.verify((0,el.zo)([o,a]),l,c))throw Error("Invalid signature");return(0,er.xp)(e).payload}(e,t.publicKey),i={hasExpired:(0,et.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=(0,R.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=eK(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,R.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,et.toMiliseconds)(e))}}var o7=Object.defineProperty,ae=(e,t,r)=>t in e?o7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,at=(e,t,r)=>ae(e,"symbol"!=typeof t?t+"":t,r);class ar extends G{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,at(this,"context","echo"),at(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=(0,R.Ep)(t,this.context)}}var ai=Object.defineProperty,an=Object.getOwnPropertySymbols,as=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,aa=(e,t,r)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,al=(e,t)=>{for(var r in t||(t={}))as.call(t,r)&&aa(e,r,t[r]);if(an)for(var r of an(t))ao.call(t,r)&&aa(e,r,t[r]);return e},ac=(e,t,r)=>aa(e,"symbol"!=typeof t?t+"":t,r);class au extends Z{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,ac(this,"context","event-client"),ac(this,"storagePrefix",nN),ac(this,"storageVersion",.1),ac(this,"events",new Map),ac(this,"shouldPersist",!1),ac(this,"init",async()=>{if(!eK())try{let e={eventId:eW(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:eP(this.core.relayer.protocol,this.core.relayer.version,nq)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),ac(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=eW(),o=this.core.projectId||"",a=al({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),ac(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return al(al({},i),this.setMethods(i.eventId))}),ac(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),ac(this,"setEventListeners",()=>{this.core.heartbeat.on(c.Lx.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,et.fromMiliseconds)(Date.now())-(0,et.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),ac(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),ac(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),ac(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),ac(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ac(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,al(al({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),ac(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),ac(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${nq}${t}`,{method:"POST",body:JSON.stringify(e)})}),ac(this,"getAppDomain",()=>eO().url),this.logger=(0,R.Ep)(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var ah=Object.defineProperty,ad=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,af=Object.prototype.propertyIsEnumerable,ag=(e,t,r)=>t in e?ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,am=(e,t)=>{for(var r in t||(t={}))ap.call(t,r)&&ag(e,r,t[r]);if(ad)for(var r of ad(t))af.call(t,r)&&ag(e,r,t[r]);return e},ay=(e,t,r)=>ag(e,"symbol"!=typeof t?t+"":t,r);class av extends D{constructor(e){var t;super(e),ay(this,"protocol","wc"),ay(this,"version",2),ay(this,"name",nR),ay(this,"relayUrl"),ay(this,"projectId"),ay(this,"customStoragePrefix"),ay(this,"events",new a.EventEmitter),ay(this,"logger"),ay(this,"heartbeat"),ay(this,"relayer"),ay(this,"crypto"),ay(this,"storage"),ay(this,"history"),ay(this,"expirer"),ay(this,"pairing"),ay(this,"verify"),ay(this,"echoClient"),ay(this,"linkModeSupportedApps"),ay(this,"eventClient"),ay(this,"initialized",!1),ay(this,"logChunkController"),ay(this,"on",(e,t)=>this.events.on(e,t)),ay(this,"once",(e,t)=>this.events.once(e,t)),ay(this,"off",(e,t)=>this.events.off(e,t)),ay(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),ay(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:nH.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})});let r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||nj,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let i=(0,R.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:nT.logger,name:nR}),{logger:n,chunkLoggerController:s}=(0,R.Rt)({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,R.Ep)(n,this.name),this.heartbeat=new c.C$,this.crypto=new sY(this,this.logger,e?.keychain),this.history=new o0(this,this.logger),this.expirer=new o5(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new P(am(am({},nM),e?.storageOptions)),this.relayer=new oN({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new oJ(this,this.logger),this.verify=new o9(this,this.logger,this.storage),this.echoClient=new ar(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new au(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){let t=new av(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,R.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nz,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nz)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;let t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){console.warn("Failed to get global WalletConnect core",e);return}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;let r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return"u">typeof nP&&"true"===nP.env.DISABLE_GLOBAL_CORE}catch{return!0}}}let ab="client",aw=`wc@2:${ab}:`,aE={name:ab,logger:"error"},a_="WALLETCONNECT_DEEPLINK_CHOICE",aC="Proposal expired",aS=et.SEVEN_DAYS,aI={wc_sessionPropose:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1104},res:{ttl:et.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1106},res:{ttl:et.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:et.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1112},res:{ttl:et.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:et.ONE_DAY,prompt:!1,tag:1114},res:{ttl:et.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:et.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:et.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:et.FIVE_MINUTES,prompt:!1,tag:1119}}},ax={min:et.FIVE_MINUTES,max:et.SEVEN_DAYS},aA={idle:"IDLE",active:"ACTIVE"},ak={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},aO=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],aP="wc@1.5:auth:",aR=`${aP}:PUB_KEY`;var aN=Object.defineProperty,aT=Object.defineProperties,aM=Object.getOwnPropertyDescriptors,aL=Object.getOwnPropertySymbols,aD=Object.prototype.hasOwnProperty,aB=Object.prototype.propertyIsEnumerable,aj=(e,t,r)=>t in e?aN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a$=(e,t)=>{for(var r in t||(t={}))aD.call(t,r)&&aj(e,r,t[r]);if(aL)for(var r of aL(t))aB.call(t,r)&&aj(e,r,t[r]);return e},aU=(e,t)=>aT(e,aM(t)),aq=(e,t,r)=>aj(e,"symbol"!=typeof t?t+"":t,r);class aH extends ee{constructor(e){super(e),aq(this,"name","engine"),aq(this,"events",new(l())),aq(this,"initialized",!1),aq(this,"requestQueue",{state:aA.idle,queue:[]}),aq(this,"sessionRequestQueue",{state:aA.idle,queue:[]}),aq(this,"requestQueueDelay",et.ONE_SECOND),aq(this,"expectedPairingMethodMap",new Map),aq(this,"recentlyDeletedMap",new Map),aq(this,"recentlyDeletedLimit",200),aq(this,"relayMessageCache",[]),aq(this,"pendingSessions",new Map),aq(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(aI)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,et.toMiliseconds)(this.requestQueueDelay)))}),aq(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=aU(a$({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t),t.optionalNamespaces=function(e,t){var r,i,n,s,o,a;let l=nr(e),c=nr(t),u={};for(let e of Object.keys(l).concat(Object.keys(c)))u[e]={chains:eq(null==(r=l[e])?void 0:r.chains,null==(i=c[e])?void 0:i.chains),methods:eq(null==(n=l[e])?void 0:n.methods,null==(s=c[e])?void 0:s.methods),events:eq(null==(o=l[e])?void 0:o.events,null==(a=c[e])?void 0:a.events)};return u}(t.requiredNamespaces,t.optionalNamespaces),t.requiredNamespaces={};let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=t,l=r,c,u=!1;try{if(l){let e=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),u=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),e}if(!l||!u){let{topic:e,uri:t}=await this.client.core.pairing.create();l=e,c=t}if(!l){let{message:e}=no("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),d=aI.wc_sessionPropose.req.ttl||et.FIVE_MINUTES,p=ej(d),f=aU(a$(a$({requiredNamespaces:i,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:l},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:(0,nA.payloadId)()}),g=eU("session_connect",f.id),{reject:m,resolve:y,done:v}=eM(d,aC),b=({id:e})=>{e===f.id&&(this.client.events.off("proposal_expire",b),this.pendingSessions.delete(f.id),this.events.emit(g,{error:{message:aC,code:0}}))};return this.client.events.on("proposal_expire",b),this.events.once(g,({error:e,session:t})=>{this.client.events.off("proposal_expire",b),e?m(e):t&&y(t)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:c,approval:v}}),aq(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),aq(this,"approve",async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[n1.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(n2.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(n2.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(n2.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:l,scopedProperties:c,sessionConfig:u}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:d,proposer:p,requiredNamespaces:f,optionalNamespaces:g}=h,m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:n1.session_approve_started,properties:{topic:d,trace:[n1.session_approve_started,n1.session_namespaces_validation_success]}}));let y=await this.client.core.crypto.generateKeyPair(),v=p.publicKey,b=await this.client.core.crypto.generateSharedKey(y,v),w=a$(a$(a$({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:ej(aS)},l&&{sessionProperties:l}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),E=nH.relay;m.addTrace(n1.subscribing_session_topic);try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError(n2.subscribe_session_topic_failure),e}m.addTrace(n1.subscribe_session_topic_success);let _=aU(a$({},w),{topic:b,requiredNamespaces:f,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:w.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:nH.relay});await this.client.session.set(b,_),m.addTrace(n1.store_session);try{m.addTrace(n1.publishing_session_settle),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(n2.session_settle_publish_failure),e}),m.addTrace(n1.session_settle_publish_success),m.addTrace(n1.publishing_session_approve),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(n2.session_approve_publish_failure),e}),m.addTrace(n1.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,na("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.client.proposal.delete(s,na("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,ej(aS)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}}),aq(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:aI.wc_sessionPropose.reject}),await this.client.proposal.delete(r,na("USER_DISCONNECTED")))}),aq(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=eM(),o=(0,nA.payloadId)(),a=(0,nA.getBigIntRpcId)().toString(),l=this.client.session.get(t).namespaces;return this.events.once(eU("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:l}),s(e)}),{acknowledged:i}}),aq(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=(0,nA.payloadId)(),{done:i,resolve:n,reject:s}=eM();return this.events.once(eU("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,ej(aS)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}}),aq(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=aI.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===nH.relay&&await this.confirmOnlineStateOrThrow();let o=(0,nA.payloadId)(),a=(0,nA.getBigIntRpcId)().toString(),{done:l,resolve:c,reject:u}=eM(n,"Request expired. Please try again.");this.events.once(eU("session_request",o),({error:e,result:t})=>{e?u(e):c(t)});let h="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:{request:aU(a$({},r),{expiryTimestamp:ej(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:d}).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await l();let p={request:aU(a$({},r),{expiryTimestamp:ej(n)}),chainId:t},f=this.shouldSetTVF(h,p);return await Promise.all([new Promise(async e=>{await this.sendRequest(a$({clientRpcId:o,relayRpcId:a,topic:i,method:h,params:p,expiry:n,throwOnFailedPublish:!0},f&&{tvf:this.getTVFParams(o,p)})).catch(e=>u(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await eF(this.client.core.storage,a_);await eH({id:o,topic:i,wcDeepLink:e})}e()}),l()]).then(e=>e[2])}),aq(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===nH.relay&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);(0,nA.isJsonRpcResult)(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):(0,nA.isJsonRpcError)(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)}),aq(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,nA.payloadId)(),r=(0,nA.getBigIntRpcId)().toString(),{done:i,resolve:n,reject:s}=eM();this.events.once(eU("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),aq(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=(0,nA.getBigIntRpcId)().toString(),s=(0,nA.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})}),aq(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:na("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=no("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),aq(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!eR(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=i7(i),l=r[t];eR(ep(t,l),a)&&eR(l.methods,n)&&eR(l.events,o)||(s=!1)}),s)})(t,e)))),aq(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),aq(this,"authenticate",async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?nH.link_mode:nH.relay;a===nH.relay&&await this.confirmOnlineStateOrThrow();let{chains:l,statement:c="",uri:u,domain:h,nonce:d,type:p,exp:f,nbf:g,methods:m=[],expiry:y}=e,v=[...e.resources||[]],{topic:b,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:w}});let E=await this.client.core.crypto.generateKeyPair(),_=i$(E);if(await Promise.all([this.client.auth.authKeys.set(aR,{responseTopic:_,publicKey:E}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${b}`),m.length>0){let{namespace:e}=ed(l[0]),t=t$(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",m));tF(v)&&(i=t,n=v.pop(),t=t$(function(e,t){tj(e),tj(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=tR(tP({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})})}),i}(tU(i),tU(n)))),v.push(t)}let C=y&&y>aI.wc_sessionAuthenticate.req.ttl?y:aI.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:p??"caip122",chains:l,statement:c,aud:u,domain:h,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:v},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ej(C)},I={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:l,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ej(aI.wc_sessionPropose.req.ttl),id:(0,nA.payloadId)()},{done:x,resolve:A,reject:k}=eM(C,"Request expired"),O=(0,nA.payloadId)(),P=eU("session_connect",I.id),R=eU("session_request",O),N=async({error:e,session:t})=>{this.events.off(R,T),e?k(e):t&&A({session:t})},T=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(O,{message:"fulfilled",code:0}),e.error){let t=na("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(P,N),k(e.error.message))}await this.deleteProposal(I.id),this.events.off(P,N);let{cacaos:o,responder:l}=e.result,c=[],u=[];for(let e of o){await tD({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),k(na("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=tF(t.resources),i=[tM(t.iss)],n=tL(t.iss);if(r){let e=tq(r),t=tH(r);c.push(...e),i.push(...t)}for(let e of i)u.push(`${e}:${n}`)}let h=await this.client.core.crypto.generateSharedKey(E,l.publicKey);c.length>0&&(s={topic:h,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:l,controller:l.publicKey,expiry:ej(aS),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:ni([...new Set(c)],[...new Set(u)]),transportType:a},await this.client.core.relayer.subscribe(h,{transportType:a}),await this.client.session.set(h,s),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:l.metadata}),s=this.client.session.get(h)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=l.metadata.redirect)&&i.linkMode&&null!=(n=l.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.session.update(h,{transportType:nH.link_mode})),A({auths:o,session:s})};this.events.once(P,N),this.events.once(R,T);try{if(o){let e=(0,nA.formatJsonRpcRequest)("wc_sessionAuthenticate",S,O);this.client.core.history.set(b,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:iD});s=iQ(t,b,r)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:O}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:I,expiry:aI.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(e){throw this.events.off(P,N),this.events.off(R,T),e}return await this.setProposal(I.id,I),await this.setAuthRequest(O,{request:aU(a$({},S),{verifyContext:{}}),pairingTopic:b,transportType:a}),{uri:s??w,response:x}}),aq(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[n3.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw n.setError(n5.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError(n5.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||nH.relay;o===nH.relay&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),c=i$(a),u={type:1,receiverPublicKey:a,senderPublicKey:l},h=[],d=[];for(let e of i){if(!await tD({cacao:e,projectId:this.client.core.projectId})){n.setError(n5.invalid_cacao);let e=na("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:c,error:e,encodeOpts:u}),Error(e.message)}n.addTrace(n3.cacaos_verified);let{p:t}=e,i=tF(t.resources),s=[tM(t.iss)],o=tL(t.iss);if(i){let e=tq(i),t=tH(i);h.push(...e),s.push(...t)}for(let e of s)d.push(`${e}:${o}`)}let p=await this.client.core.crypto.generateSharedKey(l,a);if(n.addTrace(n3.create_authenticated_session_topic),h?.length>0){t={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:ej(aS),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:ni([...new Set(h)],[...new Set(d)]),transportType:o},n.addTrace(n3.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:o})}catch(e){throw n.setError(n5.subscribe_authenticated_session_topic_failure),e}n.addTrace(n3.subscribe_authenticated_session_topic_success),await this.client.session.set(p,t),n.addTrace(n3.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace(n3.publishing_authenticated_session_approve);try{await this.sendResult({topic:c,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError(n5.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}}),aq(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===nH.relay&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=i$(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:aI.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,na("USER_DISCONNECTED"))}),aq(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return tB(t,r)}),aq(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),aq(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),aq(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,na("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(a_).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,na("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=aA.idle),n&&this.client.events.emit("session_delete",{id:s,topic:r})}),aq(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(n2.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,na("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),aq(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=aA.idle,this.client.events.emit("session_request_expire",{id:e}))}),aq(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),aq(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),aq(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,ej(aI.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),aq(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=nH.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})}),aq(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||ej(aI.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})}),aq(this,"sendRequest",async e=>{let t,i;let{topic:n,method:s,params:o,expiry:a,relayRpcId:l,clientRpcId:c,throwOnFailedPublish:u,appLink:h,tvf:d}=e,p=(0,nA.formatJsonRpcRequest)(s,o,c),f=!!h;try{let e=f?iD:iL;t=await this.client.core.crypto.encode(n,p,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(aO.includes(s)){let e=iU(JSON.stringify(p)),r=iU(t);i=await this.client.core.verify.register({id:r,decryptedId:e})}let g=aI[s].req;if(g.attestation=i,a&&(g.ttl=a),l&&(g.id=l),this.client.core.history.set(n,p),f){let e=iQ(h,n,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=aI[s].req;a&&(e.ttl=a),l&&(e.id=l),e.tvf=aU(a$({},d),{correlationId:p.id}),u?(e.internal=aU(a$({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}return p.id}),aq(this,"sendResult",async e=>{let t,i,n;let{id:s,topic:o,result:a,throwOnFailedPublish:l,encodeOpts:c,appLink:u}=e,h=(0,nA.formatJsonRpcResult)(s,a),d=u&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=d?iD:iL;t=await this.client.core.crypto.encode(o,h,aU(a$({},c||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),e}try{let e=(i=await this.client.core.history.get(o,s)).request;try{this.shouldSetTVF(e.method,e.params)&&(n=this.getTVFParams(s,e.params,a))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${s}) failed`),e}if(d){let e=iQ(u,o,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=aI[i.request.method].res;e.tvf=aU(a$({},n),{correlationId:s}),l?(e.internal=aU(a$({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,t,e)):this.client.core.relayer.publish(o,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(h)}),aq(this,"sendError",async e=>{let t,i;let{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:l,appLink:c}=e,u=(0,nA.formatJsonRpcError)(n,o),h=c&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=h?iD:iL;t=await this.client.core.crypto.encode(s,u,aU(a$({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(h){let e=iQ(c,s,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=i.request.method,r=l||aI[e].res;this.client.core.relayer.publish(s,t,r)}await this.client.core.history.resolve(u)}),aq(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;e$(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{e$(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),aq(this,"onProviderMessageEvent",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),aq(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),aq(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===aA.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=aA.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=aA.idle}),aq(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}}),aq(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}}),aq(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=no("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),aq(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),aq(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(n0.proposal_listener_not_found)),this.isValidConnect(a$({},r.params));let a=s.expiryTimestamp||ej(aI.wc_sessionPropose.req.ttl),l=a$({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,l);let c=await this.getVerifyContext({attestationId:i,hash:iU(JSON.stringify(r)),encryptedId:n,metadata:l.proposer.metadata});e?.addTrace(nQ.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:c})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:aI.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),aq(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:i}=t;if((0,nA.isJsonRpcResult)(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let l=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:e,proposalId:i,publicKey:o});let c=await this.client.core.relayer.subscribe(l,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if((0,nA.isJsonRpcError)(t)){await this.client.proposal.delete(i,na("USER_DISCONNECTED"));let e=eU("session_connect",i);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),aq(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:l,sessionConfig:c}=t.params,u=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);let h=this.client.proposal.get(u.proposalId),d=aU(a$(a$(a$({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:n.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),l&&{scopedProperties:l}),c&&{sessionConfig:c}),{transportType:nH.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(eU("session_connect",u.proposalId),{session:d}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aq(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;(0,nA.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(eU("session_approve",r),{})):(0,nA.isJsonRpcError)(t)&&(await this.client.session.delete(e,na("USER_DISCONNECTED")),this.events.emit(eU("session_approve",r),{error:t.error}))}),aq(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=nI.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:na("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(a$({topic:e},r));try{nI.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw nI.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),aq(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),aq(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,i=eU("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("session_update",r),{}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("session_update",r),{error:t.error})}),aq(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,ej(aS)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aq(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,i=eU("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("session_extend",r),{}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("session_extend",r),{error:t.error})}),aq(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aq(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,i=eU("session_ping",r);setTimeout(()=>{if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners 2176`);(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("session_ping",r),{}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("session_ping",r),{error:t.error})},500)}),aq(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(n$.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:na("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),aq(this,"onSessionRequest",async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:l}=e,{id:c,params:u}=s;try{await this.isValidRequest(a$({topic:n},u));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:iU(JSON.stringify((0,nA.formatJsonRpcRequest)("wc_sessionRequest",u,c))),encryptedId:a,metadata:e.peer.metadata,transportType:l}),h={id:c,topic:n,params:u,verifyContext:s};await this.setPendingSessionRequest(h),l===nH.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(e){await this.sendError({id:c,topic:n,error:e}),this.client.logger.error(e)}}),aq(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,i=eU("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("session_request",r),{result:t.result}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("session_request",r),{error:t.error})}),aq(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=nI.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(a$({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),nI.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),aq(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,nA.isJsonRpcResult)(t)?this.events.emit(eU("session_request",r),{result:t.result}):(0,nA.isJsonRpcError)(t)&&this.events.emit(eU("session_request",r),{error:t.error})}),aq(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:l}=i.params,c=await this.getVerifyContext({attestationId:n,hash:iU(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:c,expiryTimestamp:l};await this.setAuthRequest(i.id,{request:u,pairingTopic:r,transportType:o}),o===nH.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:c})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:aI.wc_sessionAuthenticate.autoReject,appLink:n})}}),aq(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),aq(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=aA.idle,this.processSessionRequestQueue()},(0,et.toMiliseconds)(this.requestQueueDelay))}),aq(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=eU("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(eU("session_request",e.request.id),{error:t})})}),aq(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===aA.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=aA.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),aq(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),aq(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,nA.formatJsonRpcRequest)("wc_sessionPropose",aU(a$({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}),aq(this,"isValidConnect",async e=>{let t;if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=e;if(nu(r)||await this.isValidPairingTopic(r),t=!1,a?a&&nl(a)&&a.length&&a.forEach(e=>{t=ny(e)}):t=!0,!t){let{message:e}=no("MISSING_OR_INVALID",`connect() relays: ${a}`);throw Error(e)}if(!nu(i)&&0!==nc(i)){let e="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(e):this.client.logger.warn(e),this.validateNamespaces(i,"requiredNamespaces")}if(nu(n)||0===nc(n)||this.validateNamespaces(n,"optionalNamespaces"),nu(s)||this.validateSessionProps(s,"sessionProperties"),!nu(o)){this.validateSessionProps(o,"scopedProperties");let e=Object.keys(i||{}).concat(Object.keys(n||{}));if(!Object.keys(o).every(t=>e.includes(t)))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}}),aq(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let i=null;if(e&&nc(e)){let n;let s=ng(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let l=(s=ep(e,i),o=`${t} ${r}`,a=null,nl(s)&&s.length?s.forEach(e=>{a||np(e)||(a=na("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):np(e)||(a=na("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);l&&(n=l)}),n);o&&(i=o)}else i=no("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)}),aq(this,"isValidApprove",async e=>{if(!nv(e))throw Error(no("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let o=this.client.proposal.get(t),a=nm(r,"approve()");if(a)throw Error(a.message);let l=nw(o.requiredNamespaces,r,"approve()");if(l)throw Error(l.message);if(!nh(i,!0)){let{message:e}=no("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}if(nu(n)||this.validateSessionProps(n,"sessionProperties"),!nu(s)){this.validateSessionProps(s,"scopedProperties");let e=new Set(Object.keys(r));if(!Object.keys(s).every(t=>e.has(t)))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}}),aq(this,"isValidReject",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!nd(r.code,!1)||!r.message||!nh(r.message,!1)){let{message:e}=no("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),aq(this,"isValidSessionSettleRequest",e=>{let t;if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!ny(r)){let{message:e}=no("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,nh(i?.publicKey,!1)||(t=no("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=nm(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(e$(s)){let{message:e}=no("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),aq(this,"isValidUpdate",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=nm(r,"update()");if(n)throw Error(n.message);let s=nw(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),aq(this,"isValidExtend",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),aq(this,"isValidRequest",async e=>{var t;if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!nb(o,n)){let{message:e}=no("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(nu(i)||!nh(i.method,!1)){let{message:e}=no("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(nh(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{i7(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=no("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!nd(s,!1)||!(s<=ax.max)||!(s>=ax.min))){let{message:e}=no("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${ax.min} and ${ax.max}`);throw Error(e)}}),aq(this,"isValidRespond",async e=>{var t;if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(nu(i)||nu(i.result)&&nu(i.error)||!nd(i.id,!1)||!nh(i.jsonrpc,!1)){let{message:e}=no("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}}),aq(this,"isValidPing",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),aq(this,"isValidEmit",async e=>{var t;if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!nb(s,n)){let{message:e}=no("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(nu(i)||!nh(i.name,!1)){let{message:e}=no("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(nh(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{i7(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=no("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}}),aq(this,"isValidDisconnect",async e=>{if(!nv(e)){let{message:t}=no("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),aq(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!nh(r,!1))throw Error("uri is required parameter");if(!nh(i,!1))throw Error("domain is required parameter");if(!nh(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>ed(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=ed(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),aq(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||nJ,validation:"UNKNOWN",origin:n.url||""}};try{if(s===nH.link_mode){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o}),aq(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((r,i)=>{if(null==r){let{message:n}=no("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[i]}`);throw Error(n)}})}),aq(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),aq(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),aq(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=no("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),aq(this,"isLinkModeEnabled",(e,t)=>{var i,n,s,o,a,l,c,u,h;return!!e&&t===nH.link_mode&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(l=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:l.universal)!==""&&(null==(c=e?.redirect)?void 0:c.universal)!==void 0&&(null==(u=e?.redirect)?void 0:u.universal)!==""&&(null==(h=e?.redirect)?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==r.g?void 0:r.g.Linking)}),aq(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),aq(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=ez(e,"topic")||"",r=decodeURIComponent(ez(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:nH.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})}),aq(this,"registerLinkModeListeners",async()=>{var e;if(eK()||eI()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==r.g?void 0:r.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),aq(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:r}=t;return Object.keys(ak).includes(r.method)}),aq(this,"getTVFParams",(e,t,r)=>{var i,n;try{let s=t.request.method,o=this.extractTxHashesFromResult(s,r);return aU(a$({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),aq(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1}),aq(this,"extractTxHashesFromResult",(e,t)=>{try{let r=ak[e];if("string"==typeof t)return[t];let i=t[r.key];if(nl(i))return"solana_signAllTransactions"===e?i.map(e=>(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=r[0];if(0===i)throw Error("No signatures found");if(r.length<1+64*i)throw Error("Transaction data too short for claimed signature count");if(r.length<100)throw Error("Transaction too short");let n=eh.from(e,"base64").slice(1,65);return ea.encode(n)})(e)):i;if("string"==typeof i)return[i]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}async processPendingMessageEvents(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[e,r]of Object.entries(t))for(let t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){let{message:e}=no("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(n$.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(aR)?this.client.auth.authKeys.get(aR):{responseTopic:void 0,publicKey:void 0};try{let e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===nH.link_mode?iD:iL});(0,nA.isJsonRpcRequest)(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:i,transportType:n,encryptedId:iU(r)})):(0,nA.isJsonRpcResponse)(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(nZ.expired,async e=>{let{topic:t,id:r}=eB(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,no("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,no("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(nV.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(nV.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!nh(e,!1)){let{message:t}=no("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=no("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(e$(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=no("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!nh(e,!1)){let{message:t}=no("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=no("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(e$(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=no("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=no("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(nh(e,!1)){let{message:t}=no("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=no("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=no("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=no("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(e$(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=no("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class aF extends oK{constructor(e,t){super(e,t,"proposal",aw),this.core=e,this.logger=t}}class az extends oK{constructor(e,t){super(e,t,"session",aw),this.core=e,this.logger=t}}class aW extends oK{constructor(e,t){super(e,t,"request",aw,e=>e.id),this.core=e,this.logger=t}}class aK extends oK{constructor(e,t){super(e,t,"authKeys",aP,()=>aR),this.core=e,this.logger=t}}class aV extends oK{constructor(e,t){super(e,t,"pairingTopics",aP),this.core=e,this.logger=t}}class aG extends oK{constructor(e,t){super(e,t,"requests",aP,e=>e.id),this.core=e,this.logger=t}}var aZ=Object.defineProperty,aJ=(e,t,r)=>t in e?aZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aY=(e,t,r)=>aJ(e,"symbol"!=typeof t?t+"":t,r);class aX{constructor(e,t){this.core=e,this.logger=t,aY(this,"authKeys"),aY(this,"pairingTopics"),aY(this,"requests"),this.authKeys=new aK(this.core,this.logger),this.pairingTopics=new aV(this.core,this.logger),this.requests=new aG(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var aQ=Object.defineProperty,a0=(e,t,r)=>t in e?aQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a1=(e,t,r)=>a0(e,"symbol"!=typeof t?t+"":t,r);class a2 extends Q{constructor(e){super(e),a1(this,"protocol","wc"),a1(this,"version",2),a1(this,"name",aE.name),a1(this,"metadata"),a1(this,"core"),a1(this,"logger"),a1(this,"events",new a.EventEmitter),a1(this,"engine"),a1(this,"session"),a1(this,"proposal"),a1(this,"pendingRequest"),a1(this,"auth"),a1(this,"signConfig"),a1(this,"on",(e,t)=>this.events.on(e,t)),a1(this,"once",(e,t)=>this.events.once(e,t)),a1(this,"off",(e,t)=>this.events.off(e,t)),a1(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),a1(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),a1(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),a1(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),a1(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||aE.name,this.metadata=function(e){var t,r;let i=eO();try{return null!=e&&e.url&&i.url&&new URL(e.url).host!==new URL(i.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${i.url}. This is probably unintended and can lead to issues.`),e.url=i.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(e=>""!==e)),e_(eE(eE({},i),e),{url:e?.url||i.url,name:e?.name||i.name,description:e?.description||i.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:i.icons})}catch(t){return console.warn("Error populating app metadata",t),e||i}}(e?.metadata),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,R.gw)((0,R.jI)({level:e?.logger||aE.logger}));this.core=e?.core||new av(e),this.logger=(0,R.Ep)(t,this.name),this.session=new az(this.core,this.logger),this.proposal=new aF(this.core,this.logger),this.pendingRequest=new aW(this.core,this.logger),this.engine=new aH(this),this.auth=new aX(this.core,this.logger)}static async init(e){let t=new a2(e);return await t.initialize(),t}get context(){return(0,R.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,et.toMiliseconds)(et.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var a3=r(54967),a5=r(67133).Buffer;let a4="error",a6="wc@2:universal_provider:",a8="https://rpc.walletconnect.org/v1/",a9="generic",a7=`${a8}bundler`,le={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function lt(){}function lr(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function li(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ln(e){return"object"==typeof e&&null!==e}function ls(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function lo(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let la="[object String]",ll="[object Number]",lc="[object Boolean]",lu="[object Arguments]";function lh(e,t,r,i=new Map,n){let s=n?.(e,t,r,i);if(null!=s)return s;if(lr(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){let t=Array(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=lh(e[s],s,r,i,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,o]of(i.set(e,t),e))t.set(s,lh(o,s,r,i,n));return t}if(e instanceof Set){let t=new Set;for(let s of(i.set(e,t),e))t.add(lh(s,void 0,r,i,n));return t}if("u">typeof a5&&a5.isBuffer(e))return e.subarray();if(li(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=lh(e[s],s,r,i,n);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),ld(t,e,r,i,n),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return i.set(e,t),ld(t,e,r,i,n),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return i.set(e,t),ld(t,e,r,i,n),t}if(e instanceof Error){let t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,ld(t,e,r,i,n),t}if("object"==typeof e&&function(e){switch(lo(e)){case lu:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case lc:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case ll:case"[object Object]":case"[object RegExp]":case"[object Set]":case la:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),ld(t,e,r,i,n),t}return e}function ld(e,t,r=e,i,n){let s=[...Object.keys(t),...ls(t)];for(let o=0;o<s.length;o++){let a=s[o],l=Object.getOwnPropertyDescriptor(e,a);(null==l||l.writable)&&(e[a]=lh(t[a],a,r,i,n))}}function lp(e){return lh(e,void 0,e,new Map,(t,r,i,n)=>{let s=void 0;if(null!=s)return s;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case ll:case la:case lc:{let t=new e.constructor(e?.valueOf());return ld(t,e),t}case lu:{let t={};return ld(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}function lf(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===lo(e)}var lg=Object.defineProperty,lm=Object.defineProperties,ly=Object.getOwnPropertyDescriptors,lv=Object.getOwnPropertySymbols,lb=Object.prototype.hasOwnProperty,lw=Object.prototype.propertyIsEnumerable,lE=(e,t,r)=>t in e?lg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l_=(e,t)=>{for(var r in t||(t={}))lb.call(t,r)&&lE(e,r,t[r]);if(lv)for(var r of lv(t))lw.call(t,r)&&lE(e,r,t[r]);return e},lC=(e,t)=>lm(e,ly(t));function lS(e,t,r){var i;let n=ed(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`${a8}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function lI(e){return e.includes(":")?e.split(":")[1]:e}function lx(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function lA(e={},t={}){return function(e,...t){return function(e,...t){let r=t.slice(0,-1),i=t[t.length-1],n=e;for(let e=0;e<r.length;e++)n=function e(t,r,i,n){if(lr(t)&&(t=Object(t)),null==r||"object"!=typeof r)return t;if(n.has(r))return function(e){if(lr(e))return e;if(Array.isArray(e)||li(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){let t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){let t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new r([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(n.get(r));if(n.set(r,t),Array.isArray(r)){r=r.slice();for(let e=0;e<r.length;e++)r[e]=r[e]??void 0}let s=[...Object.keys(r),...ls(r)];for(let o=0;o<s.length;o++){let a=s[o],l=r[a],c=t[a];if(lf(l)&&(l={...l}),lf(c)&&(c={...c}),"u">typeof a5&&a5.isBuffer(l)&&(l=lp(l)),Array.isArray(l)){if("object"==typeof c&&null!=c){let e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){let i=t[r];e[i]=c[i]}c=e}else c=[]}let u=i(c,l,a,t,r,n);null!=u?t[a]=u:Array.isArray(l)||ln(c)&&ln(l)?t[a]=e(c,l,i,n):null==c&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return!!(null!=t&&Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(l)?t[a]=e({},l,i,n):null==c&&li(l)?t[a]=lp(l):(void 0===c||void 0!==l)&&(t[a]=l)}return t}(n,r[e],i,new Map);return n}(e,...t,lt)}(lk(e),lk(t))}function lk(e){var t,r,i,n,s;let o={};if(!nc(e))return o;for(let[a,l]of Object.entries(e)){let e=ne(a)?[a]:l.chains,c=l.methods||[],u=l.events||[],h=l.rpcMap||{},d=nt(a);o[d]=lC(l_(l_({},o[d]),l),{chains:eq(e,null==(t=o[d])?void 0:t.chains),methods:eq(c,null==(r=o[d])?void 0:r.methods),events:eq(u,null==(i=o[d])?void 0:i.events)}),(nc(h)||nc((null==(n=o[d])?void 0:n.rpcMap)||{}))&&(o[d].rpcMap=l_(l_({},h),null==(s=o[d])?void 0:s.rpcMap))}return o}function lO(e){return e.includes(":")?e.split(":")[2]:e}function lP(e){let t={};for(let[r,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],s=i.accounts||[],o=ne(r)?[r]:i.chains?i.chains:lx(i.accounts);t[r]={chains:o,methods:e,events:n,accounts:s}}return t}function lR(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let lN={},lT=e=>lN[e],lM=(e,t)=>{lN[e]=t};var lL=Object.defineProperty,lD=(e,t,r)=>t in e?lL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lB=(e,t,r)=>lD(e,"symbol"!=typeof t?t+"":t,r);class lj{constructor(e){lB(this,"name","polkadot"),lB(this,"client"),lB(this,"httpProviders"),lB(this,"events"),lB(this,"namespace"),lB(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=lI(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var l$=Object.defineProperty,lU=Object.defineProperties,lq=Object.getOwnPropertyDescriptors,lH=Object.getOwnPropertySymbols,lF=Object.prototype.hasOwnProperty,lz=Object.prototype.propertyIsEnumerable,lW=(e,t,r)=>t in e?l$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lK=(e,t)=>{for(var r in t||(t={}))lF.call(t,r)&&lW(e,r,t[r]);if(lH)for(var r of lH(t))lz.call(t,r)&&lW(e,r,t[r]);return e},lV=(e,t)=>lU(e,lq(t)),lG=(e,t,r)=>lW(e,"symbol"!=typeof t?t+"":t,r);class lZ{constructor(e){lG(this,"name","eip155"),lG(this,"client"),lG(this,"chainId"),lG(this,"namespace"),lG(this,"httpProviders"),lG(this,"events"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||lS(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.k(r,lT("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=parseInt(lI(t));e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i,n,s;let o=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0],a=(null==(n=null==(i=e.request)?void 0:i.params)?void 0:n[1])||[],l=`${o}${a.join(",")}`;if(!o)throw Error("Missing address parameter in `wallet_getCapabilities` request");let c=this.client.session.get(e.topic),u=(null==(s=c?.sessionProperties)?void 0:s.capabilities)||{};if(null!=u&&u[l])return u?.[l];let h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:lV(lK({},c.sessionProperties||{}),{capabilities:lV(lK({},u||{}),{[l]:h})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return h}async getCallStatus(e){var t,r;let i=this.client.session.get(e.topic),n=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(n){let t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let s=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;let i=new URL(e),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,nA.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!n.ok)throw Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${a7}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var lJ=Object.defineProperty,lY=(e,t,r)=>t in e?lJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lX=(e,t,r)=>lY(e,"symbol"!=typeof t?t+"":t,r);class lQ{constructor(e){lX(this,"name","solana"),lX(this,"client"),lX(this,"httpProviders"),lX(this,"events"),lX(this,"namespace"),lX(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=lI(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var l0=Object.defineProperty,l1=(e,t,r)=>t in e?l0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l2=(e,t,r)=>l1(e,"symbol"!=typeof t?t+"":t,r);class l3{constructor(e){l2(this,"name","cosmos"),l2(this,"client"),l2(this,"httpProviders"),l2(this,"events"),l2(this,"namespace"),l2(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=lI(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var l5=Object.defineProperty,l4=(e,t,r)=>t in e?l5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l6=(e,t,r)=>l4(e,"symbol"!=typeof t?t+"":t,r);class l8{constructor(e){l6(this,"name","algorand"),l6(this,"client"),l6(this,"httpProviders"),l6(this,"events"),l6(this,"namespace"),l6(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||lS(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var l9=Object.defineProperty,l7=(e,t,r)=>t in e?l9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ce=(e,t,r)=>l7(e,"symbol"!=typeof t?t+"":t,r);class ct{constructor(e){ce(this,"name","cip34"),ce(this,"client"),ce(this,"httpProviders"),ce(this,"events"),ce(this,"namespace"),ce(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t),i=lI(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var cr=Object.defineProperty,ci=(e,t,r)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cn=(e,t,r)=>ci(e,"symbol"!=typeof t?t+"":t,r);class cs{constructor(e){cn(this,"name","elrond"),cn(this,"client"),cn(this,"httpProviders"),cn(this,"events"),cn(this,"namespace"),cn(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=lI(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var co=Object.defineProperty,ca=(e,t,r)=>t in e?co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cl=(e,t,r)=>ca(e,"symbol"!=typeof t?t+"":t,r);class cc{constructor(e){cl(this,"name","multiversx"),cl(this,"client"),cl(this,"httpProviders"),cl(this,"events"),cl(this,"namespace"),cl(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=lI(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var cu=Object.defineProperty,ch=(e,t,r)=>t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cd=(e,t,r)=>ch(e,"symbol"!=typeof t?t+"":t,r);class cp{constructor(e){cd(this,"name","near"),cd(this,"client"),cd(this,"httpProviders"),cd(this,"events"),cd(this,"namespace"),cd(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||lS(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace);return typeof r>"u"?void 0:new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var cf=Object.defineProperty,cg=(e,t,r)=>t in e?cf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cm=(e,t,r)=>cg(e,"symbol"!=typeof t?t+"":t,r);class cy{constructor(e){cm(this,"name","tezos"),cm(this,"client"),cm(this,"httpProviders"),cm(this,"events"),cm(this,"namespace"),cm(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||lS(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace);return typeof r>"u"?void 0:new nx.r(new a3.Z(r))}}var cv=Object.defineProperty,cb=(e,t,r)=>t in e?cv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cw=(e,t,r)=>cb(e,"symbol"!=typeof t?t+"":t,r);class cE{constructor(e){cw(this,"name",a9),cw(this,"client"),cw(this,"httpProviders"),cw(this,"events"),cw(this,"namespace"),cw(this,"chainId"),this.namespace=e.namespace,this.events=lT("events"),this.client=lT("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(le.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=ed(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),r}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||lS(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new nx.r(new a3.Z(r,lT("disableProviderPing")))}}var c_=Object.defineProperty,cC=Object.defineProperties,cS=Object.getOwnPropertyDescriptors,cI=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,cA=Object.prototype.propertyIsEnumerable,ck=(e,t,r)=>t in e?c_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cO=(e,t)=>{for(var r in t||(t={}))cx.call(t,r)&&ck(e,r,t[r]);if(cI)for(var r of cI(t))cA.call(t,r)&&ck(e,r,t[r]);return e},cP=(e,t)=>cC(e,cS(t)),cR=(e,t,r)=>ck(e,"symbol"!=typeof t?t+"":t,r);class cN{constructor(e){cR(this,"client"),cR(this,"namespaces"),cR(this,"optionalNamespaces"),cR(this,"sessionProperties"),cR(this,"scopedProperties"),cR(this,"events",new(l())),cR(this,"rpcProviders",{}),cR(this,"session"),cR(this,"providerOpts"),cR(this,"logger"),cR(this,"uri"),cR(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,R.gw)((0,R.jI)({level:e?.logger||a4})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new cN(e);return await t.initialize(),t}async request(e,t,r){let[i,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:cO({},e),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){let n=new Date().getTime();this.request(e,r,i).then(e=>t(null,(0,nA.formatJsonRpcResult)(n,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:na("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));let n=await i();if(this.session=n.session,this.session){let e=lP(this.session.namespaces);this.namespaces=lA(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await r();this.session=i;let n=lP(i.namespaces);return this.namespaces=lA(this.namespaces,n),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,i]=this.validateChain(e),n=this.getProvider(r);n.name===a9?n.setDefaultChain(`${r}:${i}`,t):n.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(nl(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await a2.init({core:this.providerOpts.core,logger:this.providerOpts.logger||a4,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>nt(e)))];lM("client",this.client),lM("events",this.events),lM("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let i=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;i.push(...r)}),i}(e,this.session),r=lx(t),i=cP(cO({},lA(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new lZ({namespace:i});break;case"algorand":this.rpcProviders[e]=new l8({namespace:i});break;case"solana":this.rpcProviders[e]=new lQ({namespace:i});break;case"cosmos":this.rpcProviders[e]=new l3({namespace:i});break;case"polkadot":this.rpcProviders[e]=new lj({namespace:i});break;case"cip34":this.rpcProviders[e]=new ct({namespace:i});break;case"elrond":this.rpcProviders[e]=new cs({namespace:i});break;case"multiversx":this.rpcProviders[e]=new cc({namespace:i});break;case"near":this.rpcProviders[e]=new cp({namespace:i});break;case"tezos":this.rpcProviders[e]=new cy({namespace:i});break;default:this.rpcProviders[a9]?this.rpcProviders[a9].updateNamespace(i):this.rpcProviders[a9]=new cE({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:r,topic:i}=e;if(i!==(null==(t=this.session)?void 0:t.topic))return;let{event:n}=r;if("accountsChanged"===n.name){let e=n.data;e&&nl(e)&&this.events.emit("accountsChanged",e.map(lO))}else if("chainChanged"===n.name){let e=r.chainId,t=r.event.data,i=nt(e),n=lR(e)!==lR(t)?`${i}:${lR(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==(null==(r=this.session)?void 0:r.topic))return;let{namespaces:n}=t,s=null==(i=this.client)?void 0:i.session.get(e);this.session=cP(cO({},s),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",cP(cO({},na("USER_DISCONNECTED")),{data:e.topic})))}),this.on(le.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[a9]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:n}=e;this.optionalNamespaces=lA(t,r),this.sessionProperties=i,this.scopedProperties=n}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>nt(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let i=nt(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);let n=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:n,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var i,n;try{if(t===r)return;let s=null==(n=null==(i=this.session)?void 0:i.namespaces[e])?void 0:n.accounts;if(!s)return;let o=s.filter(e=>e.includes(`${r}:`)).map(lO);if(!nl(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;let r=this.namespaces[e]?e:`${e}:${t}`;this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]={chains:[],methods:[],events:[],defaultChain:t}}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;let i=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${a6}/${e}${i}`,t)}async getFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${a6}/${e}${r}`)}async deleteFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${a6}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(a6)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}var cT=r(29350);let cM={validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[r,i,n]=t;if(!r||!i||!n)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:i,address:n}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[r,i]=t;if(!r||!i)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:i}}};var cL=r(31698),cD=r(25620),cB=r(24373),cj=r(97576),c$=r(92943),cU=r(53722),cq=r(10913);let cH={convertEVMChainIdToCoinType(e){if(e>=2147483648)throw Error("Invalid chainId");return(2147483648|e)>>>0}};var cF=r(33091),cz=r(75466);let cW=(0,cU.sj)({suggestions:[],loading:!1}),cK=(0,cF.P)({state:cW,subscribe:e=>(0,cU.Ld)(cW,()=>e(cW)),subscribeKey:(e,t)=>(0,cq.VW)(cW,e,t),async resolveName(e){try{return await cB.L.lookupEnsName(e)}catch(e){throw Error(e?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await cB.L.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{cW.loading=!0,cW.suggestions=[];let t=await cB.L.getEnsNameSuggestions(e);return cW.suggestions=t.suggestions.map(e=>({...e,name:e.name}))||[],cW.suggestions}catch(e){throw Error(cK.parseEnsApiError(e,"Error fetching name suggestions"))}finally{cW.loading=!1}},async getNamesForAddress(e){try{if(!cD.R.state.activeCaipNetwork)return[];let t=c$.M.getEnsFromCacheForAddress(e);if(t)return t;let r=await cB.L.reverseLookupEnsName({address:e});return c$.M.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r}catch(e){throw Error(cK.parseEnsApiError(e,"Error fetching names for address"))}},async registerName(e){let t=cD.R.state.activeCaipNetwork;if(!t)throw Error("Network not found");let r=cj.N.state.address,s=i.ConnectorController.getAuthConnector();if(!r||!s)throw Error("Address or auth connector not found");cW.loading=!0;try{let i=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});cz.RouterController.pushTransactionStack({onCancel(){cz.RouterController.replace("RegisterAccountName")}});let s=await n.ConnectionController.signMessage(i);cW.loading=!1;let o=t.id;if(!o)throw Error("Network not found");let a=cH.convertEVMChainIdToCoinType(Number(o));await cB.L.registerEnsName({coinType:a,address:r,signature:s,message:i}),cj.N.setProfileName(e,t.chainNamespace),cz.RouterController.replace("RegisterAccountNameSuccess")}catch(r){let t=cK.parseEnsApiError(r,`Error registering name ${e}`);throw cz.RouterController.replace("RegisterAccountName"),Error(t)}finally{cW.loading=!1}},validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError:(e,t)=>e?.reasons?.[0]?.description||t});var cV=r(8112),cG=r(15623),cZ=r(96424);let cJ={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},cY={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},cX={providers:cG.gy,selectedProvider:null,error:null,purchaseCurrency:cJ,paymentCurrency:cY,purchaseCurrencies:[cJ],paymentCurrencies:[],quotesLoading:!1},cQ=(0,cU.sj)(cX),c0=(0,cF.P)({state:cQ,subscribe:e=>(0,cU.Ld)(cQ,()=>e(cQ)),subscribeKey:(e,t)=>(0,cq.VW)(cQ,e,t),setSelectedProvider(e){if(e&&"meld"===e.name){let t=cD.R.state.activeChain===cT.b.CHAIN.SOLANA?"SOL":"USDC",r=cj.N.state.address??"",i=new URL(e.url);i.searchParams.append("publicKey",cG.a$),i.searchParams.append("destinationCurrencyCode",t),i.searchParams.append("walletAddress",r),i.searchParams.append("externalCustomerId",o.OptionsController.state.projectId),cQ.selectedProvider={...e,url:i.toString()}}else cQ.selectedProvider=e},setOnrampProviders(e){if(Array.isArray(e)&&e.every(e=>"string"==typeof e)){let t=cG.gy.filter(t=>e.includes(t.name));cQ.providers=t}else cQ.providers=[]},setPurchaseCurrency(e){cQ.purchaseCurrency=e},setPaymentCurrency(e){cQ.paymentCurrency=e},setPurchaseAmount(e){c0.state.purchaseAmount=e},setPaymentAmount(e){c0.state.paymentAmount=e},async getAvailableCurrencies(){let e=await cB.L.getOnrampOptions();cQ.purchaseCurrencies=e.purchaseCurrencies,cQ.paymentCurrencies=e.paymentCurrencies,cQ.paymentCurrency=e.paymentCurrencies[0]||cY,cQ.purchaseCurrency=e.purchaseCurrencies[0]||cJ,await cZ.ApiController.fetchCurrencyImages(e.paymentCurrencies.map(e=>e.id)),await cZ.ApiController.fetchTokenImages(e.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){cQ.quotesLoading=!0;try{let e=await cB.L.getOnrampQuote({purchaseCurrency:cQ.purchaseCurrency,paymentCurrency:cQ.paymentCurrency,amount:cQ.paymentAmount?.toString()||"0",network:cQ.purchaseCurrency?.symbol});return cQ.quotesLoading=!1,cQ.purchaseAmount=Number(e?.purchaseAmount.amount),e}catch(e){return cQ.error=e.message,cQ.quotesLoading=!1,null}finally{cQ.quotesLoading=!1}},resetState(){cQ.selectedProvider=null,cQ.error=null,cQ.purchaseCurrency=cJ,cQ.paymentCurrency=cY,cQ.purchaseCurrencies=[cJ],cQ.paymentCurrencies=[],cQ.paymentAmount=void 0,cQ.purchaseAmount=void 0,cQ.quotesLoading=!1}});var c1=r(8272),c2=r(87163),c3=r(96501),c5=r(4860),c4=r(99600),c6=r(44415),c8=r(81665),c9=r(31283);function c7(e,t){return i.ConnectorController.getConnectorId(e)===t}r(43609),r(62357);var ue=r(94579),ut=r(61217);new AbortController;let ur={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};var ui=r(35148),un=r(25896),us=r(62616);let uo={ConnectorExplorerIds:{[cT.b.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[cT.b.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[cT.b.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[cT.b.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[cT.b.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[us.b.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[us.b.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[us.b.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[us.b.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[us.b.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[us.b.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[us.b.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[us.b.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[us.b.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[us.b.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[us.b.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[cT.b.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[cT.b.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[cT.b.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[cT.b.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[cT.b.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[cT.b.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[cT.b.CONNECTOR_ID.INJECTED]:"Browser Wallet",[cT.b.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[cT.b.CONNECTOR_ID.COINBASE]:"Coinbase",[cT.b.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[cT.b.CONNECTOR_ID.LEDGER]:"Ledger",[cT.b.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[cT.b.CONNECTOR_ID.INJECTED]:"INJECTED",[cT.b.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[cT.b.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[cT.b.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};function ua(e,t){let r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}let ul=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],uc={extendRpcUrlWithProjectId(e,t){let r=!1;try{r="rpc.walletconnect.org"===new URL(e).host}catch(e){r=!1}if(r){let r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:cT.b.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${cT.b.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){let i=e.rpcUrls?.default?.http?.[0];return ul.includes(t)?ua(t,r):i||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:i}){let n=this.getChainNamespace(e),s=this.getCaipNetworkId(e),o=e.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(e,s,r),l=e?.rpcUrls?.chainDefault?.http?.[0]||o,c=i?.[s]?.map(e=>e.url)||[],u=[...c,a],h=[...c];return l&&!h.includes(l)&&h.push(l),{...e,chainNamespace:n,caipNetworkId:s,assets:{imageId:uo.NetworkImageIds[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:i})=>e.map(e=>uc.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:i,projectId:r})),getViemTransport(e,t,r){let i=[];return r?.forEach(e=>{i.push(ui.d(e.url,e.config))}),ul.includes(e.caipNetworkId)&&i.push((0,ui.d)(ua(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach(e=>{i.push(ui.d(e))}),(0,un.tv)(i)},extendWagmiTransports(e,t,r){if(ul.includes(e.caipNetworkId)){let i=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return(0,un.tv)([r,(0,ui.d)(i)])}return r},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:cT.b.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){let t=c$.M.getActiveCaipNetworkId(),r=cD.R.getAllRequestedCaipNetworks(),i=Array.from(cD.R.state.chains?.keys()||[]),n=t?.split(":")[0],s=!!n&&i.includes(n),o=r?.find(e=>e.caipNetworkId===t);return s&&!o&&t?this.getUnsupportedNetwork(t):o||e||r?.[0]}};var uu=r(38413);let uh={createLogger(e,t="error"){let r=(0,R.jI)({level:t}),{logger:i}=(0,R.Rt)({opts:r});return i.error=(...t)=>{for(let r of t)if(r instanceof Error){e(r,...t);return}e(void 0,...t)},i}},ud={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},up=(0,cU.sj)({providers:{...ud},providerIds:{...ud}}),uf={state:up,subscribeKey:(e,t)=>(0,cq.VW)(up,e,t),subscribe:e=>(0,cU.Ld)(up,()=>{e(up)}),subscribeProviders:e=>(0,cU.Ld)(up.providers,()=>e(up.providers)),setProvider(e,t){t&&(up.providers[e]=(0,cU.iH)(t))},getProvider:e=>up.providers[e],setProviderId(e,t){t&&(up.providerIds[e]=t)},getProviderId(e){if(e)return up.providerIds[e]},reset(){up.providers={...ud},up.providerIds={...ud}},resetChain(e){up.providers[e]=void 0,up.providerIds[e]=void 0}};var ug=r(21693);let um={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function uy(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}let uv=uy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),ub=uy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});uy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),uy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),uy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});let uw={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},uE={getMethodsByChainNamespace:e=>uw[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};let r={...e},i=new Set;if(t.methods&&Object.keys(t.methods).forEach(e=>i.add(e)),t.chains&&Object.keys(t.chains).forEach(e=>i.add(e)),t.events&&Object.keys(t.events).forEach(e=>i.add(e)),t.rpcMap&&Object.keys(t.rpcMap).forEach(e=>{let[t]=e.split(":");t&&i.add(t)}),i.forEach(e=>{r[e]||(r[e]=this.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(([e,t])=>{r[e]&&(r[e].methods=t)}),t.chains&&Object.entries(t.chains).forEach(([e,t])=>{r[e]&&(r[e].chains=t)}),t.events&&Object.entries(t.events).forEach(([e,t])=>{r[e]&&(r[e].events=t)}),t.rpcMap){let e=new Set;Object.entries(t.rpcMap).forEach(([t,i])=>{let[n,s]=t.split(":");n&&s&&r[n]&&(r[n].rpcMap||(r[n].rpcMap={}),e.has(n)||(r[n].rpcMap={},e.add(n)),r[n].rpcMap[s]=i)})}return r},createNamespaces(e,t){let r=e.reduce((e,t)=>{let{id:r,chainNamespace:i,rpcUrls:n}=t,s=n.default.http[0];e[i]||(e[i]=this.createDefaultNamespace(i));let o=`${i}:${r}`,a=e[i];switch(a.chains.push(o),o){case uv.caipNetworkId:a.chains.push(uv.deprecatedCaipNetworkId);break;case ub.caipNetworkId:a.chains.push(ub.deprecatedCaipNetworkId)}return a?.rpcMap&&s&&(a.rpcMap[r]=s),e},{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{let t=await cK.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap(e=>{let t=e.chains||[],r=e.accounts.map(e=>{let[t,r]=e.split(":");return`${t}:${r}`});return Array.from(new Set([...t,...r]))}),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event,isOriginAllowed(e,t,r){for(let i of[...t,...r])if(i.includes("*")){let t=i.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");if(RegExp(`^${t.replace(/\\\*/gu,".*")}$`,"u").test(e))return!0}else try{if(new URL(i).origin===e)return!0}catch(t){if(i===e)return!0}return!1}};class u_{constructor({provider:e,namespace:t}){this.id=cT.b.CONNECTOR_ID.WALLET_CONNECT,this.name=uo.ConnectorNamesMap[cT.b.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=uo.ConnectorImageIds[cT.b.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=cD.R.getCaipNetworks.bind(cD.R),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let e=this.getCaipNetworks(),t=o.OptionsController.state.universalProviderConfigOverride,r=uE.createNamespaces(e,t);await this.provider.connect({optionalNamespaces:r})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(e=>e.caipNetworkId);return c4.w.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:uC})}}let uC=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class uS{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=e=>cD.R.getCaipNetworks(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:cT.b.CONNECTOR_ID.AUTH,type:"AUTH",name:cT.b.CONNECTOR_NAMES.AUTH,provider:e,imageId:uo.ConnectorImageIds[cT.b.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(e=>!t.has(e.id)&&(t.add(e.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){cj.N.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let r=this.eventListeners.get(e);r&&r.forEach(e=>e(t))}async connectWalletConnect(e){let t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:r}=e;if(!e.provider)return;let i="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"===r){i.setDefaultChain(t.caipNetworkId);return}if(i&&"AUTH"===r){let e=cj.N.state.preferredAccountTypes?.[t.chainNamespace];await i.switchNetwork(t.caipNetworkId);let r=await i.getUser({chainId:t.caipNetworkId,preferredAccountType:e});this.emit("switchNetwork",r)}}getWalletConnectConnector(){let e=this.connectors.find(e=>e instanceof u_);if(!e)throw Error("WalletConnectConnector not found");return e}}class uI extends uS{setUniversalProvider(e){this.addConnector(new u_({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{let e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let t=this.provider;return Promise.resolve({accounts:(t?.session?.namespaces?.[e]?.accounts?.map(e=>{let[,,t]=e.split(":");return t}).filter((e,t,r)=>r.indexOf(e)===t)||[]).map(t=>s.j.createAccount(e,t,"bip122"===e?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&cG.bq.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(cj.N.state.balanceLoading&&e.chainId===cD.R.state.activeCaipNetwork?.id)return{balance:cj.N.state.balance||"0.00",symbol:cj.N.state.balanceSymbol||""};let t=(await cj.N.fetchTokenBalance()).find(t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:r,address:i}=e;if(!t)throw Error("UniversalAdapter:signMessage - provider is undefined");return{signature:cD.R.state.activeCaipNetwork?.chainNamespace===cT.b.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:ea.encode(new TextEncoder().encode(r)),pubkey:i}},cD.R.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[r,i]},cD.R.state.activeCaipNetwork?.caipNetworkId)}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===cT.b.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:ug.NC(t.id)}]})}catch(e){if(e.code===um.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||e.code===um.ERROR_INVALID_CHAIN_ID||e.code===um.ERROR_CODE_DEFAULT||e?.data?.originalError?.code===um.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:ug.NC(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch(e){throw Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){let e=this.connectors.find(e=>"WALLET_CONNECT"===e.type);return e?.provider}}let ux=["email","socials","swaps","onramp","activity","reownBranding"],uA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;let t=e.config;return!!e.isEnabled&&t.includes("email")},processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.email:!!e},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;let t=e.config;return!!e.isEnabled&&t.length>0&&t.filter(e=>"email"!==e)},processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.socials:"boolean"==typeof e?!!e&&cG.bq.DEFAULT_REMOTE_FEATURES.socials:e},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;let t=e.config;return!!e.isEnabled&&t.length>0&&t},processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.swaps:"boolean"==typeof e?!!e&&cG.bq.DEFAULT_REMOTE_FEATURES.swaps:e},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>{if(!e?.config)return!1;let t=e.config;return!!e.isEnabled&&t.length>0&&t},processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.onramp:"boolean"==typeof e?!!e&&cG.bq.DEFAULT_REMOTE_FEATURES.onramp:e},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:e=>!!e.isEnabled,processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.activity:!!e},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:e=>!!e.isEnabled,processFallback:e=>void 0===e?cG.bq.DEFAULT_REMOTE_FEATURES.reownBranding:!!e}},uk={localSettingsOverridden:new Set,getApiConfig:(e,t)=>t?.find(t=>t.id===e),addWarning(e,t){if(void 0!==e){let e=uA[t],r=e.isLegacy?`"features.${e.localFeatureName}" (now "${t}")`:`"features.${t}"`;this.localSettingsOverridden.add(r)}},processFeature(e,t,r,i,n){let s=uA[e],o=t[s.localFeatureName];if(n&&!s.isAvailableOnBasic)return!1;if(i){let t=this.getApiConfig(s.apiFeatureName,r);return t?.config===null?this.processFallbackFeature(e,o):!!t?.config&&(void 0!==o&&this.addWarning(o,e),this.processApiFeature(e,t))}return this.processFallbackFeature(e,o)},processApiFeature:(e,t)=>uA[e].processApi(t),processFallbackFeature:(e,t)=>uA[e].processFallback(t),async fetchRemoteFeatures(e){let t=e.basic??!1,r=e.features||{};this.localSettingsOverridden.clear();let i=null,n=!1;try{n=null!=(i=await cZ.ApiController.fetchProjectConfig())}catch(e){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",e)}let s=n&&!t?cG.bq.DEFAULT_REMOTE_FEATURES:cG.bq.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(let e of ux){let o=this.processFeature(e,r,i,n,t);Object.assign(s,{[e]:o})}}catch(e){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",e),cG.bq.DEFAULT_REMOTE_FEATURES}if(n&&this.localSettingsOverridden.size>0){let e=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;c1.AlertController.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${e}`},"warning")}return s}};class uO{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){let r=cD.R.getNetworkData(e)?.requestedCaipNetworks?.find(e=>e.id===t);if(r)return r;let i=cD.R.getNetworkData(e)?.caipNetwork;if(i)return i;let n=cD.R.getRequestedCaipNetworks(e);return n.filter(t=>t.chainNamespace===e)?.[0]}return cD.R.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>cD.R.getCaipNetworks(e),this.getActiveChainNamespace=()=>cD.R.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{cD.R.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>cD.R.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>cD.R.state.activeChain!==e&&e?cD.R.getAccountProp("caipAddress",e):cD.R.state.activeCaipAddress,this.setClientId=e=>{cB.L.setClientId(e)},this.getProvider=e=>uf.getProvider(e),this.getProviderType=e=>uf.getProviderId(e),this.getPreferredAccountType=e=>cj.N.state.preferredAccountTypes?.[e],this.setCaipAddress=(e,t)=>{cj.N.setCaipAddress(e,t),e&&o.OptionsController.state.enableEmbedded&&this.close()},this.setBalance=(e,t,r)=>{cj.N.setBalance(e,t,r)},this.setProfileName=(e,t)=>{cj.N.setProfileName(e,t)},this.setProfileImage=(e,t)=>{cj.N.setProfileImage(e,t)},this.setUser=(e,t)=>{cj.N.setUser(e,t)},this.resetAccount=e=>{cj.N.resetAccount(e)},this.setCaipNetwork=e=>{cD.R.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{cD.R.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{cj.N.setAllAccounts(e,t),o.OptionsController.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{cj.N.setStatus(e,t),i.ConnectorController.isConnected()?c$.M.setConnectionStatus("connected"):c$.M.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>cD.R.getAccountProp("address",e),this.setConnectors=e=>{let t=[...i.ConnectorController.state.allConnectors,...e];i.ConnectorController.setConnectors(t)},this.setConnections=(e,t)=>{n.ConnectionController.setConnections(e,t)},this.fetchIdentity=e=>cB.L.fetchIdentity(e),this.getReownName=e=>cK.getNamesForAddress(e),this.getConnectors=()=>i.ConnectorController.getConnectors(),this.getConnectorImage=e=>cV.f.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{let r=uf.getProviderId(t),i=e?{...e,type:r}:void 0;cj.N.setConnectedWalletInfo(i,t)},this.getIsConnectedState=()=>!!cD.R.state.activeCaipAddress,this.addAddressLabel=(e,t,r)=>{cj.N.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{cj.N.removeAddressLabel(e,t)},this.getAddress=e=>cD.R.state.activeChain!==e&&e?cD.R.getAccountProp("address",e):cj.N.state.address,this.setApprovedCaipNetworksData=e=>cD.R.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{cD.R.resetNetwork(e)},this.addConnector=e=>{i.ConnectorController.addConnector(e)},this.resetWcConnection=()=>{n.ConnectionController.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{cj.N.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{cj.N.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{cD.R.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{cj.N.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{o.OptionsController.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{this.isOpen()?this.isTransactionStackEmpty()||this.redirect("ApproveTransaction"):this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,t){let r=e?.map(e=>e.namespace).filter(e=>!!e);if(r?.length)return[...new Set(r)];let i=t?.map(e=>e.chainNamespace);return[...new Set(i)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await uk.fetchRemoteFeatures(e),o.OptionsController.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&c0.setOnrampProviders(this.remoteFeatures.onramp),(o.OptionsController.state.remoteFeatures?.email||Array.isArray(o.OptionsController.state.remoteFeatures?.socials)&&o.OptionsController.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){let e=await cZ.ApiController.fetchAllowedOrigins();if(e&&s.j.isClient()){let t=window.location.origin;uE.isOriginAllowed(t,e,um.DEFAULT_ALLOWED_ANCESTORS)||c1.AlertController.open(ur.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else c1.AlertController.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,c2.X.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(e=>e.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&c3.ThemeController.setThemeMode(e.themeMode),e.themeVariables&&c3.ThemeController.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw Error("ConnectionControllerClient and NetworkControllerClient must be set");cD.R.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&cD.R.setActiveCaipNetwork(t)}initializeConnectionController(e){n.ConnectionController.setWcBasic(e.basic??!1)}initializeConnectorController(){i.ConnectorController.initialize(this.chainNamespaces)}initializeProjectSettings(e){o.OptionsController.setProjectId(e.projectId),o.OptionsController.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){o.OptionsController.setDebug(!1!==e.debug),o.OptionsController.setEnableWalletConnect(!1!==e.enableWalletConnect),o.OptionsController.setEnableWalletGuide(!1!==e.enableWalletGuide),o.OptionsController.setEnableWallets(!1!==e.enableWallets),o.OptionsController.setEIP6963Enabled(!1!==e.enableEIP6963),o.OptionsController.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),o.OptionsController.setEnableAuthLogger(!1!==e.enableAuthLogger),o.OptionsController.setCustomRpcUrls(e.customRpcUrls),o.OptionsController.setEnableEmbedded(e.enableEmbedded),o.OptionsController.setAllWallets(e.allWallets),o.OptionsController.setIncludeWalletIds(e.includeWalletIds),o.OptionsController.setExcludeWalletIds(e.excludeWalletIds),o.OptionsController.setFeaturedWalletIds(e.featuredWalletIds),o.OptionsController.setTokens(e.tokens),o.OptionsController.setTermsConditionsUrl(e.termsConditionsUrl),o.OptionsController.setPrivacyPolicyUrl(e.privacyPolicyUrl),o.OptionsController.setCustomWallets(e.customWallets),o.OptionsController.setFeatures(e.features),o.OptionsController.setAllowUnsupportedChain(e.allowUnsupportedChain),o.OptionsController.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),o.OptionsController.setPreferUniversalLinks(e.experimental_preferUniversalLinks),o.OptionsController.setDefaultAccountTypes(e.defaultAccountTypes);let t=c$.M.getPreferredAccountTypes()||{},r={...o.OptionsController.state.defaultAccountTypes,...t};cj.N.setPreferredAccountTypes(r);let i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),o.OptionsController.setMetadata(e.metadata),o.OptionsController.setDisableAppend(e.disableAppend),o.OptionsController.setEnableEmbedded(e.enableEmbedded),o.OptionsController.setSIWX(e.siwx),!e.projectId){c1.AlertController.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(e=>e.namespace===cT.b.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw Error("Cannot set both `siweConfig` and `siwx` options");o.OptionsController.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return s.j.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let r=uc.getUnsupportedNetwork(`${t}:${e}`);cD.R.setActiveCaipNetwork(r)}}getDefaultNetwork(){return uc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return uc.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return uc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(t=>t.id===e.defaultNetwork?.id);return t?uc.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{let t=this.getAdapter(e),r=uf.getProvider(e),n=uf.getProviderId(e),{caipAddress:s}=cD.R.getAccountData(e)||{};this.setLoading(!0,e),s&&t?.disconnect&&await t.disconnect({provider:r,providerType:n}),c$.M.removeConnectedNamespace(e),uf.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),i.ConnectorController.removeConnectorId(e),cD.R.resetAccount(e),cD.R.resetNetwork(e),this.setLoading(!1,e)}catch(t){throw this.setLoading(!1,e),Error(`Failed to disconnect chain ${e}: ${t.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=cD.R.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw Error("Adapter not found");let n=await t.connectWalletConnect(r);this.close(),this.setClientId(n?.clientId||null),c$.M.setConnectedNamespaces([...cD.R.state.chains.keys()]),this.chainNamespaces.forEach(e=>{i.ConnectorController.setConnectorId(us.b.CONNECTOR_TYPE_WALLET_CONNECT,e)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:i,chain:n,caipNetwork:s,socialUri:o})=>{let a=cD.R.state.activeChain,l=n||a,c=this.getAdapter(l);if(n&&n!==a&&!s){let e=this.getCaipNetworks().find(e=>e.chainNamespace===n);e&&this.setCaipNetwork(e)}if(!c)throw Error("Adapter not found");let u=this.getCaipNetwork(l),h=await c.connect({id:e,info:t,type:r,provider:i,socialUri:o,chainId:s?.id||u?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]||u?.rpcUrls?.default?.http?.[0]});if(!h)return;c$.M.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});let d=cj.N.state.allAccounts,{accounts:p}=d?.length>0?{accounts:[...d]}:await c.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:t,type:r,provider:i})=>{let n=cD.R.state.activeChain,s=this.getAdapter(n);s?.reconnect&&(await s?.reconnect({id:e,info:t,type:r,provider:i,chainId:this.getCaipNetwork()?.id}),c$.M.addConnectedNamespace(n),this.syncConnectedWalletInfo(n))},disconnect:async e=>{let t=function(e){let t=Array.from(cD.R.state.chains.keys()),r=[];return e?(r.push([e,cD.R.state.chains.get(e)]),c7(e,cT.b.CONNECTOR_ID.WALLET_CONNECT)?t.forEach(t=>{t!==e&&c7(t,cT.b.CONNECTOR_ID.WALLET_CONNECT)&&r.push([t,cD.R.state.chains.get(t)])}):c7(e,cT.b.CONNECTOR_ID.AUTH)&&t.forEach(t=>{t!==e&&c7(t,cT.b.CONNECTOR_ID.AUTH)&&r.push([t,cD.R.state.chains.get(t)])})):r=Array.from(cD.R.state.chains.entries()),r}(e);try{let r=await Promise.allSettled(t.map(async([e])=>this.disconnectNamespace(e)));c5.S.resetSend(),n.ConnectionController.resetWcConnection(),await c4.w.clearSessions(),i.ConnectorController.setFilterByNamespace(void 0);let s=r.filter(e=>"rejected"===e.status);if(s.length>0)throw Error(s.map(e=>e.reason.message).join(", "));c$.M.deleteConnectedSocialProvider(),c2.X.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(e){throw Error(`Failed to disconnect chains: ${e.message}`)}},checkInstalled:e=>e?e.some(e=>!!window.ethereum?.[String(e)]):!!window.ethereum,signMessage:async e=>{let t=this.getAdapter(cD.R.state.activeChain),r=await t?.signMessage({message:e,address:cj.N.state.address,provider:uf.getProvider(cD.R.state.activeChain)});return r?.signature||""},sendTransaction:async e=>{let t=e.chainNamespace;if(cG.bq.SEND_SUPPORTED_NAMESPACES.includes(t)){let r=this.getAdapter(cD.R.state.activeChain),i=uf.getProvider(t),n=await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i});return n?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===cT.b.CHAIN.EVM){let t=this.getAdapter(cD.R.state.activeChain),r=uf.getProvider(cD.R.state.activeChain),i=this.getCaipNetwork();if(!i)throw Error("CaipNetwork is undefined");let n=await t?.estimateGas({...e,provider:r,caipNetwork:i});return n?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.syncIdentity({address:cj.N.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:cD.R.state.activeChain}),cj.N.state.profileImage||!1),getEnsAddress:async e=>await uE.resolveReownName(e),writeContract:async e=>{let t=this.getAdapter(cD.R.state.activeChain),r=this.getCaipNetwork(),i=this.getCaipAddress(),n=uf.getProvider(cD.R.state.activeChain);if(!r||!i)throw Error("CaipNetwork or CaipAddress is undefined");let s=await t?.writeContract({...e,caipNetwork:r,provider:n,caipAddress:i});return s?.hash},parseUnits:(e,t)=>{let r=this.getAdapter(cD.R.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{let r=this.getAdapter(cD.R.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{let t=this.getAdapter(cD.R.state.activeChain);return await t?.getCapabilities(e)},grantPermissions:async e=>{let t=this.getAdapter(cD.R.state.activeChain);return await t?.grantPermissions(e)},revokePermissions:async e=>{let t=this.getAdapter(cD.R.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{let t=this.getAdapter(cD.R.state.activeChain);return await t?.walletGetAssets(e)??{}},updateBalance:e=>{let t=this.getCaipNetwork(e);t&&cj.N.state.address&&this.updateNativeBalance(cj.N.state.address,t?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},n.ConnectionController.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(uf.getProviderId(cD.R.state.activeChain)===us.b.CONNECTOR_TYPE_WALLET_CONNECT){let e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let r=uf.getProvider(t),i=uf.getProviderId(t);if(e.chainNamespace===cD.R.state.activeChain){let n=this.getAdapter(t);await n?.switchNetwork({caipNetwork:e,provider:r,providerType:i})}else if(this.setCaipNetwork(e),i===us.b.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(e=>{let t=e.chains||[],r=e.accounts.map(e=>{let{chainId:t,chainNamespace:r}=cM.parseCaipAddress(e);return`${r}:${t}`});return Array.from(new Set([...t,...r]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{let i=e?.find(e=>e.namespace===r);return i?(i.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=i):t[r]=new uI({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){let t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let r=c$.M.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):("disconnected"===r&&c$.M.clearAddressCache(),this.setStatus(r,e)),t.on("switchNetwork",({address:t,chainId:r})=>{let i=this.getCaipNetworks().find(e=>e.id===r||e.caipNetworkId===r),n=cD.R.state.activeChain===e,s=cD.R.getAccountProp("address",e);if(i){let r=n&&t?t:s;r&&this.syncAccount({address:r,chainId:i.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("connections",t=>{this.setConnections(t,e)}),t.on("pendingTransactions",()=>{let e=cj.N.state.address,t=cD.R.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)}),t.on("accountChanged",({address:t,chainId:r})=>{let i=cD.R.state.activeChain===e;i&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):i&&cD.R.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:cD.R.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===cT.b.CHAIN.EVM&&s.j.isSafeApp()&&i.ConnectorController.setConnectorId(cT.b.CONNECTOR_ID.SAFE,e);let t=i.ConnectorController.getConnectorId(e);switch(this.setStatus("connecting",e),t){case cT.b.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case cT.b.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),r=i.ConnectorController.getConnectorId(e),n=this.getCaipNetwork(e),o=i.ConnectorController.getConnectors(e).find(e=>e.id===r);try{if(!t||!o)throw Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw Error("CaipNetwork not found");let r=await t?.syncConnection({namespace:e,id:o.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});if(r){let i=await t?.getAccounts({namespace:e,id:o.id});i&&i.accounts.length>0?this.setAllAccounts(i.accounts,e):this.setAllAccounts([s.j.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async e=>{let t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],n=cD.R.state.activeCaipNetwork?.id,s=r.find(e=>{let{chainId:t}=cM.parseCaipAddress(e);return t===n?.toString()})||r[0];if(s){let r=cM.validateCaipAddress(s),{chainId:n,address:o}=cM.parseCaipAddress(r);if(uf.setProviderId(e,us.b.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&cD.R.state.activeCaipNetwork&&t?.namespace!==cT.b.CHAIN.EVM){let r=t?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:cD.R.state.activeCaipNetwork});uf.setProvider(e,r)}else uf.setProvider(e,this.universalProvider);i.ConnectorController.setConnectorId(cT.b.CONNECTOR_ID.WALLET_CONNECT,e),c$.M.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:o,chainId:n,chainNamespace:e})}else this.setStatus("disconnected",e);this.syncConnectedWalletInfo(e),await cD.R.setApprovedCaipNetworksData(e)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(e=>{let{address:t}=cM.parseCaipAddress(e);return t}).filter((e,t,r)=>r.indexOf(e)===t);t&&this.setAllAccounts(t.map(t=>s.j.createAccount(e,t,"bip122"===e?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:n}){uf.setProviderId(n,e),uf.setProvider(n,t),i.ConnectorController.setConnectorId(r,n)}async syncAllAccounts(e){let t=i.ConnectorController.getConnectorId(e);if(!t)return;let r=this.getAdapter(e),n=await r?.getAccounts({namespace:e,id:t});n&&n.accounts.length>0&&this.setAllAccounts(n.accounts,e)}async syncAccount(e){let t=e.chainNamespace===cD.R.state.activeChain,r=cD.R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:n,chainNamespace:s}=e,{chainId:a}=c$.M.getActiveNetworkProps(),l=n||a,c=cD.R.state.activeCaipNetwork?.name===cT.b.UNSUPPORTED_NETWORK_NAME,u=cD.R.getNetworkProp("supportsAllNetworks",s);if(this.setStatus("connected",s),(!c||u)&&l){let e=this.getCaipNetworks().find(e=>e.id.toString()===l.toString()),n=this.getCaipNetworks().find(e=>e.chainNamespace===s);if(!u&&!e&&!n){let t=this.getApprovedCaipNetworkIds()||[],r=t.find(e=>cM.parseCaipNetworkId(e)?.chainId===l.toString()),i=t.find(e=>cM.parseCaipNetworkId(e)?.chainNamespace===s);e=this.getCaipNetworks().find(e=>e.caipNetworkId===r),n=this.getCaipNetworks().find(e=>e.caipNetworkId===i||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===i)}let a=e||n;a?.chainNamespace===cD.R.state.activeChain?o.OptionsController.state.enableNetworkSwitch&&!o.OptionsController.state.allowUnsupportedChain&&cD.R.state.activeCaipNetwork?.name===cT.b.UNSUPPORTED_NETWORK_NAME?cD.R.showUnsupportedChainUI():this.setCaipNetwork(a):!t&&r&&this.setCaipNetworkOfNamespace(r,s),this.syncConnectedWalletInfo(s),uu.g.isLowerCaseMatch(i,cj.N.state.address)||this.syncAccountInfo(i,a?.id,s),t?await this.syncBalance({address:i,chainId:a?.id,chainNamespace:s}):await this.syncBalance({address:i,chainId:r?.id,chainNamespace:s})}}async syncAccountInfo(e,t,r){let i=this.getCaipAddress(r),n=t||i?.split(":")[1];if(!n)return;let s=`${r}:${n}:${e}`;this.setCaipAddress(s,r),await this.syncIdentity({address:e,chainId:n,chainNamespace:r})}async syncReownName(e,t){try{let r=await this.getReownName(e);if(r[0]){let e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=i.ConnectorController.getConnectorId(e),r=uf.getProviderId(e);if(r===us.b.CONNECTOR_TYPE_ANNOUNCED||r===us.b.CONNECTOR_TYPE_INJECTED){if(t){let r=this.getConnectors().find(e=>e.id===t);if(r){let{info:t,name:i,imageUrl:n}=r,s=n||this.getConnectorImage(r);this.setConnectedWalletInfo({name:i,icon:s,...t},e)}}}else if(r===us.b.CONNECTOR_TYPE_WALLET_CONNECT){let t=uf.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t&&t===cT.b.CONNECTOR_ID.COINBASE){let t=this.getConnectors().find(e=>e.id===cT.b.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}}async syncBalance(e){cL.p.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(t=>t.id.toString()===e.chainId?.toString())&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,t,r){let i=this.getAdapter(r),n=cD.R.getCaipNetworkByNamespace(r,t);if(i){let s=await i.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});return this.setBalance(s.balance,s.symbol,r),s}}async initializeUniversalAdapter(){let e=uh.createLogger((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};o.OptionsController.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await cN.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{n.ConnectionController.setUri(e)}),this.universalProvider.on("connect",n.ConnectionController.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),n.ConnectionController.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(t=>t.id==e),r=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}r?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(uE.isSessionEventData(e)){let{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&s.j.isCaipAddress(r[0])&&this.syncAccount(cM.parseCaipAddress(r[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&s.j.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){c2.X.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let[t,r]=Object.entries(ur.UniversalProviderErrors).find(([,{message:t}])=>e.message.includes(t))??[],{message:i,alertErrorKey:n}=r??{};if(t&&i&&!this.reportedAlertErrors[t]){let e=ur.ALERT_ERRORS[n];e&&(c1.AlertController.open(e,"error"),this.reportedAlertErrors[t]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;t&&(this.createClients(),e.namespace=t,e.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=e))}async open(e){return(await this.injectModalUi(),e?.uri&&n.ConnectionController.setUri(e.uri),e?.arguments&&e?.view==="Swap")?c6.I.open({...e,data:{swap:e.arguments}}):c6.I.open(e)}async close(){await this.injectModalUi(),c6.I.close()}setLoading(e,t){c6.I.setLoading(e,t)}async disconnect(e){await n.ConnectionController.disconnect(e)}getSIWX(){return o.OptionsController.state.siwx}getError(){return""}getChainId(){return cD.R.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(t=>t.id===e.id);if(!t){c1.AlertController.open(ur.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await cD.R.switchActiveNetwork(t)}getWalletProvider(){return cD.R.state.activeChain?uf.state.providers[cD.R.state.activeChain]:null}getWalletProviderType(){return uf.getProviderId(cD.R.state.activeChain)}subscribeProviders(e){return uf.subscribeProviders(e)}getThemeMode(){return c3.ThemeController.state.themeMode}getThemeVariables(){return c3.ThemeController.state.themeVariables}setThemeMode(e){c3.ThemeController.setThemeMode(e),(0,ut.Hs)(c3.ThemeController.state.themeMode)}setTermsConditionsUrl(e){o.OptionsController.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){o.OptionsController.setPrivacyPolicyUrl(e)}setThemeVariables(e){c3.ThemeController.setThemeVariables(e),(0,ut.R)(c3.ThemeController.state.themeVariables)}subscribeTheme(e){return c3.ThemeController.subscribe(e)}getWalletInfo(){return cj.N.state.connectedWalletInfo}getAccount(e){let t=i.ConnectorController.getAuthConnector(e),r=cD.R.getAccountData(e),n=cD.R.state.activeChain,o=c$.M.getConnectedConnectorId(e||n);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:s.j.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:t&&o===cT.b.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:c$.M.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||n],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let r=()=>{let r=this.getAccount(t);r&&e(r)};t?cD.R.subscribeChainProp("accountState",r,t):cD.R.subscribe(r),i.ConnectorController.subscribe(r)}subscribeNetwork(e){return cD.R.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return cj.N.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){cj.N.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){cD.R.subscribeKey("activeCaipNetwork",e)}getState(){return c8.I.state}subscribeState(e){return c8.I.subscribe(e)}showErrorMessage(e){c9.SnackController.showError(e)}showSuccessMessage(e){c9.SnackController.showSuccess(e)}getEvent(){return{...c2.X.state}}subscribeEvents(e){return c2.X.subscribe(e)}replace(e){cz.RouterController.replace(e)}redirect(e){cz.RouterController.push(e)}popTransactionStack(e){cz.RouterController.popTransactionStack(e)}isOpen(){return c6.I.state.open}isTransactionStackEmpty(){return 0===cz.RouterController.state.transactionStack.length}static getInstance(){return this.instance}updateFeatures(e){o.OptionsController.setFeatures(e)}updateRemoteFeatures(e){o.OptionsController.setRemoteFeatures(e)}updateOptions(e){let t={...o.OptionsController.state||{},...e};o.OptionsController.setOptions(t)}setConnectMethodsOrder(e){o.OptionsController.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){o.OptionsController.setWalletFeaturesOrder(e)}setCollapseWallets(e){o.OptionsController.setCollapseWallets(e)}setSocialsOrder(e){o.OptionsController.setSocialsOrder(e)}getConnectMethodsOrder(){return ue.J.getConnectOrderMethod(o.OptionsController.state.features,i.ConnectorController.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);let r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(e=>e.id===r.id)||cD.R.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(e=>e.id===t)&&cD.R.removeNetwork(e,t)}}let uP=!1;class uR extends uO{async open(e){i.ConnectorController.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&n.ConnectionController.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!uP&&s.j.isClient()){if(await r.e(736).then(r.bind(r,16603)),await r.e(736).then(r.bind(r,13315)),!document.querySelector("w3m-modal")){let e=document.createElement("w3m-modal");o.OptionsController.state.disableAppend||o.OptionsController.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}uP=!0}}}function uN(e){return new uR({...e,basic:!0,sdkVersion:"html-core-1.7.8"})}},81435:function(e,t,r){"use strict";r.d(t,{secp256k1:function(){return ek}});var i={};r.r(i),r.d(i,{Fy:function(){return L},uw:function(){return b},gk:function(){return v},Dd:function(){return D},dQ:function(){return B},ci:function(){return E},bytesToNumberBE:function(){return A},ty:function(){return k},eV:function(){return N},n$:function(){return U},ql:function(){return R},hexToBytes:function(){return x},Z2:function(){return M},_t:function(){return y},H9:function(){return F},tL:function(){return O},S5:function(){return P},uz:function(){return _},FF:function(){return H}});var n=r(15248),s=r(86485);class o extends s.kb{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.GL)(this.buffer)}update(e){(0,n.$h)(this);let{view:t,buffer:r,blockLen:i}=this,o=(e=(0,s.O0)(e)).length;for(let n=0;n<o;){let a=Math.min(i-this.pos,o-n);if(a===i){let t=(0,s.GL)(e);for(;i<=o-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:o}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),o),this.process(r,0);let l=(0,s.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,h[e],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends o{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],i=(0,s.np)(t,7)^(0,s.np)(t,18)^t>>>3,n=(0,s.np)(r,17)^(0,s.np)(r,19)^r>>>10;c[e]=n+c[e-7]+i+c[e-16]|0}let{A:r,B:i,C:n,D:o,E:l,F:u,G:h,H:d}=this;for(let e=0;e<64;e++){var p,f,g,m;let t=d+((0,s.np)(l,6)^(0,s.np)(l,11)^(0,s.np)(l,25))+((p=l)&u^~p&h)+a[e]+c[e]|0,y=((0,s.np)(r,2)^(0,s.np)(r,13)^(0,s.np)(r,22))+((f=r)&(g=i)^f&(m=n)^g&m)|0;d=h,h=u,u=l,l=o+t|0,o=n,n=i,i=r,r=t+y|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,l=l+this.E|0,u=u+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(r,i,n,o,l,u,h,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let h=(0,s.hE)(()=>new u);class d extends s.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.z3)(e);let r=(0,s.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,n.$h)(this),this.iHash.update(e),this}digestInto(e){(0,n.$h)(this),(0,n.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let p=(e,t,r)=>new d(e,t).update(r).digest();p.create=(e,t)=>new d(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let f=BigInt(0),g=BigInt(1),m=BigInt(2);function y(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function v(e){if(!y(e))throw Error("Uint8Array expected")}function b(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let w=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function E(e){v(e);let t="";for(let r=0;r<e.length;r++)t+=w[e[r]];return t}function _(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function C(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?f:BigInt("0x"+e)}let S={_0:48,_9:57,A:65,F:70,a:97,f:102};function I(e){return e>=S._0&&e<=S._9?e-S._0:e>=S.A&&e<=S.F?e-(S.A-10):e>=S.a&&e<=S.f?e-(S.a-10):void 0}function x(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=I(e.charCodeAt(n)),s=I(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function A(e){return C(E(e))}function k(e){return v(e),C(E(Uint8Array.from(e).reverse()))}function O(e,t){return x(e.toString(16).padStart(2*t,"0"))}function P(e,t){return O(e,t).reverse()}function R(e,t,r){let i;if("string"==typeof t)try{i=x(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(y(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function N(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];v(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let T=e=>"bigint"==typeof e&&f<=e;function M(e,t,r){return T(e)&&T(t)&&T(r)&&t<=e&&e<r}function L(e,t,r,i){if(!M(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function D(e){let t;for(t=0;e>f;e>>=g,t+=1);return t}let B=e=>(m<<BigInt(e-1))-g,j=e=>new Uint8Array(e),$=e=>Uint8Array.from(e);function U(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=j(e),n=j(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=j())=>{n=a($([0]),e),i=a(),0!==e.length&&(n=a($([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return N(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let q={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||y(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function H(e,t,r={}){let i=(t,r,i)=>{let n=q[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function F(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let z=BigInt(0),W=BigInt(1),K=BigInt(2),V=BigInt(3),G=BigInt(4),Z=BigInt(5),J=BigInt(8);function Y(e,t){let r=e%t;return r>=z?r:t+r}function X(e,t,r){let i=e;for(;t-- >z;)i*=i,i%=r;return i}function Q(e,t){if(e===z)throw Error("invert: expected non-zero number");if(t<=z)throw Error("invert: expected positive modulus, got "+t);let r=Y(e,t),i=t,n=z,s=W,o=W,a=z;for(;r!==z;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==W)throw Error("invert: does not exist");return Y(n,t)}let ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function et(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function er(e,t,r=!1,i={}){let n;if(e<=z)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=et(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:B(s),ZERO:z,ONE:W,create:t=>Y(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return z<=t&&t<e},is0:e=>e===z,isOdd:e=>(e&W)===W,neg:t=>Y(-t,e),eql:(e,t)=>e===t,sqr:t=>Y(t*t,e),add:(t,r)=>Y(t+r,e),sub:(t,r)=>Y(t-r,e),mul:(t,r)=>Y(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<z)throw Error("invalid exponent, negatives unsupported");if(r===z)return e.ONE;if(r===W)return t;let i=e.ONE,n=t;for(;r>z;)r&W&&(i=e.mul(i,n)),n=e.sqr(n),r>>=W;return i})(a,e,t),div:(t,r)=>Y(t*Q(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Q(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%G===V){let t=(e+W)/G;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%J===Z){let t=(e-Z)/J;return function(e,r){let i=e.mul(r,K),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,K),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-W)/K;for(t=e-W,r=0;t%K===z;t/=K,r++);for(i=K;i<e&&function(e,t,r){if(t<z)throw Error("invalid exponent, negatives unsupported");if(r<=z)throw Error("invalid modulus");if(r===W)return z;let i=W;for(;t>z;)t&W&&(i=i*e%r),e=e*e%r,t>>=W;return i}(i,n,e)!==e-W;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+W)/G;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+W)/K;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,W<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?P(e,o):O(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?k(e):A(e)}});return Object.freeze(a)}function ei(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function en(e){let t=ei(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let es=BigInt(0),eo=BigInt(1);function ea(e,t){let r=t.negate();return e?r:t}function el(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ec(e,t){return el(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let eu=new WeakMap,eh=new WeakMap;function ed(e){return eh.get(e)||1}function ep(e){return H(e.Fp,ee.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),H(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...et(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ef(e){void 0!==e.lowS&&b("lowS",e.lowS),void 0!==e.prehash&&b("prehash",e.prehash)}let{bytesToNumberBE:eg,hexToBytes:em}=i;class ey extends Error{constructor(e=""){super(e)}}let ev={Err:ey,_tlv:{encode:(e,t)=>{let{Err:r}=ev;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=_(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?_(n.length/2|128):"";return _(e)+s+n+t},decode(e,t){let{Err:r}=ev,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=ev;if(e<eb)throw new t("integer: negative integers are not allowed");let r=_(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=ev;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return eg(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=ev,n="string"==typeof e?em(e):e;v(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=ev,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},eb=BigInt(0),ew=BigInt(1),eE=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let e_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eC=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eS=BigInt(1),eI=BigInt(2),ex=(e,t)=>(e+t/eI)/t,eA=er(e_,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=e*e*e%e_,c=l*l*e%e_,u=X(c,t,e_)*c%e_,h=X(u,t,e_)*c%e_,d=X(h,eI,e_)*l%e_,p=X(d,i,e_)*d%e_,f=X(p,n,e_)*p%e_,g=X(f,o,e_)*f%e_,m=X(g,a,e_)*g%e_,y=X(m,o,e_)*f%e_,v=X(y,t,e_)*c%e_,b=X(v,s,e_)*p%e_,w=X(b,r,e_)*l%e_,E=X(w,eI,e_);if(!eA.eql(eA.sqr(E),e))throw Error("Cannot find square root");return E}}),ek=function(e,t){let r=t=>(function(e){let t=function(e){let t=ep(e);return H(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return Y(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){var t;let r=function(e){let t=ep(e);H(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:i}=r,n=er(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let n=t.toAffine();return N(Uint8Array.from([4]),i.toBytes(n.x),i.toBytes(n.y))}),o=r.fromBytes||(e=>{let t=e.subarray(1);return{x:i.fromBytes(t.subarray(0,i.BYTES)),y:i.fromBytes(t.subarray(i.BYTES,2*i.BYTES))}});function a(e){let{a:t,b:n}=r,s=i.sqr(e),o=i.mul(s,e);return i.add(i.add(o,i.mul(e,t)),n)}if(!i.eql(i.sqr(r.Gy),a(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=r;if(i&&"bigint"!=typeof e){if(y(e)&&(e=E(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{t="bigint"==typeof e?e:A(R("private key",e,n))}catch(t){throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(t=Y(t,o)),L("private key",t,ew,o),t}function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let u=F((e,t)=>{let{px:r,py:n,pz:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),l=i.mul(n,t),c=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(c,i.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),h=F(e=>{if(e.is0()){if(r.allowInfinityPoint&&!i.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!i.isValid(t)||!i.isValid(n))throw Error("bad point: x or y not FE");let s=i.sqr(n),o=a(t);if(!i.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!i.isValid(e))throw Error("x required");if(null==t||!i.isValid(t))throw Error("y required");if(null==r||!i.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let n=e=>i.eql(e,i.ZERO);return n(t)&&n(r)?d.ZERO:new d(t,r,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(R("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,i){if(!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),!function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=D(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(d,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(i.isOdd)return!i.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:n}=this,{px:s,py:o,pz:a}=e,l=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return l&&u}negate(){return new d(this.px,i.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,n=i.mul(t,eE),{px:s,py:o,pz:a}=this,l=i.ZERO,c=i.ZERO,u=i.ZERO,h=i.mul(s,s),p=i.mul(o,o),f=i.mul(a,a),g=i.mul(s,o);return g=i.add(g,g),u=i.mul(s,a),u=i.add(u,u),l=i.mul(e,u),c=i.mul(n,f),c=i.add(l,c),l=i.sub(p,c),c=i.add(p,c),c=i.mul(l,c),l=i.mul(g,l),u=i.mul(n,u),f=i.mul(e,f),g=i.sub(h,f),g=i.mul(e,g),g=i.add(g,u),u=i.add(h,h),h=i.add(u,h),h=i.add(h,f),h=i.mul(h,g),c=i.add(c,h),f=i.mul(o,a),f=i.add(f,f),h=i.mul(f,g),l=i.sub(l,h),u=i.mul(f,p),u=i.add(u,u),new d(l,c,u=i.add(u,u))}add(e){c(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=i.ZERO,h=i.ZERO,p=i.ZERO,f=r.a,g=i.mul(r.b,eE),m=i.mul(t,o),y=i.mul(n,a),v=i.mul(s,l),b=i.add(t,n),w=i.add(o,a);b=i.mul(b,w),w=i.add(m,y),b=i.sub(b,w),w=i.add(t,s);let E=i.add(o,l);return w=i.mul(w,E),E=i.add(m,v),w=i.sub(w,E),E=i.add(n,s),u=i.add(a,l),E=i.mul(E,u),u=i.add(y,v),E=i.sub(E,u),p=i.mul(f,w),u=i.mul(g,v),p=i.add(u,p),u=i.sub(y,p),p=i.add(y,p),h=i.mul(u,p),y=i.add(m,m),y=i.add(y,m),v=i.mul(f,v),w=i.mul(g,w),y=i.add(y,v),v=i.sub(m,v),v=i.mul(f,v),w=i.add(w,v),m=i.mul(y,w),h=i.add(h,m),m=i.mul(E,w),u=i.mul(b,u),u=i.sub(u,m),m=i.mul(b,y),p=i.mul(E,p),new d(u,h,p=i.add(p,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=r;L("scalar",e,eb,n);let s=d.ZERO;if(e===eb)return s;if(this.is0()||e===ew)return this;if(!t||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:c}=t.splitScalar(e),u=s,h=s,p=this;for(;a>eb||c>eb;)a&ew&&(u=u.add(p)),c&ew&&(h=h.add(p)),p=p.double(),a>>=ew,c>>=ew;return o&&(u=u.negate()),l&&(h=h.negate()),h=new d(i.mul(h.px,t.beta),h.py,h.pz),u.add(h)}multiply(e){let t,n;let{endo:s,n:o}=r;if(L("scalar",e,ew,o),s){let{k1neg:r,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(r,c),h=f.constTimeNegate(a,h),h=new d(i.mul(h.px,s.beta),h.py,h.pz),t=c.add(h),n=u.add(p)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return d.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=d.BASE,n=(e,t)=>t!==eb&&t!==ew&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===ew)return!0;if(t)return t(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===ew?this:t?t(d,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return b("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return b("isCompressed",e),E(this.toRawBytes(e))}}d.BASE=new d(r.Gx,r.Gy,i.ONE),d.ZERO=new d(i.ZERO,i.ONE,i.ZERO);let p=r.nBitLength,f=(t=r.endo?Math.ceil(p/2):p,{constTimeNegate:ea,hasPrecomputes:e=>1!==ed(e),unsafeLadder(e,t,r=d.ZERO){let i=e;for(;t>es;)t&eo&&(r=r.add(i)),i=i.double(),t>>=eo;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=ec(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=ec(e,t),o=d.ZERO,a=d.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=eo);let h=t+Math.abs(n)-1,d=e%2!=0,p=n<0;0===n?a=a.add(ea(d,r[t])):o=o.add(ea(p,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=d.ZERO){let{windows:s,windowSize:o}=ec(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===es)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=eo),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=eu.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&eu.set(t,r(i))),i},wNAFCached(e,t,r){let i=ed(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=ed(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){el(r,t),eh.set(e,r),eu.delete(e)}});return{CURVE:r,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return M(e,ew,r.n)}}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=N;return(b("isCompressed",i),i)?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=A(o);if(!M(t,ew,r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&ew)===ew)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+s+", got "+t)}}),h=e=>E(O(e,t.nByteLength)),d=(e,t,r)=>A(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(d(e=R("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=ev.toSig(R("DER",e));return new p(t,r)}assertValidity(){L("r",this.r,ew,i),L("s",this.s,ew,i)}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s,recovery:l}=this,c=m(R("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",p=a.fromHex(d+h(u)),f=Q(u,i),g=o(-c*f),y=o(s*f),v=a.BASE.multiplyAndAddUnsafe(p,g,y);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>i>>ew}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return x(this.toDERHex())}toDERHex(){return ev.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function f(e){let t=y(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=A(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},m=t.bits2int_modN||function(e){return o(g(e))},v=B(t.nBitLength);function w(e){return L("num < 2^"+t.nBitLength,e,eb,v),O(e,t.nByteLength)}let _={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(f(e))throw Error("first arg must be private key");if(!f(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=_){let{seed:c,k2sig:h}=function(e,n,s=_){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:f,extraEntropy:y}=s;null==d&&(d=!0),e=R("msgHash",e),ef(s),f&&(e=R("prehashed msgHash",c(e)));let v=m(e),b=l(n),E=[w(b),w(v)];if(null!=y&&!1!==y){let e=!0===y?h(r.BYTES):y;E.push(R("extraEntropy",e))}return{seed:N(...E),k2sig:function(e){let t=g(e);if(!u(t))return;let r=Q(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===eb)return;let l=o(r*o(v+s*b));if(l===eb)return;let c=(n.x===s?0:2)|Number(n.y&ew),h=l;if(d&&l>i>>ew)h=l>i>>ew?o(-l):l,c^=1;return new p(s,h,c)}}}(e,n,s);return U(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=C){let l,c;r=R("msgHash",r),n=R("publicKey",n);let{lowS:u,prehash:h,format:d}=s;if(ef(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let f="string"==typeof e||y(e),g=!f&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(c=new p(e.r,e.s)),f){try{"compact"!==d&&(c=p.fromDER(e))}catch(e){if(!(e instanceof ev.Err))throw e}c||"der"===d||(c=p.fromCompact(e))}l=a.fromHex(n)}catch(e){return!1}if(!c||u&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:v,s:b}=c,w=m(r),E=Q(b,i),_=o(w*E),S=o(v*E),I=a.BASE.multiplyAndAddUnsafe(l,_,S)?.toAffine();return!!I&&o(I.x)===v},ProjectivePoint:a,Signature:p,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=en(t.n);return function(e,t,r=!1){let i=e.length,n=ei(t),s=en(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=Y(r?k(e):A(e),t-W)+W;return r?P(o,n):O(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>p(t,e,(0,s.eV)(...r)),randomBytes:s.O6});return{...r(t),create:r}}({a:BigInt(0),b:BigInt(7),Fp:eA,n:eC,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-eS*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=ex(t*e,eC),o=ex(-r*e,eC),a=Y(e-s*t-o*i,eC),l=Y(-s*r-o*t,eC),c=a>n,u=l>n;if(c&&(a=eC-a),u&&(l=eC-l),a>n||l>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:a,k2neg:u,k2:l}}}},h);BigInt(0),ek.ProjectivePoint},15248:function(e,t,r){"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return a},gk:function(){return n},k8:function(){return i},z3:function(){return s}})},10918:function(e,t,r){"use strict";r.d(t,{fr:function(){return I}});var i=r(15248);let n=BigInt(4294967296-1),s=BigInt(32),o=(e,t,r)=>e<<r|t>>>32-r,a=(e,t,r)=>t<<r|e>>>32-r,l=(e,t,r)=>t<<r-32|e>>>64-r,c=(e,t,r)=>e<<r-32|t>>>64-r;var u=r(86485);let h=[],d=[],p=[],f=BigInt(0),g=BigInt(1),m=BigInt(2),y=BigInt(7),v=BigInt(256),b=BigInt(113);for(let e=0,t=g,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],h.push(2*(5*i+r)),d.push((e+1)*(e+2)/2%64);let n=f;for(let e=0;e<7;e++)(t=(t<<g^(t>>y)*b)%v)&m&&(n^=g<<(g<<BigInt(e))-g);p.push(n)}let[w,E]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l}=function(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}(e[o],t);[r[o],i[o]]=[a,l]}return[r,i]}(p,!0),_=(e,t,r)=>r>32?l(e,t,r):o(e,t,r),C=(e,t,r)=>r>32?c(e,t,r):a(e,t,r);class S extends u.kb{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,i.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,u.Jq)(this.state)}keccak(){u.iA||(0,u.l1)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=_(s,o,1)^r[i],l=C(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=d[r],s=_(t,n,i),o=C(t,n,i),a=h[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=w[i],e[1]^=E[i]}r.fill(0)}(this.state32,this.rounds),u.iA||(0,u.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.$h)(this);let{blockLen:t,state:r}=this,n=(e=(0,u.O0)(e)).length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,i.$h)(this,!1),(0,i.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new S(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let I=(0,u.hE)(()=>new S(136,1,32))},86485:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return c},eV:function(){return h},GL:function(){return o},iA:function(){return l},O6:function(){return f},np:function(){return a},O0:function(){return u},Jq:function(){return s},hE:function(){return p}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(15248);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}let l=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function c(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function u(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,n.gk)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.gk)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class d{clone(){return this._cloneInto()}}function p(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},19779:function(e,t,r){"use strict";r.d(t,{secp256k1:function(){return ek}});var i={};r.r(i),r.d(i,{Fy:function(){return L},uw:function(){return b},gk:function(){return v},Dd:function(){return D},dQ:function(){return B},ci:function(){return E},bytesToNumberBE:function(){return A},ty:function(){return k},eV:function(){return N},n$:function(){return U},ql:function(){return R},hexToBytes:function(){return x},Z2:function(){return M},_t:function(){return y},H9:function(){return F},tL:function(){return O},S5:function(){return P},uz:function(){return _},FF:function(){return H}});var n=r(20392),s=r(79784);class o extends s.kb{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.GL)(this.buffer)}update(e){(0,n.$h)(this);let{view:t,buffer:r,blockLen:i}=this,o=(e=(0,s.O0)(e)).length;for(let n=0;n<o;){let a=Math.min(i-this.pos,o-n);if(a===i){let t=(0,s.GL)(e);for(;i<=o-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.$h)(this),(0,n.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:o}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),l=i?4:0,c=i?0:4;e.setUint32(t+l,o,i),e.setUint32(t+c,a,i)}(r,i-8,BigInt(8*this.length),o),this.process(r,0);let l=(0,s.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,h[e],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends o{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],i=(0,s.np)(t,7)^(0,s.np)(t,18)^t>>>3,n=(0,s.np)(r,17)^(0,s.np)(r,19)^r>>>10;c[e]=n+c[e-7]+i+c[e-16]|0}let{A:r,B:i,C:n,D:o,E:l,F:u,G:h,H:d}=this;for(let e=0;e<64;e++){var p,f,g,m;let t=d+((0,s.np)(l,6)^(0,s.np)(l,11)^(0,s.np)(l,25))+((p=l)&u^~p&h)+a[e]+c[e]|0,y=((0,s.np)(r,2)^(0,s.np)(r,13)^(0,s.np)(r,22))+((f=r)&(g=i)^f&(m=n)^g&m)|0;d=h,h=u,u=l,l=o+t|0,o=n,n=i,i=r,r=t+y|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,o=o+this.D|0,l=l+this.E|0,u=u+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(r,i,n,o,l,u,h,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let h=(0,s.hE)(()=>new u);class d extends s.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.z3)(e);let r=(0,s.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,n.$h)(this),this.iHash.update(e),this}digestInto(e){(0,n.$h)(this),(0,n.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let p=(e,t,r)=>new d(e,t).update(r).digest();p.create=(e,t)=>new d(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let f=BigInt(0),g=BigInt(1),m=BigInt(2);function y(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function v(e){if(!y(e))throw Error("Uint8Array expected")}function b(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let w=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function E(e){v(e);let t="";for(let r=0;r<e.length;r++)t+=w[e[r]];return t}function _(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function C(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?f:BigInt("0x"+e)}let S={_0:48,_9:57,A:65,F:70,a:97,f:102};function I(e){return e>=S._0&&e<=S._9?e-S._0:e>=S.A&&e<=S.F?e-(S.A-10):e>=S.a&&e<=S.f?e-(S.a-10):void 0}function x(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=I(e.charCodeAt(n)),s=I(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function A(e){return C(E(e))}function k(e){return v(e),C(E(Uint8Array.from(e).reverse()))}function O(e,t){return x(e.toString(16).padStart(2*t,"0"))}function P(e,t){return O(e,t).reverse()}function R(e,t,r){let i;if("string"==typeof t)try{i=x(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(y(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function N(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];v(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let T=e=>"bigint"==typeof e&&f<=e;function M(e,t,r){return T(e)&&T(t)&&T(r)&&t<=e&&e<r}function L(e,t,r,i){if(!M(t,r,i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function D(e){let t;for(t=0;e>f;e>>=g,t+=1);return t}let B=e=>(m<<BigInt(e-1))-g,j=e=>new Uint8Array(e),$=e=>Uint8Array.from(e);function U(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=j(e),n=j(e),s=0,o=()=>{i.fill(1),n.fill(0),s=0},a=(...e)=>r(n,i,...e),l=(e=j())=>{n=a($([0]),e),i=a(),0!==e.length&&(n=a($([1]),e),i=a())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=a()).slice();r.push(t),e+=i.length}return N(...r)};return(e,t)=>{let r;for(o(),l(e);!(r=t(c()));)l();return o(),r}}let q={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||y(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function H(e,t,r={}){let i=(t,r,i)=>{let n=q[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function F(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let z=BigInt(0),W=BigInt(1),K=BigInt(2),V=BigInt(3),G=BigInt(4),Z=BigInt(5),J=BigInt(8);function Y(e,t){let r=e%t;return r>=z?r:t+r}function X(e,t,r){let i=e;for(;t-- >z;)i*=i,i%=r;return i}function Q(e,t){if(e===z)throw Error("invert: expected non-zero number");if(t<=z)throw Error("invert: expected positive modulus, got "+t);let r=Y(e,t),i=t,n=z,s=W,o=W,a=z;for(;r!==z;){let e=i/r,t=i%r,l=n-o*e,c=s-a*e;i=r,r=t,n=o,s=a,o=l,a=c}if(i!==W)throw Error("invert: does not exist");return Y(n,t)}let ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function et(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function er(e,t,r=!1,i={}){let n;if(e<=z)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=et(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:B(s),ZERO:z,ONE:W,create:t=>Y(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return z<=t&&t<e},is0:e=>e===z,isOdd:e=>(e&W)===W,neg:t=>Y(-t,e),eql:(e,t)=>e===t,sqr:t=>Y(t*t,e),add:(t,r)=>Y(t+r,e),sub:(t,r)=>Y(t-r,e),mul:(t,r)=>Y(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<z)throw Error("invalid exponent, negatives unsupported");if(r===z)return e.ONE;if(r===W)return t;let i=e.ONE,n=t;for(;r>z;)r&W&&(i=e.mul(i,n)),n=e.sqr(n),r>>=W;return i})(a,e,t),div:(t,r)=>Y(t*Q(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Q(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%G===V){let t=(e+W)/G;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%J===Z){let t=(e-Z)/J;return function(e,r){let i=e.mul(r,K),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,K),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-W)/K;for(t=e-W,r=0;t%K===z;t/=K,r++);for(i=K;i<e&&function(e,t,r){if(t<z)throw Error("invalid exponent, negatives unsupported");if(r<=z)throw Error("invalid modulus");if(r===W)return z;let i=W;for(;t>z;)t&W&&(i=i*e%r),e=e*e%r,t>>=W;return i}(i,n,e)!==e-W;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+W)/G;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+W)/K;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),t),c=e.pow(o,s),u=e.pow(o,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,W<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?P(e,o):O(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?k(e):A(e)}});return Object.freeze(a)}function ei(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function en(e){let t=ei(e);return t+Math.ceil(t/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let es=BigInt(0),eo=BigInt(1);function ea(e,t){let r=t.negate();return e?r:t}function el(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ec(e,t){return el(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let eu=new WeakMap,eh=new WeakMap;function ed(e){return eh.get(e)||1}function ep(e){return H(e.Fp,ee.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),H(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...et(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ef(e){void 0!==e.lowS&&b("lowS",e.lowS),void 0!==e.prehash&&b("prehash",e.prehash)}let{bytesToNumberBE:eg,hexToBytes:em}=i;class ey extends Error{constructor(e=""){super(e)}}let ev={Err:ey,_tlv:{encode:(e,t)=>{let{Err:r}=ev;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=_(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?_(n.length/2|128):"";return _(e)+s+n+t},decode(e,t){let{Err:r}=ev,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=ev;if(e<eb)throw new t("integer: negative integers are not allowed");let r=_(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=ev;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return eg(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=ev,n="string"==typeof e?em(e):e;v(n);let{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=ev,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},eb=BigInt(0),ew=BigInt(1),eE=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let e_=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eC=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eS=BigInt(1),eI=BigInt(2),ex=(e,t)=>(e+t/eI)/t,eA=er(e_,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),i=BigInt(11),n=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=e*e*e%e_,c=l*l*e%e_,u=X(c,t,e_)*c%e_,h=X(u,t,e_)*c%e_,d=X(h,eI,e_)*l%e_,p=X(d,i,e_)*d%e_,f=X(p,n,e_)*p%e_,g=X(f,o,e_)*f%e_,m=X(g,a,e_)*g%e_,y=X(m,o,e_)*f%e_,v=X(y,t,e_)*c%e_,b=X(v,s,e_)*p%e_,w=X(b,r,e_)*l%e_,E=X(w,eI,e_);if(!eA.eql(eA.sqr(E),e))throw Error("Cannot find square root");return E}}),ek=function(e,t){let r=t=>(function(e){let t=function(e){let t=ep(e);return H(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function o(e){return Y(e,i)}let{ProjectivePoint:a,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){var t;let r=function(e){let t=ep(e);H(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:i}=r,n=er(r.n,r.nBitLength),s=r.toBytes||((e,t,r)=>{let n=t.toAffine();return N(Uint8Array.from([4]),i.toBytes(n.x),i.toBytes(n.y))}),o=r.fromBytes||(e=>{let t=e.subarray(1);return{x:i.fromBytes(t.subarray(0,i.BYTES)),y:i.fromBytes(t.subarray(i.BYTES,2*i.BYTES))}});function a(e){let{a:t,b:n}=r,s=i.sqr(e),o=i.mul(s,e);return i.add(i.add(o,i.mul(e,t)),n)}if(!i.eql(i.sqr(r.Gy),a(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:o}=r;if(i&&"bigint"!=typeof e){if(y(e)&&(e=E(e)),"string"!=typeof e||!i.includes(e.length))throw Error("invalid private key");e=e.padStart(2*n,"0")}try{t="bigint"==typeof e?e:A(R("private key",e,n))}catch(t){throw Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return s&&(t=Y(t,o)),L("private key",t,ew,o),t}function c(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let u=F((e,t)=>{let{px:r,py:n,pz:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),l=i.mul(n,t),c=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(c,i.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),h=F(e=>{if(e.is0()){if(r.allowInfinityPoint&&!i.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!i.isValid(t)||!i.isValid(n))throw Error("bad point: x or y not FE");let s=i.sqr(n),o=a(t);if(!i.eql(s,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!i.isValid(e))throw Error("x required");if(null==t||!i.isValid(t))throw Error("y required");if(null==r||!i.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let n=e=>i.eql(e,i.ZERO);return n(t)&&n(r)?d.ZERO:new d(t,r,i.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(R("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,i){if(!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),!function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=D(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=Array(a+1).fill(n),c=Math.floor((t.BITS-1)/o)*o,u=n;for(let e=c;e>=0;e-=o){l.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));l[n]=l[n].add(r[t])}let t=n;for(let e=l.length-1,r=n;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}(d,n,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){let{y:e}=this.toAffine();if(i.isOdd)return!i.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:n}=this,{px:s,py:o,pz:a}=e,l=i.eql(i.mul(t,a),i.mul(s,n)),u=i.eql(i.mul(r,a),i.mul(o,n));return l&&u}negate(){return new d(this.px,i.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,n=i.mul(t,eE),{px:s,py:o,pz:a}=this,l=i.ZERO,c=i.ZERO,u=i.ZERO,h=i.mul(s,s),p=i.mul(o,o),f=i.mul(a,a),g=i.mul(s,o);return g=i.add(g,g),u=i.mul(s,a),u=i.add(u,u),l=i.mul(e,u),c=i.mul(n,f),c=i.add(l,c),l=i.sub(p,c),c=i.add(p,c),c=i.mul(l,c),l=i.mul(g,l),u=i.mul(n,u),f=i.mul(e,f),g=i.sub(h,f),g=i.mul(e,g),g=i.add(g,u),u=i.add(h,h),h=i.add(u,h),h=i.add(h,f),h=i.mul(h,g),c=i.add(c,h),f=i.mul(o,a),f=i.add(f,f),h=i.mul(f,g),l=i.sub(l,h),u=i.mul(f,p),u=i.add(u,u),new d(l,c,u=i.add(u,u))}add(e){c(e);let{px:t,py:n,pz:s}=this,{px:o,py:a,pz:l}=e,u=i.ZERO,h=i.ZERO,p=i.ZERO,f=r.a,g=i.mul(r.b,eE),m=i.mul(t,o),y=i.mul(n,a),v=i.mul(s,l),b=i.add(t,n),w=i.add(o,a);b=i.mul(b,w),w=i.add(m,y),b=i.sub(b,w),w=i.add(t,s);let E=i.add(o,l);return w=i.mul(w,E),E=i.add(m,v),w=i.sub(w,E),E=i.add(n,s),u=i.add(a,l),E=i.mul(E,u),u=i.add(y,v),E=i.sub(E,u),p=i.mul(f,w),u=i.mul(g,v),p=i.add(u,p),u=i.sub(y,p),p=i.add(y,p),h=i.mul(u,p),y=i.add(m,m),y=i.add(y,m),v=i.mul(f,v),w=i.mul(g,w),y=i.add(y,v),v=i.sub(m,v),v=i.mul(f,v),w=i.add(w,v),m=i.mul(y,w),h=i.add(h,m),m=i.mul(E,w),u=i.mul(b,u),u=i.sub(u,m),m=i.mul(b,y),p=i.mul(E,p),new d(u,h,p=i.add(p,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:n}=r;L("scalar",e,eb,n);let s=d.ZERO;if(e===eb)return s;if(this.is0()||e===ew)return this;if(!t||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:c}=t.splitScalar(e),u=s,h=s,p=this;for(;a>eb||c>eb;)a&ew&&(u=u.add(p)),c&ew&&(h=h.add(p)),p=p.double(),a>>=ew,c>>=ew;return o&&(u=u.negate()),l&&(h=h.negate()),h=new d(i.mul(h.px,t.beta),h.py,h.pz),u.add(h)}multiply(e){let t,n;let{endo:s,n:o}=r;if(L("scalar",e,ew,o),s){let{k1neg:r,k1:o,k2neg:a,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(o),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(r,c),h=f.constTimeNegate(a,h),h=new d(i.mul(h.px,s.beta),h.py,h.pz),t=c.add(h),n=u.add(p)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return d.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=d.BASE,n=(e,t)=>t!==eb&&t!==ew&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===ew)return!0;if(t)return t(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===ew?this:t?t(d,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return b("isCompressed",e),this.assertValidity(),s(d,this,e)}toHex(e=!0){return b("isCompressed",e),E(this.toRawBytes(e))}}d.BASE=new d(r.Gx,r.Gy,i.ONE),d.ZERO=new d(i.ZERO,i.ONE,i.ZERO);let p=r.nBitLength,f=(t=r.endo?Math.ceil(p/2):p,{constTimeNegate:ea,hasPrecomputes:e=>1!==ed(e),unsafeLadder(e,t,r=d.ZERO){let i=e;for(;t>es;)t&eo&&(r=r.add(i)),i=i.double(),t>>=eo;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=ec(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=ec(e,t),o=d.ZERO,a=d.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&l);i>>=u,n>s&&(n-=c,i+=eo);let h=t+Math.abs(n)-1,d=e%2!=0,p=n<0;0===n?a=a.add(ea(d,r[t])):o=o.add(ea(p,r[h]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=d.ZERO){let{windows:s,windowSize:o}=ec(e,t),a=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===es)break;let s=Number(i&a);if(i>>=c,s>o&&(s-=l,i+=eo),0===s)continue;let u=r[t+Math.abs(s)-1];s<0&&(u=u.negate()),n=n.add(u)}return n},getPrecomputes(e,t,r){let i=eu.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&eu.set(t,r(i))),i},wNAFCached(e,t,r){let i=ed(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=ed(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){el(r,t),eh.set(e,r),eu.delete(e)}});return{CURVE:r,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:function(e){return M(e,ew,r.n)}}}({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),o=N;return(b("isCompressed",i),i)?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e;let t=A(o);if(!M(t,ew,r.ORDER))throw Error("Point is not on curve");let n=c(t);try{e=r.sqrt(n)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&i)==1!=((e&ew)===ew)&&(e=r.neg(e)),{x:t,y:e}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+n+", or uncompressed "+s+", got "+t)}}),h=e=>E(O(e,t.nByteLength)),d=(e,t,r)=>A(e.slice(t,r));class p{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new p(d(e=R("compactSignature",e,2*r),0,r),d(e,r,2*r))}static fromDER(e){let{r:t,s:r}=ev.toSig(R("DER",e));return new p(t,r)}assertValidity(){L("r",this.r,ew,i),L("s",this.s,ew,i)}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s,recovery:l}=this,c=m(R("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?n+t.n:n;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",p=a.fromHex(d+h(u)),f=Q(u,i),g=o(-c*f),y=o(s*f),v=a.BASE.multiplyAndAddUnsafe(p,g,y);if(!v)throw Error("point at infinify");return v.assertValidity(),v}hasHighS(){return this.s>i>>ew}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return x(this.toDERHex())}toDERHex(){return ev.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}function f(e){let t=y(e),r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof a}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=A(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},m=t.bits2int_modN||function(e){return o(g(e))},v=B(t.nBitLength);function w(e){return L("num < 2^"+t.nBitLength,e,eb,v),O(e,t.nByteLength)}let _={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return a.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return a.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(f(e))throw Error("first arg must be private key");if(!f(t))throw Error("second arg must be public key");return a.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,s=_){let{seed:c,k2sig:h}=function(e,n,s=_){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:h}=t,{lowS:d,prehash:f,extraEntropy:y}=s;null==d&&(d=!0),e=R("msgHash",e),ef(s),f&&(e=R("prehashed msgHash",c(e)));let v=m(e),b=l(n),E=[w(b),w(v)];if(null!=y&&!1!==y){let e=!0===y?h(r.BYTES):y;E.push(R("extraEntropy",e))}return{seed:N(...E),k2sig:function(e){let t=g(e);if(!u(t))return;let r=Q(t,i),n=a.BASE.multiply(t).toAffine(),s=o(n.x);if(s===eb)return;let l=o(r*o(v+s*b));if(l===eb)return;let c=(n.x===s?0:2)|Number(n.y&ew),h=l;if(d&&l>i>>ew)h=l>i>>ew?o(-l):l,c^=1;return new p(s,h,c)}}}(e,n,s);return U(t.hash.outputLen,t.nByteLength,t.hmac)(c,h)},verify:function(e,r,n,s=C){let l,c;r=R("msgHash",r),n=R("publicKey",n);let{lowS:u,prehash:h,format:d}=s;if(ef(s),"strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let f="string"==typeof e||y(e),g=!f&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(c=new p(e.r,e.s)),f){try{"compact"!==d&&(c=p.fromDER(e))}catch(e){if(!(e instanceof ev.Err))throw e}c||"der"===d||(c=p.fromCompact(e))}l=a.fromHex(n)}catch(e){return!1}if(!c||u&&c.hasHighS())return!1;h&&(r=t.hash(r));let{r:v,s:b}=c,w=m(r),E=Q(b,i),_=o(w*E),S=o(v*E),I=a.BASE.multiplyAndAddUnsafe(l,_,S)?.toAffine();return!!I&&o(I.x)===v},ProjectivePoint:a,Signature:p,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=en(t.n);return function(e,t,r=!1){let i=e.length,n=ei(t),s=en(t);if(i<16||i<s||i>1024)throw Error("expected "+s+"-1024 bytes of input, got "+i);let o=Y(r?k(e):A(e),t-W)+W;return r?P(o,n):O(o,n)}(t.randomBytes(e),t.n)},precompute:(e=8,t=a.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>p(t,e,(0,s.eV)(...r)),randomBytes:s.O6});return{...r(t),create:r}}({a:BigInt(0),b:BigInt(7),Fp:eA,n:eC,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-eS*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),n=BigInt("0x100000000000000000000000000000000"),s=ex(t*e,eC),o=ex(-r*e,eC),a=Y(e-s*t-o*i,eC),l=Y(-s*r-o*t,eC),c=a>n,u=l>n;if(c&&(a=eC-a),u&&(l=eC-l),a>n||l>n)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:a,k2neg:u,k2:l}}}},h);BigInt(0),ek.ProjectivePoint},20392:function(e,t,r){"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return a},gk:function(){return n},k8:function(){return i},z3:function(){return s}})},52833:function(e,t,r){"use strict";r.d(t,{fr:function(){return I}});var i=r(20392);let n=BigInt(4294967296-1),s=BigInt(32),o=(e,t,r)=>e<<r|t>>>32-r,a=(e,t,r)=>t<<r|e>>>32-r,l=(e,t,r)=>t<<r-32|e>>>64-r,c=(e,t,r)=>e<<r-32|t>>>64-r;var u=r(79784);let h=[],d=[],p=[],f=BigInt(0),g=BigInt(1),m=BigInt(2),y=BigInt(7),v=BigInt(256),b=BigInt(113);for(let e=0,t=g,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],h.push(2*(5*i+r)),d.push((e+1)*(e+2)/2%64);let n=f;for(let e=0;e<7;e++)(t=(t<<g^(t>>y)*b)%v)&m&&(n^=g<<(g<<BigInt(e))-g);p.push(n)}let[w,E]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:a,l}=function(e,t=!1){return t?{h:Number(e&n),l:Number(e>>s&n)}:{h:0|Number(e>>s&n),l:0|Number(e&n)}}(e[o],t);[r[o],i[o]]=[a,l]}return[r,i]}(p,!0),_=(e,t,r)=>r>32?l(e,t,r):o(e,t,r),C=(e,t,r)=>r>32?c(e,t,r):a(e,t,r);class S extends u.kb{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,i.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,u.Jq)(this.state)}keccak(){u.iA||(0,u.l1)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=_(s,o,1)^r[i],l=C(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=d[r],s=_(t,n,i),o=C(t,n,i),a=h[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=w[i],e[1]^=E[i]}r.fill(0)}(this.state32,this.rounds),u.iA||(0,u.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.$h)(this);let{blockLen:t,state:r}=this,n=(e=(0,u.O0)(e)).length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,i.$h)(this,!1),(0,i.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new S(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let I=(0,u.hE)(()=>new S(136,1,32))},79784:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return c},eV:function(){return h},GL:function(){return o},iA:function(){return l},O6:function(){return f},np:function(){return a},O0:function(){return u},Jq:function(){return s},hE:function(){return p}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(20392);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}let l=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function c(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function u(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,n.gk)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.gk)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class d{clone(){return this._cloneInto()}}function p(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},34149:function(e,t,r){"use strict";r.d(t,{ZP:function(){return a}});let i=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,s=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function o(e,t){if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`);return}return t}function a(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);let r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!s.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(i.test(e)||n.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,o)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}},88424:function(e,t,r){"use strict";r.r(t),r.d(t,{Struct:function(){return c},StructError:function(){return i},any:function(){return S},array:function(){return I},assert:function(){return u},assign:function(){return g},bigint:function(){return x},boolean:function(){return A},coerce:function(){return Z},create:function(){return h},date:function(){return k},defaulted:function(){return J},define:function(){return m},deprecated:function(){return y},dynamic:function(){return v},empty:function(){return X},enums:function(){return O},func:function(){return P},instance:function(){return R},integer:function(){return N},intersection:function(){return T},is:function(){return p},lazy:function(){return b},literal:function(){return M},map:function(){return L},mask:function(){return d},max:function(){return ee},min:function(){return et},never:function(){return D},nonempty:function(){return er},nullable:function(){return B},number:function(){return j},object:function(){return $},omit:function(){return w},optional:function(){return U},partial:function(){return E},pattern:function(){return ei},pick:function(){return _},record:function(){return q},refine:function(){return es},regexp:function(){return H},set:function(){return F},size:function(){return en},string:function(){return z},struct:function(){return C},trimmed:function(){return Y},tuple:function(){return W},type:function(){return K},union:function(){return V},unknown:function(){return G},validate:function(){return f}});class i extends TypeError{constructor(e,t){let r;let{message:i,explanation:n,...s}=e,{path:o}=e,a=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function n(e){return"object"==typeof e&&null!=e}function s(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function o(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*a(e,t,r,i){var s;for(let a of(n(s=e)&&"function"==typeof s[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:n,branch:s}=t,{type:a}=r,{refinement:l,message:c=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${o(i)}\``}=e;return{value:i,type:a,refinement:l,key:n[n.length-1],path:n,branch:s,...e,message:c}}(a,t,r,i);e&&(yield e)}}function*l(e,t,r={}){let{path:i=[],branch:s=[e],coerce:o=!1,mask:a=!1}=r,c={path:i,branch:s};if(o&&(e=t.coercer(e,c),a&&"type"!==t.type&&n(t.schema)&&n(e)&&!Array.isArray(e)))for(let r in e)void 0===t.schema[r]&&delete e[r];let u="valid";for(let i of t.validator(e,c))i.explanation=r.message,u="not_valid",yield[i,void 0];for(let[h,d,p]of t.entries(e,c))for(let t of l(d,p,{path:void 0===h?i:[...i,h],branch:void 0===h?s:[...s,d],coerce:o,mask:a,message:r.message}))t[0]?(u=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(d=t[1],void 0===h?e=d:e instanceof Map?e.set(h,d):e instanceof Set?e.add(d):n(e)&&(void 0!==d||h in e)&&(e[h]=d));if("not_valid"!==u)for(let i of t.refiner(e,c))i.explanation=r.message,u="not_refined",yield[i,void 0];"valid"===u&&(yield[void 0,e])}class c{constructor(e){let{type:t,schema:r,validator:i,refiner:n,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,i?this.validator=(e,t)=>a(i(e,t),t,this,e):this.validator=()=>[],n?this.refiner=(e,t)=>a(n(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){return u(e,this,t)}create(e,t){return h(e,this,t)}is(e){return p(e,this)}mask(e,t){return d(e,this,t)}validate(e,t={}){return f(e,this,t)}}function u(e,t,r){let i=f(e,t,{message:r});if(i[0])throw i[0]}function h(e,t,r){let i=f(e,t,{coerce:!0,message:r});if(!i[0])return i[1];throw i[0]}function d(e,t,r){let i=f(e,t,{coerce:!0,mask:!0,message:r});if(!i[0])return i[1];throw i[0]}function p(e,t){return!f(e,t)[0]}function f(e,t,r={}){let n=l(e,t,r),s=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return s[0]?[new i(s[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,s[1]]}function g(...e){let t="type"===e[0].type,r=Object.assign({},...e.map(e=>e.schema));return t?K(r):$(r)}function m(e,t){return new c({type:e,schema:null,validator:t})}function y(e,t){return new c({...e,refiner:(t,r)=>void 0===t||e.refiner(t,r),validator:(r,i)=>void 0===r||(t(r,i),e.validator(r,i))})}function v(e){return new c({type:"dynamic",schema:null,*entries(t,r){let i=e(t,r);yield*i.entries(t,r)},validator:(t,r)=>e(t,r).validator(t,r),coercer:(t,r)=>e(t,r).coercer(t,r),refiner:(t,r)=>e(t,r).refiner(t,r)})}function b(e){let t;return new c({type:"lazy",schema:null,*entries(r,i){t??(t=e()),yield*t.entries(r,i)},validator:(r,i)=>(t??(t=e()),t.validator(r,i)),coercer:(r,i)=>(t??(t=e()),t.coercer(r,i)),refiner:(r,i)=>(t??(t=e()),t.refiner(r,i))})}function w(e,t){let{schema:r}=e,i={...r};for(let e of t)delete i[e];return"type"===e.type?K(i):$(i)}function E(e){let t=e instanceof c,r=t?{...e.schema}:{...e};for(let e in r)r[e]=U(r[e]);return t&&"type"===e.type?K(r):$(r)}function _(e,t){let{schema:r}=e,i={};for(let e of t)i[e]=r[e];return"type"===e.type?K(i):$(i)}function C(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),m(e,t)}function S(){return m("any",()=>!0)}function I(e){return new c({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,i]of t.entries())yield[r,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${o(e)}`})}function x(){return m("bigint",e=>"bigint"==typeof e)}function A(){return m("boolean",e=>"boolean"==typeof e)}function k(){return m("date",e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${o(e)}`)}function O(e){let t={},r=e.map(e=>o(e)).join();for(let r of e)t[r]=r;return new c({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${r}\`, but received: ${o(t)}`})}function P(){return m("func",e=>"function"==typeof e||`Expected a function, but received: ${o(e)}`)}function R(e){return m("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${o(t)}`)}function N(){return m("integer",e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${o(e)}`)}function T(e){return new c({type:"intersection",schema:null,*entries(t,r){for(let i of e)yield*i.entries(t,r)},*validator(t,r){for(let i of e)yield*i.validator(t,r)},*refiner(t,r){for(let i of e)yield*i.refiner(t,r)}})}function M(e){let t=o(e),r=typeof e;return new c({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${o(r)}`})}function L(e,t){return new c({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(let[i,n]of r.entries())yield[i,i,e],yield[i,n,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${o(e)}`})}function D(){return m("never",()=>!1)}function B(e){return new c({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function j(){return m("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${o(e)}`)}function $(e){let t=e?Object.keys(e):[],r=D();return new c({type:"object",schema:e||null,*entries(i){if(e&&n(i)){let n=new Set(Object.keys(i));for(let r of t)n.delete(r),yield[r,i[r],e[r]];for(let e of n)yield[e,i[e],r]}},validator:e=>n(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>n(e)?{...e}:e})}function U(e){return new c({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function q(e,t){return new c({type:"record",schema:null,*entries(r){if(n(r))for(let i in r){let n=r[i];yield[i,i,e],yield[i,n,t]}},validator:e=>n(e)||`Expected an object, but received: ${o(e)}`})}function H(){return m("regexp",e=>e instanceof RegExp)}function F(e){return new c({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let r of t)yield[r,r,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${o(e)}`})}function z(){return m("string",e=>"string"==typeof e||`Expected a string, but received: ${o(e)}`)}function W(e){let t=D();return new c({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(e.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],e[n]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${o(e)}`})}function K(e){let t=Object.keys(e);return new c({type:"type",schema:e,*entries(r){if(n(r))for(let i of t)yield[i,r[i],e[i]]},validator:e=>n(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>n(e)?{...e}:e})}function V(e){let t=e.map(e=>e.type).join(" | ");return new c({type:"union",schema:null,coercer(t){for(let r of e){let[e,i]=r.validate(t,{coerce:!0});if(!e)return i}return t},validator(r,i){let n=[];for(let t of e){let[...e]=l(r,t,i),[s]=e;if(!s[0])return[];for(let[t]of e)t&&n.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${o(r)}`,...n]}})}function G(){return m("unknown",()=>!0)}function Z(e,t,r){return new c({...e,coercer:(i,n)=>p(i,t)?e.coercer(r(i,n),n):e.coercer(i,n)})}function J(e,t,r={}){return Z(e,G(),e=>{let i="function"==typeof t?t():t;if(void 0===e)return i;if(!r.strict&&s(e)&&s(i)){let t={...e},r=!1;for(let e in i)void 0===t[e]&&(t[e]=i[e],r=!0);if(r)return t}return e})}function Y(e){return Z(e,z(),e=>e.trim())}function X(e){return es(e,"empty",t=>{let r=Q(t);return 0===r||`Expected an empty ${e.type} but received one with a size of \`${r}\``})}function Q(e){return e instanceof Map||e instanceof Set?e.size:e.length}function ee(e,t,r={}){let{exclusive:i}=r;return es(e,"max",r=>i?r<t:r<=t||`Expected a ${e.type} less than ${i?"":"or equal to "}${t} but received \`${r}\``)}function et(e,t,r={}){let{exclusive:i}=r;return es(e,"min",r=>i?r>t:r>=t||`Expected a ${e.type} greater than ${i?"":"or equal to "}${t} but received \`${r}\``)}function er(e){return es(e,"nonempty",t=>Q(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}function ei(e,t){return es(e,"pattern",r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`)}function en(e,t,r=t){let i=`Expected a ${e.type}`,n=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return es(e,"size",e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=r||`${i} ${n} but received \`${e}\``;if(e instanceof Map||e instanceof Set){let{size:s}=e;return t<=s&&s<=r||`${i} with a size ${n} but received one with a size of \`${s}\``}{let{length:s}=e;return t<=s&&s<=r||`${i} with a length ${n} but received one with a length of \`${s}\``}})}function es(e,t,r){return new c({...e,*refiner(i,n){for(let s of(yield*e.refiner(i,n),a(r(i,n),n,e,i)))yield{...s,refinement:t}}})}},5484:function(e,t,r){"use strict";let i;function n(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function s(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let i=n(r);return(e,r)=>i.then(i=>r(i.transaction(t,e).objectStore(t)))}function o(){return i||(i=s("keyval-store","keyval")),i}function a(e,t=o()){return t("readonly",t=>n(t.get(e)))}function l(e,t,r=o()){return r("readwrite",r=>(r.put(t,e),n(r.transaction)))}function c(e,t=o()){return t("readwrite",t=>(t.delete(e),n(t.transaction)))}function u(e=o()){return e("readwrite",e=>(e.clear(),n(e.transaction)))}function h(e=o()){return e("readonly",e=>{var t;if(e.getAllKeys)return n(e.getAllKeys());let r=[];return(t=e=>r.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction)).then(()=>r)})}r.d(t,{IV:function(){return c},MT:function(){return s},U2:function(){return a},XP:function(){return h},ZH:function(){return u},t8:function(){return l}})},28252:function(e,t,r){"use strict";r.d(t,{sR:function(){return h}});var i=r(76479),n=r(30220);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let s=(e,t)=>{let r=e._$AN;if(void 0===r)return!1;for(let e of r)e._$AO?.(t,!1),s(e,t);return!0},o=e=>{let t,r;do{if(void 0===(t=e._$AM))break;(r=t._$AN).delete(e),e=t}while(0===r?.size)},a=e=>{for(let t;t=e._$AM;e=t){let r=t._$AN;if(void 0===r)t._$AN=r=new Set;else if(r.has(e))break;r.add(e),u(t)}};function l(e){void 0!==this._$AN?(o(this),this._$AM=e,a(this)):this._$AM=e}function c(e,t=!1,r=0){let i=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size){if(t){if(Array.isArray(i))for(let e=r;e<i.length;e++)s(i[e],!1),o(i[e]);else null!=i&&(s(i,!1),o(i))}else s(this,e)}}let u=e=>{e.type==n.pX.CHILD&&(e._$AP??=c,e._$AQ??=l)};class h extends n.Xe{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),a(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(s(this,e),o(this))}setValue(e){if((0,i.OR)(this._$Ct))this._$Ct._$AI(e,this);else{let t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}},76479:function(e,t,r){"use strict";r.d(t,{OR:function(){return s},pt:function(){return n}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let{I:i}=r(56528)._$LH,n=e=>null===e||"object"!=typeof e&&"function"!=typeof e,s=e=>void 0===e.strings},30220:function(e,t,r){"use strict";r.d(t,{XM:function(){return n},Xe:function(){return s},pX:function(){return i}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},n=e=>(...t)=>({_$litDirective$:e,values:t});class s{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}},56528:function(e,t,r){"use strict";r.d(t,{Jb:function(){return x},Ld:function(){return A},YP:function(){return I},_$LH:function(){return q},dy:function(){return S},sY:function(){return F}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i=globalThis,n=i.trustedTypes,s=n?n.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+a,c=`<${l}>`,u=document,h=()=>u.createComment(""),d=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,f=e=>p(e)||"function"==typeof e?.[Symbol.iterator],g="[ 	\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,y=/-->/g,v=/>/g,b=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),w=/'/g,E=/"/g,_=/^(?:script|style|textarea|title)$/i,C=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),S=C(1),I=C(2),x=(C(3),Symbol.for("lit-noChange")),A=Symbol.for("lit-nothing"),k=new WeakMap,O=u.createTreeWalker(u,129);function P(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s?s.createHTML(t):t}let R=(e,t)=>{let r=e.length-1,i=[],n,s=2===t?"<svg>":3===t?"<math>":"",l=m;for(let t=0;t<r;t++){let r=e[t],u,h,d=-1,p=0;for(;p<r.length&&(l.lastIndex=p,null!==(h=l.exec(r)));)p=l.lastIndex,l===m?"!--"===h[1]?l=y:void 0!==h[1]?l=v:void 0!==h[2]?(_.test(h[2])&&(n=RegExp("</"+h[2],"g")),l=b):void 0!==h[3]&&(l=b):l===b?">"===h[0]?(l=n??m,d=-1):void 0===h[1]?d=-2:(d=l.lastIndex-h[2].length,u=h[1],l=void 0===h[3]?b:'"'===h[3]?E:w):l===E||l===w?l=b:l===y||l===v?l=m:(l=b,n=void 0);let f=l===b&&e[t+1].startsWith("/>")?" ":"";s+=l===m?r+c:d>=0?(i.push(u),r.slice(0,d)+o+r.slice(d)+a+f):r+a+(-2===d?t:f)}return[P(e,s+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]};class N{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let s=0,c=0,u=e.length-1,d=this.parts,[p,f]=R(e,t);if(this.el=N.createElement(p,r),O.currentNode=this.el.content,2===t||3===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=O.nextNode())&&d.length<u;){if(1===i.nodeType){if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(o)){let t=f[c++],r=i.getAttribute(e).split(a),n=/([.?@])?(.*)/.exec(t);d.push({type:1,index:s,name:n[2],strings:r,ctor:"."===n[1]?B:"?"===n[1]?j:"@"===n[1]?$:D}),i.removeAttribute(e)}else e.startsWith(a)&&(d.push({type:6,index:s}),i.removeAttribute(e));if(_.test(i.tagName)){let e=i.textContent.split(a),t=e.length-1;if(t>0){i.textContent=n?n.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],h()),O.nextNode(),d.push({type:2,index:++s});i.append(e[t],h())}}}else if(8===i.nodeType){if(i.data===l)d.push({type:2,index:s});else{let e=-1;for(;-1!==(e=i.data.indexOf(a,e+1));)d.push({type:7,index:s}),e+=a.length-1}}s++}}static createElement(e,t){let r=u.createElement("template");return r.innerHTML=e,r}}function T(e,t,r=e,i){if(t===x)return t;let n=void 0!==i?r._$Co?.[i]:r._$Cl,s=d(t)?void 0:t._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),void 0===s?n=void 0:(n=new s(e))._$AT(e,r,i),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(t=T(e,n._$AS(e,t.values),n,i)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??u).importNode(t,!0);O.currentNode=i;let n=O.nextNode(),s=0,o=0,a=r[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new L(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new U(n,this,e)),this._$AV.push(t),a=r[++o]}s!==a?.index&&(n=O.nextNode(),s++)}return O.currentNode=u,i}p(e){let t=0;for(let r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class L{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){d(e=T(this,e,t))?e===A||null==e||""===e?(this._$AH!==A&&this._$AR(),this._$AH=A):e!==this._$AH&&e!==x&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):f(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==A&&d(this._$AH)?this._$AA.nextSibling.data=e:this.T(u.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=N.createElement(P(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{let e=new M(i,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=k.get(e.strings);return void 0===t&&k.set(e.strings,t=new N(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,r,i=0;for(let n of e)i===t.length?t.push(r=new L(this.O(h()),this.O(h()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class D{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,n){this.type=1,this._$AH=A,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=A}_$AI(e,t=this,r,i){let n=this.strings,s=!1;if(void 0===n)(s=!d(e=T(this,e,t,0))||e!==this._$AH&&e!==x)&&(this._$AH=e);else{let i,o;let a=e;for(e=n[0],i=0;i<n.length-1;i++)(o=T(this,a[r+i],t,i))===x&&(o=this._$AH[i]),s||=!d(o)||o!==this._$AH[i],o===A?e=A:e!==A&&(e+=(o??"")+n[i+1]),this._$AH[i]=o}s&&!i&&this.j(e)}j(e){e===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class B extends D{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===A?void 0:e}}class j extends D{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==A)}}class $ extends D{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){if((e=T(this,e,t,0)??A)===x)return;let r=this._$AH,i=e===A&&r!==A||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==A&&(r===A||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class U{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){T(this,e)}}let q={M:o,P:a,A:l,C:1,L:R,R:M,D:f,V:T,I:L,H:D,N:j,U:$,B:B,F:U},H=i.litHtmlPolyfillSupport;H?.(N,L),(i.litHtmlVersions??=[]).push("3.3.1");let F=(e,t,r)=>{let i=r?.renderBefore??t,n=i._$litPart$;if(void 0===n){let e=r?.renderBefore??null;i._$litPart$=n=new L(t.insertBefore(h(),e),e,void 0,r??{})}return n._$AI(e),n}},29324:function(e,t,r){"use strict";r.d(t,{Cb:function(){return o},SB:function(){return a}});var i=r(90813);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let n={attribute:!0,type:String,converter:i.Ts,reflect:!1,hasChanged:i.Qu},s=(e=n,t,r)=>{let{kind:i,metadata:s}=r,o=globalThis.litPropertyMetadata.get(s);if(void 0===o&&globalThis.litPropertyMetadata.set(s,o=new Map),"setter"===i&&((e=Object.create(e)).wrapped=!0),o.set(r.name,e),"accessor"===i){let{name:i}=r;return{set(r){let n=t.get.call(this);t.set.call(this,r),this.requestUpdate(i,n,e)},init(t){return void 0!==t&&this.C(i,void 0,e,t),t}}}if("setter"===i){let{name:i}=r;return function(r){let n=this[i];t.call(this,r),this.requestUpdate(i,n,e)}}throw Error("Unsupported decorator location: "+i)};function o(e){return(t,r)=>"object"==typeof r?s(e,t,r):((e,t,r)=>{let i=t.hasOwnProperty(r);return t.constructor.createProperty(r,e),i?Object.getOwnPropertyDescriptor(t,r):void 0})(e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function a(e){return o({...e,state:!0,attribute:!1})}},99901:function(e,t,r){"use strict";r.d(t,{$:function(){return s}});var i=r(56528),n=r(30220);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let s=(0,n.XM)(class extends n.Xe{constructor(e){if(super(e),e.type!==n.pX.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(void 0===this.st){for(let r in this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(e=>""!==e))),t)t[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(t)}let r=e.element.classList;for(let e of this.st)e in t||(r.remove(e),this.st.delete(e));for(let e in t){let i=!!t[e];i===this.st.has(e)||this.nt?.has(e)||(i?(r.add(e),this.st.add(e)):(r.remove(e),this.st.delete(e)))}return i.Jb}})},14670:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});var i=r(56528);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let n=e=>e??i.Ld},34954:function(e,t,r){"use strict";r.d(t,{oi:function(){return o},iv:function(){return i.iv},dy:function(){return n.dy},YP:function(){return n.YP},$m:function(){return i.$m}});var i=r(90813),n=r(56528);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let s=globalThis;class o extends i.fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,n.sY)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return n.Jb}}o._$litElement$=!0,o.finalized=!0,s.litElementHydrateSupport?.({LitElement:o});let a=s.litElementPolyfillSupport;a?.({LitElement:o}),(s.litElementVersions??=[]).push("4.2.1")},55601:function(e,t,r){"use strict";r.d(t,{zo:function(){return v},mL:function(){return eG},BB:function(){return eZ}});var i={};r.r(i),r.d(i,{identity:function(){return M}});var n={};r.r(n),r.d(n,{base2:function(){return L}});var s={};r.r(s),r.d(s,{base8:function(){return D}});var o={};r.r(o),r.d(o,{base10:function(){return B}});var a={};r.r(a),r.d(a,{base16:function(){return j},base16upper:function(){return $}});var l={};r.r(l),r.d(l,{base32:function(){return U},base32hex:function(){return z},base32hexpad:function(){return K},base32hexpadupper:function(){return V},base32hexupper:function(){return W},base32pad:function(){return H},base32padupper:function(){return F},base32upper:function(){return q},base32z:function(){return G}});var c={};r.r(c),r.d(c,{base36:function(){return Z},base36upper:function(){return J}});var u={};r.r(u),r.d(u,{base58btc:function(){return Y},base58flickr:function(){return X}});var h={};r.r(h),r.d(h,{base64:function(){return Q},base64pad:function(){return ee},base64url:function(){return et},base64urlpad:function(){return er}});var d={};r.r(d),r.d(d,{base256emoji:function(){return eo}});var p={};r.r(p),r.d(p,{sha256:function(){return ev},sha512:function(){return eb}});var f={};r.r(f),r.d(f,{identity:function(){return ew}});var g={};r.r(g),r.d(g,{code:function(){return e_},decode:function(){return eS},encode:function(){return eC},name:function(){return eE}});var m={};function y(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function v(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=y(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}r.r(m),r.d(m,{code:function(){return ek},decode:function(){return eP},encode:function(){return eO},name:function(){return eA}});var b=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===l;)i++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<n)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=h,t++}if(" "!==e[t]){for(var p=s-n;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(i+(s-p)),g=i;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*u+1>>>0,c=new Uint8Array(o);n!==s;){for(var h=t[n],d=0,p=o-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,n++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var g=l.repeat(r);f<o;++f)g+=e.charAt(c[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let w=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},E=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},_=e=>new TextEncoder().encode(e),C=e=>new TextDecoder().decode(e);class S{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class I{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return A(this,e)}}class x{constructor(e){this.decoders=e}or(e){return A(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let A=(e,t)=>new x({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class k{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new S(e,t,r),this.decoder=new I(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let O=({name:e,prefix:t,encode:r,decode:i})=>new k(e,t,r,i),P=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=b(r,t);return O({prefix:e,name:t,encode:i,decode:e=>E(n(e))})},R=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,l=0,c=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);l=l<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw SyntaxError("Unexpected end of data");return o},N=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},T=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>O({prefix:t,name:e,encode:e=>N(e,i,r),decode:t=>R(t,i,r,e)}),M=O({prefix:"\x00",name:"identity",encode:e=>C(e),decode:e=>_(e)}),L=T({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),D=T({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),B=P({prefix:"9",name:"base10",alphabet:"0123456789"}),j=T({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$=T({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),U=T({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q=T({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),H=T({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F=T({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),z=T({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),W=T({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),K=T({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),V=T({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G=T({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Z=P({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),J=P({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Y=P({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),X=P({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Q=T({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ee=T({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),et=T({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),er=T({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ei=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),en=ei.reduce((e,t,r)=>(e[r]=t,e),[]),es=ei.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),eo=O({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=en[t],"")},decode:function(e){let t=[];for(let r of e){let e=es[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ea={encode:function e(t,r,i){r=r||[];for(var n=i=i||0;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},decode:function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let el=(e,t=0)=>[ea.decode(e,t),ea.decode.bytes],ec=(e,t,r=0)=>(ea.encode(e,t,r),t),eu=e=>ea.encodingLength(e),eh=(e,t)=>{let r=t.byteLength,i=eu(e),n=i+eu(r),s=new Uint8Array(n+r);return ec(e,s,0),ec(r,s,i),s.set(t,n),new ef(e,r,t,s)},ed=e=>{let t=E(e),[r,i]=el(t),[n,s]=el(t.subarray(i)),o=t.subarray(i+s);if(o.byteLength!==n)throw Error("Incorrect length");return new ef(r,n,o,t)},ep=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&w(e.bytes,t.bytes);class ef{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let eg=({name:e,code:t,encode:r})=>new em(e,t,r);class em{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eh(this.code,t):t.then(e=>eh(this.code,e))}throw Error("Unknown type, must be binary type")}}let ey=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ev=eg({name:"sha2-256",code:18,encode:ey("SHA-256")}),eb=eg({name:"sha2-512",code:19,encode:ey("SHA-512")}),ew={code:0,name:"identity",encode:E,digest:e=>eh(0,E(e))},eE="raw",e_=85,eC=e=>E(e),eS=e=>E(e),eI=new TextEncoder,ex=new TextDecoder,eA="json",ek=512,eO=e=>eI.encode(JSON.stringify(e)),eP=e=>JSON.parse(ex.decode(e));class eR{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:eU,byteLength:eU,code:e$,version:e$,multihash:e$,bytes:e$,_baseCache:eU,asCID:eU})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==eL)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==eD)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return eR.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=eh(e,t);return eR.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ep(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?eT(t,i,e||Y.encoder):eM(t,i,e||U.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return eq(/^0\.0/,eH),!!(e&&(e[ej]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof eR)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new eR(t,r,i,n||eB(t,r,i.bytes))}if(null==e||!0!==e[ej])return null;{let{version:t,multihash:r,code:i}=e,n=ed(r);return eR.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===eL)return new eR(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${eL}) block encoding`);case 1:{let i=eB(e,t,r.bytes);return new eR(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return eR.create(0,eL,e)}static createV1(e,t){return eR.create(1,e,t)}static decode(e){let[t,r]=eR.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=eR.inspectBytes(e),r=t.size-t.multihashSize,i=E(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new ef(t.multihashCode,t.digestSize,n,i);return[0===t.version?eR.createV0(s):eR.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=el(e.subarray(t));return t+=i,r},i=r(),n=eL;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,o=r(),a=r(),l=t+a;return{version:i,codec:n,multihashCode:o,digestSize:a,multihashSize:l-s,size:l}}static parse(e,t){let[r,i]=eN(e,t),n=eR.decode(i);return n._baseCache.set(r,e),n}}let eN=(e,t)=>{switch(e[0]){case"Q":return[Y.prefix,(t||Y).decode(`${Y.prefix}${e}`)];case Y.prefix:return[Y.prefix,(t||Y).decode(e)];case U.prefix:return[U.prefix,(t||U).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},eT=(e,t,r)=>{let{prefix:i}=r;if(i!==Y.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},eM=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},eL=112,eD=18,eB=(e,t,r)=>{let i=eu(e),n=i+eu(t),s=new Uint8Array(n+r.byteLength);return ec(e,s,0),ec(t,s,i),s.set(r,n),s},ej=Symbol.for("@ipld/js-cid/CID"),e$={writable:!1,configurable:!1,enumerable:!0},eU={writable:!1,enumerable:!1,configurable:!1},eq=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},eH=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,eF={...i,...n,...s,...o,...a,...l,...c,...u,...h,...d};function ez(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...p,...f});let eW=ez("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),eK=ez("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=y((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),eV={utf8:eW,"utf-8":eW,hex:eF.base16,latin1:eK,ascii:eK,binary:eK,...eF};function eG(e,t="utf8"){let r=eV[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function eZ(e,t="utf8"){let r=eV[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}},53722:function(e,t,r){"use strict";r.d(t,{sj:function(){return p},iH:function(){return m},CO:function(){return g},Ld:function(){return f}}),Symbol();let i=Symbol(),n=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):n(e)===Object.prototype||n(e)===Array.prototype),a=e=>o(e)&&e[i]||null,l=(e,t=!0)=>{s.set(e,t)},c=e=>"object"==typeof e&&null!==e,u=new WeakMap,h=new WeakSet,[d]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>c(e)&&!h.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},n=new WeakMap,s=(e,t,r=i)=>{let o=n.get(e);if((null==o?void 0:o[0])===t)return o[1];let a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return l(a,!0),n.set(e,[t,a]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(a,t))return;let i=Reflect.get(e,t),{enumerable:n}=Reflect.getOwnPropertyDescriptor(e,t),o={value:i,enumerable:n,configurable:!0};if(h.has(i))l(i,!1);else if(i instanceof Promise)delete o.value,o.get=()=>r(i);else if(u.has(i)){let[e,t]=u.get(i);o.value=s(e,t(),r)}Object.defineProperty(a,t,o)}),Object.preventExtensions(a)},o=new WeakMap,d=[1,1],p=i=>{if(!c(i))throw Error("object required");let n=o.get(i);if(n)return n;let l=d[0],f=new Set,g=(e,t=++d[0])=>{l!==t&&(l=t,f.forEach(r=>r(e,t)))},m=d[1],y=(e=++d[1])=>(m===e||f.size||(m=e,b.forEach(([t])=>{let r=t[1](e);r>l&&(l=r)})),l),v=e=>(t,r)=>{let i=[...t];i[1]=[e,...i[1]],g(i,r)},b=new Map,w=(e,t)=>{if(b.has(e))throw Error("prop listener already exists");if(f.size){let r=t[3](v(e));b.set(e,[t,r])}else b.set(e,[t])},E=e=>{var t;let r=b.get(e);r&&(b.delete(e),null==(t=r[1])||t.call(r))},_=e=>{f.add(e),1===f.size&&b.forEach(([e,t],r)=>{if(t)throw Error("remove already exists");let i=e[3](v(r));b.set(r,[e,i])});let t=()=>{f.delete(e),0===f.size&&b.forEach(([e,t],r)=>{t&&(t(),b.set(r,[e]))})};return t},C=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),S={deleteProperty(e,t){let r=Reflect.get(e,t);E(t);let i=Reflect.deleteProperty(e,t);return i&&g(["delete",[t],r]),i},set(t,i,n,s){let l=Reflect.has(t,i),d=Reflect.get(t,i,s);if(l&&(e(d,n)||o.has(n)&&e(d,o.get(n))))return!0;E(i),c(n)&&(n=a(n)||n);let f=n;if(n instanceof Promise)n.then(e=>{n.status="fulfilled",n.value=e,g(["resolve",[i],e])}).catch(e=>{n.status="rejected",n.reason=e,g(["reject",[i],e])});else{!u.has(n)&&r(n)&&(f=p(n));let e=!h.has(f)&&u.get(f);e&&w(i,e)}return Reflect.set(t,i,f,s),g(["set",[i],n,d]),!0}},I=t(C,S);o.set(i,I);let x=[C,y,s,_];return u.set(I,x),Reflect.ownKeys(i).forEach(e=>{let t=Object.getOwnPropertyDescriptor(i,e);"value"in t&&(I[e]=i[e],delete t.value,delete t.writable),Object.defineProperty(C,e,t)}),I})=>[p,u,h,e,t,r,i,n,s,o,d])();function p(e={}){return d(e)}function f(e,t,r){let i;let n=u.get(e);n||console.warn("Please use proxy object");let s=[],o=n[3],a=!1,l=o(e=>{if(s.push(e),r){t(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&t(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function g(e,t){let r=u.get(e);r||console.warn("Please use proxy object");let[i,n,s]=r;return s(i,n(),t)}function m(e){return h.add(e),e}},10913:function(e,t,r){"use strict";r.d(t,{VW:function(){return n},Yr:function(){return s}});var i=r(53722);function n(e,t,r,n){let s=e[t];return(0,i.Ld)(e,()=>{let i=e[t];Object.is(s,i)||r(s=i)},n)}function s(e){let t=(0,i.sj)({data:Array.from(e||[]),has(e){return this.data.some(t=>t[0]===e)},set(e,t){let r=this.data.find(t=>t[0]===e);return r?r[1]=t:this.data.push([e,t]),this},get(e){var t;return null==(t=this.data.find(t=>t[0]===e))?void 0:t[1]},delete(e){let t=this.data.findIndex(t=>t[0]===e);return -1!==t&&(this.data.splice(t,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(e){this.data.forEach(t=>{e(t[1],t[0],this)})},keys(){return this.data.map(e=>e[0]).values()},values(){return this.data.map(e=>e[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(t,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(t),t}Symbol()}}]);